2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,666 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,666 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,666 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 20:57:48,673 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,674 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,674 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 20:57:48,674 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 20:57:48,675 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 20:57:48,678 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 20:57:48,679 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 30.7ms
2025-12-10 20:57:48,679 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 20:57:48,679 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 20:57:48,686 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 20:57:48,696 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 10A14029-BE44-4128-BAD5-5D650FF9D500, Rotación: True
2025-12-10 20:57:48,706 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 20:57:48,706 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 20:57:48,706 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 10A14029-BE44-4128-BAD5-5D650FF9D500
2025-12-10 20:57:48,707 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 20:57:48,717 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 20:57:48,717 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 72.4ms
2025-12-10 20:57:48,723 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-10 20:57:48,724 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,724 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,729 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,729 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,729 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/me/
2025-12-10 20:57:48,737 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: admin_tech
2025-12-10 20:57:48,737 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 4, Super Admin: False, Type: tenant_admin
2025-12-10 20:57:48,738 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 para cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A
2025-12-10 20:57:48,738 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:48,746 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 con 1 roles activos
2025-12-10 20:57:48,746 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: admin_tech, Type: tenant_admin, Level: 4, Super Admin: False, Roles: 1
2025-12-10 20:57:48,747 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 23.7ms
2025-12-10 20:57:48,766 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:57:48,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,775 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 20:57:48,776 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,776 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 20:57:48,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 20:57:48,787 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,787 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,790 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,790 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,794 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,794 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,794 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:57:48,797 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,798 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,798 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 20:57:48,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,803 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,810 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,810 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,810 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 20:57:48,817 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,817 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,817 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 20:57:48,842 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,849 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:48,858 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 20:57:48,858 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,858 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 20:57:48,879 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 20:57:48,899 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:48,899 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 124.9ms
2025-12-10 20:57:48,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 134.9ms
2025-12-10 20:57:48,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 20:57:48,908 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:57:48,908 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,908 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,911 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,911 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,911 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:48,911 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:48,915 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 20:57:48,915 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 20:57:48,915 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:48,916 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,918 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,918 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,920 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:48,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,930 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,930 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,930 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,936 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 20:57:48,936 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:48,938 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:48,945 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,946 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:48,952 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,953 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:48,953 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:48,956 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:48,957 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 20:57:48,958 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 172.2ms
2025-12-10 20:57:48,960 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 20:57:48,960 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 20:57:48,960 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 20:57:48,963 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 20:57:48,963 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 178.0ms
2025-12-10 20:57:48,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,972 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 20:57:48,974 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,974 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,996 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,996 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,996 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,007 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,008 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,008 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 20:57:49,011 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,011 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,011 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 20:57:49,029 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,041 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:57:49,046 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:57:49,055 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:49,061 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 156.4ms
2025-12-10 20:57:49,066 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 20:57:49,067 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:57:49,068 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 161.4ms
2025-12-10 20:57:49,068 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:57:49,070 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 155.9ms
2025-12-10 20:57:49,073 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 159.1ms
2025-12-10 20:57:49,074 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,078 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,078 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,078 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,078 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,083 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,083 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,083 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,099 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,099 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,099 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,099 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,099 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,099 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,109 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:49,110 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:49,113 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,113 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,113 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,117 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,117 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,117 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,119 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,119 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,120 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,122 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,122 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,122 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,124 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 20:57:49,124 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:49,125 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 20:57:49,125 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 20:57:49,125 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:49,128 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,128 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 20:57:49,134 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 170.6ms
2025-12-10 20:57:49,134 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:49,156 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 20:57:49,159 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 20:57:49,159 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 20:57:49,159 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 186.9ms
2025-12-10 20:57:49,177 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:57:49,189 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:57:49,199 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:57:49,200 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 122.1ms
2025-12-10 20:57:49,200 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:57:49,202 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 128.2ms
2025-12-10 20:57:49,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 124.7ms
2025-12-10 20:57:49,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 123.6ms
2025-12-10 20:57:49,209 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,211 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,215 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,216 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,216 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,216 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,216 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,218 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,219 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,219 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,219 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,219 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,246 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,246 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,246 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,252 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,253 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,253 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,254 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,254 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,254 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,254 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,256 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,256 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,258 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,258 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,258 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,259 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,259 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,260 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,337 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:57:49,346 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:57:49,349 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:57:49,349 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:57:49,355 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 146.0ms
2025-12-10 20:57:49,355 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 143.4ms
2025-12-10 20:57:49,356 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,359 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,359 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,359 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,359 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,359 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,359 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,361 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,362 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,364 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,364 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,373 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,373 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,378 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,378 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,383 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,383 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,394 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,394 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,394 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,396 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,396 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:57:49,396 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,400 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,400 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:57:49,400 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,401 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,401 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:57:49,401 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,402 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,403 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:57:49,403 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,406 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,406 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,406 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,410 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,411 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,411 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,416 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:57:49,417 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 200.8ms
2025-12-10 20:57:49,419 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:57:49,420 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:57:49,422 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,423 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,423 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,424 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,425 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 209.7ms
2025-12-10 20:57:49,426 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 210.6ms
2025-12-10 20:57:49,428 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 214.3ms
2025-12-10 20:57:49,434 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,435 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,435 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,438 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,442 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,442 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,442 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,442 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,442 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,442 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,462 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,462 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,462 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,467 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,467 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,467 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,476 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,476 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,476 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,479 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,479 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,479 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,486 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:57:49,496 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:57:49,529 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,529 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,541 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,542 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,546 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,546 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:57:49,546 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,559 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,559 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:57:49,559 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,574 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:57:49,574 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:57:49,577 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,578 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 219.2ms
2025-12-10 20:57:49,579 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:57:49,582 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,583 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,583 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,586 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,587 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:57:49,588 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 229.5ms
2025-12-10 20:57:49,592 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,594 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,594 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,596 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,596 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,599 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,599 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,606 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,606 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,616 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,616 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,626 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,626 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:57:49,626 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,627 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,627 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:57:49,628 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,630 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,630 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,630 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,631 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,631 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:57:49,632 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,633 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,633 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:57:49,633 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,636 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,636 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,636 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:57:49,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:57:49,646 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 205.2ms
2025-12-10 20:57:49,646 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,650 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,651 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 229.4ms
2025-12-10 20:57:49,651 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,652 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 218.3ms
2025-12-10 20:57:49,653 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:57:49,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,661 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 222.7ms
2025-12-10 20:57:49,661 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,666 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,740 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:49,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:49,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,753 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,753 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:49,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:49,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:49,766 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,766 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,766 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,766 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,767 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,767 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,775 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,775 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,775 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,778 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:57:49,779 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:49,779 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:49,779 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:57:49,791 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:57:49,799 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,799 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,818 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:57:49,818 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:57:49,826 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,827 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:57:49,827 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:57:49,841 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:57:49,842 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,844 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:57:49,845 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:57:49,849 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:57:49,853 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 270.7ms
2025-12-10 20:57:49,862 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,863 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 271.0ms
2025-12-10 20:57:49,867 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:57:49,868 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:57:49,870 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,870 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,877 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,878 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,887 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,888 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:57:49,888 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,890 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,890 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,894 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:57:49,895 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:57:49,899 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,899 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:57:49,899 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,905 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,905 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:57:49,906 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,908 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:57:49,908 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:57:49,908 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:57:49,909 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,910 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,911 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 259.4ms
2025-12-10 20:57:49,911 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 249.7ms
2025-12-10 20:57:49,916 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,917 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 251.6ms
2025-12-10 20:57:49,917 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:57:49,918 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 178.7ms
2025-12-10 20:58:03,808 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-10 20:58:03,808 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-12-10 20:58:03,809 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 20:58:03,810 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:03,810 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:03,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:03,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:03,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:03,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:03,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:03,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:03,819 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:03,819 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:03,819 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 20:58:03,826 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 20:58:03,826 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 3DC35436-5316-436A-B5BC-E348DC7DF3A2 (admin_tech)
2025-12-10 20:58:03,833 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 20:58:03,833 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 23.1ms
2025-12-10 20:58:03,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 20:58:03,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:03,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:03,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:03,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:03,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:03,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:03,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:03,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:03,879 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:03,879 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:03,879 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 20:58:03,879 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 20:58:03,881 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 20:58:03,884 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 20:58:03,884 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 18.0ms
2025-12-10 20:58:13,337 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-10 20:58:13,337 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-10 20:58:13,338 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 20:58:13,339 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:13,339 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:13,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,348 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:13,349 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:13,349 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 20:58:13,356 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 20:58:13,356 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='user_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:13,356 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:13,586 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1C6DA055-9333-49A1-A726-1A358368CC55: level=1, super_admin=False, type=user
2025-12-10 20:58:13,586 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='user_tech', usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=1, user_type=user
2025-12-10 20:58:13,586 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:58:13,595 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1C6DA055-9333-49A1-A726-1A358368CC55: level=1, super_admin=False, type=user
2025-12-10 20:58:13,599 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55, Tipo: web, Token ID: 49695DD6-1AD7-4C65-BDB5-102333D4B17F, Rotación: False
2025-12-10 20:58:13,599 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 49695DD6-1AD7-4C65-BDB5-102333D4B17F
2025-12-10 20:58:13,600 - app.modules.auth.presentation.endpoints - INFO - Usuario user_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:13,606 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, exito=True
2025-12-10 20:58:13,606 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 268.4ms
2025-12-10 20:58:13,628 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 20:58:13,628 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:13,628 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:13,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,640 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:13,640 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:13,640 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 20:58:13,666 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:58:13,678 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 20:58:13,680 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 403 52.3ms
2025-12-10 20:58:13,684 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Usuario/permisos/
2025-12-10 20:58:13,685 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Usuario/permisos/ 200 0.7ms
2025-12-10 20:58:13,686 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Supervisor/permisos/
2025-12-10 20:58:13,686 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Supervisor/permisos/ 200 0.6ms
2025-12-10 20:58:13,687 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Usuario/permisos/
2025-12-10 20:58:13,688 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:13,688 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:13,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,690 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Supervisor/permisos/
2025-12-10 20:58:13,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:13,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:13,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:13,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:13,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:13,704 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:13,704 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:13,704 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Usuario/permisos/
2025-12-10 20:58:13,706 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:13,706 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:13,706 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Supervisor/permisos/
2025-12-10 20:58:13,733 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:58:13,734 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:58:13,748 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 20:58:13,749 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Usuario/permisos/ 403 62.0ms
2025-12-10 20:58:13,751 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 20:58:13,752 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Supervisor/permisos/ 403 60.7ms
2025-12-10 20:58:14,466 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:58:14,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,473 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,477 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,477 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,479 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:58:14,486 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,502 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 37.3ms
2025-12-10 20:58:14,504 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:58:14,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,506 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,508 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,510 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,510 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,510 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,511 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,511 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,511 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,526 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,526 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,526 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:58:14,528 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,528 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,528 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,531 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,531 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,532 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,571 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:58:14,571 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,582 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:58:14,588 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:58:14,591 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:58:14,591 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 83.6ms
2025-12-10 20:58:14,592 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 87.3ms
2025-12-10 20:58:14,592 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 82.3ms
2025-12-10 20:58:14,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,602 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,602 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,603 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,603 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,605 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,605 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,605 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,605 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,605 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,606 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,622 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,622 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,622 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,628 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,628 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,628 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,632 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,633 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,633 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,634 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,634 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,634 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,636 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,636 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,636 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,697 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:58:14,709 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:58:14,713 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 117.4ms
2025-12-10 20:58:14,718 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,720 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:58:14,720 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,720 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,722 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,723 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,723 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,723 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,725 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,725 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,727 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:58:14,727 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 125.5ms
2025-12-10 20:58:14,728 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 120.8ms
2025-12-10 20:58:14,730 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 128.9ms
2025-12-10 20:58:14,734 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,734 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,738 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,738 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,740 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,763 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,763 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,763 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,764 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,765 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,765 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,766 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,766 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,767 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,771 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,772 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,772 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,775 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,775 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,775 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,776 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,777 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,777 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,827 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:58:14,838 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:58:14,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:58:14,847 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:14,848 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:14,853 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:58:14,855 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:58:14,861 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:14,861 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:14,867 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:14,867 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:14,876 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:14,876 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:58:14,876 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:14,880 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:14,880 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:58:14,880 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:14,882 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:14,882 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:14,888 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:14,888 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:14,894 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:14,894 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:58:14,894 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:14,895 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 159.9ms
2025-12-10 20:58:14,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,901 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,902 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,904 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:58:14,905 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 183.0ms
2025-12-10 20:58:14,907 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:14,907 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:58:14,907 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:14,908 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,909 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,909 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,912 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:14,912 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:58:14,912 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:14,915 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:14,916 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:58:14,917 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 194.9ms
2025-12-10 20:58:14,919 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 200.6ms
2025-12-10 20:58:14,921 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,926 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,927 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,934 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:14,935 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:58:14,936 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 195.9ms
2025-12-10 20:58:14,937 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 202.4ms
2025-12-10 20:58:14,940 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,941 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:14,941 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,944 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,944 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,944 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,950 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,951 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,951 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:14,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:14,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:14,959 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,960 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,960 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:14,960 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,960 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,960 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:14,972 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:14,972 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:14,972 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:15,016 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:58:15,016 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:58:15,027 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:58:15,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:15,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:15,040 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:15,040 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:15,043 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:58:15,046 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:15,046 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:15,051 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 126.9ms
2025-12-10 20:58:15,056 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:15,057 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:58:15,057 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,057 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:15,057 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:58:15,058 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,058 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,058 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,065 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:15,066 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:15,070 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:15,070 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:58:15,071 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,081 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,081 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,081 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:15,081 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:58:15,081 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,084 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 175.6ms
2025-12-10 20:58:15,086 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 185.2ms
2025-12-10 20:58:15,088 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,089 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,089 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,098 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 176.0ms
2025-12-10 20:58:15,101 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:15,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:15,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:15,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,106 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,107 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 167.2ms
2025-12-10 20:58:15,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,114 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:15,116 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:15,116 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:15,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,126 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:15,129 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:15,129 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,132 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:15,132 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:15,132 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:58:15,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,138 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:15,138 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:15,138 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:15,138 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:15,138 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:15,138 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:15,170 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:58:15,170 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:58:15,188 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:15,188 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:15,199 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:58:15,203 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:15,203 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:15,216 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:58:15,216 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:58:15,216 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:15,216 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:58:15,226 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,226 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:58:15,232 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:15,232 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:58:15,232 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,232 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:15,232 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:15,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:58:15,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:58:15,249 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:15,249 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:15,256 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:58:15,257 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 198.6ms
2025-12-10 20:58:15,260 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:15,260 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:58:15,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:58:15,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,263 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:15,263 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:58:15,263 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,266 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:58:15,267 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:58:15,267 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,267 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:15,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:15,271 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:58:15,271 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:15,272 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:58:15,272 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,273 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 214.4ms
2025-12-10 20:58:15,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:58:15,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:58:15,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:58:15,280 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:15,281 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:58:15,282 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,283 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:58:15,286 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:58:15,286 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:58:15,286 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:58:15,286 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,286 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,286 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 196.8ms
2025-12-10 20:58:15,286 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 189.4ms
2025-12-10 20:58:15,286 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 202.6ms
2025-12-10 20:58:15,294 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,294 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 181.0ms
2025-12-10 20:58:15,308 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:58:15,308 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:58:15,313 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:58:15,321 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:58:15,321 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:58:15,321 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:58:15,324 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:58:15,324 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 65.6ms
2025-12-10 21:00:32,716 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-10 21:00:32,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 21:00:32,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:00:32,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 21:00:32,748 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', Código='INNOVA002', ID=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35
2025-12-10 21:00:32,754 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC
2025-12-10 21:00:32,754 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC, path=/api/v1/menus/getmenu/
2025-12-10 21:00:32,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 401 39.2ms
2025-12-10 21:00:48,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-10 21:00:48,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:00:48,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:00:48,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:00:48,808 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:00:48,808 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:00:48,808 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/getmenu/
2025-12-10 21:00:48,831 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:00:48,831 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 3dc35436-5316-436a-b5bc-e348dc7df3a2
2025-12-10 21:00:48,835 - app.infrastructure.database.queries_async - ERROR - Error en execute_procedure_params async: (pyodbc.ProgrammingError) ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
[SQL: EXEC sp_GetMenuForUser @UsuarioID = ?]
[parameters: ('3dc35436-5316-436a-b5bc-e348dc7df3a2',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:00:48,836 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] Error en sesión async: Error ejecutando stored procedure sp_GetMenuForUser: (pyodbc.ProgrammingError) ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
[SQL: EXEC sp_GetMenuForUser @UsuarioID = ?]
[parameters: ('3dc35436-5316-436a-b5bc-e348dc7df3a2',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 645, in execute_procedure_params
    result = await session.execute(query, param_bindings)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
[SQL: EXEC sp_GetMenuForUser @UsuarioID = ?]
[parameters: ('3dc35436-5316-436a-b5bc-e348dc7df3a2',)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection_async.py", line 326, in get_db_connection
    yield session
  File "D:\base_multi_tenant_fastapi\app\core\tenant\routing.py", line 877, in get_connection_for_tenant
    yield session
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 668, in execute_procedure_params
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error ejecutando stored procedure sp_GetMenuForUser: (pyodbc.ProgrammingError) ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
[SQL: EXEC sp_GetMenuForUser @UsuarioID = ?]
[parameters: ('3dc35436-5316-436a-b5bc-e348dc7df3a2',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:00:49,019 - app.modules.menus.application.services.menu_service - ERROR - Error de BD al obtener menú para usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2: Error ejecutando stored procedure sp_GetMenuForUser: (pyodbc.ProgrammingError) ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
[SQL: EXEC sp_GetMenuForUser @UsuarioID = ?]
[parameters: ('3dc35436-5316-436a-b5bc-e348dc7df3a2',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:00:49,019 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /getmenu/ para usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2: Error de base de datos al obtener menú del usuario
2025-12-10 21:00:49,020 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 234.1ms
2025-12-10 21:05:59,688 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 21:05:59,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:05:59,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:05:59,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:05:59,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:05:59,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:05:59,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:05:59,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:05:59,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:05:59,715 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:05:59,722 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:05:59,722 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:05:59,722 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 21:05:59,739 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55
2025-12-10 21:05:59,739 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 1C6DA055-9333-49A1-A726-1A358368CC55 (user_tech)
2025-12-10 21:05:59,754 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, exito=True
2025-12-10 21:05:59,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 66.3ms
2025-12-10 21:05:59,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 21:05:59,782 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 0.5ms
2025-12-10 21:05:59,783 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 21:05:59,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:05:59,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:05:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:05:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:05:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:05:59,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:05:59,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:05:59,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:05:59,796 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:05:59,796 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:05:59,797 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 21:05:59,798 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 21:05:59,798 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 21:05:59,802 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 21:05:59,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 19.2ms
2025-12-10 21:06:06,311 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 21:06:06,311 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,312 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,315 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,321 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,321 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,321 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 21:06:06,326 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 21:06:06,326 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,326 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,549 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:06:06,549 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 21:06:06,550 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:06,559 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:06:06,565 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 420622C3-63A9-4855-A759-DFD542AEB2B8, Rotación: False
2025-12-10 21:06:06,566 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 420622C3-63A9-4855-A759-DFD542AEB2B8
2025-12-10 21:06:06,566 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,572 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:06:06,572 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 261.8ms
2025-12-10 21:06:06,589 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:06:06,590 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.0ms
2025-12-10 21:06:06,591 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:06:06,592 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/all-structured/
2025-12-10 21:06:06,594 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 2.6ms
2025-12-10 21:06:06,595 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/all-structured/ 200 3.4ms
2025-12-10 21:06:06,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:06:06,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,601 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 21:06:06,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,623 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,623 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,623 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:06:06,625 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,625 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,625 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 21:06:06,650 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,654 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:06,664 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 21:06:06,664 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,664 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 21:06:06,666 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 21:06:06,666 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 65.5ms
2025-12-10 21:06:06,669 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 73.3ms
2025-12-10 21:06:06,670 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Administrador/permisos/
2025-12-10 21:06:06,670 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:06:06,671 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Administrador/permisos/ 200 1.1ms
2025-12-10 21:06:06,671 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,672 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,674 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,675 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 21:06:06,676 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.1ms
2025-12-10 21:06:06,676 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 21:06:06,678 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,678 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,682 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,682 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,683 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,683 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,683 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,683 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,685 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,685 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,702 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,702 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,702 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:06:06,706 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,707 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,707 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,707 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,707 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,707 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 21:06:06,711 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,711 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,711 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,757 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,762 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:06:06,764 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:06,768 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:06:06,774 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 21:06:06,776 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 99.5ms
2025-12-10 21:06:06,778 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 106.3ms
2025-12-10 21:06:06,779 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:06:06,780 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:06:06,781 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 99.4ms
2025-12-10 21:06:06,782 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 100.1ms
2025-12-10 21:06:06,784 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,785 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,785 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,785 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,785 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,787 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,788 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,791 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.3ms
2025-12-10 21:06:06,792 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.3ms
2025-12-10 21:06:06,794 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,798 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,799 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,799 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,803 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,803 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,803 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,817 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,818 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,818 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,818 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,818 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,818 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,823 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,823 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,823 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,825 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,825 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,825 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,870 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:06:06,873 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:06:06,888 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:06:06,888 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:06:06,889 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 104.5ms
2025-12-10 21:06:06,890 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 102.5ms
2025-12-10 21:06:06,893 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 98.4ms
2025-12-10 21:06:06,894 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 96.0ms
2025-12-10 21:06:06,895 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,895 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,896 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,898 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,901 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,902 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,902 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.9ms
2025-12-10 21:06:06,903 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.4ms
2025-12-10 21:06:06,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,906 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 3.8ms
2025-12-10 21:06:06,906 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,906 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,906 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,908 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.7ms
2025-12-10 21:06:06,908 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.6ms
2025-12-10 21:06:06,908 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.5ms
2025-12-10 21:06:06,908 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,910 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,911 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,912 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,912 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,913 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,913 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,914 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,915 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 6.2ms
2025-12-10 21:06:06,916 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,916 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,916 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,918 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 8.0ms
2025-12-10 21:06:06,920 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,921 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,921 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,923 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,924 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:06,925 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:06,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,935 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,935 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,935 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:06,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:06,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:06,945 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,945 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,945 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,948 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,948 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,948 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:06,951 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,951 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,951 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,952 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,952 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,952 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,954 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,956 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,956 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:06,958 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:06,958 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:06,958 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,025 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:06:07,028 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:06:07,033 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:06:07,035 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 140.4ms
2025-12-10 21:06:07,038 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,042 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:06:07,044 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,045 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,051 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 149.2ms
2025-12-10 21:06:07,055 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,058 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,058 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,063 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,063 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,071 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,071 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,075 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,076 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:06:07,076 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,085 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,085 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,085 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,087 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,087 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:06:07,087 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,088 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:06:07,088 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,088 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:06:07,088 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,091 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:06:07,093 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 179.2ms
2025-12-10 21:06:07,096 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,097 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,097 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,097 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,097 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,100 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,101 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,101 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,103 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,106 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 187.0ms
2025-12-10 21:06:07,109 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,110 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:06:07,110 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,110 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,112 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:06:07,114 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 205.2ms
2025-12-10 21:06:07,116 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 192.6ms
2025-12-10 21:06:07,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,123 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,124 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,124 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,125 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,126 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,127 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,136 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,136 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,137 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,150 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,150 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,151 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,159 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,160 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,160 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,161 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,162 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,162 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,168 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:06:07,179 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:06:07,188 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,188 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,210 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,210 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,217 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,217 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:06:07,217 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,219 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:06:07,228 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,228 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:06:07,228 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,229 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:06:07,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:06:07,239 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,239 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,243 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,244 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 206.3ms
2025-12-10 21:06:07,249 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,251 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,251 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,254 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,254 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,258 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:06:07,261 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,262 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,262 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:06:07,263 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,263 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,263 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,268 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 213.1ms
2025-12-10 21:06:07,272 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,273 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,273 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,274 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,281 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,281 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:06:07,281 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,283 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,283 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,284 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,291 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 194.9ms
2025-12-10 21:06:07,291 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,291 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:06:07,292 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,295 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,299 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,299 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,300 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,300 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,300 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,303 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,303 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,303 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,306 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,306 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:06:07,307 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,308 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,310 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 200.9ms
2025-12-10 21:06:07,312 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:06:07,314 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,316 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,316 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,318 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,318 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,318 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:06:07,318 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 196.2ms
2025-12-10 21:06:07,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,323 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,323 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,326 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,334 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,335 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 210.5ms
2025-12-10 21:06:07,338 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:07,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:07,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,352 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,352 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,353 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:07,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:07,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:07,368 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,368 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,368 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,375 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,376 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,376 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,383 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:07,384 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:07,384 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:06:07,397 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:06:07,412 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:06:07,430 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,430 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,440 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:06:07,446 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:06:07,446 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:06:07,458 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,458 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:06:07,459 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,461 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:06:07,462 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,462 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,471 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:06:07,472 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:06:07,472 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,476 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:06:07,476 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,476 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,482 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,482 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:06:07,483 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,484 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:06:07,486 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:06:07,487 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 238.1ms
2025-12-10 21:06:07,492 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,493 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:06:07,493 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,494 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:06:07,496 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 224.2ms
2025-12-10 21:06:07,498 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,498 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,502 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:06:07,502 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:06:07,506 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,507 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 212.5ms
2025-12-10 21:06:07,513 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,514 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,514 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:06:07,514 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,515 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:06:07,515 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:06:07,516 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:06:07,516 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 202.0ms
2025-12-10 21:06:07,521 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,522 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:06:07,523 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 196.3ms
2025-12-10 21:06:07,524 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 184.2ms
2025-12-10 21:06:08,388 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 21:06:08,390 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 21:06:08,390 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.7ms
2025-12-10 21:06:08,390 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 21:06:08,391 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 21:06:08,392 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.2ms
2025-12-10 21:06:08,392 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.7ms
2025-12-10 21:06:08,392 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.3ms
2025-12-10 21:06:08,394 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:06:08,396 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:08,396 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:08,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,399 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:06:08,400 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:08,400 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:08,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,413 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:08,413 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:08,413 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:06:08,415 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:08,415 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:08,415 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:06:08,441 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,442 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,444 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:06:08,444 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:06:08,446 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,446 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:06:08,446 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,457 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,459 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:08,460 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:06:08,461 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 61.0ms
2025-12-10 21:06:08,463 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:06:08,463 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:08,465 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:08,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,473 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:06:08,473 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:06:08,473 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:06:08,474 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 79.3ms
2025-12-10 21:06:08,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:06:08,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,480 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:06:08,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:06:08,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,491 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:08,491 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:08,492 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:06:08,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:08,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:08,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:08,502 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:08,502 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:08,502 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:06:08,524 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,527 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,528 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:06:08,528 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,532 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:06:08,532 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:06:08,532 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,534 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:08,534 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:06:08,535 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 72.4ms
2025-12-10 21:06:08,538 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:06:08,542 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:06:08,543 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:06:08,543 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:06:08,543 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 66.8ms
2025-12-10 21:06:19,617 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:06:19,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:06:19,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:06:19,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:06:19,630 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:19,631 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:06:19,631 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:06:19,650 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:06:19,650 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:06:19,697 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 8 secciones
2025-12-10 21:06:19,697 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 21:06:19,698 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:06:19,698 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 81.8ms
2025-12-10 21:11:02,989 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 21:11:02,989 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 21:11:02,989 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 21:11:02,990 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 21:11:02,990 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 21:11:02,990 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 21:11:03,124 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B011450D0>
2025-12-10 21:11:03,125 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B04755B80>
2025-12-10 21:11:03,125 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B04792F60>
2025-12-10 21:11:03,126 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B04793AD0>
2025-12-10 21:11:03,126 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B047B1940>
2025-12-10 21:11:03,126 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B04792810>
2025-12-10 21:11:03,127 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B04792690>
2025-12-10 21:11:03,127 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B048378F0>
2025-12-10 21:11:03,127 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B047548C0>
2025-12-10 21:11:03,128 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B04836AB0>
2025-12-10 21:11:03,128 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B046FE210>
2025-12-10 21:11:03,128 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000028B047B1BE0>
2025-12-10 21:11:03,872 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 21:11:04,085 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 21:11:04,091 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 21:11:04,094 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 21:11:04,094 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 21:11:04,095 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 21:11:04,095 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 21:11:04,095 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 21:11:04,388 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 21:11:04,388 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 21:11:04,501 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 21:11:04,501 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 21:11:04,501 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 21:11:04,836 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 21:11:04,836 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 21:11:04,970 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'admin', 'assets', 'www', 'cdn', 'backend', 'static', 'api'}
2025-12-10 21:11:06,481 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:11:06,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:11:06,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:11:06,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:11:06,484 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para admin
2025-12-10 21:11:06,636 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:10,725 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-12-10 21:11:10,725 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-10 21:11:10,727 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:11:10,727 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:11:10,727 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:11:10,737 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 21:11:10,738 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 401 4257.9ms
2025-12-10 21:11:23,673 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:11:23,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:11:23,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:11:23,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:11:23,678 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:23,678 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:11:23,678 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:11:23,680 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 21:11:23,680 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 401 7.3ms
2025-12-10 21:11:45,636 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 21:11:45,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:11:45,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:11:45,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:11:45,651 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:45,651 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:11:45,651 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 21:11:45,663 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 21:11:45,663 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:45,663 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:45,665 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para tenant_3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:46,000 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:11:46,000 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 21:11:46,000 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:11:46,013 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:11:46,016 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 61227741-DC8F-4217-BEBC-2BABFFAAA119, Rotación: False
2025-12-10 21:11:46,016 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 61227741-DC8F-4217-BEBC-2BABFFAAA119
2025-12-10 21:11:46,016 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:46,032 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:11:46,033 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 397.4ms
2025-12-10 21:11:53,243 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:11:53,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:11:53,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:11:53,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:11:53,255 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:53,256 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:11:53,256 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:11:53,285 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:11:53,285 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:11:53,335 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos obtenidos: 29 menús con permisos de 29 menús disponibles
2025-12-10 21:11:53,335 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 29 menús incluidos, 0 menús excluidos de 29 menús disponibles
2025-12-10 21:11:53,336 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 8 secciones
2025-12-10 21:11:53,336 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 21:11:53,336 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:11:53,336 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 95.1ms
2025-12-10 21:18:56,204 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 21:18:56,205 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 21:18:56,205 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 21:18:56,205 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 21:18:56,205 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 21:18:56,205 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 21:18:56,342 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000002887E80F590>
2025-12-10 21:18:56,344 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000002887FF245F0>
2025-12-10 21:18:57,089 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 21:18:57,290 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 21:18:57,297 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 21:18:57,301 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 21:18:57,301 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 21:18:57,303 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 21:18:57,303 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 21:18:57,303 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 21:18:57,593 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 21:18:57,593 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 21:18:57,725 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 21:18:57,725 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 21:18:57,725 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 21:18:58,077 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 21:18:58,077 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 21:18:58,218 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'static', 'cdn', 'www', 'backend', 'api', 'assets', 'admin'}
2025-12-10 21:19:01,693 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:19:01,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:19:01,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:19:01,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:19:01,697 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para admin
2025-12-10 21:19:01,857 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:19:05,962 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-12-10 21:19:05,962 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-10 21:19:05,967 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:19:05,967 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:19:05,967 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:19:05,976 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para tenant_3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:19:06,001 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:19:06,001 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:19:06,016 - app.modules.modulos.application.services.modulo_menu_service - ERROR - Error inesperado al obtener menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55: cannot access local variable 'UsuarioRolTable' where it is not associated with a value
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\modulos\application\services\modulo_menu_service.py", line 922, in obtener_menu_usuario
    .join(UsuarioRolTable,
         ^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'UsuarioRolTable' where it is not associated with a value
2025-12-10 21:19:06,016 - app.modules.modulos.presentation.endpoints_menus - ERROR - Error al obtener menú del usuario: Error interno al procesar el menú del usuario
2025-12-10 21:19:06,026 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 500 4333.1ms
2025-12-10 21:19:18,467 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:19:18,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:19:18,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:19:18,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:19:18,473 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:19:18,473 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:19:18,473 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:19:18,491 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:19:18,492 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:19:18,511 - app.modules.modulos.application.services.modulo_menu_service - ERROR - Error inesperado al obtener menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55: cannot access local variable 'UsuarioRolTable' where it is not associated with a value
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\modulos\application\services\modulo_menu_service.py", line 922, in obtener_menu_usuario
    .join(UsuarioRolTable,
         ^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'UsuarioRolTable' where it is not associated with a value
2025-12-10 21:19:18,511 - app.modules.modulos.presentation.endpoints_menus - ERROR - Error al obtener menú del usuario: Error interno al procesar el menú del usuario
2025-12-10 21:19:18,512 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 500 44.3ms
2025-12-10 21:21:42,525 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 21:21:42,525 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 21:21:42,525 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 21:21:42,526 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 21:21:42,526 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 21:21:42,526 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 21:21:42,676 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000026E4E76DD00>
2025-12-10 21:21:42,676 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x0000026E503DA090>
2025-12-10 21:21:43,510 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 21:21:43,716 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 21:21:43,723 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 21:21:43,725 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 21:21:43,725 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 21:21:43,726 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 21:21:43,726 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 21:21:43,726 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 21:21:44,016 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 21:21:44,016 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 21:21:44,138 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 21:21:44,140 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 21:21:44,140 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 21:21:44,480 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 21:21:44,481 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 21:21:44,622 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'api', 'admin', 'backend', 'assets', 'static', 'cdn', 'www'}
2025-12-10 21:21:47,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:21:47,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:21:47,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:21:47,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:21:47,829 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para admin
2025-12-10 21:21:47,946 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:21:52,014 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-12-10 21:21:52,014 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-10 21:21:52,024 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:21:52,024 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:21:52,024 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:21:52,028 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para tenant_3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:21:52,057 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:21:52,057 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:21:52,082 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:21:52,082 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:21:52,082 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:21:52,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 29 registros
2025-12-10 21:21:52,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '2786EB2F-4A99-49EF-B43E-0F923749497D', '59753CB5-5480-4034-BAED-117F8531BE02', 'EFEDF5FE-01B8-4BA9-8B6B-19AC7FA31678', '1292CA4B-69D3-47A1-8A23-20CE8C65576D', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38', 'A7CF3C18-EB60-42DD-8E75-2A9A9E823165', '5E0294F3-B4E5-4F2D-A8B7-37A80410EA0B', '9604BBA3-384B-4708-846D-3E296BD5CDD3', 'F8B80B90-59C8-469A-BCE9-55661DB3ADF9', 'CBE3349D-6C55-4B12-8359-62983F1B2F82', 'B522CEBD-DCEF-43B5-976A-69B37BBF781D', '173E9389-57B1-4139-9D66-6B034867B7DE', 'B4708C74-3911-4904-B284-6CA32CD05774', '7CD4A20E-02FB-43ED-AAB1-793D93A5C23C', 'F9283750-EB38-4118-B134-860694265435', 'D5A1F656-8074-4CF7-B2EE-8CE3BD9F852F', '727C12DB-D937-4BB8-AA83-9837C419044F', '3CCB4C8B-EC0B-499B-9B55-A54A83D3E078', 'E658B777-D8BF-40C6-92FE-AD8B636A8EC1', '476D02B4-41EA-4758-A409-B91CB021547C', '6D9B71EB-6212-41E0-B510-B99C9B00F33A', 'F1268CB3-ECDE-4053-AC0F-C20F93E44948', '3FF83E6C-7DC4-4EB0-A949-D3757CFC0967', 'C71E4C51-9133-452E-AAE1-DD4F3C8E80E9', 'B8F04BDD-EBDB-4EA4-B10B-E459B256DC92', '18FF2874-23A1-4C77-B3E7-ECBA35492C2F', 'E485E278-231E-4E3A-81B3-FD8FE06946AC']
2025-12-10 21:21:52,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 29 registros
2025-12-10 21:21:52,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 29 menús con permisos de 29 menús disponibles
2025-12-10 21:21:52,101 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:21:52,101 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:21:52,101 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:21:52,101 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:21:52,105 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 4278.4ms
2025-12-10 21:23:09,583 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:23:09,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:23:09,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:23:09,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:23:09,591 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:09,591 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:23:09,591 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:23:09,612 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:23:09,612 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:09,625 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:09,627 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:23:09,627 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:23:09,639 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 29 registros
2025-12-10 21:23:09,639 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '2786EB2F-4A99-49EF-B43E-0F923749497D', '59753CB5-5480-4034-BAED-117F8531BE02', 'EFEDF5FE-01B8-4BA9-8B6B-19AC7FA31678', '1292CA4B-69D3-47A1-8A23-20CE8C65576D', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38', 'A7CF3C18-EB60-42DD-8E75-2A9A9E823165', '5E0294F3-B4E5-4F2D-A8B7-37A80410EA0B', '9604BBA3-384B-4708-846D-3E296BD5CDD3', 'F8B80B90-59C8-469A-BCE9-55661DB3ADF9', 'CBE3349D-6C55-4B12-8359-62983F1B2F82', 'B522CEBD-DCEF-43B5-976A-69B37BBF781D', '173E9389-57B1-4139-9D66-6B034867B7DE', 'B4708C74-3911-4904-B284-6CA32CD05774', '7CD4A20E-02FB-43ED-AAB1-793D93A5C23C', 'F9283750-EB38-4118-B134-860694265435', 'D5A1F656-8074-4CF7-B2EE-8CE3BD9F852F', '727C12DB-D937-4BB8-AA83-9837C419044F', '3CCB4C8B-EC0B-499B-9B55-A54A83D3E078', 'E658B777-D8BF-40C6-92FE-AD8B636A8EC1', '476D02B4-41EA-4758-A409-B91CB021547C', '6D9B71EB-6212-41E0-B510-B99C9B00F33A', 'F1268CB3-ECDE-4053-AC0F-C20F93E44948', '3FF83E6C-7DC4-4EB0-A949-D3757CFC0967', 'C71E4C51-9133-452E-AAE1-DD4F3C8E80E9', 'B8F04BDD-EBDB-4EA4-B10B-E459B256DC92', '18FF2874-23A1-4C77-B3E7-ECBA35492C2F', 'E485E278-231E-4E3A-81B3-FD8FE06946AC']
2025-12-10 21:23:09,640 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 29 registros
2025-12-10 21:23:09,640 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 29 menús con permisos de 29 menús disponibles
2025-12-10 21:23:09,649 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:23:09,649 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:23:09,649 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:23:09,649 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:23:09,650 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 67.4ms
2025-12-10 21:23:13,883 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:23:13,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:23:13,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:23:13,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:23:13,888 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:13,889 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:23:13,889 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:23:13,914 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:23:13,915 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:13,926 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:13,927 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:23:13,927 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:23:13,929 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 29 registros
2025-12-10 21:23:13,929 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '2786EB2F-4A99-49EF-B43E-0F923749497D', '59753CB5-5480-4034-BAED-117F8531BE02', 'EFEDF5FE-01B8-4BA9-8B6B-19AC7FA31678', '1292CA4B-69D3-47A1-8A23-20CE8C65576D', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38', 'A7CF3C18-EB60-42DD-8E75-2A9A9E823165', '5E0294F3-B4E5-4F2D-A8B7-37A80410EA0B', '9604BBA3-384B-4708-846D-3E296BD5CDD3', 'F8B80B90-59C8-469A-BCE9-55661DB3ADF9', 'CBE3349D-6C55-4B12-8359-62983F1B2F82', 'B522CEBD-DCEF-43B5-976A-69B37BBF781D', '173E9389-57B1-4139-9D66-6B034867B7DE', 'B4708C74-3911-4904-B284-6CA32CD05774', '7CD4A20E-02FB-43ED-AAB1-793D93A5C23C', 'F9283750-EB38-4118-B134-860694265435', 'D5A1F656-8074-4CF7-B2EE-8CE3BD9F852F', '727C12DB-D937-4BB8-AA83-9837C419044F', '3CCB4C8B-EC0B-499B-9B55-A54A83D3E078', 'E658B777-D8BF-40C6-92FE-AD8B636A8EC1', '476D02B4-41EA-4758-A409-B91CB021547C', '6D9B71EB-6212-41E0-B510-B99C9B00F33A', 'F1268CB3-ECDE-4053-AC0F-C20F93E44948', '3FF83E6C-7DC4-4EB0-A949-D3757CFC0967', 'C71E4C51-9133-452E-AAE1-DD4F3C8E80E9', 'B8F04BDD-EBDB-4EA4-B10B-E459B256DC92', '18FF2874-23A1-4C77-B3E7-ECBA35492C2F', 'E485E278-231E-4E3A-81B3-FD8FE06946AC']
2025-12-10 21:23:13,929 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 29 registros
2025-12-10 21:23:13,931 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 29 menús con permisos de 29 menús disponibles
2025-12-10 21:23:13,935 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:23:13,935 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:23:13,935 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:23:13,937 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:23:13,937 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 53.2ms
2025-12-10 21:23:24,640 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:23:24,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:23:24,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:23:24,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:23:24,645 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:24,646 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:23:24,646 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:23:24,664 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:23:24,664 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:24,680 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:23:24,680 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:23:24,680 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:23:24,684 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 29 registros
2025-12-10 21:23:24,684 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '2786EB2F-4A99-49EF-B43E-0F923749497D', '59753CB5-5480-4034-BAED-117F8531BE02', 'EFEDF5FE-01B8-4BA9-8B6B-19AC7FA31678', '1292CA4B-69D3-47A1-8A23-20CE8C65576D', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38', 'A7CF3C18-EB60-42DD-8E75-2A9A9E823165', '5E0294F3-B4E5-4F2D-A8B7-37A80410EA0B', '9604BBA3-384B-4708-846D-3E296BD5CDD3', 'F8B80B90-59C8-469A-BCE9-55661DB3ADF9', 'CBE3349D-6C55-4B12-8359-62983F1B2F82', 'B522CEBD-DCEF-43B5-976A-69B37BBF781D', '173E9389-57B1-4139-9D66-6B034867B7DE', 'B4708C74-3911-4904-B284-6CA32CD05774', '7CD4A20E-02FB-43ED-AAB1-793D93A5C23C', 'F9283750-EB38-4118-B134-860694265435', 'D5A1F656-8074-4CF7-B2EE-8CE3BD9F852F', '727C12DB-D937-4BB8-AA83-9837C419044F', '3CCB4C8B-EC0B-499B-9B55-A54A83D3E078', 'E658B777-D8BF-40C6-92FE-AD8B636A8EC1', '476D02B4-41EA-4758-A409-B91CB021547C', '6D9B71EB-6212-41E0-B510-B99C9B00F33A', 'F1268CB3-ECDE-4053-AC0F-C20F93E44948', '3FF83E6C-7DC4-4EB0-A949-D3757CFC0967', 'C71E4C51-9133-452E-AAE1-DD4F3C8E80E9', 'B8F04BDD-EBDB-4EA4-B10B-E459B256DC92', '18FF2874-23A1-4C77-B3E7-ECBA35492C2F', 'E485E278-231E-4E3A-81B3-FD8FE06946AC']
2025-12-10 21:23:24,684 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 29 registros
2025-12-10 21:23:24,684 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 29 menús con permisos de 29 menús disponibles
2025-12-10 21:23:24,687 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:23:24,687 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:23:24,687 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:23:24,687 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:23:24,691 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 50.2ms
2025-12-10 21:24:22,387 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 21:24:22,387 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 21:24:22,387 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.1ms
2025-12-10 21:24:22,387 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.6ms
2025-12-10 21:24:22,387 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:24:22,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:22,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:22,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,401 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:22,401 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:22,407 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:24:22,407 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 21:24:22,407 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 401 16.9ms
2025-12-10 21:24:22,409 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:24:22,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:22,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:22,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,412 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 21:24:22,413 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.5ms
2025-12-10 21:24:22,415 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 21:24:22,415 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:22,415 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:22,415 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,415 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,420 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,420 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,420 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,426 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,428 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:22,428 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:22,428 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:24:22,430 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 21:24:22,430 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 401 22.0ms
2025-12-10 21:24:22,434 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:22,434 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:22,434 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 21:24:22,439 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 21:24:22,445 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 21:24:22,449 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:24:22,463 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 33B70EE3-9EB9-4786-997E-A54FF0A44D71, Rotación: True
2025-12-10 21:24:22,477 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 21:24:22,477 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 21:24:22,477 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 33B70EE3-9EB9-4786-997E-A54FF0A44D71
2025-12-10 21:24:22,477 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 21:24:22,492 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:24:22,493 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 77.4ms
2025-12-10 21:24:22,496 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:24:22,496 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:22,496 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,503 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,503 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,503 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,507 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:22,507 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:22,507 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:24:22,527 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:22,531 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:22,531 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:22,531 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:24:22,531 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:22,537 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:24:22,537 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:22,543 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:24:22,543 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:24:22,543 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:24:22,545 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 48.3ms
2025-12-10 21:24:22,546 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:24:22,546 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:22,547 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:22,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:22,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:22,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:22,560 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:22,560 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:22,560 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:24:22,577 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:22,582 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:22,582 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:22,582 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:24:22,582 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:22,587 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:24:22,587 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:22,591 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:24:22,591 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:24:22,591 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:24:22,592 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 45.6ms
2025-12-10 21:24:24,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 21:24:24,761 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 21:24:24,762 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.4ms
2025-12-10 21:24:24,762 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.1ms
2025-12-10 21:24:24,763 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 21:24:24,763 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 21:24:24,765 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.2ms
2025-12-10 21:24:24,765 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.2ms
2025-12-10 21:24:24,765 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:24:24,765 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:24:24,768 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:24,768 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:24,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:24,771 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:24,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,785 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:24,785 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:24,785 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:24:24,785 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:24,787 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:24,787 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:24:24,812 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,814 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,817 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:24,817 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:24,817 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,820 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:24:24,820 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,823 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,826 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:24,826 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:24:24,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 61.2ms
2025-12-10 21:24:24,828 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:24:24,830 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:24,830 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:24,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,830 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:24:24,830 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:24:24,830 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:24:24,830 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 67.7ms
2025-12-10 21:24:24,835 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:24:24,835 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:24,837 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:24,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:24,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:24,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:24,847 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:24,847 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:24,847 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:24:24,850 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:24,850 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:24,851 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:24:24,874 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,876 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,876 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:24:24,876 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,876 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:24,876 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:24,876 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,883 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:24,883 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:24:24,883 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 55.2ms
2025-12-10 21:24:24,886 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:24,891 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:24:24,892 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:24:24,892 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:24:24,892 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 57.7ms
2025-12-10 21:24:29,905 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:24:29,905 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:29,905 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:29,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:29,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:29,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:29,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:29,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:29,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:29,917 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:29,917 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:29,918 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:24:29,935 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:29,938 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:29,938 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:29,938 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:24:29,939 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:29,942 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:24:29,942 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:29,947 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:24:29,947 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:24:29,947 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:24:29,948 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 43.1ms
2025-12-10 21:24:29,950 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:24:29,950 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:29,950 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:29,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:29,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:29,951 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:29,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:29,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:29,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:29,958 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:29,960 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:29,960 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:24:29,977 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:29,981 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:29,981 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:29,981 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:24:29,981 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:29,984 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:24:29,984 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:29,987 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:24:29,987 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:24:29,987 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:24:29,989 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 39.3ms
2025-12-10 21:24:44,180 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:24:44,181 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:24:44,181 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:44,181 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:44,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,183 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:44,183 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:44,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,202 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:44,202 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:44,202 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:24:44,203 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:44,203 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:44,205 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:24:44,251 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,252 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,255 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:44,255 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:44,255 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,256 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:24:44,256 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,261 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:44,261 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:24:44,261 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 80.7ms
2025-12-10 21:24:44,263 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,264 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:24:44,264 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:44,264 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:44,265 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,265 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,265 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,273 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:24:44,273 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:24:44,273 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:24:44,274 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 93.9ms
2025-12-10 21:24:44,276 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:44,276 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:24:44,283 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:24:44,283 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:24:44,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:24:44,290 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:44,292 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:24:44,292 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:24:44,300 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,309 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:24:44,310 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,316 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:24:44,316 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:24:44,318 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,318 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 54.4ms
2025-12-10 21:24:44,322 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:24:44,322 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:24:44,322 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,328 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:24:44,331 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:24:44,331 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:24:44,331 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:24:44,331 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 56.5ms
2025-12-10 21:30:05,109 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:30:05,109 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:30:05,109 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:30:05,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:30:05,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:30:05,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:30:05,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:30:05,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:30:05,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:30:05,130 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:30:05,139 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:30:05,139 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:30:05,139 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:30:05,160 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:30:05,165 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:30:05,165 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:30:05,165 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:30:05,165 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:30:05,170 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:30:05,170 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:30:05,177 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:30:05,177 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:30:05,178 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:30:05,178 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 69.3ms
2025-12-10 21:30:05,179 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:30:05,180 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:30:05,180 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:30:05,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:30:05,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:30:05,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:30:05,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:30:05,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:30:05,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:30:05,190 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:30:05,190 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:30:05,191 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:30:05,208 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:30:05,211 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:30:05,211 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:30:05,212 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:30:05,212 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:30:05,215 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:30:05,215 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:30:05,218 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:30:05,219 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:30:05,219 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:30:05,220 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 40.7ms
2025-12-10 21:31:07,005 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:31:07,005 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:31:07,005 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:31:07,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:31:07,013 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:07,013 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:31:07,013 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:31:07,013 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 21:31:07,014 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 401 8.8ms
2025-12-10 21:31:25,391 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 21:31:25,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:31:25,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:31:25,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:31:25,396 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:25,396 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:31:25,397 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 21:31:25,404 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 21:31:25,404 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:25,404 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:25,652 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:31:25,653 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 21:31:25,653 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:31:25,657 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:31:25,669 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 3420131C-E9B9-47FC-A030-533B2860D9FE, Rotación: False
2025-12-10 21:31:25,669 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 3420131C-E9B9-47FC-A030-533B2860D9FE
2025-12-10 21:31:25,669 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:25,697 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:31:25,700 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 309.5ms
2025-12-10 21:31:31,946 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:31:31,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:31:31,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:31:31,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:31:31,951 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:31,951 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:31:31,951 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:31:31,980 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:31:31,980 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:31,998 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:31:31,998 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:31:31,998 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:31:32,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 29 registros
2025-12-10 21:31:32,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '2786EB2F-4A99-49EF-B43E-0F923749497D', '59753CB5-5480-4034-BAED-117F8531BE02', 'EFEDF5FE-01B8-4BA9-8B6B-19AC7FA31678', '1292CA4B-69D3-47A1-8A23-20CE8C65576D', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38', 'A7CF3C18-EB60-42DD-8E75-2A9A9E823165', '5E0294F3-B4E5-4F2D-A8B7-37A80410EA0B', '9604BBA3-384B-4708-846D-3E296BD5CDD3', 'F8B80B90-59C8-469A-BCE9-55661DB3ADF9', 'CBE3349D-6C55-4B12-8359-62983F1B2F82', 'B522CEBD-DCEF-43B5-976A-69B37BBF781D', '173E9389-57B1-4139-9D66-6B034867B7DE', 'B4708C74-3911-4904-B284-6CA32CD05774', '7CD4A20E-02FB-43ED-AAB1-793D93A5C23C', 'F9283750-EB38-4118-B134-860694265435', 'D5A1F656-8074-4CF7-B2EE-8CE3BD9F852F', '727C12DB-D937-4BB8-AA83-9837C419044F', '3CCB4C8B-EC0B-499B-9B55-A54A83D3E078', 'E658B777-D8BF-40C6-92FE-AD8B636A8EC1', '476D02B4-41EA-4758-A409-B91CB021547C', '6D9B71EB-6212-41E0-B510-B99C9B00F33A', 'F1268CB3-ECDE-4053-AC0F-C20F93E44948', '3FF83E6C-7DC4-4EB0-A949-D3757CFC0967', 'C71E4C51-9133-452E-AAE1-DD4F3C8E80E9', 'B8F04BDD-EBDB-4EA4-B10B-E459B256DC92', '18FF2874-23A1-4C77-B3E7-ECBA35492C2F', 'E485E278-231E-4E3A-81B3-FD8FE06946AC']
2025-12-10 21:31:32,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 29 registros
2025-12-10 21:31:32,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 29 menús con permisos de 29 menús disponibles
2025-12-10 21:31:32,023 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:31:32,023 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:31:32,023 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:31:32,024 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:31:32,024 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 79.3ms
2025-12-10 21:32:42,127 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 21:32:42,127 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:32:42,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 21:32:42,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:32:42,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 2.9ms
2025-12-10 21:32:42,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 2.7ms
2025-12-10 21:32:42,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.4ms
2025-12-10 21:32:42,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.2ms
2025-12-10 21:32:42,133 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 21:32:42,134 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,134 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,135 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:32:42,135 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,137 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,155 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,155 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,155 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:32:42,157 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,157 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,157 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 21:32:42,178 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:32:42,179 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,187 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:32:42,189 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 53.3ms
2025-12-10 21:32:42,190 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:32:42,191 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,191 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,195 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 21:32:42,195 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.1ms
2025-12-10 21:32:42,197 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:32:42,199 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,199 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,203 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,203 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,207 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,207 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,207 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,214 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,215 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,215 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:32:42,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,220 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 86.7ms
2025-12-10 21:32:42,221 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,221 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,221 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,224 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 21:32:42,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,225 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,231 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,231 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,231 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,248 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,249 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,249 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 21:32:42,263 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,273 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:32:42,284 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 93.8ms
2025-12-10 21:32:42,288 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:32:42,289 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 89.6ms
2025-12-10 21:32:42,289 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:32:42,297 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,298 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,298 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,298 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,298 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,298 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,299 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,299 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-10 21:32:42,303 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,303 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,303 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,304 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,304 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,304 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,367 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:32:42,368 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:32:42,369 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 170.2ms
2025-12-10 21:32:42,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,373 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,374 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,374 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,374 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,374 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,374 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,377 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,379 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.0ms
2025-12-10 21:32:42,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,385 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:32:42,387 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,387 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,387 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,394 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,394 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,395 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,404 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:32:42,407 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,407 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,407 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,417 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,418 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,418 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,424 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 200.2ms
2025-12-10 21:32:42,449 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:32:42,468 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:32:42,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 173.7ms
2025-12-10 21:32:42,473 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:32:42,481 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 178.1ms
2025-12-10 21:32:42,483 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,487 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,488 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.9ms
2025-12-10 21:32:42,489 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:32:42,490 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,490 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,492 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,493 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 119.8ms
2025-12-10 21:32:42,495 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 112.2ms
2025-12-10 21:32:42,498 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,501 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,501 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,503 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,503 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.8ms
2025-12-10 21:32:42,506 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,507 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,507 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,514 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,514 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,516 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,516 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,516 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,519 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,519 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,519 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,524 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,525 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,525 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,534 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,534 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,535 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,565 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:32:42,583 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:32:42,586 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 103.8ms
2025-12-10 21:32:42,587 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:42,587 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:42,598 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:42,599 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:42,603 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 104.9ms
2025-12-10 21:32:42,604 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:42,604 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:32:42,604 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,609 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:42,609 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:32:42,609 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,609 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:32:42,611 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 120.8ms
2025-12-10 21:32:42,613 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,613 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,613 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,617 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,617 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.5ms
2025-12-10 21:32:42,619 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,623 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:42,624 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 117.7ms
2025-12-10 21:32:42,626 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,627 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,627 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,630 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,630 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.7ms
2025-12-10 21:32:42,633 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,635 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,635 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,637 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,637 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,637 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,640 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,640 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,641 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,650 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,650 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,650 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,653 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,654 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,654 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,662 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,662 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,662 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,694 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:32:42,701 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:32:42,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:32:42,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:42,708 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:42,715 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:42,715 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:42,724 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:32:42,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:42,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:42,732 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:42,732 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:32:42,732 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,735 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:42,735 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:32:42,735 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,740 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:42,740 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:42,749 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:32:42,749 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:42,749 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:32:42,750 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,750 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 137.6ms
2025-12-10 21:32:42,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:32:42,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 135.1ms
2025-12-10 21:32:42,755 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:42,755 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:32:42,755 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,757 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,758 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,758 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,761 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,763 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.6ms
2025-12-10 21:32:42,766 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:42,766 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 144.4ms
2025-12-10 21:32:42,773 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:42,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,775 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 141.3ms
2025-12-10 21:32:42,777 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,778 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,779 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,780 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,781 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 21:32:42,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,784 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,785 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,785 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,790 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,790 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,790 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,797 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,797 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,797 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,807 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,807 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,808 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,809 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,809 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,810 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,839 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:32:42,845 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:32:42,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:42,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:42,857 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:32:42,860 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:32:42,861 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:42,861 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:42,868 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:42,868 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:32:42,868 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,870 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:42,870 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:42,879 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:42,879 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:42,885 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:42,885 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:32:42,885 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,885 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:32:42,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 130.1ms
2025-12-10 21:32:42,889 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:42,889 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:32:42,889 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,892 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:42,892 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:32:42,893 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:42,895 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:42,895 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 129.7ms
2025-12-10 21:32:42,898 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,899 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,899 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,901 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:42,902 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-10 21:32:42,904 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 126.4ms
2025-12-10 21:32:42,905 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:42,906 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,909 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 124.7ms
2025-12-10 21:32:42,911 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,911 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,912 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,914 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,917 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.2ms
2025-12-10 21:32:42,919 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,920 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:42,920 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:42,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,929 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,929 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,929 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:42,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:42,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:42,935 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,935 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,935 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:42,938 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,938 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,938 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,945 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:42,945 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:42,945 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:42,977 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:32:42,984 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:32:42,985 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:32:42,986 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:32:42,988 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:42,988 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:42,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:42,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:43,002 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:43,002 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:32:43,003 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:43,003 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:43,003 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:43,010 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:43,010 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:43,019 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:43,019 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:32:43,019 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:43,020 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:43,020 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:32:43,021 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:43,022 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:43,022 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:32:43,022 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:43,023 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:43,024 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 125.4ms
2025-12-10 21:32:43,028 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:32:43,028 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 122.3ms
2025-12-10 21:32:43,031 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:43,031 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:43,033 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:43,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:43,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:43,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:43,035 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:43,035 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:43,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 115.8ms
2025-12-10 21:32:43,037 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 124.9ms
2025-12-10 21:32:43,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:43,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:43,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:43,048 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:43,048 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:43,048 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:32:43,065 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:32:43,069 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:43,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:32:43,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:32:43,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:43,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:43,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:43,072 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:32:43,072 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:32:43,080 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:32:43,080 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:32:43,081 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:43,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:32:43,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:32:43,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:32:43,086 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:32:43,086 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 55.7ms
2025-12-10 21:32:43,089 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:32:43,089 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:32:43,089 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:32:43,104 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:32:43,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:32:43,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:32:43,115 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:32:43,117 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:32:43,117 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:32:43,119 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:32:43,120 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 51.9ms
2025-12-10 21:33:03,683 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:33:03,683 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:33:03,684 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:33:03,684 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:33:03,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,686 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:33:03,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:33:03,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,701 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:33:03,701 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:33:03,701 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:33:03,702 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:33:03,704 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:33:03,704 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:33:03,725 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,727 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,729 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:33:03,729 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:33:03,729 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,731 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:33:03,731 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,737 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,737 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:33:03,738 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:33:03,738 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 55.4ms
2025-12-10 21:33:03,740 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:33:03,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:33:03,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:33:03,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,745 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:33:03,745 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:33:03,745 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:33:03,745 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 63.8ms
2025-12-10 21:33:03,748 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:33:03,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,749 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:33:03,749 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:33:03,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:33:03,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:33:03,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:33:03,757 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:33:03,757 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:33:03,757 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:33:03,761 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:33:03,761 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:33:03,761 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:33:03,782 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,785 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,787 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:33:03,787 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,789 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:33:03,790 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:33:03,790 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,791 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:33:03,791 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:33:03,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 51.1ms
2025-12-10 21:33:03,795 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:33:03,799 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:33:03,799 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:33:03,799 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:33:03,800 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 52.0ms
2025-12-10 21:36:41,023 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:36:41,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:36:41,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:36:41,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:36:41,029 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:36:41,037 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:36:41,037 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:36:41,037 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:36:41,053 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:36:41,053 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:36:41,070 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:36:41,070 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:36:41,071 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:36:41,083 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:36:41,083 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:36:41,083 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:36:41,083 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:36:41,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:36:41,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:36:41,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:36:41,090 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:36:41,091 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 69.2ms
2025-12-10 21:36:50,823 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:36:50,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:36:50,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:36:50,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:36:50,830 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:36:50,830 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:36:50,831 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:36:50,847 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:36:50,849 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:36:50,858 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:36:50,858 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:36:50,858 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:36:50,877 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:36:50,877 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:36:50,877 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:36:50,877 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:36:50,884 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:36:50,885 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:36:50,885 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:36:50,885 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:36:50,886 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 62.0ms
2025-12-10 21:36:56,873 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 21:36:56,873 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 21:36:56,873 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 21:36:56,873 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 21:36:56,873 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 21:36:56,873 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C11148F800>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C112BBE0F0>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C112C7A060>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C112CB0B60>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C112E74500>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C112CFCE60>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C112E88E60>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C11148EA50>
2025-12-10 21:36:56,990 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001C112CFCA70>
2025-12-10 21:36:58,740 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 21:36:58,950 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 21:36:58,955 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 21:36:58,959 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 21:36:58,959 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 21:36:58,960 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 21:36:58,960 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 21:36:58,960 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 21:36:59,237 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 21:36:59,237 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 21:36:59,365 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 21:36:59,365 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 21:36:59,365 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 21:36:59,711 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 21:36:59,711 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 21:36:59,850 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'www', 'api', 'assets', 'admin', 'backend', 'cdn', 'static'}
2025-12-10 21:37:04,245 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:37:04,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:37:04,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:37:04,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:37:04,248 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para admin
2025-12-10 21:37:04,351 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:37:08,451 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-12-10 21:37:08,451 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-10 21:37:08,457 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:37:08,457 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:37:08,457 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:37:08,466 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para tenant_3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:37:08,527 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:37:08,527 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:37:08,547 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:37:08,550 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:37:08,551 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:37:08,560 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:37:08,560 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:37:08,560 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:37:08,560 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:37:08,571 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:37:08,572 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 0 menús incluidos, 29 menús excluidos de 29 menús disponibles
2025-12-10 21:37:08,572 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usuario 1c6da055-9333-49a1-a726-1a358368cc55 no tiene permisos para ver ningún menú
2025-12-10 21:37:08,572 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:37:08,572 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 4327.4ms
2025-12-10 21:39:23,792 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 21:39:23,792 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 21:39:23,792 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 21:39:23,792 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 21:39:23,792 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 21:39:23,792 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 21:39:23,902 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x00000235B07DF5F0>
2025-12-10 21:39:23,902 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x00000235B1F5A1B0>
2025-12-10 21:39:24,750 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 21:39:24,994 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 21:39:25,000 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 21:39:25,000 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 21:39:25,000 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 21:39:25,000 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 21:39:25,000 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 21:39:25,000 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 21:39:25,347 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 21:39:25,347 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 21:39:25,512 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 21:39:25,513 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 21:39:25,513 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 21:39:25,942 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 21:39:25,946 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 21:39:26,107 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'assets', 'www', 'admin', 'backend', 'api', 'cdn', 'static'}
2025-12-10 21:40:09,455 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 21:40:09,455 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 21:40:09,455 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 21:40:09,455 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 21:40:09,455 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 21:40:09,456 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 21:40:10,438 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 21:40:10,678 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 21:40:10,684 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 21:40:10,688 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 21:40:10,688 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 21:40:10,689 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 21:40:10,689 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 21:40:10,689 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 21:40:11,013 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 21:40:11,014 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 21:40:11,155 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 21:40:11,155 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 21:40:11,155 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 21:40:11,578 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 21:40:11,579 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 21:40:11,735 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'cdn', 'admin', 'api', 'assets', 'www', 'static', 'backend'}
2025-12-10 21:41:13,521 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 21:41:13,521 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 21:41:13,522 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 21:41:13,523 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 21:41:13,523 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 21:41:13,523 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 21:41:14,659 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 21:41:14,907 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 21:41:14,913 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 21:41:14,915 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 21:41:14,915 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 21:41:14,915 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 21:41:14,917 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 21:41:14,917 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 21:41:15,210 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 21:41:15,210 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 21:41:15,360 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 21:41:15,360 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 21:41:15,360 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 21:41:15,710 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 21:41:15,711 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 21:41:15,905 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'api', 'cdn', 'static', 'www', 'admin', 'backend', 'assets'}
2025-12-10 21:41:17,504 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:41:17,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:17,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:17,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:17,507 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para admin
2025-12-10 21:41:17,595 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:21,676 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-12-10 21:41:21,676 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-10 21:41:21,680 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:41:21,680 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:21,680 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:41:21,689 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para tenant_3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:21,717 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:41:21,717 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:21,743 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:21,743 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:41:21,743 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:21,750 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:41:21,750 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:41:21,750 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:41:21,750 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:41:21,764 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:41:21,764 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú a6942632-d39b-4660-8207-0aedfb42d17d INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:41:21,764 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 59753cb5-5480-4034-baed-117f8531be02 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:41:21,765 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú edf3437b-83ef-427c-97e0-299415d50a38 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:41:21,765 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:41:21,765 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 4 menús incluidos, 25 menús excluidos de 29 menús disponibles
2025-12-10 21:41:21,765 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 2 secciones
2025-12-10 21:41:21,766 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 21:41:21,766 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:41:21,766 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 4262.5ms
2025-12-10 21:41:32,518 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 21:41:32,519 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.8ms
2025-12-10 21:41:32,519 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 21:41:32,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.8ms
2025-12-10 21:41:32,521 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:41:32,522 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:32,522 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:32,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,536 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:32,536 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:32,536 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:41:32,537 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 21:41:32,537 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 401 16.2ms
2025-12-10 21:41:32,540 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:41:32,540 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:32,540 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:32,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,543 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 21:41:32,543 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.7ms
2025-12-10 21:41:32,546 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 21:41:32,546 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:32,547 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:32,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,557 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:32,557 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:32,557 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:41:32,557 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 21:41:32,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 401 18.9ms
2025-12-10 21:41:32,562 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:32,562 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:32,562 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 21:41:32,567 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 21:41:32,573 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 21:41:32,578 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:41:32,587 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: B1F6BF6B-42A4-4F50-B5F2-EA3A71952536, Rotación: True
2025-12-10 21:41:32,595 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 21:41:32,595 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 21:41:32,595 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: B1F6BF6B-42A4-4F50-B5F2-EA3A71952536
2025-12-10 21:41:32,595 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 21:41:32,597 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:41:32,597 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 56.7ms
2025-12-10 21:41:32,611 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:41:32,612 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:32,612 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:32,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,622 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:32,622 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:32,622 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:41:32,639 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:32,644 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:41:32,644 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:41:32,644 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:41:32,644 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:32,649 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:41:32,649 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:32,654 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:41:32,655 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:41:32,655 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:41:32,655 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 44.7ms
2025-12-10 21:41:32,657 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:41:32,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:32,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:32,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:32,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:32,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:32,668 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:32,668 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:32,668 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:41:32,681 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:32,690 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:41:32,691 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:41:32,691 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:41:32,691 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:32,693 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:41:32,693 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:32,698 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:41:32,699 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:41:32,699 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:41:32,699 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 41.1ms
2025-12-10 21:41:34,665 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-10 21:41:34,665 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.4ms
2025-12-10 21:41:34,667 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 21:41:34,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:34,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:34,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:34,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:34,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:34,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:34,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:34,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:34,679 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:34,679 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:34,679 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 21:41:34,690 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 21:41:34,692 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 3DC35436-5316-436A-B5BC-E348DC7DF3A2 (admin_tech)
2025-12-10 21:41:34,699 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:41:34,700 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 34.0ms
2025-12-10 21:41:34,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 21:41:34,732 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 0.6ms
2025-12-10 21:41:34,735 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 21:41:34,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:34,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:34,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:34,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:34,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:34,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:34,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:34,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:34,752 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:34,753 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:34,753 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 21:41:34,753 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 21:41:34,753 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 21:41:34,760 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 21:41:34,761 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 27.0ms
2025-12-10 21:41:45,855 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-10 21:41:45,855 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-10 21:41:45,857 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 21:41:45,857 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:45,857 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:45,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:45,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:45,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:45,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:45,863 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:45,863 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:45,867 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:45,868 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:45,868 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 21:41:45,870 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 21:41:45,870 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='user_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:45,870 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:46,102 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1C6DA055-9333-49A1-A726-1A358368CC55: level=1, super_admin=False, type=user
2025-12-10 21:41:46,102 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='user_tech', usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=1, user_type=user
2025-12-10 21:41:46,102 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:46,110 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1C6DA055-9333-49A1-A726-1A358368CC55: level=1, super_admin=False, type=user
2025-12-10 21:41:46,120 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55, Tipo: web, Token ID: E13335CF-1CE6-4E6F-A5A5-60A976BB5F50, Rotación: False
2025-12-10 21:41:46,121 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: E13335CF-1CE6-4E6F-A5A5-60A976BB5F50
2025-12-10 21:41:46,121 - app.modules.auth.presentation.endpoints - INFO - Usuario user_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:46,127 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, exito=True
2025-12-10 21:41:46,127 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 271.0ms
2025-12-10 21:41:46,147 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/all-structured/
2025-12-10 21:41:46,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/all-structured/ 200 0.5ms
2025-12-10 21:41:46,152 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 21:41:46,153 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:46,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:46,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:46,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:46,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:46,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:46,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:46,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:46,165 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:46,165 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:46,165 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 21:41:46,179 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:46,187 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 21:41:46,187 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 403 36.0ms
2025-12-10 21:41:46,191 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Usuario/permisos/
2025-12-10 21:41:46,192 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Usuario/permisos/ 200 0.7ms
2025-12-10 21:41:46,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Supervisor/permisos/
2025-12-10 21:41:46,193 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Supervisor/permisos/ 200 0.7ms
2025-12-10 21:41:46,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Usuario/permisos/
2025-12-10 21:41:46,193 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:46,193 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:46,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:46,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:46,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:46,197 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Supervisor/permisos/
2025-12-10 21:41:46,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:46,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:46,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:46,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:46,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:46,205 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:46,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:46,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:46,208 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:46,208 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:46,208 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:46,212 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:46,213 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:46,213 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Usuario/permisos/
2025-12-10 21:41:46,215 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:46,215 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:46,215 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Supervisor/permisos/
2025-12-10 21:41:46,235 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:46,242 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 21:41:46,243 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:41:46,244 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Usuario/permisos/ 403 48.5ms
2025-12-10 21:41:46,247 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 21:41:46,247 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Supervisor/permisos/ 403 48.3ms
2025-12-10 21:41:47,101 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:41:47,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,113 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,113 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,114 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:41:47,133 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,142 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 42.0ms
2025-12-10 21:41:47,144 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:41:47,145 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,145 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,147 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,148 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,148 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,150 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,150 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,151 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,165 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,165 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,165 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:41:47,166 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,166 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,166 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,170 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,170 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,170 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,197 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:41:47,207 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,213 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:41:47,217 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:41:47,219 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 72.3ms
2025-12-10 21:41:47,219 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 75.2ms
2025-12-10 21:41:47,224 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:41:47,225 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,225 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,225 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,226 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,226 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,226 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,226 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 79.5ms
2025-12-10 21:41:47,232 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,233 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,233 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,233 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,233 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,233 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,236 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,255 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,255 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,255 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,258 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,258 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,258 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,261 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,261 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,261 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,263 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,263 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,263 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,306 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:41:47,326 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:41:47,332 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:41:47,335 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 109.5ms
2025-12-10 21:41:47,339 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 116.0ms
2025-12-10 21:41:47,343 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,344 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,344 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,347 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,347 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,349 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,351 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:41:47,351 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,351 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,352 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,352 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,355 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,355 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,358 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 126.7ms
2025-12-10 21:41:47,359 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 123.9ms
2025-12-10 21:41:47,363 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,364 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,364 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,365 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,365 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,365 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,380 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,393 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,393 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,393 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,395 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,395 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,395 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,397 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,397 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,397 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,398 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,398 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,399 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,403 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,404 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,404 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,408 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,408 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,409 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,483 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:41:47,487 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:41:47,488 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:41:47,492 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:41:47,495 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 153.0ms
2025-12-10 21:41:47,501 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,503 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,503 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,509 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:47,509 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:47,514 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:47,514 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:47,519 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:47,520 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:47,526 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:47,526 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:47,535 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 168.5ms
2025-12-10 21:41:47,537 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,537 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,537 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,542 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,543 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,543 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,543 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,543 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,543 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,546 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:47,546 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:41:47,546 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,547 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:47,547 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:41:47,547 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,548 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:47,548 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:41:47,548 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,549 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:47,549 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:41:47,549 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,554 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,554 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,555 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,565 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:47,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 216.6ms
2025-12-10 21:41:47,568 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:41:47,568 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:41:47,569 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,569 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,570 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,572 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:41:47,573 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 210.6ms
2025-12-10 21:41:47,574 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 227.2ms
2025-12-10 21:41:47,579 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,579 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 228.7ms
2025-12-10 21:41:47,579 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,579 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,585 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,585 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,590 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,590 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,594 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,595 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,595 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,624 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,624 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,624 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,627 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,627 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,627 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,629 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,629 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,629 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,631 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,632 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,632 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,647 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:41:47,658 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:41:47,672 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:47,677 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:47,683 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:47,683 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:47,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:47,708 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:41:47,708 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,709 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:47,709 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:41:47,709 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,709 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:41:47,716 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:41:47,718 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:41:47,724 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:41:47,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:47,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:47,809 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:47,809 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:47,816 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:47,817 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:47,818 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:47,818 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:47,824 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 283.8ms
2025-12-10 21:41:47,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 324.7ms
2025-12-10 21:41:47,828 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:47,828 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:47,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,838 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:47,839 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:41:47,839 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,842 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,844 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,845 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,845 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,845 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,845 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,847 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:47,847 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:41:47,847 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,847 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:47,847 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:41:47,847 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,854 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:47,854 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:41:47,855 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:47,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,865 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:47,866 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:47,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 281.6ms
2025-12-10 21:41:47,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 288.8ms
2025-12-10 21:41:47,872 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,872 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,873 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,873 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,874 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,878 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:47,878 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,878 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,878 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:41:47,878 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:41:47,878 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 297.6ms
2025-12-10 21:41:47,885 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 290.5ms
2025-12-10 21:41:47,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,888 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,889 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,892 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,892 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:41:47,893 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:41:47,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:41:47,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:41:47,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:41:47,919 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,919 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,920 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,923 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,923 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,923 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,927 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,927 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,927 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,933 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:41:47,933 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:41:47,933 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:41:47,974 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:41:47,977 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:41:47,995 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:47,995 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:48,003 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:41:48,007 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:41:48,007 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:41:48,007 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:41:48,025 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:48,025 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:41:48,025 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:48,029 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:41:48,029 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:41:48,029 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:41:48,029 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:41:48,029 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:48,033 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:48,033 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:48,040 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:48,040 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:48,047 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:41:48,047 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 208.5ms
2025-12-10 21:41:48,054 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:48,055 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:41:48,055 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:48,058 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:48,059 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:41:48,059 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:48,059 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:41:48,059 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:48,059 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:48,063 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:41:48,063 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:41:48,072 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 235.1ms
2025-12-10 21:41:48,079 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:48,079 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 207.8ms
2025-12-10 21:41:48,082 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:48,082 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:41:48,082 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:48,084 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:41:48,084 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:41:48,084 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:41:48,085 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:48,087 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 212.7ms
2025-12-10 21:41:48,092 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:48,092 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:41:48,093 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 200.6ms
2025-12-10 21:41:48,093 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 206.0ms
2025-12-10 21:47:44,123 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:47:44,123 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 0.5ms
2025-12-10 21:47:44,125 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:47:44,127 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:47:44,127 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:47:44,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:47:44,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:47:44,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:47:44,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:47:44,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:47:44,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:47:44,137 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:47:44,147 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:47:44,147 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:47:44,147 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:47:44,167 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:47:44,167 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:47:44,185 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:47:44,185 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:47:44,185 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:47:44,197 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:47:44,197 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:47:44,197 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:47:44,197 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:47:44,205 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:47:44,206 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú a6942632-d39b-4660-8207-0aedfb42d17d INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:47:44,206 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 59753cb5-5480-4034-baed-117f8531be02 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:47:44,206 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú edf3437b-83ef-427c-97e0-299415d50a38 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:47:44,207 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:47:44,207 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 4 menús incluidos, 25 menús excluidos de 29 menús disponibles
2025-12-10 21:47:44,207 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 2 secciones
2025-12-10 21:47:44,207 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 21:47:44,207 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:47:44,207 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 81.7ms
2025-12-10 21:48:01,107 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:48:01,107 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:01,107 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:01,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:01,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:01,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:01,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:01,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:01,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:01,120 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:01,120 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:01,120 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:48:01,137 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:48:01,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:01,147 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:01,147 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:48:01,147 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:48:01,161 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:48:01,161 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:48:01,161 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:48:01,161 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:48:01,172 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:48:01,172 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú a6942632-d39b-4660-8207-0aedfb42d17d INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:01,173 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 59753cb5-5480-4034-baed-117f8531be02 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:01,173 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú edf3437b-83ef-427c-97e0-299415d50a38 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:01,173 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:01,173 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 4 menús incluidos, 25 menús excluidos de 29 menús disponibles
2025-12-10 21:48:01,173 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 2 secciones
2025-12-10 21:48:01,174 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 21:48:01,174 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:48:01,174 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 66.2ms
2025-12-10 21:48:18,797 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 21:48:18,797 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:18,797 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:18,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,797 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 21:48:18,806 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:18,806 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:18,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,817 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,817 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:18,817 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 21:48:18,822 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,822 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:18,822 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 21:48:18,822 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 21:48:18,822 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 21:48:18,822 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55, Tipo: web
2025-12-10 21:48:18,827 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 21:48:18,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 26.6ms
2025-12-10 21:48:18,827 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: user_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 1, Type: user)
2025-12-10 21:48:18,827 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1C6DA055-9333-49A1-A726-1A358368CC55: level=1, super_admin=False, type=user
2025-12-10 21:48:18,839 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55, Tipo: web, Token ID: 96B30428-8E71-40F7-A4E0-FA5926846D0B, Rotación: True
2025-12-10 21:48:18,847 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55
2025-12-10 21:48:18,847 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 21:48:18,847 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 96B30428-8E71-40F7-A4E0-FA5926846D0B
2025-12-10 21:48:18,847 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: user_tech
2025-12-10 21:48:18,857 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, exito=True
2025-12-10 21:48:18,857 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 59.5ms
2025-12-10 21:48:18,861 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-10 21:48:18,861 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.4ms
2025-12-10 21:48:18,863 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-10 21:48:18,863 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:18,863 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:18,863 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,863 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,864 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,872 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,872 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:18,872 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/me/
2025-12-10 21:48:18,877 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: user_tech
2025-12-10 21:48:18,877 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 1, Super Admin: False, Type: user
2025-12-10 21:48:18,877 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1C6DA055-9333-49A1-A726-1A358368CC55 para cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A
2025-12-10 21:48:18,877 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:48:18,877 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1C6DA055-9333-49A1-A726-1A358368CC55 con 2 roles activos
2025-12-10 21:48:18,877 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: user_tech, Type: user, Level: 1, Super Admin: False, Roles: 2
2025-12-10 21:48:18,877 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 22.0ms
2025-12-10 21:48:18,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,923 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,923 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:18,923 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:48:18,923 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,923 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:18,923 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 21:48:18,947 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:48:18,947 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,957 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:48:18,962 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 21:48:18,962 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 403 51.9ms
2025-12-10 21:48:18,965 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,966 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:48:18,966 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:48:18,966 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Supervisor/permisos/
2025-12-10 21:48:18,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:18,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:18,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,970 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Usuario/permisos/
2025-12-10 21:48:18,971 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:18,971 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:18,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Usuario/permisos/
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:18,977 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Supervisor/permisos/
2025-12-10 21:48:18,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:48:18,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:48:18,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:48:18,990 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:48:18,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:48:18,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú a6942632-d39b-4660-8207-0aedfb42d17d INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:18,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 59753cb5-5480-4034-baed-117f8531be02 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:18,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú edf3437b-83ef-427c-97e0-299415d50a38 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:18,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:18,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 4 menús incluidos, 25 menús excluidos de 29 menús disponibles
2025-12-10 21:48:18,997 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 2 secciones
2025-12-10 21:48:18,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 21:48:18,997 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:48:18,997 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 95.9ms
2025-12-10 21:48:19,007 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:48:19,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:48:19,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:48:19,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:19,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:19,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:19,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:48:19,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:48:19,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:48:19,023 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:48:19,027 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:19,027 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:48:19,027 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 21:48:19,027 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:48:19,027 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 21:48:19,027 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Supervisor/permisos/ 403 66.8ms
2025-12-10 21:48:19,027 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 21:48:19,038 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Usuario/permisos/ 403 68.0ms
2025-12-10 21:48:19,049 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 21:48:19,050 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:19,061 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:48:19,061 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 21:48:19,061 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:48:19,067 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 21:48:19,067 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 21:48:19,067 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 21:48:19,067 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 21:48:19,074 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 21:48:19,074 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú a6942632-d39b-4660-8207-0aedfb42d17d INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:19,074 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 59753cb5-5480-4034-baed-117f8531be02 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:19,074 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú edf3437b-83ef-427c-97e0-299415d50a38 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:19,074 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 21:48:19,074 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 4 menús incluidos, 25 menús excluidos de 29 menús disponibles
2025-12-10 21:48:19,074 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 2 secciones
2025-12-10 21:48:19,074 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 21:48:19,074 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 21:48:19,077 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 70.2ms
2025-12-10 21:49:09,819 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 21:49:09,819 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:09,819 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:09,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:09,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:09,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:09,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:09,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:09,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:09,831 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:09,831 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:09,831 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 21:49:09,845 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55
2025-12-10 21:49:09,845 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 1C6DA055-9333-49A1-A726-1A358368CC55 (user_tech)
2025-12-10 21:49:09,852 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, exito=True
2025-12-10 21:49:09,852 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 32.8ms
2025-12-10 21:49:09,884 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 21:49:09,887 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:09,887 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:09,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:09,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:09,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:09,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:09,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:09,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:09,899 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:09,899 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:09,899 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 21:49:09,899 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 21:49:09,899 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 21:49:09,907 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 21:49:09,908 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 21.1ms
2025-12-10 21:49:17,335 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 21:49:17,335 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:17,335 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:17,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:17,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:17,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:17,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:17,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:17,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:17,347 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:17,347 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:17,347 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 21:49:17,350 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 21:49:17,350 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_acme', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:17,350 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:17,357 - app.modules.auth.application.services.auth_service - WARNING - [AUTH] Usuario NO ENCONTRADO: username='admin_acme', cliente_id_buscado=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:17,365 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_failed, cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, usuario_id=None, exito=False
2025-12-10 21:49:17,367 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 401 32.1ms
2025-12-10 21:49:24,587 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 21:49:24,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:24,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:24,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,598 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,598 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:24,598 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 21:49:24,604 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 21:49:24,604 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,604 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,821 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:49:24,821 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 21:49:24,821 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:49:24,831 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:49:24,831 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: C9E85E9B-2871-4B72-9421-CFE2AD753F03, Rotación: False
2025-12-10 21:49:24,831 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: C9E85E9B-2871-4B72-9421-CFE2AD753F03
2025-12-10 21:49:24,831 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,839 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:49:24,839 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 257.3ms
2025-12-10 21:49:24,860 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:49:24,860 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.1ms
2025-12-10 21:49:24,860 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 21:49:24,860 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:49:24,860 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:24,860 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:24,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,860 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 3.8ms
2025-12-10 21:49:24,867 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:49:24,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:24,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:24,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:24,877 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:49:24,911 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:49:24,911 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,923 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 21:49:24,923 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,923 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 21:49:24,924 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 21:49:24,927 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 64.5ms
2025-12-10 21:49:24,929 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 60.8ms
2025-12-10 21:49:24,930 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Administrador/permisos/
2025-12-10 21:49:24,931 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:49:24,932 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Administrador/permisos/ 200 1.3ms
2025-12-10 21:49:24,932 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:24,932 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:24,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,935 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:24,937 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.5ms
2025-12-10 21:49:24,937 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 21:49:24,937 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:24,938 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:24,938 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:24,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,940 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.8ms
2025-12-10 21:49:24,940 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:24,940 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:24,940 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:24,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,947 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:24,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:24,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:24,964 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,965 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:24,965 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:49:24,968 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,968 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:24,968 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 21:49:24,969 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,969 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:24,969 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:24,973 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:24,973 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:24,973 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,007 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,022 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:49:25,024 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:49:25,027 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 99.6ms
2025-12-10 21:49:25,027 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 21:49:25,027 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 96.1ms
2025-12-10 21:49:25,027 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:49:25,038 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:49:25,039 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 96.1ms
2025-12-10 21:49:25,040 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,040 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,040 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-10 21:49:25,040 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:49:25,047 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,047 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 102.2ms
2025-12-10 21:49:25,047 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,057 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,059 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.6ms
2025-12-10 21:49:25,061 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,061 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,063 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,065 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,065 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,065 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,069 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,071 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,071 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,073 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,077 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,117 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:49:25,127 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:49:25,139 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:49:25,140 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 99.2ms
2025-12-10 21:49:25,140 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 96.3ms
2025-12-10 21:49:25,140 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,140 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:49:25,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 99.7ms
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.2ms
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.9ms
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.8ms
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.8ms
2025-12-10 21:49:25,155 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 93.4ms
2025-12-10 21:49:25,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,167 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,167 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,167 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,167 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,167 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,167 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,171 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.0ms
2025-12-10 21:49:25,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.0ms
2025-12-10 21:49:25,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.1ms
2025-12-10 21:49:25,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.2ms
2025-12-10 21:49:25,173 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,173 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,197 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,205 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,206 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,206 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,207 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,207 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,207 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,207 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,211 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,211 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,211 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,279 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:49:25,282 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:49:25,283 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:49:25,285 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:49:25,290 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 144.7ms
2025-12-10 21:49:25,290 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,290 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,290 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,290 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,290 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,290 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,297 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,297 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,306 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,306 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,307 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,307 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,317 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,317 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,327 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 157.2ms
2025-12-10 21:49:25,327 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,327 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:49:25,327 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,327 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,327 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,337 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:49:25,337 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,339 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:49:25,339 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,339 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:49:25,339 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,339 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,339 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,339 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,347 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:49:25,347 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 192.0ms
2025-12-10 21:49:25,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,354 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,356 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,356 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,357 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:49:25,357 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,357 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 201.7ms
2025-12-10 21:49:25,357 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 202.8ms
2025-12-10 21:49:25,366 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:49:25,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,367 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 207.6ms
2025-12-10 21:49:25,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,372 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,372 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,377 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,397 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,397 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,397 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,407 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,407 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,407 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,407 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,407 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,407 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,417 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,417 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,417 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,417 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:49:25,439 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,439 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,457 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,457 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:49:25,457 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,457 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:49:25,457 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:49:25,477 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,477 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,477 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,477 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 192.4ms
2025-12-10 21:49:25,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:49:25,490 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,490 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,490 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,501 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:49:25,507 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,507 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:49:25,507 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,507 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:49:25,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,507 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,507 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,517 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,517 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:49:25,517 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,521 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,522 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,527 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,527 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,527 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,527 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,527 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,538 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:49:25,538 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,539 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,539 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,539 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:49:25,539 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,539 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 209.9ms
2025-12-10 21:49:25,539 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,547 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,547 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,547 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,547 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 198.3ms
2025-12-10 21:49:25,547 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,547 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:49:25,554 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,557 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,557 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,557 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,557 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,557 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,557 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,557 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:49:25,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 182.7ms
2025-12-10 21:49:25,557 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,567 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 198.4ms
2025-12-10 21:49:25,567 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,567 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,573 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,573 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,577 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 213.3ms
2025-12-10 21:49:25,587 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:49:25,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:49:25,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,597 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,597 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,597 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:49:25,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,607 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,607 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,607 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:49:25,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:49:25,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:49:25,617 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,617 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,617 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,617 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,617 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,617 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,623 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:49:25,627 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:49:25,627 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:49:25,627 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:49:25,647 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,647 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,667 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,667 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:49:25,667 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,689 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:49:25,689 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,689 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:49:25,697 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 207.0ms
2025-12-10 21:49:25,697 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:49:25,704 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:49:25,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:49:25,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:49:25,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:49:25,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,707 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,723 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,723 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:49:25,727 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:49:25,727 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:49:25,727 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:49:25,740 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,740 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:49:25,740 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:49:25,747 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:49:25,747 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 207.0ms
2025-12-10 21:49:25,757 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 201.6ms
2025-12-10 21:49:25,757 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,757 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 197.2ms
2025-12-10 21:49:25,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 188.9ms
2025-12-10 21:49:25,767 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:49:25,767 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 180.4ms
2025-12-10 21:55:38,231 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 21:55:38,231 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 21:55:38,231 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.9ms
2025-12-10 21:55:38,236 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.6ms
2025-12-10 21:55:38,237 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:55:38,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:38,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:38,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:38,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:38,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:38,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:38,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:38,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:38,254 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:38,257 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 21:55:38,257 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:38,257 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:55:38,277 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:38,289 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:55:38,289 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:55:38,289 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:55:38,289 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:38,289 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:55:38,289 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:38,297 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:55:38,297 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:55:38,297 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:55:38,297 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 61.9ms
2025-12-10 21:55:38,297 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:55:38,305 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:38,305 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:38,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:38,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:38,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:38,308 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:38,308 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:38,308 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:38,308 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:38,308 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:38,308 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:55:38,334 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:38,338 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:55:38,339 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:55:38,339 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:55:38,339 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:38,339 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:55:38,339 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:38,347 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:55:38,347 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:55:38,347 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:55:38,347 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 44.8ms
2025-12-10 21:55:39,927 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-10 21:55:39,927 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-10 21:55:39,927 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 0.9ms
2025-12-10 21:55:39,927 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 0.6ms
2025-12-10 21:55:39,927 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-10 21:55:39,927 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:39,927 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:39,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:39,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:39,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:39,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:39,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:39,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:39,941 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:39,941 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:39,941 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/areas/
2025-12-10 21:55:39,961 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:39,964 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-12-10 21:55:39,964 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: skip=0, limit=10, search='None'
2025-12-10 21:55:39,964 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:39,969 - app.infrastructure.database.queries_async - ERROR - Error en execute_query async (string): (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:39,969 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] Error en sesión async: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection_async.py", line 326, in get_db_connection
    yield session
  File "D:\base_multi_tenant_fastapi\app\core\tenant\routing.py", line 877, in get_connection_for_tenant
    yield session
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:39,977 - app.core.application.base_service - ERROR - DatabaseError en obtener_areas_paginadas: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\area_service.py", line 218, in obtener_areas_paginadas
    count_result_list = await execute_query(COUNT_AREAS_QUERY, where_params)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:40,011 - app.modules.menus.presentation.endpoints_areas - ERROR - Error de servicio al obtener áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:40,011 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 80.7ms
2025-12-10 21:55:40,011 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-10 21:55:40,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:40,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:40,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:40,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:40,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:40,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:40,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:40,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:40,025 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:40,025 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:40,025 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/areas/
2025-12-10 21:55:40,041 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:40,041 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-12-10 21:55:40,041 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: skip=0, limit=10, search='None'
2025-12-10 21:55:40,041 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:40,048 - app.infrastructure.database.queries_async - ERROR - Error en execute_query async (string): (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:40,048 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] Error en sesión async: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection_async.py", line 326, in get_db_connection
    yield session
  File "D:\base_multi_tenant_fastapi\app\core\tenant\routing.py", line 877, in get_connection_for_tenant
    yield session
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:40,048 - app.core.application.base_service - ERROR - DatabaseError en obtener_areas_paginadas: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\area_service.py", line 218, in obtener_areas_paginadas
    count_result_list = await execute_query(COUNT_AREAS_QUERY, where_params)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:40,057 - app.modules.menus.presentation.endpoints_areas - ERROR - Error de servicio al obtener áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 21:55:40,057 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 45.1ms
2025-12-10 21:55:41,189 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:55:41,190 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:41,190 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:41,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,197 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,197 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:41,197 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:55:41,226 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,231 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:55:41,231 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:55:41,231 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:55:41,231 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,233 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:55:41,233 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,245 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:55:41,245 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:55:41,245 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:55:41,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 56.4ms
2025-12-10 21:55:41,247 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 21:55:41,248 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:41,248 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:41,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,253 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,253 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,260 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,260 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:41,260 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 21:55:41,275 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,277 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:55:41,277 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:55:41,277 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 21:55:41,277 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,277 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 21:55:41,277 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,277 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 21:55:41,277 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 21:55:41,277 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 21:55:41,287 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 39.6ms
2025-12-10 21:55:41,671 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 21:55:41,671 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 0.9ms
2025-12-10 21:55:41,673 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 21:55:41,674 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 21:55:41,675 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 21:55:41,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.3ms
2025-12-10 21:55:41,676 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.3ms
2025-12-10 21:55:41,677 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.9ms
2025-12-10 21:55:41,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,692 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,692 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:41,692 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:55:41,697 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,697 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:41,697 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:55:41,718 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,718 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,727 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:55:41,727 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:55:41,727 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,729 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:55:41,729 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,733 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,734 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,734 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:55:41,735 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 53.4ms
2025-12-10 21:55:41,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:55:41,738 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:41,738 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:41,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,743 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:55:41,743 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:55:41,743 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:55:41,743 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 66.7ms
2025-12-10 21:55:41,743 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:55:41,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:55:41,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:55:41,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:55:41,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:55:41,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:55:41,751 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,751 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:41,757 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:55:41,763 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,763 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:55:41,763 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:55:41,787 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,790 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,792 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:55:41,792 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,792 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:55:41,792 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:55:41,792 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,797 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:55:41,797 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:55:41,797 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 61.9ms
2025-12-10 21:55:41,797 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:55:41,807 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:55:41,807 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:55:41,807 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:55:41,808 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 62.0ms
2025-12-10 21:57:55,260 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:57:55,260 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,260 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,267 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,267 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,267 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:57:55,287 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,299 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 42.1ms
2025-12-10 21:57:55,299 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,307 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,307 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,307 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,312 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,312 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,318 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,318 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,318 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,319 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,323 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,324 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,324 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,325 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,325 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,325 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,347 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:57:55,347 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:57:55,360 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:57:55,360 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:57:55,360 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 55.6ms
2025-12-10 21:57:55,360 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 58.7ms
2025-12-10 21:57:55,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,383 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,383 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,383 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,383 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,383 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,383 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,431 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 66.3ms
2025-12-10 21:57:55,431 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 63.9ms
2025-12-10 21:57:55,437 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,437 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,437 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,437 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,437 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,437 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,441 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,443 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,443 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,444 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,444 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,477 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,487 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,487 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,487 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:57:55,487 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,487 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,487 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,547 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:57:55,556 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:57:55,564 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:57:55,568 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:57:55,568 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:57:55,568 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:57:55,573 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:57:55,573 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:57:55,579 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:57:55,579 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:57:55,587 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:57:55,587 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:57:55,591 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:57:55,591 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:57:55,598 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:57:55,598 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:57:55,602 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:57:55,603 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:57:55,608 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:57:55,608 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:57:55,609 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,609 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:57:55,609 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:57:55,609 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,614 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:57:55,614 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:57:55,614 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,615 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:57:55,615 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:57:55,615 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,616 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:57:55,616 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:57:55,616 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,618 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:57:55,618 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:57:55,618 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,623 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:57:55,624 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 184.5ms
2025-12-10 21:57:55,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,625 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,631 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:57:55,632 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:57:55,632 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:57:55,633 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:57:55,633 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:57:55,634 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 184.7ms
2025-12-10 21:57:55,635 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 193.4ms
2025-12-10 21:57:55,635 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 185.6ms
2025-12-10 21:57:55,636 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 190.5ms
2025-12-10 21:57:55,637 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 187.9ms
2025-12-10 21:57:55,640 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,641 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:57:55,641 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:57:55,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:57:55,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:57:55,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:57:55,651 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,651 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,652 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,655 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:57:55,655 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:57:55,656 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:57:55,679 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:57:55,684 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:57:55,685 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:57:55,685 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:57:55,693 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:57:55,694 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:57:55,694 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,695 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:57:55,695 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:57:55,703 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:57:55,704 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 79.4ms
2025-12-10 21:57:55,704 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:57:55,704 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:57:55,705 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:57:55,709 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:57:55,709 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 69.1ms
2025-12-10 21:58:01,144 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:01,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,155 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,155 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,157 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:01,169 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,185 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 41.9ms
2025-12-10 21:58:01,187 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,187 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,207 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,207 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,207 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,211 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,211 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,211 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,253 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:58:01,255 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:58:01,261 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:58:01,262 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:58:01,262 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 71.5ms
2025-12-10 21:58:01,263 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 69.3ms
2025-12-10 21:58:01,265 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,266 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,266 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,270 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,270 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,270 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,282 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,283 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,283 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,285 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,285 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,286 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,322 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 52.8ms
2025-12-10 21:58:01,322 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 57.2ms
2025-12-10 21:58:01,327 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,328 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,331 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,332 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,332 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,332 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,332 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,335 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,335 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,337 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,337 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,339 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,340 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,341 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,341 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,344 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,344 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,359 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,359 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,359 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,372 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,372 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,373 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,374 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,374 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,375 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,376 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,376 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,376 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,377 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,377 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,377 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:01,380 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,380 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,380 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,381 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,382 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,382 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,445 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:01,448 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:01,449 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:01,450 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:01,452 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:01,454 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:01,461 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:01,461 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:01,468 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:01,469 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:01,474 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:01,475 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:01,478 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:01,478 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:01,486 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:01,487 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:01,492 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:01,492 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:01,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:01,505 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:01,505 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,510 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:01,510 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:01,511 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,511 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:01,511 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:01,512 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,512 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:01,512 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:01,512 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,513 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:01,513 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:01,513 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,514 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:01,514 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:01,514 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,523 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:01,524 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 196.1ms
2025-12-10 21:58:01,527 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,527 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:01,528 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,528 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,528 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,534 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 192.3ms
2025-12-10 21:58:01,535 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:01,538 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 211.3ms
2025-12-10 21:58:01,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:01,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:01,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:01,538 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,543 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:01,543 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:01,543 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,543 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,543 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,543 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 210.2ms
2025-12-10 21:58:01,543 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 204.7ms
2025-12-10 21:58:01,543 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 210.2ms
2025-12-10 21:58:01,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:01,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:01,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:01,562 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,562 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,563 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,567 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:01,567 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:01,569 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:01,598 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:01,602 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:01,605 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:01,605 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:01,612 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:01,612 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:01,621 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:01,621 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:01,622 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,624 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:01,625 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:01,625 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:01,628 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:01,629 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 101.6ms
2025-12-10 21:58:01,631 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:01,632 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 89.9ms
2025-12-10 21:58:07,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:07,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,769 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,771 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:07,771 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:07,790 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,800 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 39.3ms
2025-12-10 21:58:07,803 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,803 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,803 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,809 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:07,811 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,812 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,833 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,833 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:07,833 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,837 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:07,837 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:07,867 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:58:07,870 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:58:07,877 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:58:07,877 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:58:07,877 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 76.0ms
2025-12-10 21:58:07,877 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 70.6ms
2025-12-10 21:58:07,877 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,877 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,897 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,897 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:07,897 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,897 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,897 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:07,897 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:07,947 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 64.2ms
2025-12-10 21:58:07,947 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 64.1ms
2025-12-10 21:58:07,953 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,953 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,953 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,953 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,953 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,961 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,962 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,963 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,963 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,966 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:07,967 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,986 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,986 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,986 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,991 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,991 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,991 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:07,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:07,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:07,998 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,998 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:07,998 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,998 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:07,998 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:07,998 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:07,998 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:08,006 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:08,006 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:08,007 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:08,008 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:08,009 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:08,013 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:08,013 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:08,014 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:08,016 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:08,016 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:08,016 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:08,064 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:08,087 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:08,093 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:08,095 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:08,096 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:08,096 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:08,097 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:08,097 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:08,108 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:08,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:08,113 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:08,113 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:08,119 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:08,119 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:08,127 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:08,128 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:08,132 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:08,132 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:08,132 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,134 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:08,134 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:08,142 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:08,142 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:08,142 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,146 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:08,146 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:08,146 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,147 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:08,147 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:08,147 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,148 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:08,148 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:08,149 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,152 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:08,153 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:08,153 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:08,153 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,154 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 201.8ms
2025-12-10 21:58:08,159 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:08,160 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:08,160 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:08,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:08,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:08,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:08,164 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:08,165 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 211.7ms
2025-12-10 21:58:08,167 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:08,168 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:08,169 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:08,169 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:08,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:08,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:08,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:08,171 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 209.6ms
2025-12-10 21:58:08,172 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:08,175 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 214.0ms
2025-12-10 21:58:08,176 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:08,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:08,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:08,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:08,180 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:08,180 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 213.8ms
2025-12-10 21:58:08,181 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 214.5ms
2025-12-10 21:58:08,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:08,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:08,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:08,187 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:08,187 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:08,188 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:08,191 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:08,191 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:08,191 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:08,215 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:08,218 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:08,220 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:08,220 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:08,228 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:08,228 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:08,234 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:08,234 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:08,234 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:08,236 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:08,236 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:08,240 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:08,242 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 83.5ms
2025-12-10 21:58:08,248 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:08,249 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 80.2ms
2025-12-10 21:58:24,927 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:24,927 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:24,927 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:24,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:24,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:24,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:24,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:24,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:24,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:24,938 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:24,938 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:24,938 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:24,954 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:24,962 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 34.4ms
2025-12-10 21:58:24,965 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:24,966 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:24,966 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:24,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:24,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:24,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:24,967 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:24,968 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:24,968 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:24,968 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:24,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:24,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:24,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:24,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:24,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:24,976 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:24,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:24,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:24,981 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:24,981 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:24,981 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:24,982 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:24,983 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:24,983 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,008 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:58:25,011 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:58:25,016 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:58:25,016 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:58:25,018 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 50.0ms
2025-12-10 21:58:25,018 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 52.8ms
2025-12-10 21:58:25,021 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,022 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,022 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,025 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,026 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,026 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,032 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,037 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,037 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,037 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,038 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,038 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,039 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,074 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 49.0ms
2025-12-10 21:58:25,075 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 53.7ms
2025-12-10 21:58:25,080 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,080 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,080 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,080 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,083 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,084 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,085 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,088 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,092 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,092 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,093 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,093 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,095 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,095 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,110 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,110 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,113 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,113 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,113 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,114 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,121 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,122 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,122 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,122 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,122 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,122 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,123 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,123 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,123 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,129 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,129 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,130 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:25,130 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,130 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,130 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,134 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,134 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,134 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,192 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:25,198 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:25,198 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:25,198 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:25,208 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:25,211 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:25,213 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:25,213 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:25,218 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:25,219 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:25,225 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:25,225 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:25,229 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:25,229 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:25,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:25,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:25,244 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:25,244 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:25,251 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:25,251 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:25,252 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,252 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:25,252 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:25,253 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,254 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:25,254 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:25,254 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,255 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:25,255 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:25,255 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,257 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:25,257 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:25,257 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,262 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:25,262 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:25,262 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,266 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:25,267 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:25,268 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 188.7ms
2025-12-10 21:58:25,269 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 189.9ms
2025-12-10 21:58:25,272 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:25,272 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:25,273 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:25,274 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,275 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,275 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,278 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 192.4ms
2025-12-10 21:58:25,278 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 189.9ms
2025-12-10 21:58:25,278 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,279 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 188.0ms
2025-12-10 21:58:25,281 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:25,281 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:25,281 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:25,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,284 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 192.0ms
2025-12-10 21:58:25,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:25,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:25,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:25,297 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,297 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,298 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,300 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:25,300 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:25,300 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:25,328 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:25,329 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:25,332 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:25,333 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:25,338 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:25,338 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:25,347 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:25,348 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:25,348 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,349 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:25,349 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:25,349 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:25,353 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:25,354 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 75.0ms
2025-12-10 21:58:25,354 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:25,355 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 81.4ms
2025-12-10 21:58:30,656 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:30,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,667 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,667 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,667 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:30,686 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,687 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 37.1ms
2025-12-10 21:58:30,699 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,700 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,700 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,702 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,702 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,703 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,716 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,718 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,718 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,719 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,720 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,720 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,737 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:58:30,747 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:58:30,747 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:58:30,747 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:58:30,747 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 57.2ms
2025-12-10 21:58:30,747 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 54.9ms
2025-12-10 21:58:30,757 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,757 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,757 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,757 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,777 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,777 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,777 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,780 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,780 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,780 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,834 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 74.2ms
2025-12-10 21:58:30,834 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 74.0ms
2025-12-10 21:58:30,838 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,839 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,839 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,839 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,842 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,842 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,845 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,846 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,847 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,847 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,849 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,849 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,852 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,853 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,853 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,854 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,855 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:30,855 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:30,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,863 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:30,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:30,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:30,883 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,884 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,884 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,884 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,884 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,884 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,886 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,886 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,886 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,887 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,888 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,888 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:30,889 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,889 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,889 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,893 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:30,893 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:30,893 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:30,951 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:30,966 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:30,968 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:30,972 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:30,973 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:30,974 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:30,974 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:30,975 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:30,984 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:30,984 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:30,990 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:30,990 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:30,990 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:30,992 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:30,992 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:30,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:30,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:31,001 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:31,001 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:31,008 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:31,008 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:31,020 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:31,020 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:31,020 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:31,022 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:31,022 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:31,023 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:31,024 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:31,024 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:31,025 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:31,025 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:31,025 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:31,025 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:31,026 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:31,026 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:31,026 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:31,027 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:31,029 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 189.9ms
2025-12-10 21:58:31,032 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:31,034 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:31,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:31,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:31,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:31,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:31,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:31,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 198.2ms
2025-12-10 21:58:31,039 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:31,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:31,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:31,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:31,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:31,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:31,045 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:31,046 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:31,046 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:31,047 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:31,048 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 196.8ms
2025-12-10 21:58:31,050 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 197.8ms
2025-12-10 21:58:31,050 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 205.1ms
2025-12-10 21:58:31,052 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 206.8ms
2025-12-10 21:58:31,053 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:31,053 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:31,053 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:31,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:31,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:31,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:31,062 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:31,062 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:31,062 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:31,064 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:31,064 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:31,064 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:31,093 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:31,094 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:31,097 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:31,098 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:31,102 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:31,102 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:31,110 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:31,110 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:31,110 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:31,111 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:31,111 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:31,111 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:31,116 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:31,117 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 83.4ms
2025-12-10 21:58:31,117 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:31,118 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 79.4ms
2025-12-10 21:58:47,177 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:47,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,189 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,189 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,189 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:47,208 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,217 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 40.2ms
2025-12-10 21:58:47,220 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,220 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,230 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,237 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,237 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,237 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,239 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,239 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,239 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,266 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:58:47,267 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:58:47,271 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:58:47,271 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:58:47,271 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 52.2ms
2025-12-10 21:58:47,271 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 55.1ms
2025-12-10 21:58:47,280 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,282 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,296 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,297 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,299 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,299 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,299 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,299 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,351 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 71.2ms
2025-12-10 21:58:47,352 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 68.2ms
2025-12-10 21:58:47,356 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,356 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,357 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,358 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,358 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,362 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,363 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,363 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,369 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,370 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,370 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,370 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,372 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,372 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,380 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,380 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,399 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,399 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,400 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,401 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,401 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,401 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,401 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,401 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,402 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,404 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,404 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,404 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:47,405 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,405 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,407 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,407 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,408 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,408 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,473 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:47,474 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:47,477 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:47,478 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:47,483 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:47,484 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:47,486 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:47,487 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:47,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:47,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:47,511 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:47,511 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:47,515 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:47,516 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:47,520 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:47,520 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:47,525 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:47,526 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:47,531 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:47,531 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:47,531 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,536 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:47,536 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:47,536 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,537 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:47,537 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:47,537 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,537 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:47,538 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:47,538 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,540 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:47,540 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:47,540 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,541 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:47,543 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:47,543 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,544 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:47,547 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 190.2ms
2025-12-10 21:58:47,552 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,553 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,553 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,555 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:47,556 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:47,557 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:47,558 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:47,559 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 195.9ms
2025-12-10 21:58:47,559 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 190.0ms
2025-12-10 21:58:47,560 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 190.0ms
2025-12-10 21:58:47,561 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 204.7ms
2025-12-10 21:58:47,562 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:47,565 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,567 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:47,567 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:47,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,568 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 211.0ms
2025-12-10 21:58:47,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:47,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:47,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:47,576 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,576 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,578 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,581 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:47,581 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:47,582 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:47,606 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:47,611 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:47,612 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:47,612 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:47,619 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:47,619 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:47,624 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:47,624 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:47,625 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,628 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:47,628 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:47,628 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:47,630 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:47,630 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 78.6ms
2025-12-10 21:58:47,635 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:47,636 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 70.1ms
2025-12-10 21:58:53,212 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:53,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,223 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,224 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,224 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:58:53,242 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,249 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 37.9ms
2025-12-10 21:58:53,255 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,255 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,256 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,258 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,259 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,259 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,270 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,271 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,271 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/

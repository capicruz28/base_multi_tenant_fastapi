2025-12-10 11:51:20,730 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:51:20,733 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:51:20,733 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,733 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:51:20,736 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:51:20,736 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:51:20,737 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:51:20,737 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:51:20,737 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,787 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:51:20,789 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:51:20,794 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:51:20,803 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:51:20,804 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:51:20,805 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:51:20,810 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:51:20,811 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:51:20,815 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:51:20,818 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:51:20,836 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:51:20,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:51:20,854 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:51:20,854 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:51:20,854 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:20,854 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:51:20,854 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:51:20,854 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 177.6ms
2025-12-10 11:51:20,854 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 164.4ms
2025-12-10 11:51:20,854 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:51:20,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 162.2ms
2025-12-10 11:51:20,870 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:51:20,870 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,871 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:51:20,871 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.9ms
2025-12-10 11:51:20,873 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:51:20,873 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:51:20,874 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:51:20,874 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,875 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:51:20,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:51:20,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:51:20,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:51:20,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:51:20,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,880 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 166.5ms
2025-12-10 11:51:20,881 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:51:20,883 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:51:20,883 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:51:20,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,888 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,889 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.8ms
2025-12-10 11:51:20,891 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:51:20,892 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:51:20,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,895 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,895 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,895 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:51:20,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:51:20,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:51:20,905 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:51:20,905 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:51:20,905 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:51:20,907 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:51:20,907 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:51:20,907 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,909 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:51:20,910 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:51:20,910 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:51:20,913 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:51:20,913 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:51:20,914 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:51:20,957 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:51:20,957 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:51:20,957 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:51:20,957 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:51:20,967 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:51:20,967 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:51:20,974 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:51:20,974 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:51:20,980 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:51:20,980 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:51:20,986 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:51:20,986 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:51:20,994 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:51:20,994 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:51:20,994 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:20,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:51:20,996 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:51:20,997 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:20,998 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:51:20,998 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:51:20,998 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:21,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:51:21,000 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:51:21,000 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:51:21,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:51:21,000 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 131.2ms
2025-12-10 11:51:21,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:51:21,000 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 135.6ms
2025-12-10 11:51:21,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:51:21,000 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 130.9ms
2025-12-10 11:51:21,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:51:21,013 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 122.8ms
2025-12-10 11:53:23,635 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:23,637 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:23,637 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:23,637 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:23,637 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 2.1ms
2025-12-10 11:53:23,638 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.5ms
2025-12-10 11:53:23,638 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.3ms
2025-12-10 11:53:23,639 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.3ms
2025-12-10 11:53:23,643 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:23,643 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:23,644 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,644 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,645 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,647 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,648 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:23,649 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,652 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:23,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,661 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,661 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,661 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,685 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,688 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,688 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,689 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,703 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 11:53:23,703 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,703 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:23,705 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 11:53:23,705 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,705 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:23,706 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 11:53:23,707 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,707 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:23,709 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 11:53:23,709 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,710 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:23,758 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,766 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:23,767 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,770 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:23,774 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:23,777 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 128.6ms
2025-12-10 11:53:23,779 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:23,783 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 139.9ms
2025-12-10 11:53:23,785 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,785 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,786 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.8ms
2025-12-10 11:53:23,788 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.8ms
2025-12-10 11:53:23,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,791 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,792 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:23,792 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,796 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,796 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 6.4ms
2025-12-10 11:53:23,796 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 6.2ms
2025-12-10 11:53:23,798 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,798 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,801 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:23,803 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,804 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,807 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,807 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,816 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,823 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,823 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,832 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 179.6ms
2025-12-10 11:53:23,834 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 191.4ms
2025-12-10 11:53:23,838 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,839 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,839 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,843 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,843 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,843 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,844 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,844 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,844 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,847 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,847 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,847 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,905 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:23,910 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:23,914 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:23,918 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:23,925 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:23,927 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 136.6ms
2025-12-10 11:53:23,927 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:23,929 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:23,930 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 126.7ms
2025-12-10 11:53:23,931 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:23,932 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 136.2ms
2025-12-10 11:53:23,932 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,933 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.4ms
2025-12-10 11:53:23,935 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 131.9ms
2025-12-10 11:53:23,935 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,936 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.1ms
2025-12-10 11:53:23,938 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,938 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,939 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:53:23,939 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,939 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,939 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,942 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,944 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,945 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,945 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,947 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.2ms
2025-12-10 11:53:23,948 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,950 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,950 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,951 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,951 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,953 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,954 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:23,954 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:23,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,968 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:23,968 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:23,968 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:23,972 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,972 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,972 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,974 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,974 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,976 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:23,979 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,979 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,979 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:23,981 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:23,981 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:23,981 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,049 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 109.9ms
2025-12-10 11:53:24,052 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,053 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.8ms
2025-12-10 11:53:24,056 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,056 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 106.9ms
2025-12-10 11:53:24,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,059 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 116.6ms
2025-12-10 11:53:24,062 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 109.0ms
2025-12-10 11:53:24,064 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,065 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,065 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:53:24,066 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.3ms
2025-12-10 11:53:24,067 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,068 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.1ms
2025-12-10 11:53:24,068 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,071 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,071 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,072 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,072 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,072 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,072 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,075 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,089 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,089 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,089 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,096 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,096 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,096 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,098 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,098 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,098 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,100 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,100 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,101 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,142 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:24,152 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:24,153 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:24,155 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:24,155 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,160 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,179 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,180 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,185 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,185 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,190 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,190 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:24,191 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,192 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,192 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,204 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,204 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:24,204 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,206 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,206 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:24,206 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,207 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,208 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:24,208 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,209 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:24,211 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 155.9ms
2025-12-10 11:53:24,215 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,215 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 147.1ms
2025-12-10 11:53:24,215 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,217 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.1ms
2025-12-10 11:53:24,219 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:24,220 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,220 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,221 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,222 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 152.9ms
2025-12-10 11:53:24,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.8ms
2025-12-10 11:53:24,224 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 152.6ms
2025-12-10 11:53:24,229 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,231 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,232 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,234 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,235 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,235 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.7ms
2025-12-10 11:53:24,236 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:53:24,240 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,241 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,241 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,245 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,245 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,245 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,264 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,264 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,264 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,267 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,267 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,267 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,270 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,272 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,272 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,273 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,274 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,274 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,324 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:24,325 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:24,330 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:24,333 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:24,335 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,335 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,346 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,347 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,356 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,356 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,366 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,366 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:24,366 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,370 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,370 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:24,371 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,371 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,372 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,376 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,376 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:24,376 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,380 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,381 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 151.7ms
2025-12-10 11:53:24,385 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,385 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:24,385 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,385 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,387 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.7ms
2025-12-10 11:53:24,389 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:24,390 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:24,390 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,395 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 174.0ms
2025-12-10 11:53:24,395 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 156.1ms
2025-12-10 11:53:24,400 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,401 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,402 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.8ms
2025-12-10 11:53:24,402 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,403 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:53:24,404 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 160.1ms
2025-12-10 11:53:24,406 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,408 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,413 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,414 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,414 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,415 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,416 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,418 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,418 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,418 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,420 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.5ms
2025-12-10 11:53:24,423 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,424 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,424 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,436 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,436 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,436 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,447 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,447 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,447 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,447 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,448 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,448 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,452 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,454 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,454 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:24,500 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:24,504 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:24,504 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,511 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:24,515 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,515 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,524 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,524 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:24,524 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,525 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,525 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,530 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,530 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,540 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,540 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:24,542 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,545 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,545 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,545 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:24,545 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,546 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,546 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:24,546 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,548 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 157.0ms
2025-12-10 11:53:24,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,552 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.8ms
2025-12-10 11:53:24,554 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,555 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,555 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,555 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 145.7ms
2025-12-10 11:53:24,562 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,563 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,564 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,565 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 158.0ms
2025-12-10 11:53:24,565 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:24,565 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 142.0ms
2025-12-10 11:53:24,568 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,576 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,576 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,577 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.6ms
2025-12-10 11:53:24,578 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.5ms
2025-12-10 11:53:24,580 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,581 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,581 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,582 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,585 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:24,585 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:24,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,592 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,592 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,592 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:24,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:24,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:24,603 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,603 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,603 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,608 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,609 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,609 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:24,609 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:24,610 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:24,610 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:24,663 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:24,665 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:24,676 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:24,678 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:24,679 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,679 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,684 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,685 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,696 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,696 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:24,696 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,697 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,698 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:24,698 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,698 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:24,699 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:24,704 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:24,704 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:24,718 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:24,718 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:24,719 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,720 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:24,720 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:24,720 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:24,721 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:24,722 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,722 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 154.5ms
2025-12-10 11:53:24,724 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 169.8ms
2025-12-10 11:53:24,730 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:24,731 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:24,731 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 150.2ms
2025-12-10 11:53:24,732 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 151.8ms
2025-12-10 11:53:27,836 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:27,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:27,837 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.7ms
2025-12-10 11:53:27,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:27,839 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:27,839 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.9ms
2025-12-10 11:53:27,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.5ms
2025-12-10 11:53:27,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.2ms
2025-12-10 11:53:27,842 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:27,843 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,844 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,846 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:27,847 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:27,848 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:27,848 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,848 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,850 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,851 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,852 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,852 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,853 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,859 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,864 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,864 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,864 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,870 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,870 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:27,870 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:27,872 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,872 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:27,872 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:27,874 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,874 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:27,874 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:27,876 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,876 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:27,876 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:27,919 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,926 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:27,928 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,933 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:27,938 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:27,940 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:27,942 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 99.5ms
2025-12-10 11:53:27,944 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 97.5ms
2025-12-10 11:53:27,947 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:27,947 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:27,948 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.0ms
2025-12-10 11:53:27,950 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.5ms
2025-12-10 11:53:27,951 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:27,952 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:27,952 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:27,953 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.1ms
2025-12-10 11:53:27,953 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:27,954 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.1ms
2025-12-10 11:53:27,954 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:27,955 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,955 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,959 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:27,960 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:27,961 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:27,961 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,961 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:27,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:27,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,976 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,976 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,976 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:27,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:27,985 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:27,988 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 140.7ms
2025-12-10 11:53:27,988 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 140.8ms
2025-12-10 11:53:27,993 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,993 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:27,993 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:27,994 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,994 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:27,996 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:27,997 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:27,998 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:27,998 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:27,999 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,001 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,001 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,048 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:28,051 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:28,056 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:28,058 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:28,064 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:28,066 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 111.8ms
2025-12-10 11:53:28,066 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:28,068 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 115.0ms
2025-12-10 11:53:28,070 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:28,070 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:28,072 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,073 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 110.9ms
2025-12-10 11:53:28,073 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:53:28,073 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 112.3ms
2025-12-10 11:53:28,074 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,075 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:53:28,076 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,077 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,077 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,082 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,082 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,082 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,083 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,083 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,086 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.1ms
2025-12-10 11:53:28,086 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.6ms
2025-12-10 11:53:28,088 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,089 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,089 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,091 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,093 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,120 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,120 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,121 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,125 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,125 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,125 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,127 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,127 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,127 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,130 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,130 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,131 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,199 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 117.9ms
2025-12-10 11:53:28,203 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 113.4ms
2025-12-10 11:53:28,205 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,205 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 129.4ms
2025-12-10 11:53:28,205 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 117.2ms
2025-12-10 11:53:28,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:53:28,207 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,208 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.2ms
2025-12-10 11:53:28,209 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,210 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,210 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,215 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,215 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,215 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,216 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,216 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,218 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 3.8ms
2025-12-10 11:53:28,218 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.3ms
2025-12-10 11:53:28,221 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,222 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,223 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,223 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,223 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,235 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,240 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,240 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,245 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,245 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,245 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,249 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,249 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,249 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,281 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,281 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,281 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,282 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,282 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,282 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,318 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:28,327 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:28,333 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:28,335 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,335 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,343 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:28,344 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,344 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,350 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,351 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,354 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,354 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:28,354 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,359 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,359 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:28,359 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,362 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,362 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,367 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,367 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:28,367 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,370 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:28,371 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 161.9ms
2025-12-10 11:53:28,375 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,375 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:28,375 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,375 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,377 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-10 11:53:28,377 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,379 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,380 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 164.7ms
2025-12-10 11:53:28,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,384 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 163.0ms
2025-12-10 11:53:28,384 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,387 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.5ms
2025-12-10 11:53:28,389 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:28,390 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,391 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,391 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:53:28,391 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,393 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 172.1ms
2025-12-10 11:53:28,397 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,398 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,398 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,402 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,404 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.3ms
2025-12-10 11:53:28,406 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,406 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,407 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,416 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,416 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,416 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,420 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,423 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,423 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,423 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,425 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,425 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,425 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,433 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,434 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,434 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,468 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:28,473 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:28,474 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:28,479 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,479 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,489 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:28,491 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,491 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,498 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,498 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:28,499 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,499 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,499 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,509 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,510 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,516 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,517 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:28,517 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,517 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,517 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:28,517 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,520 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:28,521 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 139.1ms
2025-12-10 11:53:28,524 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,524 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:28,524 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,526 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,526 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.5ms
2025-12-10 11:53:28,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,528 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,529 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,534 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,535 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,536 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:28,536 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 145.5ms
2025-12-10 11:53:28,536 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 139.7ms
2025-12-10 11:53:28,537 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 131.8ms
2025-12-10 11:53:28,541 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,544 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,545 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,545 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,545 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.8ms
2025-12-10 11:53:28,546 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.3ms
2025-12-10 11:53:28,546 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.1ms
2025-12-10 11:53:28,549 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,550 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,550 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,552 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,552 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,552 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,554 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,554 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,558 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,558 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,558 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,575 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,576 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,576 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,578 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,578 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,578 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,579 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,580 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,580 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,606 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:28,616 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,616 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,628 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:28,631 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:28,632 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:28,633 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,633 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:28,633 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,639 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,639 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,649 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,649 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,654 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,654 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 127.5ms
2025-12-10 11:53:28,659 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,660 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,660 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:28,660 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,661 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.5ms
2025-12-10 11:53:28,661 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,662 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:28,662 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,662 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:28,663 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,664 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,665 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,665 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,674 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,676 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,677 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 127.6ms
2025-12-10 11:53:28,678 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 126.0ms
2025-12-10 11:53:28,679 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,680 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 128.6ms
2025-12-10 11:53:28,682 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,683 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.3ms
2025-12-10 11:53:28,684 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,686 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,686 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,686 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,686 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.7ms
2025-12-10 11:53:28,687 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,688 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,689 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.6ms
2025-12-10 11:53:28,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,691 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,694 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,695 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:28,695 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:28,695 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,706 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:28,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:28,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:28,715 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,715 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,715 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,716 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,717 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,719 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:28,723 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:28,723 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:28,723 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:28,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:28,762 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,762 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,782 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,782 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:28,782 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,786 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:28,787 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:28,788 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:28,792 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:28,793 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 128.7ms
2025-12-10 11:53:28,796 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:28,796 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:28,800 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,801 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,804 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:28,804 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:28,814 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:28,814 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:28,814 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,815 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,815 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:28,815 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,817 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:28,817 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:28,817 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:28,821 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:28,822 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,823 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 128.5ms
2025-12-10 11:53:28,824 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:28,824 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 136.3ms
2025-12-10 11:53:28,825 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 134.2ms
2025-12-10 11:53:31,485 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:31,486 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:31,487 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.5ms
2025-12-10 11:53:31,487 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:31,488 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:31,488 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.9ms
2025-12-10 11:53:31,488 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.5ms
2025-12-10 11:53:31,489 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.6ms
2025-12-10 11:53:31,492 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:31,493 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,493 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,494 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,495 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:31,495 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:31,496 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:31,496 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,496 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,500 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,502 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,502 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,514 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,523 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,524 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,524 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:31,525 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,526 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,526 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:31,526 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,526 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,526 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:31,528 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,529 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,529 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:31,581 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,589 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,594 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:31,596 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:31,602 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:31,605 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 112.7ms
2025-12-10 11:53:31,605 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:31,607 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 112.1ms
2025-12-10 11:53:31,610 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,611 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,611 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.9ms
2025-12-10 11:53:31,613 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.0ms
2025-12-10 11:53:31,613 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,614 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,616 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.9ms
2025-12-10 11:53:31,616 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.9ms
2025-12-10 11:53:31,617 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,619 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,620 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,622 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:31,622 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,623 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,624 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,626 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,626 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:31,627 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,627 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,629 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,629 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,650 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 154.3ms
2025-12-10 11:53:31,654 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 158.4ms
2025-12-10 11:53:31,657 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,657 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,657 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,660 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,660 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,660 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,661 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,662 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,662 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,664 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,665 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,665 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,709 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:31,717 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:31,721 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:31,726 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:31,729 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:31,730 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 113.0ms
2025-12-10 11:53:31,735 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:31,736 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,737 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 115.1ms
2025-12-10 11:53:31,737 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:53:31,739 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:31,739 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:31,741 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,742 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 115.8ms
2025-12-10 11:53:31,742 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,745 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 118.9ms
2025-12-10 11:53:31,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,747 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.1ms
2025-12-10 11:53:31,749 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,751 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,751 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.3ms
2025-12-10 11:53:31,752 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,752 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,752 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,752 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,753 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,753 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.2ms
2025-12-10 11:53:31,758 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,759 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,759 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,762 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,763 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,763 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,776 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,776 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,776 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,782 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,783 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,783 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,787 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,788 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,788 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,789 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,790 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,790 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,847 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 107.0ms
2025-12-10 11:53:31,853 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,854 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.9ms
2025-12-10 11:53:31,857 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 106.2ms
2025-12-10 11:53:31,857 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,858 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,858 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,859 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,859 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,861 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 102.9ms
2025-12-10 11:53:31,861 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 100.1ms
2025-12-10 11:53:31,863 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.5ms
2025-12-10 11:53:31,867 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,868 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,869 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.1ms
2025-12-10 11:53:31,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,870 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.7ms
2025-12-10 11:53:31,870 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,870 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,873 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,876 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,878 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,879 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:31,879 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:31,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,889 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,890 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,890 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:31,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:31,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:31,901 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,901 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,901 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,903 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,903 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,903 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:31,906 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:31,906 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:31,907 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:31,947 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:31,955 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:31,956 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:31,958 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:31,960 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:31,960 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:31,972 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:31,972 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:31,978 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:31,979 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:31,985 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:31,985 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:31,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:31,989 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:31,989 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:31,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:31,996 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:31,996 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:31,997 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:31,997 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:31,997 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:31,998 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:31,998 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:31,998 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:32,001 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 144.2ms
2025-12-10 11:53:32,005 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,007 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:32,009 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:32,009 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,010 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,010 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,013 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 139.1ms
2025-12-10 11:53:32,013 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 143.6ms
2025-12-10 11:53:32,014 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 135.3ms
2025-12-10 11:53:32,018 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,019 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:53:32,019 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,021 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,021 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.7ms
2025-12-10 11:53:32,022 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.3ms
2025-12-10 11:53:32,023 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,024 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,024 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,026 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,027 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,029 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,029 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,031 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,031 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,032 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,032 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,032 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,044 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,044 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,044 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,050 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,051 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,051 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,054 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,054 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,055 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,057 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,057 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,057 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,094 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:32,105 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:32,108 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:32,110 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:32,111 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:32,111 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:32,122 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:32,122 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:32,127 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:32,127 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:32,134 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:32,135 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:32,135 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,136 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:32,136 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:32,145 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:32,145 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:32,145 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,146 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:32,147 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:32,147 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,150 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:32,150 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:32,150 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,151 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:32,152 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 141.6ms
2025-12-10 11:53:32,156 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,156 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.8ms
2025-12-10 11:53:32,157 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,159 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 132.3ms
2025-12-10 11:53:32,160 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,160 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:32,161 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,161 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,165 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,165 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,166 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 142.8ms
2025-12-10 11:53:32,166 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:53:32,168 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 140.6ms
2025-12-10 11:53:32,171 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,172 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,172 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,172 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,174 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,175 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,175 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.1ms
2025-12-10 11:53:32,176 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.1ms
2025-12-10 11:53:32,178 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,179 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,179 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,179 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,179 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,182 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,198 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,198 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,199 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,204 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,204 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,204 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,209 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,209 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,210 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,212 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,212 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,213 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,256 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:32,261 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:32,265 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:32,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:32,269 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:32,276 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:32,278 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:32,278 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:32,287 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:32,288 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:32,294 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:32,295 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:32,295 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,296 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:32,296 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:32,296 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,298 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:32,298 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:32,307 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:32,307 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:32,307 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,310 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,310 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 150.8ms
2025-12-10 11:53:32,312 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:32,312 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:32,312 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,314 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,315 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,315 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 144.8ms
2025-12-10 11:53:32,316 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:32,319 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,321 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,321 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 142.8ms
2025-12-10 11:53:32,322 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,322 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,324 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,325 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:53:32,328 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,328 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,329 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,332 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 3.2ms
2025-12-10 11:53:32,333 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 150.1ms
2025-12-10 11:53:32,335 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,337 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,337 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,343 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,343 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.8ms
2025-12-10 11:53:32,346 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,346 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:32,347 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:32,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,354 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,360 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,360 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,360 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,370 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:32,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:32,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:32,374 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,375 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,375 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:32,375 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,375 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,376 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,389 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:32,389 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:32,390 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:32,429 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:32,440 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:32,443 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:32,444 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:32,444 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:32,450 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:32,457 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:32,458 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:32,465 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:32,465 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:32,465 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,467 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:32,467 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:32,475 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:32,475 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:32,482 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:32,482 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:32,482 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,563 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:32,565 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:32,565 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,565 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:32,566 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 245.2ms
2025-12-10 11:53:32,567 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:32,567 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:32,568 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:32,569 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,571 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 241.4ms
2025-12-10 11:53:32,574 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:32,575 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 239.0ms
2025-12-10 11:53:32,575 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:32,576 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 230.0ms
2025-12-10 11:53:35,753 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/edf3437b-83ef-427c-97e0-299415d50a38/
2025-12-10 11:53:35,755 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/1bc07807-3cd2-42f4-8ef0-20dc48b2c329/
2025-12-10 11:53:35,755 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/59753cb5-5480-4034-baed-117f8531be02/
2025-12-10 11:53:35,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/edf3437b-83ef-427c-97e0-299415d50a38/ 200 2.3ms
2025-12-10 11:53:35,756 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/a6942632-d39b-4660-8207-0aedfb42d17d/
2025-12-10 11:53:35,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/1bc07807-3cd2-42f4-8ef0-20dc48b2c329/ 200 2.2ms
2025-12-10 11:53:35,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/59753cb5-5480-4034-baed-117f8531be02/ 200 2.0ms
2025-12-10 11:53:35,758 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/a6942632-d39b-4660-8207-0aedfb42d17d/ 200 1.4ms
2025-12-10 11:53:35,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/edf3437b-83ef-427c-97e0-299415d50a38/
2025-12-10 11:53:35,761 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:35,761 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:35,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,763 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/1bc07807-3cd2-42f4-8ef0-20dc48b2c329/
2025-12-10 11:53:35,764 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/a6942632-d39b-4660-8207-0aedfb42d17d/
2025-12-10 11:53:35,764 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/59753cb5-5480-4034-baed-117f8531be02/
2025-12-10 11:53:35,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:35,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:35,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:35,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:35,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,768 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:35,769 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:35,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,777 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:35,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:35,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:35,789 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,789 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:35,789 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/edf3437b-83ef-427c-97e0-299415d50a38/
2025-12-10 11:53:35,790 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,790 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:35,790 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/59753cb5-5480-4034-baed-117f8531be02/
2025-12-10 11:53:35,791 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,791 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:35,791 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/1bc07807-3cd2-42f4-8ef0-20dc48b2c329/
2025-12-10 11:53:35,794 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,794 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:35,794 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/a6942632-d39b-4660-8207-0aedfb42d17d/
2025-12-10 11:53:35,848 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,849 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,850 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,851 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,858 - app.modules.rbac.presentation.endpoints_permisos - INFO - Solicitud PUT /permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/edf3437b-83ef-427c-97e0-299415d50a38/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para crear/actualizar
2025-12-10 11:53:35,858 - app.modules.rbac.application.services.permiso_service - INFO - Intentando asignar/actualizar permiso para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Rol: dc3fa438-f6fa-493c-8907-180624379cd3, Menú: edf3437b-83ef-427c-97e0-299415d50a38
2025-12-10 11:53:35,858 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,859 - app.modules.rbac.presentation.endpoints_permisos - INFO - Solicitud PUT /permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/1bc07807-3cd2-42f4-8ef0-20dc48b2c329/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para crear/actualizar
2025-12-10 11:53:35,859 - app.modules.rbac.application.services.permiso_service - INFO - Intentando asignar/actualizar permiso para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Rol: dc3fa438-f6fa-493c-8907-180624379cd3, Menú: 1bc07807-3cd2-42f4-8ef0-20dc48b2c329
2025-12-10 11:53:35,859 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,860 - app.modules.rbac.presentation.endpoints_permisos - INFO - Solicitud PUT /permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/59753cb5-5480-4034-baed-117f8531be02/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para crear/actualizar
2025-12-10 11:53:35,860 - app.modules.rbac.application.services.permiso_service - INFO - Intentando asignar/actualizar permiso para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Rol: dc3fa438-f6fa-493c-8907-180624379cd3, Menú: 59753cb5-5480-4034-baed-117f8531be02
2025-12-10 11:53:35,861 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,861 - app.modules.rbac.presentation.endpoints_permisos - INFO - Solicitud PUT /permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/a6942632-d39b-4660-8207-0aedfb42d17d/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para crear/actualizar
2025-12-10 11:53:35,862 - app.modules.rbac.application.services.permiso_service - INFO - Intentando asignar/actualizar permiso para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Rol: dc3fa438-f6fa-493c-8907-180624379cd3, Menú: a6942632-d39b-4660-8207-0aedfb42d17d
2025-12-10 11:53:35,862 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,867 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Rol ID: dc3fa438-f6fa-493c-8907-180624379cd3, Rol cliente_id (raw): 3D34486F-05A9-4ACB-8590-F76CDE7A748A (tipo: <class 'str'>), Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a (tipo: <class 'uuid.UUID'>), Codigo_rol: None
2025-12-10 11:53:35,868 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Después de normalización - Rol cliente_id: 3d34486f-05a9-4acb-8590-f76cde7a748a, Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a, Es rol sistema: False
2025-12-10 11:53:35,868 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Validación exitosa - Rol dc3fa438-f6fa-493c-8907-180624379cd3 es rol del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,875 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Rol ID: dc3fa438-f6fa-493c-8907-180624379cd3, Rol cliente_id (raw): 3D34486F-05A9-4ACB-8590-F76CDE7A748A (tipo: <class 'str'>), Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a (tipo: <class 'uuid.UUID'>), Codigo_rol: None
2025-12-10 11:53:35,875 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Después de normalización - Rol cliente_id: 3d34486f-05a9-4acb-8590-f76cde7a748a, Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a, Es rol sistema: False
2025-12-10 11:53:35,875 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Validación exitosa - Rol dc3fa438-f6fa-493c-8907-180624379cd3 es rol del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,879 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Rol ID: dc3fa438-f6fa-493c-8907-180624379cd3, Rol cliente_id (raw): 3D34486F-05A9-4ACB-8590-F76CDE7A748A (tipo: <class 'str'>), Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a (tipo: <class 'uuid.UUID'>), Codigo_rol: None
2025-12-10 11:53:35,879 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Después de normalización - Rol cliente_id: 3d34486f-05a9-4acb-8590-f76cde7a748a, Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a, Es rol sistema: False
2025-12-10 11:53:35,880 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Validación exitosa - Rol dc3fa438-f6fa-493c-8907-180624379cd3 es rol del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,886 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Rol ID: dc3fa438-f6fa-493c-8907-180624379cd3, Rol cliente_id (raw): 3D34486F-05A9-4ACB-8590-F76CDE7A748A (tipo: <class 'str'>), Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a (tipo: <class 'uuid.UUID'>), Codigo_rol: None
2025-12-10 11:53:35,886 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Después de normalización - Rol cliente_id: 3d34486f-05a9-4acb-8590-f76cde7a748a, Cliente contexto: 3d34486f-05a9-4acb-8590-f76cde7a748a, Es rol sistema: False
2025-12-10 11:53:35,886 - app.modules.rbac.application.services.permiso_service - INFO - [VALIDAR_ROL] Validación exitosa - Rol dc3fa438-f6fa-493c-8907-180624379cd3 es rol del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,903 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú encontrado usando query RAW: 1bc07807-3cd2-42f4-8ef0-20dc48b2c329
2025-12-10 11:53:35,905 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,905 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú encontrado usando query RAW: edf3437b-83ef-427c-97e0-299415d50a38
2025-12-10 11:53:35,905 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,907 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú encontrado usando query RAW: a6942632-d39b-4660-8207-0aedfb42d17d
2025-12-10 11:53:35,907 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,908 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú encontrado usando query RAW: 59753cb5-5480-4034-baed-117f8531be02
2025-12-10 11:53:35,908 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,914 - app.modules.rbac.application.services.permiso_service - INFO - Actualizando permiso existente ID 2BF491C6-5CAF-499A-96AE-1FADBA68F026 para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,914 - app.modules.rbac.application.services.permiso_service - INFO - No hay cambios en los permisos para ID 2BF491C6-5CAF-499A-96AE-1FADBA68F026
2025-12-10 11:53:35,914 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,915 - app.modules.rbac.application.services.permiso_service - INFO - 🟢 Creando nuevo permiso - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Rol: dc3fa438-f6fa-493c-8907-180624379cd3, Menú: a6942632-d39b-4660-8207-0aedfb42d17d
2025-12-10 11:53:35,916 - app.modules.rbac.application.services.permiso_service - INFO - Actualizando permiso existente ID E6F08C0C-FF35-47E8-AAEC-B5C180341C79 para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,917 - app.modules.rbac.application.services.permiso_service - INFO - No hay cambios en los permisos para ID E6F08C0C-FF35-47E8-AAEC-B5C180341C79
2025-12-10 11:53:35,917 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,919 - app.modules.rbac.application.services.permiso_service - INFO - Actualizando permiso existente ID 03684219-E531-47E1-B3CF-0AE5F2AF9509 para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,919 - app.modules.rbac.application.services.permiso_service - INFO - No hay cambios en los permisos para ID 03684219-E531-47E1-B3CF-0AE5F2AF9509
2025-12-10 11:53:35,919 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:35,928 - app.modules.rbac.presentation.endpoints_permisos - INFO - Permiso para Rol dc3fa438-f6fa-493c-8907-180624379cd3 y Menú 59753cb5-5480-4034-baed-117f8531be02 gestionado exitosamente en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a.
2025-12-10 11:53:35,931 - app.modules.rbac.presentation.endpoints_permisos - INFO - Permiso para Rol dc3fa438-f6fa-493c-8907-180624379cd3 y Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 gestionado exitosamente en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a.
2025-12-10 11:53:35,931 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/59753cb5-5480-4034-baed-117f8531be02/ 200 166.6ms
2025-12-10 11:53:35,933 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/1bc07807-3cd2-42f4-8ef0-20dc48b2c329/ 200 169.5ms
2025-12-10 11:53:35,933 - app.modules.rbac.presentation.endpoints_permisos - INFO - Permiso para Rol dc3fa438-f6fa-493c-8907-180624379cd3 y Menú edf3437b-83ef-427c-97e0-299415d50a38 gestionado exitosamente en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a.
2025-12-10 11:53:35,934 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/edf3437b-83ef-427c-97e0-299415d50a38/ 200 175.5ms
2025-12-10 11:53:35,936 - app.modules.rbac.application.services.permiso_service - INFO - Permiso creado exitosamente con ID E900C9C7-89B0-4607-9940-7699AD775F84 para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:35,937 - app.modules.rbac.presentation.endpoints_permisos - INFO - Permiso para Rol dc3fa438-f6fa-493c-8907-180624379cd3 y Menú a6942632-d39b-4660-8207-0aedfb42d17d gestionado exitosamente en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a.
2025-12-10 11:53:35,938 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/menus/a6942632-d39b-4660-8207-0aedfb42d17d/ 200 174.6ms
2025-12-10 11:53:37,594 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:37,596 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.5ms
2025-12-10 11:53:37,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:37,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:37,597 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:37,597 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.5ms
2025-12-10 11:53:37,598 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.5ms
2025-12-10 11:53:37,598 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.4ms
2025-12-10 11:53:37,601 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:37,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,604 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:37,605 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:37,606 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:37,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,608 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,608 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,610 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,610 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,630 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,630 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,630 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:37,632 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,632 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,632 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:37,633 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,633 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,633 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:37,633 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,633 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,633 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:37,683 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,689 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:37,692 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,697 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:37,702 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:37,704 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 102.9ms
2025-12-10 11:53:37,704 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:37,709 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,711 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,711 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 106.8ms
2025-12-10 11:53:37,712 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.7ms
2025-12-10 11:53:37,712 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.3ms
2025-12-10 11:53:37,715 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,715 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,716 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,716 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,718 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:37,719 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,719 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,721 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:37,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,723 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,723 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.4ms
2025-12-10 11:53:37,724 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.9ms
2025-12-10 11:53:37,728 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,729 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,729 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,731 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,731 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,731 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,742 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 138.1ms
2025-12-10 11:53:37,742 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 136.9ms
2025-12-10 11:53:37,745 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,745 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,745 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,752 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,752 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,752 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,754 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,754 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,754 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,757 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,758 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,758 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,759 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,759 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,760 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,801 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:37,808 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:37,813 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:37,816 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:37,820 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:37,821 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 104.9ms
2025-12-10 11:53:37,825 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,825 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.9ms
2025-12-10 11:53:37,827 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:37,828 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:37,828 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:37,829 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,829 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 101.5ms
2025-12-10 11:53:37,829 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,829 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,829 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,831 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 101.0ms
2025-12-10 11:53:37,832 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 117.3ms
2025-12-10 11:53:37,836 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,836 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-10 11:53:37,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,837 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.1ms
2025-12-10 11:53:37,839 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.4ms
2025-12-10 11:53:37,840 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,842 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,842 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,845 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,845 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,845 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,847 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,848 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,848 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,859 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,859 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,859 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,863 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,863 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,864 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,867 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,868 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,868 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,870 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,870 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,870 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,874 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,874 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,874 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,923 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 93.2ms
2025-12-10 11:53:37,926 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,929 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.0ms
2025-12-10 11:53:37,932 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,934 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,936 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,938 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 98.2ms
2025-12-10 11:53:37,943 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,944 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:37,945 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 101.0ms
2025-12-10 11:53:37,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,948 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,952 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,952 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.7ms
2025-12-10 11:53:37,953 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 106.0ms
2025-12-10 11:53:37,954 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,956 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,956 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,960 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,961 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.9ms
2025-12-10 11:53:37,963 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,963 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,963 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,965 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,966 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:37,966 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:37,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,968 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:37,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:37,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:37,982 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,982 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,982 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:37,986 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,986 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,986 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:37,990 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:37,990 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:37,991 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:38,022 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:38,030 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,030 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,038 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:38,041 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:38,042 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,042 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:38,042 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,043 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,043 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,051 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,052 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:38,052 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,053 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,053 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,058 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,058 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,063 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,064 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 131.9ms
2025-12-10 11:53:38,067 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,068 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.8ms
2025-12-10 11:53:38,069 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,071 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:38,071 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,072 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,072 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:38,072 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,073 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,073 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:38,074 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,074 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,076 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 128.2ms
2025-12-10 11:53:38,080 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,081 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-10 11:53:38,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,084 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,089 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:38,091 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,091 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 126.5ms
2025-12-10 11:53:38,093 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.4ms
2025-12-10 11:53:38,095 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,096 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.9ms
2025-12-10 11:53:38,097 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,099 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.2ms
2025-12-10 11:53:38,099 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,099 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,100 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,100 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,101 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,106 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,107 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,107 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,117 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,117 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,117 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,128 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,128 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,128 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,132 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,132 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,133 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,156 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:38,172 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:38,173 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,173 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,181 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:38,184 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:38,185 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,185 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:38,185 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,187 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,187 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,196 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,196 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,204 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,204 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,209 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,209 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:38,209 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,210 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,210 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.6ms
2025-12-10 11:53:38,214 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,214 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:38,214 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,215 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,216 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.9ms
2025-12-10 11:53:38,218 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,218 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:38,218 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,219 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:38,219 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,220 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,221 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,221 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,222 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 138.3ms
2025-12-10 11:53:38,227 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.9ms
2025-12-10 11:53:38,230 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:38,231 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,231 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,232 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,233 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 133.5ms
2025-12-10 11:53:38,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,235 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,235 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,238 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 132.3ms
2025-12-10 11:53:38,241 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,242 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.6ms
2025-12-10 11:53:38,245 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,245 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:53:38,246 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,246 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,251 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,252 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,252 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,253 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,253 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,253 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,254 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,254 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,254 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,263 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,263 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,264 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,265 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,265 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,265 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,271 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,271 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,272 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,276 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,276 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,276 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,303 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:38,314 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:38,319 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:38,320 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,320 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,331 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:38,332 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,332 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,336 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,336 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:38,336 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,348 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,348 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,351 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,351 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:38,351 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,354 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,354 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:38,354 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,356 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,357 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.8ms
2025-12-10 11:53:38,361 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,362 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,362 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,362 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:38,363 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,363 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 133.2ms
2025-12-10 11:53:38,363 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.5ms
2025-12-10 11:53:38,366 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,370 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,371 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,371 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.6ms
2025-12-10 11:53:38,371 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 126.4ms
2025-12-10 11:53:38,376 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,379 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,380 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.8ms
2025-12-10 11:53:38,380 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,382 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 129.5ms
2025-12-10 11:53:38,384 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,390 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,391 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:53:38,394 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,394 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:38,395 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:38,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,403 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,403 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,403 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:38,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:38,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:38,411 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,411 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,411 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,414 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,414 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,414 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:38,420 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:38,420 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:38,420 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:38,457 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:38,463 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:38,464 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:38,472 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,472 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,482 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,482 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,489 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:38,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:38,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:38,496 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,497 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:38,497 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,502 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,502 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:38,503 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,504 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:38,505 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:38,505 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:38,506 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:38,513 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,514 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 148.1ms
2025-12-10 11:53:38,519 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:38,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 135.9ms
2025-12-10 11:53:38,520 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:38,520 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:38,520 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:38,521 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:38,523 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 147.8ms
2025-12-10 11:53:38,529 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:38,530 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 135.7ms
2025-12-10 11:53:44,494 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 11:53:44,495 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.1ms
2025-12-10 11:53:44,496 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 11:53:44,498 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 11:53:44,498 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 11:53:44,498 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 3.2ms
2025-12-10 11:53:44,500 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.2ms
2025-12-10 11:53:44,501 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.2ms
2025-12-10 11:53:44,502 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 11:53:44,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:44,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:44,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,508 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 11:53:44,509 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 11:53:44,509 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:44,510 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:44,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,511 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:44,511 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:44,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,514 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 11:53:44,514 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:44,514 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:44,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,528 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,528 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,533 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:44,533 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:44,533 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:44,538 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:44,539 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:44,539 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 11:53:44,539 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:44,539 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:44,539 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 11:53:44,542 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:44,542 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:44,542 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 11:53:44,545 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:44,545 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:44,545 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 11:53:44,593 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,596 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,598 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,600 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,603 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 11:53:44,603 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,605 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:53:44,605 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:53:44,605 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,607 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 11:53:44,607 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,609 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:53:44,609 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:53:44,609 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,615 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:44,616 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 11:53:44,617 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 109.3ms
2025-12-10 11:53:44,618 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:44,619 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 11:53:44,619 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,621 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 112.5ms
2025-12-10 11:53:44,622 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:44,631 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 11:53:44,631 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 11:53:44,632 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 11:53:44,633 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 129.6ms
2025-12-10 11:53:44,635 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 11:53:44,635 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 11:53:44,636 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 11:53:44,636 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 121.4ms
2025-12-10 11:53:45,500 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 11:53:45,500 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.6ms
2025-12-10 11:53:45,502 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 11:53:45,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,507 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 11:53:45,508 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 1.4ms
2025-12-10 11:53:45,512 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 11:53:45,513 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,513 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,526 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,526 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,526 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 11:53:45,533 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,533 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,533 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 11:53:45,534 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 11:53:45,534 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 11:53:45,535 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 11:53:45,540 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 11:53:45,540 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 11:53:45,541 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 29.1ms
2025-12-10 11:53:45,544 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 11:53:45,555 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 4D619213-CA4E-4573-B805-741844B9AA8B, Rotación: True
2025-12-10 11:53:45,561 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 11:53:45,561 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 11:53:45,561 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 4D619213-CA4E-4573-B805-741844B9AA8B
2025-12-10 11:53:45,563 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 11:53:45,571 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 11:53:45,572 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 68.5ms
2025-12-10 11:53:45,576 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-10 11:53:45,576 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.5ms
2025-12-10 11:53:45,577 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-10 11:53:45,579 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,579 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,588 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,588 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,588 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/me/
2025-12-10 11:53:45,592 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: admin_tech
2025-12-10 11:53:45,592 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 4, Super Admin: False, Type: tenant_admin
2025-12-10 11:53:45,592 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 para cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A
2025-12-10 11:53:45,592 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,603 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 con 1 roles activos
2025-12-10 11:53:45,603 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: admin_tech, Type: tenant_admin, Level: 4, Super Admin: False, Roles: 1
2025-12-10 11:53:45,604 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 25.5ms
2025-12-10 11:53:45,627 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:45,628 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.1ms
2025-12-10 11:53:45,629 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:45,641 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 11.2ms
2025-12-10 11:53:45,643 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/all-structured/
2025-12-10 11:53:45,652 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/all-structured/ 200 8.7ms
2025-12-10 11:53:45,652 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:45,655 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,662 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:45,665 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,670 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 11:53:45,670 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 11:53:45,670 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 11:53:45,671 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 11:53:45,671 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 11:53:45,672 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,672 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 4.6ms
2025-12-10 11:53:45,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 4.4ms
2025-12-10 11:53:45,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 4.0ms
2025-12-10 11:53:45,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 3.8ms
2025-12-10 11:53:45,678 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 11:53:45,679 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,679 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,683 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 11:53:45,683 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 11:53:45,685 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,685 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,695 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,695 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,706 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,714 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,714 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,715 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:45,717 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,717 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,717 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:45,720 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,720 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,720 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 11:53:45,722 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,722 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,722 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 11:53:45,725 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,725 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,725 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 11:53:45,725 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,726 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,726 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 11:53:45,785 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,794 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,804 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,804 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,807 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,809 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,813 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 11:53:45,813 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,813 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 11:53:45,814 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 11:53:45,816 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 153.9ms
2025-12-10 11:53:45,817 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 147.2ms
2025-12-10 11:53:45,819 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 11:53:45,819 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,820 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 11:53:45,821 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,822 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 11:53:45,823 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,824 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,827 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:53:45,827 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:53:45,827 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,828 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 176.0ms
2025-12-10 11:53:45,834 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:45,835 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:45,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:45,838 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Administrador/permisos/
2025-12-10 11:53:45,839 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.4ms
2025-12-10 11:53:45,840 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:45,840 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,840 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 11:53:45,841 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Administrador/permisos/ 200 3.4ms
2025-12-10 11:53:45,842 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,842 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,845 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,845 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 11:53:45,846 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:45,846 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:45,847 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:45,848 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 169.5ms
2025-12-10 11:53:45,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,850 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,851 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,853 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 7.1ms
2025-12-10 11:53:45,853 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 6.5ms
2025-12-10 11:53:45,854 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 171.7ms
2025-12-10 11:53:45,857 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,859 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 11:53:45,860 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,860 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,862 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:45,863 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,865 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,872 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,872 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,873 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 11:53:45,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,878 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 11:53:45,878 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 11:53:45,878 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 11:53:45,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,882 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,883 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 199.6ms
2025-12-10 11:53:45,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,885 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,888 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:45,889 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:45,889 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:45,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,891 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,891 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,891 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:45,896 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,896 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,896 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:45,902 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,903 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,903 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 11:53:45,905 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,905 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,905 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:45,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:45,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:45,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:45,922 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:45,922 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:45,922 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:45,942 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,959 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:53:45,959 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:53:45,959 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,968 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:45,972 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:45,979 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,980 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:45,986 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:45,988 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:45,988 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:45,990 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 150.0ms
2025-12-10 11:53:45,991 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 143.5ms
2025-12-10 11:53:45,996 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:45,996 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:45,998 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.3ms
2025-12-10 11:53:45,998 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.2ms
2025-12-10 11:53:46,000 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:46,003 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 11:53:46,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 141.2ms
2025-12-10 11:53:46,004 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,005 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,005 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 11:53:46,005 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 11:53:46,005 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 11:53:46,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,008 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,009 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,011 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 152.3ms
2025-12-10 11:53:46,012 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 190.1ms
2025-12-10 11:53:46,014 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,016 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.7ms
2025-12-10 11:53:46,017 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:46,023 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,023 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,024 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,035 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:46,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 147.8ms
2025-12-10 11:53:46,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,040 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,040 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,040 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,042 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,042 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,043 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,043 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,044 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.9ms
2025-12-10 11:53:46,046 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,046 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,046 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,052 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,052 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,052 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,073 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,073 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,073 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,105 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 101.1ms
2025-12-10 11:53:46,111 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,111 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,113 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,113 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,114 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.1ms
2025-12-10 11:53:46,114 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.2ms
2025-12-10 11:53:46,115 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.7ms
2025-12-10 11:53:46,115 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.7ms
2025-12-10 11:53:46,118 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 112.8ms
2025-12-10 11:53:46,119 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,120 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,120 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,120 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,121 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,134 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.4ms
2025-12-10 11:53:46,134 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.0ms
2025-12-10 11:53:46,135 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.9ms
2025-12-10 11:53:46,135 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.8ms
2025-12-10 11:53:46,135 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,135 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,143 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 121.1ms
2025-12-10 11:53:46,146 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,151 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,152 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,156 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,158 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.8ms
2025-12-10 11:53:46,158 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.8ms
2025-12-10 11:53:46,158 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.7ms
2025-12-10 11:53:46,159 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.6ms
2025-12-10 11:53:46,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,172 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,174 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,174 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,174 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,176 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,176 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,176 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,178 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,178 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,178 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,181 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 135.5ms
2025-12-10 11:53:46,181 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,182 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,182 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,187 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,188 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,188 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,195 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,195 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,195 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,197 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.0ms
2025-12-10 11:53:46,198 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.1ms
2025-12-10 11:53:46,198 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.0ms
2025-12-10 11:53:46,198 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.0ms
2025-12-10 11:53:46,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,215 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,227 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,227 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,227 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,253 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:46,255 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:46,259 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:46,261 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:46,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,274 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,276 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,279 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,279 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,286 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,286 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,289 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:46,297 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,297 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:46,297 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,301 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,302 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:46,302 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,303 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,304 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:46,304 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,305 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,305 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:46,305 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,305 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:46,307 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,307 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,314 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,317 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 196.9ms
2025-12-10 11:53:46,320 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,320 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,320 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,321 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,321 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,325 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,326 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:46,326 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,327 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:46,328 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:46,328 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,328 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,332 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:46,333 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 214.0ms
2025-12-10 11:53:46,334 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 214.0ms
2025-12-10 11:53:46,335 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 200.8ms
2025-12-10 11:53:46,338 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,339 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,340 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,340 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,342 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,343 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,345 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,345 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,345 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,345 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,346 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,348 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,348 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,348 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,352 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,353 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,353 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:46,354 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,355 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 207.5ms
2025-12-10 11:53:46,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,358 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,359 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,359 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,368 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,368 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,369 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,373 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,375 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,375 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,376 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 189.8ms
2025-12-10 11:53:46,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,382 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,383 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,383 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,384 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,387 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,387 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,387 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,399 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,400 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,400 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,402 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,402 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,416 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,416 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,417 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:46,438 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:46,452 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:46,458 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:46,459 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:46,461 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,462 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,468 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:46,471 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,473 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,481 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,482 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:46,482 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,485 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,485 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,490 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,493 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,493 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,497 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,497 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:46,497 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,500 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:46,506 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,506 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:46,506 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,508 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,508 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:46,509 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,509 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,509 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:46,509 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,512 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,513 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,514 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:46,514 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:46,519 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 199.2ms
2025-12-10 11:53:46,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 181.9ms
2025-12-10 11:53:46,523 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,524 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,525 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,529 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,529 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,530 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,533 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,534 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,535 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,535 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 193.4ms
2025-12-10 11:53:46,537 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:46,537 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:46,537 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,538 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 179.8ms
2025-12-10 11:53:46,538 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 199.7ms
2025-12-10 11:53:46,543 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,544 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,545 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,549 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:46,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:46,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,564 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,565 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 183.5ms
2025-12-10 11:53:46,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,567 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:46,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:46,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:46,573 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,574 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,574 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,574 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,574 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,574 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,606 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,606 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,606 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,606 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:46,607 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:46,607 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:46,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:46,647 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:46,655 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:46,657 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,657 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:46,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,668 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,668 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,674 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,674 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:46,674 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,677 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,677 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:46,678 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,678 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,678 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:46,679 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,679 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:46,679 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:46,686 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:46,688 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 164.6ms
2025-12-10 11:53:46,690 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:46,691 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 164.0ms
2025-12-10 11:53:46,693 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:46,693 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:46,693 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:46,693 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:46,695 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 151.7ms
2025-12-10 11:53:46,699 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:46,700 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 150.3ms
2025-12-10 11:53:53,761 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 11:53:53,762 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.9ms
2025-12-10 11:53:53,762 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 11:53:53,763 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.3ms
2025-12-10 11:53:53,766 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 11:53:53,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:53,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:53,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:53,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:53,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:53,770 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 11:53:53,771 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:53,771 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:53,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:53,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:53,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:53,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:53,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:53,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:53,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:53,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:53,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:53,785 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:53,785 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:53,785 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 11:53:53,787 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:53,787 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:53,787 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 11:53:53,817 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:53,818 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:53,821 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:53:53,822 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:53:53,822 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 11:53:53,822 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:53,823 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:53:53,824 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:53:53,824 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 11:53:53,824 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:53,831 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 11:53:53,831 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:53,832 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 11:53:53,832 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:53,841 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 11:53:53,841 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 11:53:53,841 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 11:53:53,842 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 11:53:53,842 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 11:53:53,842 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 11:53:53,843 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 72.4ms
2025-12-10 11:53:53,843 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 77.6ms
2025-12-10 11:53:55,010 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:55,012 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.1ms
2025-12-10 11:53:55,012 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:55,013 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.1ms
2025-12-10 11:53:55,013 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:55,014 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:55,014 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.6ms
2025-12-10 11:53:55,016 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:55,016 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.6ms
2025-12-10 11:53:55,016 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,016 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,020 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:55,021 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,021 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,024 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:55,025 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,026 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,028 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:55,028 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,028 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,037 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,045 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,045 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,045 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:55,048 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,048 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,049 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:55,049 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,049 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,049 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:53:55,051 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,051 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,052 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:53:55,095 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,102 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:55,106 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,111 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:55,115 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:55,115 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 100.3ms
2025-12-10 11:53:55,119 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:55,120 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,121 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,121 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.1ms
2025-12-10 11:53:55,123 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.9ms
2025-12-10 11:53:55,125 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 101.1ms
2025-12-10 11:53:55,127 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:55,127 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,128 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,133 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,137 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.5ms
2025-12-10 11:53:55,137 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.6ms
2025-12-10 11:53:55,141 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:53:55,141 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,142 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,142 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,145 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,146 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,147 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,153 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 133.3ms
2025-12-10 11:53:55,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,164 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 136.7ms
2025-12-10 11:53:55,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,168 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,168 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,168 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,172 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,172 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,172 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,174 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,174 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,175 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,178 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,178 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,178 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,219 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:55,227 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:55,229 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:53:55,236 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:55,236 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 104.6ms
2025-12-10 11:53:55,237 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:53:55,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,245 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:55,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:53:55,246 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:53:55,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 119.2ms
2025-12-10 11:53:55,248 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,248 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 107.1ms
2025-12-10 11:53:55,249 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,249 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,250 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,252 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,253 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:55,255 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:53:55,256 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,257 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 111.2ms
2025-12-10 11:53:55,257 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:53:55,258 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,259 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,260 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,263 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,264 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,264 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,268 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,269 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.8ms
2025-12-10 11:53:55,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,270 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,272 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,273 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,273 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,274 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,284 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,284 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,284 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,289 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,290 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,290 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,293 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,293 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,293 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,301 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,301 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,302 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,370 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 121.5ms
2025-12-10 11:53:55,373 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 115.7ms
2025-12-10 11:53:55,375 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,377 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.7ms
2025-12-10 11:53:55,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,381 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.3ms
2025-12-10 11:53:55,383 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,385 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,388 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 126.2ms
2025-12-10 11:53:55,390 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 117.2ms
2025-12-10 11:53:55,394 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,395 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.7ms
2025-12-10 11:53:55,396 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,397 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.5ms
2025-12-10 11:53:55,398 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,402 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,405 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,406 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,406 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,415 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,415 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,415 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,417 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,417 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,417 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,420 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,421 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,421 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,426 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,427 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,427 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,430 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,431 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,431 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,465 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:55,470 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:55,478 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:55,478 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,479 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,484 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:55,486 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,486 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,497 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,497 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:55,497 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,499 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,499 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,503 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,504 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:55,504 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,515 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,515 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:53:55,515 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,517 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,517 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:53:55,517 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,518 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,518 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:55,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.8ms
2025-12-10 11:53:55,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 134.1ms
2025-12-10 11:53:55,525 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,527 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.5ms
2025-12-10 11:53:55,527 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,528 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,529 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.6ms
2025-12-10 11:53:55,530 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,530 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 132.4ms
2025-12-10 11:53:55,530 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,530 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,532 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,532 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,532 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,534 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:55,535 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,538 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,538 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 133.6ms
2025-12-10 11:53:55,539 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.5ms
2025-12-10 11:53:55,544 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,544 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,545 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,546 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,548 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.4ms
2025-12-10 11:53:55,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,552 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,553 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,553 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,563 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,563 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,563 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,568 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,568 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,568 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,571 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,572 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,572 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,581 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,581 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,582 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,616 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:55,619 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:55,623 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:55,626 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,626 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,634 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:55,636 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,636 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,642 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,643 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:55,643 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,651 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,651 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:55,651 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,653 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,653 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,662 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:53:55,662 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,666 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,666 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:55,667 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,667 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:53:55,667 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,668 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 138.0ms
2025-12-10 11:53:55,668 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 133.8ms
2025-12-10 11:53:55,672 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,673 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,674 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.0ms
2025-12-10 11:53:55,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.3ms
2025-12-10 11:53:55,676 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 133.4ms
2025-12-10 11:53:55,679 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,680 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,680 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,681 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,682 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,682 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,682 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,683 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,683 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,685 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,685 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:55,686 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:53:55,688 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 136.7ms
2025-12-10 11:53:55,690 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,695 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,696 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:55,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,700 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,702 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,702 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,712 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,713 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,713 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,717 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,717 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,717 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,720 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,720 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,721 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,725 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,725 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,725 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,763 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:55,769 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:55,770 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:55,774 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:55,776 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,776 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,783 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,783 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,787 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,787 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,793 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,793 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:55,795 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,795 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,795 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,800 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,800 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:55,800 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,803 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,803 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:53:55,803 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,806 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,806 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,806 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:53:55,807 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,808 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 129.7ms
2025-12-10 11:53:55,811 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,812 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,813 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 131.9ms
2025-12-10 11:53:55,813 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.1ms
2025-12-10 11:53:55,815 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,816 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,817 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,817 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,820 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 129.7ms
2025-12-10 11:53:55,820 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,821 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:53:55,821 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,823 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 122.2ms
2025-12-10 11:53:55,825 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,825 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,828 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.7ms
2025-12-10 11:53:55,829 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,831 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.4ms
2025-12-10 11:53:55,832 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,833 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,833 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,836 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:53:55,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:53:55,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:53:55,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:53:55,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:53:55,850 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,850 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,851 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,854 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,854 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,854 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,856 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,856 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,856 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:53:55,862 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:53:55,862 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:53:55,862 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:53:55,898 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:55,901 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:55,906 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:55,909 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:55,912 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,912 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,915 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,915 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,922 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:53:55,922 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:53:55,929 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,929 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:55,929 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,930 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:53:55,930 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:53:55,934 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,935 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:55,935 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,937 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:53:55,937 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:53:55,938 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,940 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:53:55,940 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:53:55,940 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:53:55,943 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,944 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 128.1ms
2025-12-10 11:53:55,944 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:55,947 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 121.8ms
2025-12-10 11:53:55,949 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:53:55,950 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:53:55,950 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 118.9ms
2025-12-10 11:53:55,951 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 115.9ms
2025-12-10 11:54:07,693 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:54:07,694 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 0.8ms
2025-12-10 11:54:07,695 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:54:07,695 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:54:07,697 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.8ms
2025-12-10 11:54:07,697 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.7ms
2025-12-10 11:54:07,697 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:54:07,700 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.9ms
2025-12-10 11:54:07,700 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:54:07,702 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,702 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,705 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:54:07,705 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:54:07,705 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,707 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,709 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,709 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,711 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:54:07,712 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,712 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,720 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,720 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,720 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,730 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,730 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,730 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:54:07,731 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,731 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,731 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:54:07,733 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,733 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,733 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 11:54:07,735 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,735 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,735 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 11:54:07,783 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:07,784 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,792 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:07,793 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,798 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:07,802 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:07,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 103.1ms
2025-12-10 11:54:07,807 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:07,809 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:07,809 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:07,810 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.1ms
2025-12-10 11:54:07,810 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:54:07,810 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 104.5ms
2025-12-10 11:54:07,813 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:07,814 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,814 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,817 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:07,817 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:07,819 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:07,819 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:07,819 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,820 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,823 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.0ms
2025-12-10 11:54:07,823 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.0ms
2025-12-10 11:54:07,826 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:07,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:07,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:07,908 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:07,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,913 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,913 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,914 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 208.6ms
2025-12-10 11:54:07,916 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,916 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,921 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 210.4ms
2025-12-10 11:54:07,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:07,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:07,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:07,929 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,930 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,930 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:07,932 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,932 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,933 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:07,936 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,936 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,937 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:07,938 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:07,939 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:07,939 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:07,985 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:54:07,992 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:54:07,996 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 11:54:07,999 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 11:54:08,003 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:54:08,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 191.2ms
2025-12-10 11:54:08,008 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:54:08,009 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,009 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 183.4ms
2025-12-10 11:54:08,009 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:54:08,012 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 11:54:08,013 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 11:54:08,014 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,014 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 196.4ms
2025-12-10 11:54:08,015 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,015 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,016 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 109.9ms
2025-12-10 11:54:08,017 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,018 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:54:08,022 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,023 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,024 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,024 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.4ms
2025-12-10 11:54:08,025 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,025 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,027 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 3.3ms
2025-12-10 11:54:08,028 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,030 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,030 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,032 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,033 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,033 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,049 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,050 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,050 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,053 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,053 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,053 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,059 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,059 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,059 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,061 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,061 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,061 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,128 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 114.7ms
2025-12-10 11:54:08,142 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,143 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.0ms
2025-12-10 11:54:08,144 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 121.3ms
2025-12-10 11:54:08,146 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,147 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,147 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,150 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,151 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.8ms
2025-12-10 11:54:08,153 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 121.6ms
2025-12-10 11:54:08,155 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,161 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,163 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.3ms
2025-12-10 11:54:08,165 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 135.7ms
2025-12-10 11:54:08,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,168 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,168 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,169 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,173 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,174 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:54:08,176 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,186 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,187 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,187 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,192 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,192 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,192 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,198 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,198 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,198 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,206 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,206 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,206 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,243 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:54:08,249 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:54:08,258 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:54:08,260 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:54:08,262 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,262 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,277 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,277 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,281 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,281 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:54:08,282 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,283 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,283 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,287 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,289 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:54:08,289 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,294 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,294 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 11:54:08,294 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,296 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,296 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 11:54:08,296 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,298 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:54:08,299 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 152.8ms
2025-12-10 11:54:08,300 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,302 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 146.2ms
2025-12-10 11:54:08,304 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,305 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.9ms
2025-12-10 11:54:08,307 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:54:08,308 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,309 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,309 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 141.8ms
2025-12-10 11:54:08,309 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 11:54:08,310 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,310 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,312 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.9ms
2025-12-10 11:54:08,316 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,316 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,317 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,320 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,321 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,321 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.8ms
2025-12-10 11:54:08,322 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.2ms
2025-12-10 11:54:08,326 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,326 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,330 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,330 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,345 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,345 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,345 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,347 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,347 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,348 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,351 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,351 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,351 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,354 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,354 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,354 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,391 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:54:08,399 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:54:08,404 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:54:08,407 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:54:08,408 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,408 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,415 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,415 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,424 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,424 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,430 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,431 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,434 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,434 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:54:08,435 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,437 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,438 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:54:08,438 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,439 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,439 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 11:54:08,441 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,443 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,443 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 11:54:08,443 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,445 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:54:08,446 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 137.1ms
2025-12-10 11:54:08,449 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,450 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 134.5ms
2025-12-10 11:54:08,450 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,451 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:54:08,454 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,454 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,456 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,456 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,457 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,459 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:54:08,459 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.1ms
2025-12-10 11:54:08,460 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 133.4ms
2025-12-10 11:54:08,461 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 135.6ms
2025-12-10 11:54:08,462 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,463 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,464 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,464 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,464 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,464 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,467 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,467 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,467 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.1ms
2025-12-10 11:54:08,469 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.0ms
2025-12-10 11:54:08,471 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,472 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,473 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,473 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,473 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,476 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,476 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,491 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,491 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,491 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,494 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,494 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,495 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,498 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,498 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,499 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,501 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,501 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,501 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:54:08,547 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:54:08,552 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:54:08,555 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,555 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,562 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:54:08,562 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,563 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,572 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,572 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,584 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,585 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:54:08,585 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,586 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,586 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,595 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,595 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:54:08,596 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,601 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,602 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 11:54:08,602 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,606 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,607 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,607 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 11:54:08,607 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,609 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 154.3ms
2025-12-10 11:54:08,610 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,611 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 149.4ms
2025-12-10 11:54:08,613 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,614 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:54:08,616 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,617 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,619 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 146.7ms
2025-12-10 11:54:08,619 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.5ms
2025-12-10 11:54:08,619 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,622 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,622 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,626 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,629 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,630 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 158.9ms
2025-12-10 11:54:08,630 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.2ms
2025-12-10 11:54:08,634 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,635 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,635 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,639 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,641 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.2ms
2025-12-10 11:54:08,644 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:08,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:08,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:08,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:08,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:08,660 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,660 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,660 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,664 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,664 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,664 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,667 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,667 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,667 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 11:54:08,669 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:08,670 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:08,670 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 11:54:08,732 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:54:08,733 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:54:08,734 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:54:08,738 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:54:08,742 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,742 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,749 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,749 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,755 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 11:54:08,756 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 11:54:08,760 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 11:54:08,761 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 11:54:08,767 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,767 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:54:08,767 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,770 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,770 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:54:08,770 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,772 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 11:54:08,772 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 11:54:08,772 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,774 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 11:54:08,774 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 11:54:08,775 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 11:54:08,779 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:54:08,780 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 161.1ms
2025-12-10 11:54:08,785 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,786 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 11:54:08,788 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 163.2ms
2025-12-10 11:54:08,790 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 156.3ms
2025-12-10 11:54:08,792 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 11:54:08,794 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 151.9ms
2025-12-10 11:54:12,669 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 11:54:12,670 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 11:54:12,671 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.8ms
2025-12-10 11:54:12,671 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 11:54:12,673 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 11:54:12,673 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.0ms
2025-12-10 11:54:12,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.5ms
2025-12-10 11:54:12,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.2ms
2025-12-10 11:54:12,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 11:54:12,678 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:12,678 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:12,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,681 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 11:54:12,682 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 11:54:12,682 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 11:54:12,684 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:12,684 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:12,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,686 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:12,686 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:12,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:12,688 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:12,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:12,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:12,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:12,718 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:12,718 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:12,718 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 11:54:12,720 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:12,720 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:12,721 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 11:54:12,722 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:12,722 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:12,722 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 11:54:12,723 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:12,723 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:12,723 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 11:54:12,772 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,773 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,774 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,775 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,781 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:54:12,782 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:54:12,782 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,784 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 11:54:12,784 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 11:54:12,784 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,785 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 11:54:12,786 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,786 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 11:54:12,786 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,790 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,793 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:12,793 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 11:54:12,794 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:12,795 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:12,795 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 11:54:12,796 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 115.2ms
2025-12-10 11:54:12,797 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 115.1ms
2025-12-10 11:54:12,802 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 11:54:12,802 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 11:54:12,802 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 11:54:12,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 126.3ms
2025-12-10 11:54:12,805 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 11:54:12,805 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 11:54:12,805 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 11:54:12,806 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 123.5ms
2025-12-10 11:54:26,258 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 11:54:26,259 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/ 200 0.5ms
2025-12-10 11:54:26,261 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 11:54:26,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 11:54:26,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 11:54:26,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:26,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:26,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:26,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 11:54:26,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 11:54:26,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 11:54:26,271 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:26,271 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 11:54:26,271 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 11:54:26,287 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 11:54:26,294 - app.modules.users.presentation.endpoints - INFO - Solicitud PUT /usuarios/1c6da055-9333-49a1-a726-1a358368cc55/ recibida para actualizar en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 11:54:26,294 - app.core.application.base_service - ERROR - ERROR INESPERADO en actualizar_usuario: UsuarioService.actualizar_usuario() got an unexpected keyword argument 'update_data'
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: UsuarioService.actualizar_usuario() got an unexpected keyword argument 'update_data'
2025-12-10 11:54:26,319 - app.modules.users.presentation.endpoints - WARNING - Error de negocio al actualizar usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error interno del servidor en actualizar_usuario
2025-12-10 11:54:26,320 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/ 500 59.3ms
2025-12-10 13:18:05,878 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 13:18:05,880 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.6ms
2025-12-10 13:18:05,882 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 13:18:05,882 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 0.9ms
2025-12-10 13:18:05,884 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 13:18:05,885 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:05,885 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:05,885 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:05,885 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:05,885 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:05,890 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 13:18:05,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:05,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:05,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:05,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:05,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:05,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:05,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:05,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:05,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:05,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:05,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:05,931 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:05,932 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:05,943 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 13:18:05,943 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:05,944 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 13:18:05,945 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 13:18:05,945 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 13:18:05,946 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 13:18:05,946 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:05,946 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 13:18:05,952 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 13:18:05,953 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 62.6ms
2025-12-10 13:18:05,963 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 13:18:05,967 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 13:18:05,974 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 13:18:05,986 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 3F2E7C5B-5B1B-419D-ADC4-145708C4D231, Rotación: True
2025-12-10 13:18:05,994 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 13:18:05,994 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 13:18:05,995 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 3F2E7C5B-5B1B-419D-ADC4-145708C4D231
2025-12-10 13:18:05,995 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 13:18:06,016 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 13:18:06,017 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 132.9ms
2025-12-10 13:18:06,021 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-10 13:18:06,021 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.4ms
2025-12-10 13:18:06,022 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-10 13:18:06,023 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,023 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,033 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,033 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,033 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/me/
2025-12-10 13:18:06,036 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: admin_tech
2025-12-10 13:18:06,036 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 4, Super Admin: False, Type: tenant_admin
2025-12-10 13:18:06,036 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 para cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A
2025-12-10 13:18:06,037 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,046 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 con 1 roles activos
2025-12-10 13:18:06,046 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: admin_tech, Type: tenant_admin, Level: 4, Super Admin: False, Roles: 1
2025-12-10 13:18:06,047 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 24.6ms
2025-12-10 13:18:06,072 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 13:18:06,072 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 0.8ms
2025-12-10 13:18:06,073 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 13:18:06,074 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.1ms
2025-12-10 13:18:06,075 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/all-structured/
2025-12-10 13:18:06,075 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 13:18:06,076 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/all-structured/ 200 1.0ms
2025-12-10 13:18:06,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,082 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 13:18:06,082 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,083 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,083 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,083 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,083 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,085 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 13:18:06,087 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 13:18:06,087 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.7ms
2025-12-10 13:18:06,087 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 13:18:06,089 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.7ms
2025-12-10 13:18:06,090 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.4ms
2025-12-10 13:18:06,090 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 13:18:06,091 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,091 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,091 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,094 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 4.3ms
2025-12-10 13:18:06,096 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 13:18:06,097 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,097 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,097 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,097 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,097 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,098 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 13:18:06,100 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,100 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,101 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,101 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,107 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,107 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,107 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 13:18:06,110 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,110 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,110 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,114 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,114 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,114 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 13:18:06,120 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,120 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,121 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 13:18:06,123 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,123 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,123 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 13:18:06,158 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,172 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,176 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,178 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,181 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 104.8ms
2025-12-10 13:18:06,184 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 13:18:06,184 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,184 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 13:18:06,185 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 13:18:06,186 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 13:18:06,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,189 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 106.9ms
2025-12-10 13:18:06,191 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,192 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.8ms
2025-12-10 13:18:06,193 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 13:18:06,193 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 13:18:06,193 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,196 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 13:18:06,196 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,197 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,198 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.9ms
2025-12-10 13:18:06,198 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,198 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,200 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,203 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Administrador/permisos/
2025-12-10 13:18:06,204 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,204 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Administrador/permisos/ 200 1.8ms
2025-12-10 13:18:06,205 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,205 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,205 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,207 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,207 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,207 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,210 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 13:18:06,211 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,214 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,216 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,216 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 13:18:06,217 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 118.8ms
2025-12-10 13:18:06,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,223 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 13:18:06,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,226 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,229 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,229 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,229 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 13:18:06,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,233 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,233 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,237 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 13:18:06,238 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 13:18:06,238 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 13:18:06,238 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,238 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,240 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,241 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 145.1ms
2025-12-10 13:18:06,244 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,244 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,245 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,245 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 13:18:06,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,252 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,252 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,255 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,255 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,255 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 13:18:06,265 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,265 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,266 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 13:18:06,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,277 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,277 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,277 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 13:18:06,297 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,318 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 13:18:06,322 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 136.4ms
2025-12-10 13:18:06,328 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,330 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 13:18:06,340 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 13:18:06,341 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 13:18:06,342 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,343 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 131.7ms
2025-12-10 13:18:06,343 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 145.1ms
2025-12-10 13:18:06,347 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,347 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 13:18:06,348 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,348 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,348 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,351 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,353 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,353 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 148.9ms
2025-12-10 13:18:06,354 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.6ms
2025-12-10 13:18:06,357 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,358 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,358 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,360 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,361 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,361 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,362 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,364 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 13:18:06,364 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,364 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.3ms
2025-12-10 13:18:06,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,370 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,370 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,370 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,372 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 13:18:06,372 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 13:18:06,372 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,382 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,382 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 13:18:06,384 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 161.1ms
2025-12-10 13:18:06,385 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:06,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,388 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,388 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,388 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,392 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,392 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,392 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,393 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,394 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,394 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,398 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,400 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,400 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,401 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 13:18:06,402 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 13:18:06,402 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 13:18:06,403 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 157.5ms
2025-12-10 13:18:06,450 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 13:18:06,452 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 13:18:06,457 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 96.5ms
2025-12-10 13:18:06,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,463 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,463 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,464 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.8ms
2025-12-10 13:18:06,464 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,465 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 13:18:06,465 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 13:18:06,465 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 3.0ms
2025-12-10 13:18:06,466 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.8ms
2025-12-10 13:18:06,466 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.9ms
2025-12-10 13:18:06,468 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 121.6ms
2025-12-10 13:18:06,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 112.5ms
2025-12-10 13:18:06,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 102.2ms
2025-12-10 13:18:06,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,472 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,472 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,473 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,474 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,475 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,475 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,479 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,483 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,484 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,485 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,487 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,487 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,487 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,488 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,488 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,488 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,490 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 6.0ms
2025-12-10 13:18:06,491 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.5ms
2025-12-10 13:18:06,491 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.4ms
2025-12-10 13:18:06,491 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.4ms
2025-12-10 13:18:06,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,514 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,514 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,515 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,517 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,517 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,517 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,518 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,518 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,520 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,521 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,521 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,522 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,523 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,524 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,524 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,525 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,525 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,525 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,566 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 13:18:06,584 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 13:18:06,585 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 13:18:06,590 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 13:18:06,594 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,594 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,604 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,604 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,607 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,607 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,615 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,615 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,620 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,620 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 13:18:06,620 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,621 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 137.8ms
2025-12-10 13:18:06,621 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.1ms
2025-12-10 13:18:06,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,626 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,629 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,629 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 13:18:06,629 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,629 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,630 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,632 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,632 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 13:18:06,633 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,635 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,635 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 13:18:06,635 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,637 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 13:18:06,639 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 171.0ms
2025-12-10 13:18:06,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,643 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,649 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:06,652 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 13:18:06,653 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 181.0ms
2025-12-10 13:18:06,653 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 13:18:06,654 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 182.5ms
2025-12-10 13:18:06,655 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 175.2ms
2025-12-10 13:18:06,657 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,660 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,660 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,661 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,661 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,663 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,668 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,668 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,668 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,669 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,681 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,681 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,681 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,683 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,683 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,683 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,693 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,693 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,694 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,694 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,694 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,694 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,696 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,697 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,697 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,732 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 13:18:06,737 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 13:18:06,747 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 13:18:06,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,756 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 13:18:06,756 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,756 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,767 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 13:18:06,767 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 13:18:06,771 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:06,771 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 13:18:06,772 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,772 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:06,772 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 13:18:06,773 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,773 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,774 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,778 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,778 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,788 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,788 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,792 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,793 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,798 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:06,800 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 13:18:06,800 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,801 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,801 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 13:18:06,801 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,803 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:06,804 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:06,804 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 178.0ms
2025-12-10 13:18:06,806 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:06,806 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 13:18:06,806 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,807 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 181.4ms
2025-12-10 13:18:06,807 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,807 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 13:18:06,807 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,810 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,811 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,811 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,815 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,815 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,816 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,816 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,816 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,816 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,820 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:06,820 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:06,821 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 177.9ms
2025-12-10 13:18:06,822 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 159.2ms
2025-12-10 13:18:06,825 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,828 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,828 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,828 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,835 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:06,836 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 13:18:06,837 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 180.5ms
2025-12-10 13:18:06,839 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 177.8ms
2025-12-10 13:18:06,842 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,843 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,843 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,848 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,849 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:06,850 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:06,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,853 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,853 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,853 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,853 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,857 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,857 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,857 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 13:18:06,862 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,863 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,863 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:06,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:06,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:06,872 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,872 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,873 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,883 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,883 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,883 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,887 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:06,888 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:06,888 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 13:18:06,928 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 13:18:06,934 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 13:18:06,940 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 13:18:06,943 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 13:18:06,949 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,949 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,953 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 13:18:06,956 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 13:18:06,956 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 13:18:06,961 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,962 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,967 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,968 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,971 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 13:18:06,974 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,974 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 13:18:06,974 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,977 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,977 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,983 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 13:18:06,983 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 13:18:06,983 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,985 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:06,986 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 13:18:06,986 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,987 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:06,987 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 13:18:06,987 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,987 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 13:18:06,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 13:18:06,993 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 13:18:06,994 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 184.3ms
2025-12-10 13:18:06,995 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:06,995 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 13:18:06,996 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:06,999 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 13:18:07,000 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 185.4ms
2025-12-10 13:18:07,004 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:07,005 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 179.8ms
2025-12-10 13:18:07,005 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 13:18:07,005 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 13:18:07,005 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 13:18:07,008 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:07,008 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:07,010 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 182.0ms
2025-12-10 13:18:07,011 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 168.6ms
2025-12-10 13:18:07,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 13:18:07,014 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 166.1ms
2025-12-10 13:18:13,547 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-10 13:18:13,547 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 0.7ms
2025-12-10 13:18:13,547 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-10 13:18:13,548 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 0.8ms
2025-12-10 13:18:13,549 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-10 13:18:13,550 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:13,550 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:13,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:13,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:13,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:13,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:13,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:13,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:13,560 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:13,560 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:13,560 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/areas/
2025-12-10 13:18:13,575 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:13,577 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-12-10 13:18:13,578 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: skip=0, limit=10, search='None'
2025-12-10 13:18:13,578 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:13,583 - app.infrastructure.database.queries_async - ERROR - Error en execute_query async (string): (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] Error en sesión async: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection_async.py", line 326, in get_db_connection
    yield session
  File "D:\base_multi_tenant_fastapi\app\core\tenant\routing.py", line 877, in get_connection_for_tenant
    yield session
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,783 - app.core.application.base_service - ERROR - DatabaseError en obtener_areas_paginadas: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\area_service.py", line 218, in obtener_areas_paginadas
    count_result_list = await execute_query(COUNT_AREAS_QUERY, where_params)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,797 - app.modules.menus.presentation.endpoints_areas - ERROR - Error de servicio al obtener áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,797 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 247.7ms
2025-12-10 13:18:13,800 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-10 13:18:13,800 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:13,800 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:13,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:13,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:13,801 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:13,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:13,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:13,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:13,810 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:13,810 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:13,810 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/areas/
2025-12-10 13:18:13,825 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:13,828 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-12-10 13:18:13,828 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: skip=0, limit=10, search='None'
2025-12-10 13:18:13,828 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:13,832 - app.infrastructure.database.queries_async - ERROR - Error en execute_query async (string): (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,832 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] Error en sesión async: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection_async.py", line 326, in get_db_connection
    yield session
  File "D:\base_multi_tenant_fastapi\app\core\tenant\routing.py", line 877, in get_connection_for_tenant
    yield session
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,836 - app.core.application.base_service - ERROR - DatabaseError en obtener_areas_paginadas: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\area_service.py", line 218, in obtener_areas_paginadas
    count_result_list = await execute_query(COUNT_AREAS_QUERY, where_params)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,839 - app.modules.menus.presentation.endpoints_areas - ERROR - Error de servicio al obtener áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 13:18:13,841 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 41.0ms
2025-12-10 13:18:15,184 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 13:18:15,185 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 13:18:15,185 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.9ms
2025-12-10 13:18:15,185 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.7ms
2025-12-10 13:18:15,188 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 13:18:15,188 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:15,188 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:15,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:15,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:15,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:15,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:15,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:15,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:15,196 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:15,197 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:15,197 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 13:18:15,212 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:15,214 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 13:18:15,215 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 13:18:15,215 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 13:18:15,215 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:15,221 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 13:18:15,221 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:15,226 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 13:18:15,227 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 13:18:15,227 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 13:18:15,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 39.9ms
2025-12-10 13:18:15,228 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 13:18:15,230 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 13:18:15,230 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 13:18:15,230 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:15,230 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:15,230 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:15,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 13:18:15,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 13:18:15,234 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 13:18:15,237 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 13:18:15,238 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 13:18:15,238 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 13:18:15,254 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:15,257 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 13:18:15,258 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 13:18:15,258 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 13:18:15,258 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:15,262 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 13:18:15,262 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 13:18:15,265 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 13:18:15,265 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 13:18:15,265 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 13:18:15,266 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 36.9ms
2025-12-10 20:52:17,266 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 20:52:17,266 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 20:52:17,266 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 4.6ms
2025-12-10 20:52:17,276 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 2.0ms
2025-12-10 20:52:17,276 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 20:52:17,276 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 20:52:17,276 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,289 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,295 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,349 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,349 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,366 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 20:52:17,366 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,366 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 20:52:17,366 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 20:52:17,366 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,366 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 20:52:17,366 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 20:52:17,366 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 20:52:17,376 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 20:52:17,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 101.0ms
2025-12-10 20:52:17,386 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 20:52:17,386 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 20:52:17,398 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 20:52:17,416 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: EDD88D20-6FB3-4F04-9DDD-F79B196D9552, Rotación: True
2025-12-10 20:52:17,431 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 20:52:17,432 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 20:52:17,432 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: EDD88D20-6FB3-4F04-9DDD-F79B196D9552
2025-12-10 20:52:17,432 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 20:52:17,449 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 20:52:17,456 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 177.8ms
2025-12-10 20:52:17,456 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-10 20:52:17,456 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.4ms
2025-12-10 20:52:17,456 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-10 20:52:17,456 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,456 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,466 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,466 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,466 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/me/
2025-12-10 20:52:17,476 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: admin_tech
2025-12-10 20:52:17,476 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 4, Super Admin: False, Type: tenant_admin
2025-12-10 20:52:17,476 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 para cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A
2025-12-10 20:52:17,476 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,486 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 con 1 roles activos
2025-12-10 20:52:17,486 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: admin_tech, Type: tenant_admin, Level: 4, Super Admin: False, Roles: 1
2025-12-10 20:52:17,486 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 26.9ms
2025-12-10 20:52:17,509 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:17,509 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:17,509 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.0ms
2025-12-10 20:52:17,509 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 1.1ms
2025-12-10 20:52:17,509 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/all-structured/
2025-12-10 20:52:17,514 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/all-structured/ 200 0.7ms
2025-12-10 20:52:17,516 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,516 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,535 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,535 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,535 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 20:52:17,536 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,536 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,536 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:17,539 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 20:52:17,539 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-10 20:52:17,539 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.1ms
2025-12-10 20:52:17,539 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.9ms
2025-12-10 20:52:17,539 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 20:52:17,539 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,539 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,565 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,565 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,566 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 20:52:17,576 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,583 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,589 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 20:52:17,589 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,589 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 20:52:17,596 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 20:52:17,596 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 80.3ms
2025-12-10 20:52:17,597 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Administrador/permisos/
2025-12-10 20:52:17,606 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 85.9ms
2025-12-10 20:52:17,606 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Administrador/permisos/ 200 0.9ms
2025-12-10 20:52:17,606 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:17,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,606 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 20:52:17,613 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,613 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,616 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,616 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,616 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.5ms
2025-12-10 20:52:17,616 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 20:52:17,616 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,616 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,616 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,636 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 20:52:17,636 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 20:52:17,636 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 20:52:17,636 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,648 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,648 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,648 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 20:52:17,649 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,649 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,649 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:17,656 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,656 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,656 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,656 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 20:52:17,656 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,656 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,656 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,656 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,676 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 20:52:17,676 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 20:52:17,676 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 20:52:17,676 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 133.8ms
2025-12-10 20:52:17,681 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,686 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,706 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,706 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,706 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 20:52:17,716 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,719 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,719 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:52:17,725 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:52:17,732 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 20:52:17,732 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 122.2ms
2025-12-10 20:52:17,736 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 130.7ms
2025-12-10 20:52:17,736 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:52:17,736 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 120.4ms
2025-12-10 20:52:17,736 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:52:17,736 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,746 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,746 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,748 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,748 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 127.3ms
2025-12-10 20:52:17,748 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.2ms
2025-12-10 20:52:17,748 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,756 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,756 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,759 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.8ms
2025-12-10 20:52:17,759 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,759 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,759 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,776 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,776 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,776 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,782 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,786 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,786 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,786 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,786 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,786 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,786 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,789 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,789 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,789 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,789 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 20:52:17,789 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 20:52:17,789 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 20:52:17,789 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,806 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 20:52:17,806 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:17,817 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 20:52:17,817 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 20:52:17,817 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 20:52:17,817 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 137.2ms
2025-12-10 20:52:17,836 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:52:17,836 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:52:17,848 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:52:17,848 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:52:17,848 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 109.1ms
2025-12-10 20:52:17,848 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 102.1ms
2025-12-10 20:52:17,859 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 96.8ms
2025-12-10 20:52:17,859 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 103.1ms
2025-12-10 20:52:17,861 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,862 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,862 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,864 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,864 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.6ms
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.6ms
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.5ms
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.7ms
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.9ms
2025-12-10 20:52:17,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.9ms
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.1ms
2025-12-10 20:52:17,876 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.0ms
2025-12-10 20:52:17,876 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,876 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,906 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,906 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,906 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,909 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,909 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,909 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,913 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,913 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,913 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,913 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:17,916 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,976 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:17,986 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 124.2ms
2025-12-10 20:52:17,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:17,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:17,989 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:17,989 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:17,989 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:17,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:17,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:17,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:17,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:17,998 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:17,998 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,006 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 145.1ms
2025-12-10 20:52:18,006 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,006 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,009 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,009 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,016 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,016 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,019 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:18,019 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,019 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:18,019 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,026 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,026 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:18,026 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,031 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,031 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,031 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:18,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 166.7ms
2025-12-10 20:52:18,048 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,056 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,056 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 182.2ms
2025-12-10 20:52:18,056 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,064 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,064 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 185.1ms
2025-12-10 20:52:18,065 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,066 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,066 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 193.0ms
2025-12-10 20:52:18,066 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,066 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,076 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,100 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,100 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,100 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,106 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,106 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,106 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,106 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,106 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,106 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,106 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:18,133 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:18,136 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:18,136 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,156 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,156 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:18,156 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,156 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,156 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,166 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:18,176 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:18,180 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,180 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:18,182 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,182 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:18,186 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:18,186 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,186 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,186 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:18,186 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 200.0ms
2025-12-10 20:52:18,186 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,196 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,196 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,206 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 199.2ms
2025-12-10 20:52:18,206 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,206 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,206 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,214 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,214 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:18,214 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,215 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:18,216 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,216 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:18,216 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,229 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,229 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:18,229 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,239 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,239 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,239 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,239 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,241 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:18,241 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,243 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,243 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:18,243 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,243 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,246 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 198.8ms
2025-12-10 20:52:18,248 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 184.3ms
2025-12-10 20:52:18,249 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,256 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,256 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,256 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,259 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:18,266 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 194.4ms
2025-12-10 20:52:18,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,270 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 191.9ms
2025-12-10 20:52:18,271 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,272 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,273 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,276 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,277 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:18,277 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:18,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:18,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:18,296 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:18,298 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,298 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,299 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,304 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,305 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,305 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:18,311 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,311 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,311 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,313 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:18,313 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:18,313 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:18,322 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:18,332 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:18,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,355 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,355 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:18,356 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,357 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:18,357 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,375 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:18,378 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,378 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:18,378 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,380 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:18,382 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,383 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 188.7ms
2025-12-10 20:52:18,386 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:18,387 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:18,388 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,388 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,394 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:18,395 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 184.9ms
2025-12-10 20:52:18,396 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:18,397 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:18,406 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,406 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:18,406 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,406 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,406 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,409 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:18,409 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:18,416 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:18,426 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 169.9ms
2025-12-10 20:52:18,426 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:18,426 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 176.9ms
2025-12-10 20:52:18,426 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,432 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:18,432 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 161.7ms
2025-12-10 20:52:18,432 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 156.9ms
2025-12-10 20:52:22,325 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 20:52:22,326 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 20:52:22,326 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:22,326 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 1.3ms
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,326 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 3.3ms
2025-12-10 20:52:22,326 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,336 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,346 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 20:52:22,366 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,369 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:22,376 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:22,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 50.9ms
2025-12-10 20:52:22,376 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,376 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,376 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,386 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,395 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,395 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,395 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 20:52:22,402 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,402 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,402 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,406 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,406 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,406 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,409 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 78.0ms
2025-12-10 20:52:22,409 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 20:52:22,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,426 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,426 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,426 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,429 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,429 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,429 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/
2025-12-10 20:52:22,446 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,459 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:52:22,459 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:52:22,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 92.0ms
2025-12-10 20:52:22,470 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:52:22,476 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:52:22,476 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 94.1ms
2025-12-10 20:52:22,476 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 94.0ms
2025-12-10 20:52:22,476 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,476 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,486 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,486 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,502 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:22,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,509 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,516 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:22,516 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,516 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,516 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,546 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:22,556 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/permisos/roles/dc3fa438-f6fa-493c-8907-180624379cd3/permisos/ 200 149.8ms
2025-12-10 20:52:22,576 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 20:52:22,576 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 20:52:22,596 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 20:52:22,596 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 118.4ms
2025-12-10 20:52:22,596 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 20:52:22,596 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 113.8ms
2025-12-10 20:52:22,596 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 121.8ms
2025-12-10 20:52:22,603 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 117.4ms
2025-12-10 20:52:22,606 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,606 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,606 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,608 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,608 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,608 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,608 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,608 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,609 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,626 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,626 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,626 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,635 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,635 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,636 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,637 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,637 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,637 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,637 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,637 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,637 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,689 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:22,689 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:22,696 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 91.9ms
2025-12-10 20:52:22,696 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 92.7ms
2025-12-10 20:52:22,696 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:22,696 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:22,706 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:22,706 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:22,708 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:22,708 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:22,708 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:22,716 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:22,716 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:22,716 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:22,719 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:22,721 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 114.1ms
2025-12-10 20:52:22,721 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:22,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,721 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,721 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,726 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 112.5ms
2025-12-10 20:52:22,726 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,726 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,726 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,752 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,753 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,753 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,756 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,796 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:22,806 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:22,809 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:22,809 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:22,809 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:22,809 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:22,819 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:22,819 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:22,826 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:22,826 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:22,829 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:22,829 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:22,836 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:22,846 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:22,846 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:22,846 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:22,846 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:22,846 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:22,846 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 127.3ms
2025-12-10 20:52:22,851 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 121.5ms
2025-12-10 20:52:22,853 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:22,856 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 122.5ms
2025-12-10 20:52:22,856 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:22,856 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,856 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,856 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 135.6ms
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,868 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,869 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:22,869 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:22,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:22,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,886 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:22,896 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:22,896 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:22,896 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:23,076 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:23,087 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:23,087 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:23,087 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:23,096 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:23,096 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:23,099 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:23,099 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:23,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:23,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:23,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:23,109 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 20:52:23,109 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,116 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:23,116 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:23,116 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,116 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:23,116 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:23,120 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:23,126 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:23,126 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,126 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:23,126 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:23,129 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:23,129 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 20:52:23,129 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 271.4ms
2025-12-10 20:52:23,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 269.8ms
2025-12-10 20:52:23,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:23,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:23,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:23,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,137 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:23,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:23,137 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:23,137 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:23,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,137 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 270.2ms
2025-12-10 20:52:23,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:23,137 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,146 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 280.1ms
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,146 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:23,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:23,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:23,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:23,156 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:23,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,170 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:23,170 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:23,170 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:23,176 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:23,176 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:23,176 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:23,206 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:23,209 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:23,219 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:23,220 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:23,220 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:23,220 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:23,226 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:23,226 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:23,236 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:23,237 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 20:52:23,237 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,237 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:23,237 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:23,237 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:23,237 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:23,246 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:23,246 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:23,246 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,252 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:23,252 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:23,252 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,253 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:23,254 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 20:52:23,254 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,256 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:23,256 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:23,256 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 124.3ms
2025-12-10 20:52:23,256 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 122.0ms
2025-12-10 20:52:23,256 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:23,256 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:23,256 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:23,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,266 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:23,266 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:23,266 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 122.0ms
2025-12-10 20:52:23,266 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 116.5ms
2025-12-10 20:52:23,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,276 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:23,276 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:23,276 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 20:52:23,293 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:23,297 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 20:52:23,298 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 20:52:23,303 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:23,303 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:23,303 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:23,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,309 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 20:52:23,309 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 20:52:23,309 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:23,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:23,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:23,316 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:23,316 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:23,316 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 20:52:23,316 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 20:52:23,316 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 56.7ms
2025-12-10 20:52:23,334 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:23,338 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 20:52:23,338 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 20:52:23,344 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 20:52:23,344 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 20:52:23,344 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 20:52:23,346 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 20:52:23,347 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 43.0ms
2025-12-10 20:52:26,861 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 20:52:26,862 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 0.8ms
2025-12-10 20:52:26,863 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 20:52:26,863 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 20:52:26,863 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 20:52:26,863 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.0ms
2025-12-10 20:52:26,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.8ms
2025-12-10 20:52:26,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.5ms
2025-12-10 20:52:26,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 20:52:26,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:26,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:26,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 20:52:26,869 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:26,869 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:26,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,883 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:26,883 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:26,883 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 20:52:26,886 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:26,886 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:26,886 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 20:52:26,919 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,919 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,926 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 20:52:26,926 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 20:52:26,926 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,926 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 20:52:26,926 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,926 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,926 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:26,926 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 20:52:26,926 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 65.2ms
2025-12-10 20:52:26,936 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 20:52:26,936 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:26,936 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:26,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,941 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 20:52:26,941 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 20:52:26,941 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 20:52:26,942 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 77.0ms
2025-12-10 20:52:26,942 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:26,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:26,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:26,949 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:26,949 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:26,949 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 20:52:26,959 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:26,960 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:26,960 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 20:52:26,979 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,986 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,986 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 20:52:26,986 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,991 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 20:52:26,991 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 20:52:26,991 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,993 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:26,993 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 20:52:26,993 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 57.3ms
2025-12-10 20:52:26,996 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:26,996 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 2 filas crudas
2025-12-10 20:52:26,996 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 20:52:26,996 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 20:52:26,996 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 59.1ms
2025-12-10 20:52:51,278 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 20:52:51,278 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/ 200 0.5ms
2025-12-10 20:52:51,280 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 20:52:51,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:52:51,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:52:51,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:51,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:51,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:51,286 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:52:51,286 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:52:51,286 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:52:51,289 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:51,289 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:52:51,289 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 20:52:51,306 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:52:51,309 - app.modules.users.presentation.endpoints - INFO - Solicitud PUT /usuarios/1c6da055-9333-49a1-a726-1a358368cc55/ recibida para actualizar en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:52:51,309 - app.core.application.base_service - ERROR - ERROR INESPERADO en actualizar_usuario: UsuarioService.actualizar_usuario() got an unexpected keyword argument 'update_data'
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: UsuarioService.actualizar_usuario() got an unexpected keyword argument 'update_data'
2025-12-10 20:52:51,309 - app.modules.users.presentation.endpoints - WARNING - Error de negocio al actualizar usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error interno del servidor en actualizar_usuario
2025-12-10 20:52:51,309 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/ 500 30.6ms
2025-12-10 20:55:16,476 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/
2025-12-10 20:55:16,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:55:16,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:55:16,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:55:16,489 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:16,489 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:55:16,490 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/
2025-12-10 20:55:16,491 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 20:55:16,491 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/ 401 15.3ms
2025-12-10 20:55:28,188 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 20:55:28,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:55:28,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:55:28,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:55:28,200 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:28,200 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:55:28,200 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 20:55:28,212 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 20:55:28,212 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:28,212 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:28,462 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 20:55:28,462 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 20:55:28,462 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:55:28,466 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 20:55:28,483 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: E29B3805-01E3-489E-9A11-2A691E62A06F, Rotación: False
2025-12-10 20:55:28,484 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: E29B3805-01E3-489E-9A11-2A691E62A06F
2025-12-10 20:55:28,484 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:28,501 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 20:55:28,501 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 314.7ms
2025-12-10 20:55:37,343 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/
2025-12-10 20:55:37,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:55:37,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:55:37,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:55:37,348 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:37,348 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:55:37,348 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/
2025-12-10 20:55:37,366 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:55:37,371 - app.modules.users.presentation.endpoints - INFO - Solicitud POST /usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/dc3fa438-f6fa-493c-8907-180624379cd3/ recibida en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:37,371 - app.modules.users.application.services.user_service - INFO - Intentando asignar rol dc3fa438-f6fa-493c-8907-180624379cd3 a usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:55:37,371 - app.modules.users.application.services.user_service - ERROR - Error inesperado al obtener usuario 1c6da055-9333-49a1-a726-1a358368cc55: 'coroutine' object is not subscriptable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\users\application\services\user_service.py", line 566, in obtener_usuario_por_id
    return resultados[0]
           ~~~~~~~~~~^^^
TypeError: 'coroutine' object is not subscriptable
2025-12-10 20:55:37,426 - app.modules.users.application.services.user_service - ERROR - Error inesperado al asignar rol: Error interno al obtener usuario
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\users\application\services\user_service.py", line 566, in obtener_usuario_por_id
    return resultados[0]
           ~~~~~~~~~~^^^
TypeError: 'coroutine' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\users\application\services\user_service.py", line 1009, in asignar_rol_a_usuario
    usuario = await UsuarioService.obtener_usuario_por_id(cliente_id, usuario_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\users\application\services\user_service.py", line 577, in obtener_usuario_por_id
    raise ServiceError(
app.core.exceptions.ServiceError: Error interno al obtener usuario
2025-12-10 20:55:37,426 - app.modules.users.presentation.endpoints - WARNING - Error de negocio asignando rol dc3fa438-f6fa-493c-8907-180624379cd3 a usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error interno al asignar rol
2025-12-10 20:55:37,426 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/ 500 91.9ms
2025-12-10 20:57:31,069 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-10 20:57:31,069 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-10 20:57:31,070 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-12-10 20:57:31,070 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-10 20:57:31,070 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-10 20:57:31,071 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383C9B0>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B364D640>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383CA10>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383D790>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383F110>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B1DFF5C0>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B361EA50>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383D250>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383C770>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B35C1610>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383C1D0>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B38AD1C0>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B35C0380>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383E420>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B3533410>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383F2C0>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B1DFE6F0>
2025-12-10 20:57:31,209 - asyncio - ERROR - Unclosed connection
connection: <aioodbc.connection.Connection object at 0x000001A4B383EF90>
2025-12-10 20:57:32,878 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-12-10 20:57:33,258 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-10 20:57:33,292 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-10 20:57:33,295 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-10 20:57:33,295 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-12-10 20:57:33,295 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-10 20:57:33,295 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-10 20:57:33,295 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, DEFAULT_TYPE=single
2025-12-10 20:57:33,656 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-12-10 20:57:33,656 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-12-10 20:57:33,786 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-12-10 20:57:33,786 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-12-10 20:57:33,786 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-12-10 20:57:34,153 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-12-10 20:57:34,154 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-12-10 20:57:34,296 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=89CCC8CF-4BCE-4C2F-B834-25DE204B9CF6, EXCLUDED_SUBDOMAINS={'cdn', 'api', 'backend', 'assets', 'static', 'admin', 'www'}
2025-12-10 20:57:37,182 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/
2025-12-10 20:57:37,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:37,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:37,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:37,184 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para admin
2025-12-10 20:57:37,343 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:41,478 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-12-10 20:57:41,478 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-10 20:57:41,486 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 20:57:41,486 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 20:57:41,486 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/
2025-12-10 20:57:41,492 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] AsyncEngine creado para tenant_3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:41,519 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:41,523 - app.modules.users.presentation.endpoints - INFO - Solicitud POST /usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/dc3fa438-f6fa-493c-8907-180624379cd3/ recibida en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:41,523 - app.modules.users.application.services.user_service - INFO - Intentando asignar rol dc3fa438-f6fa-493c-8907-180624379cd3 a usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:41,523 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:41,526 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:41,532 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 20:57:41,536 - app.modules.users.application.services.user_service - INFO - Creando nueva asignación para usuario 1c6da055-9333-49a1-a726-1a358368cc55, rol dc3fa438-f6fa-493c-8907-180624379cd3
2025-12-10 20:57:41,536 - app.modules.users.application.services.user_service - INFO - Asignación creada exitosamente
2025-12-10 20:57:41,536 - app.modules.users.presentation.endpoints - INFO - Rol dc3fa438-f6fa-493c-8907-180624379cd3 asignado exitosamente al usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 20:57:41,544 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/usuarios/1c6da055-9333-49a1-a726-1a358368cc55/roles/DC3FA438-F6FA-493C-8907-180624379CD3/ 201 4361.8ms
2025-12-10 20:57:48,646 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 20:57:48,646 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 20:57:48,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'

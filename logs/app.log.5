2025-12-01 01:45:54,820 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:45:54,821 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:45:54,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:54,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:54,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:54,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:54,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:54,823 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:54,823 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:45:54,823 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:45:54,823 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 01:45:54,825 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 01:45:54,825 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 01:45:54,830 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 01:45:54,830 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 11.1ms
2025-12-01 01:45:54,832 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 01:45:54,832 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:45:54,832 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:45:54,832 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:54,832 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:54,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:54,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:54,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:54,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:54,833 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:45:54,833 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:45:54,833 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 01:45:54,835 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 01:45:54,835 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 01:45:54,836 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 01:45:54,837 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.5ms
2025-12-01 01:45:56,474 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-01 01:45:56,476 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 01:45:56,476 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-01 01:45:56,477 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.8ms
2025-12-01 01:45:56,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 01:45:56,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 2.0ms
2025-12-01 01:45:56,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.7ms
2025-12-01 01:45:56,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.2ms
2025-12-01 01:45:56,480 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 01:45:56,480 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,482 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:45:56,482 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:45:56,482 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 01:45:56,484 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 01:45:56,484 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 01:45:56,488 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 01:45:56,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:45:56,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:45:56,488 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,489 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:45:56,489 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:45:56,490 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 01:45:56,491 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 01:45:56,491 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 01:45:56,491 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 01:45:56,492 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 01:45:56,492 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 12.8ms
2025-12-01 01:45:56,493 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 12.6ms
2025-12-01 01:45:56,494 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 01:45:56,495 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:45:56,496 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:45:56,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,497 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:45:56,497 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:45:56,497 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 01:45:56,499 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 01:45:56,499 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 01:45:56,500 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 01:45:56,500 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 01:45:56,501 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:45:56,501 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:45:56,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:56,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:56,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:56,502 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:45:56,502 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:45:56,502 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 01:45:56,503 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 01:45:56,504 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 01:45:56,504 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 01:45:56,505 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 01:45:56,505 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 11.3ms
2025-12-01 01:45:56,507 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.1ms
2025-12-01 01:45:58,184 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:45:58,185 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:45:58,185 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-12-01 01:45:58,186 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.6ms
2025-12-01 01:45:58,188 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:45:58,188 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:45:58,188 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:45:58,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:45:58,189 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:45:58,191 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 01:45:58,191 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 01:46:02,324 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-01 01:46:02,324 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-01 01:46:02,328 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-01 01:46:02,328 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,353 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,356 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,368 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,369 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,371 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 01:46:02,372 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4184.4ms
2025-12-01 01:46:02,374 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:46:02,374 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:02,374 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:02,374 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:02,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:02,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:02,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:02,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:02,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:02,375 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:02,375 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:02,376 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:46:02,377 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 01:46:02,377 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 01:46:02,378 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,379 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,379 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,382 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,384 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:02,386 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 01:46:02,386 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.9ms
2025-12-01 01:46:07,529 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 01:46:07,529 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-12-01 01:46:07,530 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 01:46:07,530 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.8ms
2025-12-01 01:46:07,532 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 01:46:07,533 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:07,533 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:07,533 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:07,533 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:07,533 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:07,534 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:07,534 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:07,534 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:07,534 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:07,534 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:07,534 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 01:46:07,535 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 01:46:07,536 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 01:46:07,536 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:07,541 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:07,543 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 22, P√°gina: 1
2025-12-01 01:46:07,544 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.7ms
2025-12-01 01:46:07,545 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 01:46:07,545 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:07,546 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 01:46:07,549 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 01:46:07,550 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 01:46:07,551 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:07,551 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:07,553 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 22, P√°gina: 1
2025-12-01 01:46:07,554 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.4ms
2025-12-01 01:46:11,406 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-12-01 01:46:11,406 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.6ms
2025-12-01 01:46:11,409 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-12-01 01:46:11,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:11,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:11,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:11,410 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-12-01 01:46:11,412 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1006, cliente_id: 2
2025-12-01 01:46:11,412 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id proporcionado (2), consultando log 1006 directamente en BD del tenant
2025-12-01 01:46:11,413 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:11,415 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del cliente 2
2025-12-01 01:46:11,418 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 9.8ms
2025-12-01 01:46:14,920 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/
2025-12-01 01:46:14,921 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/ 200 0.5ms
2025-12-01 01:46:14,922 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1004/
2025-12-01 01:46:14,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:14,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:14,924 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:14,924 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:14,924 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1004/
2025-12-01 01:46:14,925 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1004, cliente_id: 2
2025-12-01 01:46:14,927 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id proporcionado (2), consultando log 1004 directamente en BD del tenant
2025-12-01 01:46:14,927 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:14,927 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1004 encontrado en BD del cliente 2
2025-12-01 01:46:14,929 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1004/ 200 6.5ms
2025-12-01 01:46:26,408 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:46:26,408 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:26,408 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:26,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:26,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:26,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:26,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:26,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:26,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:26,409 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:26,409 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:26,409 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:46:26,412 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 01:46:26,412 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 01:46:26,413 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,414 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,414 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,416 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,418 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,419 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 01:46:26,420 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.0ms
2025-12-01 01:46:26,421 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:46:26,421 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:26,422 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:26,423 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:26,423 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 01:46:26,426 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 01:46:26,426 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 01:46:26,427 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,428 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,428 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,430 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,433 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:26,435 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 01:46:26,436 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 14.6ms
2025-12-01 01:46:27,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-12-01 01:46:27,528 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.6ms
2025-12-01 01:46:27,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-12-01 01:46:27,529 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 1.1ms
2025-12-01 01:46:27,530 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-12-01 01:46:27,531 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:27,531 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:27,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:27,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:27,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:27,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:27,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:27,532 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:27,532 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:27,532 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:27,532 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-12-01 01:46:27,534 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1, cliente_id: 2
2025-12-01 01:46:27,534 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [ACTIVIDAD] Usando cliente_id proporcionado: 2
2025-12-01 01:46:27,534 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:27,536 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:27,538 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:27,541 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-12-01 01:46:27,541 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 10.6ms
2025-12-01 01:46:27,541 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:27,541 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:27,541 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:27,541 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:27,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:27,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:27,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:27,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:27,542 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:27,542 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:27,542 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-12-01 01:46:27,545 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1, cliente_id: 2
2025-12-01 01:46:27,546 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [SESIONES] Usando cliente_id proporcionado: 2
2025-12-01 01:46:27,546 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:27,547 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 01:46:27,553 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 12.6ms
2025-12-01 01:46:32,920 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 01:46:32,920 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:32,920 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:32,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:32,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:32,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:32,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:32,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:32,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:32,921 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:32,921 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:32,921 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 01:46:32,923 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 01:46:32,923 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 01:46:32,924 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 01:46:32,924 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 4.8ms
2025-12-01 01:46:32,925 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 01:46:32,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 01:46:32,928 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 01:46:32,928 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 01:46:32,928 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 01:46:32,929 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 01:46:32,930 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 01:46:32,930 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 01:46:32,931 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.6ms
2025-12-01 01:48:30,657 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 01:48:30,657 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 01:48:30,657 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 01:48:30,657 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 01:48:30,657 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 01:48:30,657 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-01 01:48:31,456 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-01 01:48:31,458 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-01 01:48:31,458 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-01 01:48:31,459 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-01 01:48:31,459 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-01 01:48:31,459 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-01 01:48:31,751 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-01 01:48:31,751 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-01 01:48:31,818 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-01 01:48:31,818 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-01 01:48:31,818 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-01 01:48:32,009 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-01 01:48:32,009 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-01 01:48:32,113 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'www', 'api', 'backend', 'assets', 'cdn', 'static'}
2025-12-01 01:48:34,321 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 01:48:34,322 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 01:48:34,322 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 01:48:34,322 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 01:48:34,322 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 01:48:34,322 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-01 10:26:19,861 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-01 10:26:19,884 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-01 10:26:19,884 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-01 10:26:19,887 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-01 10:26:19,887 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-01 10:26:19,887 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-01 10:26:21,099 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-01 10:26:21,099 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-01 10:26:21,267 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-01 10:26:21,270 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-01 10:26:21,270 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-01 10:26:21,534 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-01 10:26:21,534 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-01 10:26:21,651 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'www', 'cdn', 'admin', 'backend', 'api', 'assets'}
2025-12-01 10:34:28,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-01 10:34:28,677 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.9ms
2025-12-01 10:34:28,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:28,677 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-01 10:34:28,817 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-01 10:34:28,817 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-01 10:34:28,826 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 10:34:28,831 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 10:34:28,831 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14463, Rotaci√≥n: True
2025-12-01 10:34:28,835 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 10:34:28,835 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-01 10:34:28,836 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-01 10:34:28,836 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14463
2025-12-01 10:34:28,836 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-01 10:34:28,842 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 10:34:28,843 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-01 10:34:28,843 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 160.5ms
2025-12-01 10:34:28,847 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-01 10:34:28,847 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.5ms
2025-12-01 10:34:28,847 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:28,851 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-12-01 10:34:28,853 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-12-01 10:34:28,855 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-12-01 10:34:28,855 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-12-01 10:34:28,867 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-12-01 10:34:28,867 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-12-01 10:34:28,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 19.7ms
2025-12-01 10:34:28,877 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-01 10:34:28,877 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.6ms
2025-12-01 10:34:28,878 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:28,878 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-01 10:34:28,878 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-01 10:34:28,897 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-01 10:34:28,897 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-01 10:34:28,897 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-01 10:34:28,897 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 22.2ms
2025-12-01 10:34:40,087 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-01 10:34:40,087 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-01 10:34:40,094 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:40,094 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-12-01 10:34:40,102 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-12-01 10:34:40,102 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-12-01 10:34:40,102 - app.modules.auth.application.services.auth_service - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-12-01 10:34:40,327 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 10:34:40,327 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=1, access_level=5, user_type=super_admin
2025-12-01 10:34:40,327 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=1
2025-12-01 10:34:40,334 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 10:34:40,334 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 10:34:40,334 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14464, Rotaci√≥n: False
2025-12-01 10:34:40,334 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14464
2025-12-01 10:34:40,334 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 1
2025-12-01 10:34:40,340 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 10:34:40,340 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=1, usuario_id=1, exito=True
2025-12-01 10:34:40,340 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 247.1ms
2025-12-01 10:34:40,347 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 10:34:40,347 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:40,347 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:40,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,350 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:40,350 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:40,350 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-01 10:34:40,352 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-01 10:34:40,352 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-01 10:34:40,354 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-01 10:34:40,354 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.4ms
2025-12-01 10:34:40,382 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 10:34:40,382 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 10:34:40,383 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.8ms
2025-12-01 10:34:40,383 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.6ms
2025-12-01 10:34:40,385 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 10:34:40,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:40,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:40,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,387 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:40,388 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:40,388 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 10:34:40,389 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 10:34:40,389 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 10:34:40,428 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 10:34:40,429 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 43.7ms
2025-12-01 10:34:40,431 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 10:34:40,431 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:40,431 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:40,431 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,431 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:40,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:40,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:40,432 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:40,432 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:40,432 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 10:34:40,434 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 10:34:40,435 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 10:34:40,435 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 10:34:40,437 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 6.0ms
2025-12-01 10:34:42,708 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-01 10:34:42,709 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-01 10:34:42,710 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.4ms
2025-12-01 10:34:42,711 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.3ms
2025-12-01 10:34:42,711 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:42,712 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:42,714 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:42,714 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:42,714 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 10:34:42,716 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 10:34:42,716 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 10:34:42,721 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 10:34:42,722 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 10.4ms
2025-12-01 10:34:42,724 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 10:34:42,725 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:34:42,725 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:34:42,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:42,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:42,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:42,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:34:42,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:34:42,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:34:42,726 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:34:42,726 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:34:42,726 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 10:34:42,728 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 10:34:42,728 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 10:34:42,730 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 10:34:42,731 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.0ms
2025-12-01 10:35:13,754 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-01 10:35:13,754 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 0.5ms
2025-12-01 10:35:13,757 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-01 10:35:13,758 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-01 10:35:13,758 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.1ms
2025-12-01 10:35:13,758 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-01 10:35:13,759 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.9ms
2025-12-01 10:35:13,760 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.4ms
2025-12-01 10:35:13,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:13,762 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 10:35:13,768 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 10:35:13,771 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 10:35:13,771 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 10.5ms
2025-12-01 10:35:13,771 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,772 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:13,773 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:13,773 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 10:35:13,774 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 10:35:13,774 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 10:35:13,783 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 10:35:13,783 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 14.1ms
2025-12-01 10:35:13,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 10:35:13,788 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 10:35:13,788 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:13,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:13,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:13,795 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:13,795 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:13,795 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 10:35:13,795 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 9.6ms
2025-12-01 10:35:13,798 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 10:35:13,798 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 10:35:13,798 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 10:35:13,802 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.3ms
2025-12-01 10:35:15,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-01 10:35:15,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-01 10:35:15,721 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 1.0ms
2025-12-01 10:35:15,721 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.7ms
2025-12-01 10:35:15,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:15,721 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 10:35:15,727 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 10:35:15,727 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 10:35:15,733 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 10:35:15,733 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 11.2ms
2025-12-01 10:35:15,737 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 10:35:15,737 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:15,737 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:15,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:15,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:15,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:15,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:15,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:15,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:15,738 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:15,738 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:15,738 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 10:35:15,739 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 10:35:15,741 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 10:35:15,741 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 10:35:15,742 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.4ms
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.0ms
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.4ms
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.1ms
2025-12-01 10:35:18,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.1ms
2025-12-01 10:35:18,228 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 10:35:18,228 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 10:35:18,228 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 10:35:18,228 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 10:35:18,228 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:18,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:18,237 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 10:35:18,240 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 10:35:18,240 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 10:35:18,242 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 10:35:18,242 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 10:35:18,244 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 15.5ms
2025-12-01 10:35:18,244 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 8.8ms
2025-12-01 10:35:18,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 10:35:18,244 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:18,244 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:18,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 10:35:18,248 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 10:35:18,248 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 10:35:18,248 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 10:35:18,248 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:18,248 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 10:35:18,248 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 7.7ms
2025-12-01 10:35:18,248 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 10:35:18,248 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 10:35:18,248 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 10:35:18,257 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 10:35:18,258 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.4ms
2025-12-01 10:35:21,217 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:21,217 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:21,217 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-12-01 10:35:21,217 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.6ms
2025-12-01 10:35:21,217 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:21,217 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:21,223 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 10:35:21,223 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 10:35:25,831 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-01 10:35:25,831 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-01 10:35:25,831 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-01 10:35:25,838 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,853 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,858 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,868 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,869 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,869 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 10:35:25,869 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4652.0ms
2025-12-01 10:35:25,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:25,869 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:25,878 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 10:35:25,878 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 10:35:25,878 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,878 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,881 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,882 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,883 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:25,883 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 10:35:25,883 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.5ms
2025-12-01 10:35:32,268 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 10:35:32,268 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 10:35:32,268 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.8ms
2025-12-01 10:35:32,268 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.7ms
2025-12-01 10:35:32,271 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:32,271 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 10:35:32,271 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 10:35:32,271 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 10:35:32,271 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:32,278 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:32,278 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 22, P√°gina: 1
2025-12-01 10:35:32,278 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.3ms
2025-12-01 10:35:32,278 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 10:35:32,278 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:32,278 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:32,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:32,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:32,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:32,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:32,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:32,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:32,287 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:32,287 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:32,287 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 10:35:32,289 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 10:35:32,289 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 10:35:32,290 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:32,291 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:32,292 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 22, P√°gina: 1
2025-12-01 10:35:32,293 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.9ms
2025-12-01 10:35:36,588 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/
2025-12-01 10:35:36,588 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/ 200 0.5ms
2025-12-01 10:35:36,591 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-12-01 10:35:36,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:36,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:36,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:36,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:36,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:36,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:36,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:36,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:36,592 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:36,592 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:36,592 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-12-01 10:35:36,594 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1005, cliente_id: 2
2025-12-01 10:35:36,594 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id proporcionado (2), consultando log 1005 directamente en BD del tenant
2025-12-01 10:35:36,595 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:36,596 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 encontrado en BD del cliente 2
2025-12-01 10:35:36,600 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 8.9ms
2025-12-01 10:35:39,847 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-12-01 10:35:39,847 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.6ms
2025-12-01 10:35:39,849 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:39,849 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-12-01 10:35:39,849 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1006, cliente_id: 2
2025-12-01 10:35:39,849 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id proporcionado (2), consultando log 1006 directamente en BD del tenant
2025-12-01 10:35:39,849 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:39,849 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del cliente 2
2025-12-01 10:35:39,849 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 6.2ms
2025-12-01 10:35:46,634 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:46,634 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:46,634 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:46,636 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:46,638 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 10:35:46,638 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 10:35:46,638 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,644 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,644 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,644 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,648 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,648 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 10:35:46,648 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 16.3ms
2025-12-01 10:35:46,652 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:46,652 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:46,654 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:46,655 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:46,655 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 10:35:46,657 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 10:35:46,657 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 10:35:46,658 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,658 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,660 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,661 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,661 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:46,664 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 10:35:46,664 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.3ms
2025-12-01 10:35:48,046 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-12-01 10:35:48,046 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.8ms
2025-12-01 10:35:48,047 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-12-01 10:35:48,048 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 1.2ms
2025-12-01 10:35:48,048 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:48,048 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-12-01 10:35:48,054 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1, cliente_id: 2
2025-12-01 10:35:48,054 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [ACTIVIDAD] Usando cliente_id proporcionado: 2
2025-12-01 10:35:48,054 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:48,056 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:48,058 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:48,058 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-12-01 10:35:48,058 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 12.4ms
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:48,058 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-12-01 10:35:48,058 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1, cliente_id: 2
2025-12-01 10:35:48,058 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [SESIONES] Usando cliente_id proporcionado: 2
2025-12-01 10:35:48,058 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:48,068 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 10:35:48,074 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 12.6ms
2025-12-01 10:35:59,462 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 10:35:59,462 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:59,462 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:59,465 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 10:35:59,466 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 10:35:59,466 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 10:35:59,468 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 10:35:59,468 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 10:35:59,468 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 10:35:59,468 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 10:35:59,468 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 10:35:59,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 10.4ms
2025-12-01 10:35:59,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.1ms
2025-12-01 10:35:59,468 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 10:35:59,468 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:59,468 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:59,478 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 10:35:59,478 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 10:35:59,478 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 10:35:59,478 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 10:35:59,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:35:59,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:35:59,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:35:59,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:35:59,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:35:59,482 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:35:59,482 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:35:59,482 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 10:35:59,485 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 10:35:59,485 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 10:35:59,487 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 10:35:59,488 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 10:35:59,488 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 14.1ms
2025-12-01 10:35:59,488 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 13.9ms
2025-12-01 10:36:01,034 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:36:01,034 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 10:36:01,038 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 10:36:01,038 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 10:36:01,038 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 10:36:01,038 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.4ms
2025-12-01 10:36:01,038 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 10:36:01,038 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 10:36:01,038 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 10:36:01,038 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 10:36:01,038 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 10:36:01,038 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.5ms
2025-12-01 11:07:38,112 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 11:07:38,112 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 11:07:38,112 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 11:07:38,112 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 11:07:38,115 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 11:07:38,115 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-01 11:07:39,066 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-01 11:07:39,066 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-01 11:07:39,066 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-01 11:07:39,066 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-01 11:07:39,066 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-01 11:07:39,066 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-01 11:07:39,386 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-01 11:07:39,386 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-01 11:07:39,456 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-01 11:07:39,456 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-01 11:07:39,456 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-01 11:07:39,736 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-01 11:07:39,736 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-01 11:07:39,865 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'cdn', 'assets', 'admin', 'api', 'www', 'backend'}
2025-12-01 11:11:50,530 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 11:11:50,530 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 11:11:50,530 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 11:11:50,530 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 11:11:50,530 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 11:11:50,530 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-01 11:11:51,280 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-01 11:11:51,280 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-01 11:11:51,280 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-01 11:11:51,280 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-01 11:11:51,280 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-01 11:11:51,280 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-01 11:11:51,560 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-01 11:11:51,560 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-01 11:11:51,625 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-01 11:11:51,625 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-01 11:11:51,625 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-01 11:11:51,807 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-01 11:11:51,807 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-01 11:11:51,907 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'api', 'cdn', 'admin', 'static', 'www', 'backend'}
2025-12-01 11:12:00,775 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-01 11:12:00,775 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.1ms
2025-12-01 11:12:00,775 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-01 11:12:00,780 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-12-01 11:12:00,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:00,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:00,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:00,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,783 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:00,784 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:00,784 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:00,787 - app.api.deps - WARNING - Error de validaci√≥n JWT: Signature has expired.
2025-12-01 11:12:00,788 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 401 7.0ms
2025-12-01 11:12:00,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:00,791 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:00,791 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:00,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,792 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:00,792 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:00,793 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:00,793 - app.api.deps - WARNING - Error de validaci√≥n JWT: Signature has expired.
2025-12-01 11:12:00,794 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-01 11:12:00,795 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.7ms
2025-12-01 11:12:00,795 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 401 4.6ms
2025-12-01 11:12:00,796 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-01 11:12:00,797 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:00,797 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:00,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,798 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:00,798 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:00,798 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-01 11:12:00,828 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-01 11:12:00,828 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-01 11:12:00,829 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 11:12:00,831 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:12:00,831 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14465, Rotaci√≥n: True
2025-12-01 11:12:00,832 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:12:00,833 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-01 11:12:00,833 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-01 11:12:00,833 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14465
2025-12-01 11:12:00,833 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-01 11:12:00,837 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:12:00,838 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-01 11:12:00,838 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 41.5ms
2025-12-01 11:12:00,841 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:00,841 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:00,845 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-01 11:12:00,859 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:12:00,860 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:12:00,861 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:12:00,862 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 20.5ms
2025-12-01 11:12:00,864 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:00,865 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:00,865 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:00,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:00,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:00,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:00,867 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:00,867 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:00,867 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:00,869 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:12:00,869 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:12:00,870 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:12:00,870 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.3ms
2025-12-01 11:12:02,411 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:02,411 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-01 11:12:02,417 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-01 11:12:02,419 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-01 11:12:02,421 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 11:12:02,423 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:12:02,423 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14466, Rotaci√≥n: True
2025-12-01 11:12:02,424 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:12:02,425 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-01 11:12:02,425 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-01 11:12:02,425 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14466
2025-12-01 11:12:02,425 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-01 11:12:02,427 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:12:02,427 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-01 11:12:02,428 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 15.3ms
2025-12-01 11:12:02,432 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-01 11:12:02,433 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.6ms
2025-12-01 11:12:02,435 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-01 11:12:02,435 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:02,435 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:02,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,437 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:02,437 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:02,437 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-12-01 11:12:02,438 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-12-01 11:12:02,438 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-12-01 11:12:02,438 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-12-01 11:12:02,440 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-12-01 11:12:02,440 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-12-01 11:12:02,441 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 6.6ms
2025-12-01 11:12:02,442 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-01 11:12:02,442 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-01 11:12:02,446 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:12:02,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:02,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:02,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,448 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:02,448 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:02,448 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-01 11:12:02,451 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-01 11:12:02,451 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-01 11:12:02,451 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-01 11:12:02,453 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.3ms
2025-12-01 11:12:02,471 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:12:02,472 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.9ms
2025-12-01 11:12:02,472 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:12:02,473 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:02,474 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:02,474 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:02,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,475 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:02,475 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:02,475 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:02,475 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 3.1ms
2025-12-01 11:12:02,478 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:12:02,478 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:12:02,479 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:12:02,480 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:12:02,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:02,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:02,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,482 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:02,482 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:02,482 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:12:02,485 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:12:02,485 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:12:02,485 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:12:02,485 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 13.8ms
2025-12-01 11:12:02,485 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 7.2ms
2025-12-01 11:12:02,489 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:02,490 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:02,491 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:02,493 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:12:02,493 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:12:02,495 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:12:02,495 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:02,495 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:12:02,500 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:12:02,500 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:12:02,501 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:12:02,502 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 12.7ms
2025-12-01 11:12:02,503 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 6.9ms
2025-12-01 11:12:06,471 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 11:12:06,472 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 11:12:06,473 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.0ms
2025-12-01 11:12:06,473 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 0.8ms
2025-12-01 11:12:06,475 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:06,475 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 11:12:06,479 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-01 11:12:06,479 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-01 11:12:06,480 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 11:12:06,482 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 11:12:06,482 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.8ms
2025-12-01 11:12:06,483 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:06,483 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:06,486 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 11:12:06,488 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-01 11:12:06,488 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-01 11:12:06,490 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 11:12:06,490 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 11:12:06,490 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.5ms
2025-12-01 11:12:08,878 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:08,879 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:08,879 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:08,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:08,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:08,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:08,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:08,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:08,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:08,881 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:08,881 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:08,881 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:08,883 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:12:08,883 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:12:08,885 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:12:08,885 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.4ms
2025-12-01 11:12:08,888 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:12:08,888 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:08,888 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:08,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:08,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:08,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:08,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:08,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:08,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:08,890 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:08,890 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:08,890 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:12:08,893 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:12:08,893 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:12:08,895 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:12:08,895 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.0ms
2025-12-01 11:12:10,332 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.3ms
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.7ms
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.5ms
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:12:10,333 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.8ms
2025-12-01 11:12:10,338 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:10,338 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:10,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,339 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:10,339 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:10,339 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:12:10,343 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:12:10,346 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:12:10,346 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:10,346 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:10,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,347 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:10,348 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:10,348 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:12:10,348 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 11.0ms
2025-12-01 11:12:10,349 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:12:10,349 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:12:10,350 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:12:10,353 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 7.8ms
2025-12-01 11:12:10,353 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:12:10,355 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:10,355 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:10,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,356 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:10,357 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:10,357 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:12:10,358 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:12:10,360 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:10,360 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:12:10,360 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 9.0ms
2025-12-01 11:12:10,360 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:12:10,360 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:12:10,367 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:12:10,368 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 7.1ms
2025-12-01 11:12:11,678 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-01 11:12:11,678 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-01 11:12:11,678 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.9ms
2025-12-01 11:12:11,680 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.6ms
2025-12-01 11:12:11,681 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:11,682 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:11,683 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:11,683 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:11,683 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 11:12:11,685 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 11:12:11,685 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 11:12:11,686 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 11:12:11,686 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.5ms
2025-12-01 11:12:11,688 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-01 11:12:11,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:11,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:11,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:11,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:11,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:11,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:11,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:11,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:11,690 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:11,690 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:11,690 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-01 11:12:11,692 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-01 11:12:11,692 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-01 11:12:11,692 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-01 11:12:11,692 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 6.4ms
2025-12-01 11:12:12,822 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-01 11:12:12,822 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.1ms
2025-12-01 11:12:12,822 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 11:12:12,822 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 11:12:12,822 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-01 11:12:12,822 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.3ms
2025-12-01 11:12:12,822 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.2ms
2025-12-01 11:12:12,826 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.1ms
2025-12-01 11:12:12,826 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 11:12:12,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:12,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:12,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,829 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,829 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:12,829 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:12,829 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 11:12:12,831 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 11:12:12,831 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 11:12:12,832 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 11:12:12,833 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:12,834 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 11:12:12,835 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 11:12:12,835 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 11:12:12,835 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 11:12:12,835 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 11:12:12,835 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 11.1ms
2025-12-01 11:12:12,839 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.2ms
2025-12-01 11:12:12,840 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-01 11:12:12,841 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:12,841 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:12,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,842 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,842 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:12,842 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:12,842 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-01 11:12:12,843 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 11:12:12,845 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-01 11:12:12,846 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-01 11:12:12,847 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-01 11:12:12,848 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:12,848 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:12,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:12,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:12,849 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:12,849 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:12,849 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:12,849 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 11:12:12,850 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 11:12:12,850 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 11:12:12,850 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 11:12:12,850 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 11:12:12,850 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 12.9ms
2025-12-01 11:12:12,854 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.9ms
2025-12-01 11:12:13,875 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:12:13,875 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:12:13,875 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.8ms
2025-12-01 11:12:13,875 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.5ms
2025-12-01 11:12:13,878 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:13,878 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:12:13,882 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 11:12:13,882 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 11:12:17,947 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-01 11:12:17,947 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-01 11:12:17,950 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-01 11:12:17,950 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,950 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,960 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,961 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,964 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,965 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 11:12:17,967 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4089.0ms
2025-12-01 11:12:17,969 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:12:17,969 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:17,969 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:17,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:17,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:17,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:17,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:17,970 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:17,970 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:17,970 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:17,970 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:17,970 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:12:17,972 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 11:12:17,972 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 11:12:17,974 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,974 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,975 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,977 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,979 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:17,980 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 11:12:17,981 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.7ms
2025-12-01 11:12:18,873 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:12:18,873 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:12:18,873 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.9ms
2025-12-01 11:12:18,873 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.5ms
2025-12-01 11:12:18,873 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:18,873 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:12:18,880 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 11:12:18,880 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 11:12:18,881 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:18,882 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:18,883 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 22, P√°gina: 1
2025-12-01 11:12:18,884 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.5ms
2025-12-01 11:12:18,886 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:12:18,886 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:12:18,886 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:12:18,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:18,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:18,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:18,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:12:18,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:12:18,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:12:18,887 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:12:18,887 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:12:18,887 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:12:18,889 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 11:12:18,889 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-01 11:12:18,890 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:18,891 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:12:18,892 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 22, P√°gina: 1
2025-12-01 11:12:18,893 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 6.7ms
2025-12-01 11:15:47,053 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 11:15:47,053 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 11:15:47,053 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 11:15:47,053 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 11:15:47,053 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 11:15:47,053 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-01 11:15:47,843 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-01 11:15:47,845 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-01 11:15:47,845 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-01 11:15:47,847 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-01 11:15:47,848 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-01 11:15:47,848 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-01 11:15:48,133 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-01 11:15:48,133 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-01 11:15:48,207 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-01 11:15:48,207 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-01 11:15:48,207 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-01 11:15:48,397 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-01 11:15:48,397 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-01 11:15:48,505 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'api', 'admin', 'assets', 'static', 'www', 'backend', 'cdn'}
2025-12-01 11:15:52,140 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-01 11:15:52,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,141 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,142 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,142 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-01 11:15:52,173 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-01 11:15:52,173 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-01 11:15:52,173 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 11:15:52,173 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:15:52,173 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14467, Rotaci√≥n: True
2025-12-01 11:15:52,173 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:15:52,173 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-01 11:15:52,173 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-01 11:15:52,173 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14467
2025-12-01 11:15:52,173 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-01 11:15:52,173 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:15:52,173 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-01 11:15:52,182 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 42.9ms
2025-12-01 11:15:52,184 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,184 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-12-01 11:15:52,184 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-12-01 11:15:52,184 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-12-01 11:15:52,184 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-12-01 11:15:52,184 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-12-01 11:15:52,184 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-12-01 11:15:52,194 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 6.3ms
2025-12-01 11:15:52,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,194 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-01 11:15:52,199 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-01 11:15:52,202 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-01 11:15:52,202 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-01 11:15:52,204 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-01 11:15:52,205 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 8.3ms
2025-12-01 11:15:52,212 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:15:52,213 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:15:52,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,214 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,215 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,215 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,215 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:15:52,215 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:15:52,217 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:15:52,218 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:15:52,219 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:15:52,219 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,219 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,220 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:15:52,220 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,223 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:15:52,223 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:15:52,223 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:15:52,223 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:15:52,223 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 17.8ms
2025-12-01 11:15:52,223 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 17.5ms
2025-12-01 11:15:52,223 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 15.4ms
2025-12-01 11:15:52,223 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:15:52,234 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:15:52,234 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:15:52,234 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,234 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,235 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,236 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,236 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,237 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:15:52,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,238 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,239 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:15:52,240 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:15:52,240 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:52,240 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:52,244 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:15:52,245 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:15:52,245 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:15:52,245 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:15:52,245 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:15:52,245 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:15:52,250 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:15:52,252 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 18.5ms
2025-12-01 11:15:52,252 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 18.4ms
2025-12-01 11:15:52,252 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 18.2ms
2025-12-01 11:15:53,304 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:15:53,304 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:53,304 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:53,304 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:53,305 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:15:53,307 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:15:53,308 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:15:53,309 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:15:53,311 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.6ms
2025-12-01 11:15:53,313 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:53,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:53,315 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:53,315 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:53,315 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:15:53,317 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:15:53,317 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:15:53,319 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:15:53,320 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.3ms
2025-12-01 11:15:54,991 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:15:54,991 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:54,992 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:15:54,993 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:15:54,993 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:54,993 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:15:54,993 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:15:54,993 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:15:54,993 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:15:55,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 13.0ms
2025-12-01 11:15:55,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.1ms
2025-12-01 11:15:55,004 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:15:55,004 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:15:55,004 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:55,004 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:55,013 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:15:55,013 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:15:55,013 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:15:55,013 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:15:55,013 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 11.5ms
2025-12-01 11:15:55,018 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 9.9ms
2025-12-01 11:15:56,656 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:15:56,656 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:15:56,656 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 11:15:56,656 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 11:16:00,775 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-01 11:16:00,776 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-01 11:16:00,776 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-01 11:16:00,776 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,784 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,784 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,784 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,784 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,784 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 11:16:00,790 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4134.2ms
2025-12-01 11:16:00,793 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:16:00,794 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-01 11:16:00,794 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-01 11:16:00,794 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-01 11:16:00,794 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,794 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,794 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,794 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,794 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:16:00,803 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-01 11:16:00,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.1ms
2025-12-01 11:20:47,566 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 11:20:47,566 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 11:20:47,568 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 11:20:47,568 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 11:20:47,568 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 11:20:47,568 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-01 11:20:48,426 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-01 11:20:48,429 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-01 11:20:48,429 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-01 11:20:48,429 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-01 11:20:48,430 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-01 11:20:48,430 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-01 11:20:48,738 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-01 11:20:48,738 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-01 11:20:48,818 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-01 11:20:48,818 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-01 11:20:48,818 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-01 11:20:49,058 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-01 11:20:49,063 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-01 11:20:49,203 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'backend', 'assets', 'cdn', 'api', 'www', 'static', 'admin'}
2025-12-01 11:21:36,694 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 11:21:36,694 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 11:21:36,694 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 11:21:36,694 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 11:21:36,694 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 11:21:36,694 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-01 11:21:39,158 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-01 11:21:39,158 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-01 11:21:39,158 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-01 11:21:39,158 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-01 11:21:39,158 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-01 11:21:39,158 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-01 11:21:39,449 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-01 11:21:39,449 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-01 11:21:39,523 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-01 11:21:39,523 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-01 11:21:39,523 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-01 11:21:39,715 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-01 11:21:39,718 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-01 11:21:39,829 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'api', 'cdn', 'admin', 'static', 'backend', 'www'}
2025-12-01 11:21:45,945 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-01 11:21:45,946 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:45,947 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:45,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:45,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:45,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:45,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:45,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:45,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:45,948 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:45,948 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:45,949 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-01 11:21:45,979 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-01 11:21:45,980 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-01 11:21:45,983 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 11:21:45,986 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:21:45,986 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14468, Rotaci√≥n: True
2025-12-01 11:21:45,987 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:21:45,987 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-01 11:21:45,987 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-01 11:21:45,987 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14468
2025-12-01 11:21:45,987 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-01 11:21:45,990 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:21:45,990 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-01 11:21:45,990 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 45.2ms
2025-12-01 11:21:45,994 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-01 11:21:45,994 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:45,994 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:45,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:45,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:45,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:45,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:45,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:45,996 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:45,996 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:45,996 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:45,996 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-12-01 11:21:45,997 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-12-01 11:21:45,997 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-12-01 11:21:45,999 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-12-01 11:21:46,000 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-12-01 11:21:46,001 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-12-01 11:21:46,001 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 7.0ms
2025-12-01 11:21:46,004 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:46,004 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:46,006 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-01 11:21:46,007 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-01 11:21:46,009 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-01 11:21:46,009 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-01 11:21:46,010 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-01 11:21:46,011 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.4ms
2025-12-01 11:21:46,019 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:21:46,019 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:46,020 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:46,021 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:21:46,021 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:21:46,021 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:21:46,023 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:21:46,023 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:21:46,024 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:21:46,025 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:46,025 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:46,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,026 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:46,026 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:46,026 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:21:46,026 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:46,027 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:21:46,030 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:21:46,034 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:21:46,035 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:21:46,037 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:21:46,037 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 18.9ms
2025-12-01 11:21:46,038 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 16.7ms
2025-12-01 11:21:46,038 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 16.5ms
2025-12-01 11:21:46,040 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,042 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:46,042 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:46,042 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:21:46,043 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:21:46,043 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:21:46,044 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:21:46,044 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-01 11:21:46,044 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:46,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:46,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:46,049 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:46,049 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:46,049 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-01 11:21:46,051 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-01 11:21:46,055 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-01 11:21:46,055 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-01 11:21:46,057 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-01 11:21:46,057 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 17.3ms
2025-12-01 11:21:46,058 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 13.2ms
2025-12-01 11:21:46,058 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 13.1ms
2025-12-01 11:21:48,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:21:48,732 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:48,732 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:48,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:48,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:48,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:48,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:48,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:48,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:48,733 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:48,734 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:48,734 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:21:48,737 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:21:48,737 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:21:48,739 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:21:48,740 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.2ms
2025-12-01 11:21:48,741 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:21:48,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:48,742 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:21:48,742 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:21:48,742 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:21:48,742 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:21:48,749 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.4ms
2025-12-01 11:21:50,612 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-01 11:21:50,612 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-12-01 11:21:50,613 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-01 11:21:50,614 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:21:50,614 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:21:50,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:50,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:50,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:50,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:21:50,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:21:50,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:21:50,615 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:21:50,615 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:21:50,615 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/logout/
2025-12-01 11:21:50,617 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:21:50,617 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-01 11:21:50,617 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 1, Usuario: 1 (superadmin)
2025-12-01 11:21:50,621 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:21:50,621 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=1, usuario_id=1, exito=True
2025-12-01 11:21:50,622 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 8.2ms
2025-12-01 11:22:01,816 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-01 11:22:01,816 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-01 11:22:01,818 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-01 11:22:01,818 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:01,818 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:01,818 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:01,818 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:01,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:01,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:01,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:01,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:01,822 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:05,900 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-01 11:22:05,900 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-01 11:22:05,900 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-01 11:22:05,900 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:05,900 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/login/
2025-12-01 11:22:05,900 - app.modules.auth.presentation.endpoints - INFO - Cliente 2 resuelto y validado para login.
2025-12-01 11:22:05,900 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_acme', cliente_id_destino=2
2025-12-01 11:22:05,900 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=2
2025-12-01 11:22:05,900 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,139 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,147 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,152 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:06,152 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_acme', usuario_id=1, cliente_origen=2, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-01 11:22:06,152 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,155 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,156 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:06,156 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,159 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:06,159 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 2, Usuario 1, Tipo: web, Token ID: 2047, Rotaci√≥n: False
2025-12-01 11:22:06,159 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 2047
2025-12-01 11:22:06,159 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_acme autenticado exitosamente (WEB) para cliente 2
2025-12-01 11:22:06,159 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,162 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:06,162 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=2, usuario_id=1, exito=True
2025-12-01 11:22:06,163 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 4345.2ms
2025-12-01 11:22:06,169 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-01 11:22:06,169 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-01 11:22:06,175 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:22:06,176 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:06,176 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:06,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,182 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:06,182 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:06,182 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/clientes/tenant/branding
2025-12-01 11:22:06,183 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,197 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:06,197 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=2 por usuario: admin_acme
2025-12-01 11:22:06,198 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=2
2025-12-01 11:22:06,198 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=2
2025-12-01 11:22:06,199 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:22:06,202 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 26.9ms
2025-12-01 11:22:06,202 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 2.7ms
2025-12-01 11:22:06,202 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-01 11:22:06,203 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:22:06,203 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-01 11:22:06,203 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-01 11:22:06,204 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-01 11:22:06,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 3.5ms
2025-12-01 11:22:06,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 3.4ms
2025-12-01 11:22:06,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 3.3ms
2025-12-01 11:22:06,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 3.2ms
2025-12-01 11:22:06,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.4ms
2025-12-01 11:22:06,209 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:06,209 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,214 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:06,214 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:06,214 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-12-01 11:22:06,216 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:06,216 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:06,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,216 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,218 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:06,218 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:06,219 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-01 11:22:06,219 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,221 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:06,221 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-12-01 11:22:06,221 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:22:06,221 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,283 - app.modules.menus.application.services.menu_helper - INFO - √Årbol de men√∫ construido con 5 items ra√≠z.
2025-12-01 11:22:06,283 - app.modules.menus.application.services.menu_service - INFO - √Årbol de men√∫ construido para usuario 1 con 5 items ra√≠z.
2025-12-01 11:22:06,284 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,285 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:06,285 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,285 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,292 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-01 11:22:06,292 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,294 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-01 11:22:06,294 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-01 11:22:06,294 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:06,295 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-01 11:22:06,298 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,298 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:06,299 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,299 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,300 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:06,300 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:06,300 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,303 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,311 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:06,311 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:06,311 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:06,311 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:06,311 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:06,311 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-01 11:22:06,312 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 101.5ms
2025-12-01 11:22:06,312 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 101.3ms
2025-12-01 11:22:06,312 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 19.4ms
2025-12-01 11:22:06,312 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:06,312 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:06,312 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:06,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,319 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:06,319 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:06,320 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-12-01 11:22:06,320 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,321 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:06,322 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-12-01 11:22:06,322 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:22:06,322 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,323 - app.modules.menus.application.services.menu_helper - INFO - √Årbol de men√∫ construido con 5 items ra√≠z.
2025-12-01 11:22:06,323 - app.modules.menus.application.services.menu_service - INFO - √Årbol de men√∫ construido para usuario 1 con 5 items ra√≠z.
2025-12-01 11:22:06,324 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:06,324 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:06,325 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:06,325 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:06,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,327 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:06,327 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:06,327 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-01 11:22:06,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:06,327 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:06,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:06,329 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-01 11:22:06,329 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 15.6ms
2025-12-01 11:22:06,329 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,329 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:06,329 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,334 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,335 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-01 11:22:06,335 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,336 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-01 11:22:06,336 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-01 11:22:06,337 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,338 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:06,338 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,339 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,339 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:06,339 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:06,339 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,341 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:06,343 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:06,343 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:06,343 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:06,343 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:06,343 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:06,345 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-01 11:22:06,346 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 21.4ms
2025-12-01 11:22:06,346 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 21.4ms
2025-12-01 11:22:08,759 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:22:08,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:22:08,760 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.3ms
2025-12-01 11:22:08,760 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.1ms
2025-12-01 11:22:08,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:08,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:08,766 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:08,766 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:08,766 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-12-01 11:22:08,767 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,768 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:08,769 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,770 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,772 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:08,772 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:08,772 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-12-01 11:22:08,772 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,776 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-12-01 11:22:08,776 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,779 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-01 11:22:08,779 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:08,779 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:08,779 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:08,779 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-01 11:22:08,779 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-12-01 11:22:08,780 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 17.3ms
2025-12-01 11:22:08,781 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:08,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:08,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:08,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:08,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:08,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:08,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:08,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:08,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:08,784 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:08,784 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:08,784 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-12-01 11:22:08,784 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,786 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:08,786 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,787 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,789 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:08,789 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:08,789 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-12-01 11:22:08,789 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,790 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-12-01 11:22:08,790 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:08,791 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-01 11:22:08,792 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:08,792 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:08,792 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:08,792 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-01 11:22:08,792 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-12-01 11:22:08,793 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 11.7ms
2025-12-01 11:22:09,409 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:22:09,419 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:22:09,419 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.2ms
2025-12-01 11:22:09,420 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.1ms
2025-12-01 11:22:09,421 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:22:09,422 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:09,422 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:09,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:09,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:09,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:09,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:09,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:09,425 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:09,426 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:09,426 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-12-01 11:22:09,426 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,427 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:09,428 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,428 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,429 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:09,429 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-12-01 11:22:09,429 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,429 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,436 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 2: 2 √°reas de 2 totales
2025-12-01 11:22:09,436 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 2 - Total: 2, P√°gina: 1
2025-12-01 11:22:09,436 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 14.9ms
2025-12-01 11:22:09,438 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:22:09,438 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:09,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:09,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:09,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:09,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:09,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:09,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:09,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:09,440 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:09,442 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:09,442 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-12-01 11:22:09,442 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,443 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:09,444 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,444 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,445 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:09,445 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-12-01 11:22:09,445 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,446 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:09,448 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 2: 2 √°reas de 2 totales
2025-12-01 11:22:09,448 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 2 - Total: 2, P√°gina: 1
2025-12-01 11:22:09,448 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 10.0ms
2025-12-01 11:22:10,159 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:10,159 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:10,159 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:10,165 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-12-01 11:22:10,165 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,170 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:10,170 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,171 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,172 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:10,172 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:10,173 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-12-01 11:22:10,173 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,174 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-12-01 11:22:10,175 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,176 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-01 11:22:10,176 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,176 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,177 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,177 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-01 11:22:10,177 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-12-01 11:22:10,177 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 13.7ms
2025-12-01 11:22:10,179 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:10,180 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-12-01 11:22:10,180 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,180 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:10,180 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,180 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,186 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:10,186 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:10,186 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-12-01 11:22:10,186 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,187 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-12-01 11:22:10,188 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,189 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-01 11:22:10,189 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,189 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,190 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,190 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-01 11:22:10,190 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-12-01 11:22:10,191 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 11.7ms
2025-12-01 11:22:10,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:10,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:10,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:10,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,762 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:10,763 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:10,763 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-01 11:22:10,763 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,765 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:10,765 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,766 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,767 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:10,767 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:10,767 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,774 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,779 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,779 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,779 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,779 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:10,779 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:10,779 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-01 11:22:10,779 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:10,779 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-01 11:22:10,779 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,779 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:10,779 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,779 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,791 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-01 11:22:10,791 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,791 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-01 11:22:10,791 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-01 11:22:10,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 33.9ms
2025-12-01 11:22:10,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 13.7ms
2025-12-01 11:22:10,791 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,799 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:10,799 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:10,799 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-01 11:22:10,799 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:10,799 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,799 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:10,799 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,802 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,804 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:10,804 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:10,804 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,807 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,809 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,809 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,809 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:10,810 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:10,810 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:10,810 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-01 11:22:10,810 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:10,810 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:10,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:10,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:10,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:10,812 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:10,812 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:10,812 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-01 11:22:10,813 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,813 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:10,813 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,815 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,815 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-01 11:22:10,815 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:10,816 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-01 11:22:10,816 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-01 11:22:10,816 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 21.0ms
2025-12-01 11:22:10,817 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 18.0ms
2025-12-01 11:22:12,901 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-01 11:22:12,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.4ms
2025-12-01 11:22:12,903 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-01 11:22:12,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:12,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:12,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:12,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:12,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:12,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:12,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:12,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:12,906 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:12,906 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:12,906 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/logout/
2025-12-01 11:22:12,907 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:12,907 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:12,912 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:12,912 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 2, Usuario 1
2025-12-01 11:22:12,912 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 2, Usuario: 1 (admin_acme)
2025-12-01 11:22:12,912 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:12,915 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:12,915 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=2, usuario_id=1, exito=True
2025-12-01 11:22:12,916 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 12.3ms
2025-12-01 11:22:20,566 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,569 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,569 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,569 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/login/
2025-12-01 11:22:20,571 - app.modules.auth.presentation.endpoints - INFO - Cliente 2 resuelto y validado para login.
2025-12-01 11:22:20,571 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_acme', cliente_id_destino=2
2025-12-01 11:22:20,571 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=2
2025-12-01 11:22:20,571 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,782 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,782 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,782 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:20,782 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_acme', usuario_id=1, cliente_origen=2, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-01 11:22:20,782 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,786 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,786 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:20,786 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,786 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:20,786 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 2, Usuario 1, Tipo: web, Token ID: 2048, Rotaci√≥n: False
2025-12-01 11:22:20,788 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 2048
2025-12-01 11:22:20,788 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_acme autenticado exitosamente (WEB) para cliente 2
2025-12-01 11:22:20,788 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,789 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:20,790 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=2, usuario_id=1, exito=True
2025-12-01 11:22:20,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 224.6ms
2025-12-01 11:22:20,796 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:22:20,796 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,799 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,801 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,801 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,801 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/clientes/tenant/branding
2025-12-01 11:22:20,802 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,803 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:20,804 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=2 por usuario: admin_acme
2025-12-01 11:22:20,804 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=2
2025-12-01 11:22:20,806 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=2
2025-12-01 11:22:20,808 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 10.8ms
2025-12-01 11:22:20,808 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:20,808 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:20,809 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:20,810 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,811 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,813 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,813 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,813 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-01 11:22:20,814 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,814 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,816 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,817 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,817 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-12-01 11:22:20,817 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,817 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,818 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,818 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,820 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,820 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,820 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-01 11:22:20,821 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,822 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:20,822 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,823 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,824 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-01 11:22:20,824 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,824 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-01 11:22:20,825 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-01 11:22:20,825 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,825 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:20,825 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-12-01 11:22:20,825 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:22:20,825 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,828 - app.modules.menus.application.services.menu_helper - INFO - √Årbol de men√∫ construido con 5 items ra√≠z.
2025-12-01 11:22:20,828 - app.modules.menus.application.services.menu_service - INFO - √Årbol de men√∫ construido para usuario 1 con 5 items ra√≠z.
2025-12-01 11:22:20,828 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,829 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:20,831 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,831 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,832 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:20,833 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:20,833 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,835 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,838 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:20,838 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:20,838 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:20,839 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:20,839 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:20,839 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-01 11:22:20,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 31.3ms
2025-12-01 11:22:20,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 31.3ms
2025-12-01 11:22:20,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 31.2ms
2025-12-01 11:22:20,840 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:20,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,844 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,846 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,846 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,846 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-01 11:22:20,847 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,848 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:20,848 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,849 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,850 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-01 11:22:20,850 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,851 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-01 11:22:20,851 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-01 11:22:20,851 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:20,852 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:20,852 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,852 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,853 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,853 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,854 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,855 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,855 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-12-01 11:22:20,855 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:20,855 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:20,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:20,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:20,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:20,856 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:20,859 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:20,860 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-01 11:22:20,860 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,861 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:20,862 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-12-01 11:22:20,862 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:22:20,862 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,863 - app.modules.menus.application.services.menu_helper - INFO - √Årbol de men√∫ construido con 5 items ra√≠z.
2025-12-01 11:22:20,863 - app.modules.menus.application.services.menu_service - INFO - √Årbol de men√∫ construido para usuario 1 con 5 items ra√≠z.
2025-12-01 11:22:20,865 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,867 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:20,867 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,869 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,869 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:20,869 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-01 11:22:20,870 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,871 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:20,874 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:20,874 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:20,874 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-01 11:22:20,874 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:20,874 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:20,875 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-01 11:22:20,875 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 33.2ms
2025-12-01 11:22:20,876 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 25.0ms
2025-12-01 11:22:20,876 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 24.9ms
2025-12-01 11:22:23,783 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-01 11:22:23,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:23,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-01 11:22:23,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:23,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:23,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:23,785 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-01 11:22:23,785 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:23,785 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-01 11:22:23,785 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-01 11:22:23,785 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-01 11:22:23,785 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/logout/
2025-12-01 11:22:23,785 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:23,785 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:23,789 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:23,790 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 2, Usuario 1
2025-12-01 11:22:23,790 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 2, Usuario: 1 (admin_acme)
2025-12-01 11:22:23,790 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-01 11:22:23,792 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:23,792 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=2, usuario_id=1, exito=True
2025-12-01 11:22:23,792 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 9.0ms
2025-12-01 11:22:32,231 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-01 11:22:32,231 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-01 11:22:32,231 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,231 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 3: multi - bd_cliente_innova
2025-12-01 11:22:32,231 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,239 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/auth/login/
2025-12-01 11:22:32,241 - app.modules.auth.presentation.endpoints - INFO - Cliente 3 resuelto y validado para login.
2025-12-01 11:22:32,241 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_innova', cliente_id_destino=3
2025-12-01 11:22:32,241 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3
2025-12-01 11:22:32,242 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,466 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,466 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,475 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:32,475 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_innova', usuario_id=1, cliente_origen=3, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-01 11:22:32,475 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,479 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,479 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:32,481 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,484 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:32,484 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3, Usuario 1, Tipo: web, Token ID: 2, Rotaci√≥n: False
2025-12-01 11:22:32,484 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 2
2025-12-01 11:22:32,484 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_innova autenticado exitosamente (WEB) para cliente 3
2025-12-01 11:22:32,484 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,488 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:32,488 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3, usuario_id=1, exito=True
2025-12-01 11:22:32,489 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 254.6ms
2025-12-01 11:22:32,498 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-01 11:22:32,498 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-01 11:22:32,500 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:22:32,500 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,500 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,503 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,503 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,503 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/clientes/tenant/branding
2025-12-01 11:22:32,504 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,519 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:32,519 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=3 por usuario: admin_innova
2025-12-01 11:22:32,519 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=3
2025-12-01 11:22:32,520 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=3
2025-12-01 11:22:32,521 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 20.8ms
2025-12-01 11:22:32,525 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:22:32,526 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.2ms
2025-12-01 11:22:32,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-01 11:22:32,529 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-01 11:22:32,531 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.4ms
2025-12-01 11:22:32,531 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.1ms
2025-12-01 11:22:32,531 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-01 11:22:32,531 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:22:32,532 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-01 11:22:32,533 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:32,534 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.9ms
2025-12-01 11:22:32,534 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 2.7ms
2025-12-01 11:22:32,534 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.6ms
2025-12-01 11:22:32,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,537 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,537 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,537 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,538 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/menus/getmenu/
2025-12-01 11:22:32,539 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,540 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:32,541 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 3
2025-12-01 11:22:32,541 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:22:32,541 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,545 - app.infrastructure.database.queries - ERROR - Error en execute_procedure_params: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
2025-12-01 11:22:32,545 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en el procedimiento: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 452, in execute_procedure_params
    cursor.execute(query, tuple(params.values()))
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 464, in execute_procedure_params
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en el procedimiento: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
2025-12-01 11:22:32,547 - app.modules.menus.application.services.menu_service - ERROR - Error de BD al obtener men√∫ para usuario 1: Error en el procedimiento: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
2025-12-01 11:22:32,547 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /getmenu/ para usuario 1: Error de base de datos al obtener men√∫ del usuario
2025-12-01 11:22:32,549 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:32,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:32,551 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 17.7ms
2025-12-01 11:22:32,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,553 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,553 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,554 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/usuarios/
2025-12-01 11:22:32,554 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,554 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,556 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,556 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,556 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/roles/all-active/
2025-12-01 11:22:32,557 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,558 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:32,558 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,561 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,565 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 3 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:32,566 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3: page=1, limit=10, search='None'
2025-12-01 11:22:32,566 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,570 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,575 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:32,575 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:32,575 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:32,575 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:32,576 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:32,576 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3 - Total: 3, P√°gina: 1
2025-12-01 11:22:32,576 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,578 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:32,578 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,580 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,580 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 3 para lista simple
2025-12-01 11:22:32,581 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,583 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 3
2025-12-01 11:22:32,583 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3 - Total: 3
2025-12-01 11:22:32,584 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 33.9ms
2025-12-01 11:22:32,585 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 33.9ms
2025-12-01 11:22:32,585 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:32,586 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,586 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,588 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,588 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,589 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/menus/getmenu/
2025-12-01 11:22:32,589 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,591 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:32,591 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 3
2025-12-01 11:22:32,591 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:22:32,591 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,592 - app.infrastructure.database.queries - ERROR - Error en execute_procedure_params: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
2025-12-01 11:22:32,592 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en el procedimiento: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 452, in execute_procedure_params
    cursor.execute(query, tuple(params.values()))
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 464, in execute_procedure_params
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en el procedimiento: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
2025-12-01 11:22:32,593 - app.modules.menus.application.services.menu_service - ERROR - Error de BD al obtener men√∫ para usuario 1: Error en el procedimiento: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not find stored procedure 'sp_GetMenuForUser'. (2812) (SQLExecDirectW)")
2025-12-01 11:22:32,593 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /getmenu/ para usuario 1: Error de base de datos al obtener men√∫ del usuario
2025-12-01 11:22:32,595 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,599 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,599 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,599 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/usuarios/
2025-12-01 11:22:32,600 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,601 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:32,601 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,602 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,603 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 3 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:32,603 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3: page=1, limit=10, search='None'
2025-12-01 11:22:32,603 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,603 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,606 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:32,606 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:32,606 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:32,608 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-01 11:22:32,608 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:32,608 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3 - Total: 3, P√°gina: 1
2025-12-01 11:22:32,609 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:32,609 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 24.2ms
2025-12-01 11:22:32,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:32,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:32,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:32,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:32,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:32,612 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:32,612 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:32,612 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/roles/all-active/
2025-12-01 11:22:32,613 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,614 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:32,615 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,615 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,616 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 3 para lista simple
2025-12-01 11:22:32,616 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:32,618 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 3
2025-12-01 11:22:32,618 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3 - Total: 3
2025-12-01 11:22:32,619 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 23.8ms
2025-12-01 11:22:32,619 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 11.0ms
2025-12-01 11:22:34,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:22:34,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:22:34,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.2ms
2025-12-01 11:22:34,792 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.1ms
2025-12-01 11:22:34,793 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:34,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:34,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:34,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:34,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:34,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:34,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:34,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:34,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:34,796 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:34,797 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:34,797 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/roles/
2025-12-01 11:22:34,799 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,800 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:34,800 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,802 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,803 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 3 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:34,803 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3: page=1, limit=10, search='None'
2025-12-01 11:22:34,803 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3, page=1, limit=10, search='None'
2025-12-01 11:22:34,803 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,806 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3: 3
2025-12-01 11:22:34,806 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,810 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-01 11:22:34,810 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:34,810 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:34,810 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:34,810 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-01 11:22:34,811 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3, Total roles: 3
2025-12-01 11:22:34,811 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 18.5ms
2025-12-01 11:22:34,814 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:34,814 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:34,814 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:34,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:34,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:34,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:34,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:34,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:34,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:34,817 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:34,818 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:34,818 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/roles/
2025-12-01 11:22:34,818 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,820 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:34,820 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,821 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,822 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 3 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:34,822 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3: page=1, limit=10, search='None'
2025-12-01 11:22:34,822 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3, page=1, limit=10, search='None'
2025-12-01 11:22:34,822 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,824 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3: 3
2025-12-01 11:22:34,824 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:34,825 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-01 11:22:34,826 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:34,826 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:34,826 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=3. Normalizando codigo_rol a None.
2025-12-01 11:22:34,826 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-01 11:22:34,826 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3, Total roles: 3
2025-12-01 11:22:34,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 13.7ms
2025-12-01 11:22:35,387 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:22:35,388 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:22:35,388 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.3ms
2025-12-01 11:22:35,389 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.1ms
2025-12-01 11:22:35,389 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:35,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:35,394 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:35,394 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:35,394 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/areas/
2025-12-01 11:22:35,395 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,397 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:35,397 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,398 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,400 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 3 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:35,400 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 3: skip=0, limit=10, search='None'
2025-12-01 11:22:35,400 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,406 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,409 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 3: 2 √°reas de 2 totales
2025-12-01 11:22:35,410 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 3 - Total: 2, P√°gina: 1
2025-12-01 11:22:35,410 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 20.2ms
2025-12-01 11:22:35,412 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:22:35,412 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:35,412 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:35,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:35,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:35,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:35,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:35,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:35,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:35,416 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:35,416 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:35,416 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/areas/
2025-12-01 11:22:35,417 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,418 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=3 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-01 11:22:35,418 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,419 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,420 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 3 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:35,420 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 3: skip=0, limit=10, search='None'
2025-12-01 11:22:35,420 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,422 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:35,423 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 3: 2 √°reas de 2 totales
2025-12-01 11:22:35,424 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 3 - Total: 2, P√°gina: 1
2025-12-01 11:22:35,424 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 11.5ms
2025-12-01 11:22:37,445 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-01 11:22:37,446 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.4ms
2025-12-01 11:22:37,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-01 11:22:37,448 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:37,448 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-01 11:22:37,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:37,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:37,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:37,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-01 11:22:37,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:37,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-01 11:22:37,450 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-01 11:22:37,450 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-01 11:22:37,450 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/auth/logout/
2025-12-01 11:22:37,451 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:37,454 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:37,456 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:37,457 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3, Usuario 1
2025-12-01 11:22:37,457 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3, Usuario: 1 (admin_innova)
2025-12-01 11:22:37,457 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-01 11:22:37,459 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:37,460 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3, usuario_id=1, exito=True
2025-12-01 11:22:37,460 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 13.0ms
2025-12-01 11:22:47,886 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-01 11:22:47,886 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-01 11:22:47,886 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-01 11:22:47,886 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:47,890 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:47,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:47,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:47,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:47,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:47,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:47,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:47,893 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:47,894 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-12-01 11:22:47,894 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:47,895 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/auth/login/
2025-12-01 11:22:47,897 - app.modules.auth.presentation.endpoints - INFO - Cliente 4 resuelto y validado para login.
2025-12-01 11:22:47,897 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=4
2025-12-01 11:22:47,897 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=4
2025-12-01 11:22:48,096 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 2: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:48,100 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=2, cliente_origen=4, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-01 11:22:48,100 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 2: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:22:48,100 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:48,100 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 4, Usuario 2, Tipo: web, Token ID: 14469, Rotaci√≥n: False
2025-12-01 11:22:48,100 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14469
2025-12-01 11:22:48,100 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 4
2025-12-01 11:22:48,108 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:48,108 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=4, usuario_id=2, exito=True
2025-12-01 11:22:48,108 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 220.1ms
2025-12-01 11:22:48,111 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-01 11:22:48,111 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-01 11:22:48,118 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:22:48,118 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:48,120 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:48,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:48,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:48,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:48,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:48,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:48,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:48,122 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:48,122 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:48,122 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/clientes/tenant/branding
2025-12-01 11:22:48,123 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=4 por usuario: admin_tech
2025-12-01 11:22:48,123 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=4
2025-12-01 11:22:48,123 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=4
2025-12-01 11:22:48,123 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 7.3ms
2025-12-01 11:22:48,137 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:22:48,138 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.7ms
2025-12-01 11:22:48,139 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:22:48,139 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.7ms
2025-12-01 11:22:48,140 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:48,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:48,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:48,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:48,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:48,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:48,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:48,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:48,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:48,144 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:48,145 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:48,145 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:22:48,147 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 2 del cliente 4
2025-12-01 11:22:48,147 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 2
2025-12-01 11:22:48,148 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 2.
2025-12-01 11:22:48,149 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 8.4ms
2025-12-01 11:22:48,151 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:48,151 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:48,151 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:48,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:48,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:48,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:48,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:48,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:48,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:48,153 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:48,154 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:48,154 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:22:48,155 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 2 del cliente 4
2025-12-01 11:22:48,156 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 2
2025-12-01 11:22:48,156 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 2.
2025-12-01 11:22:48,157 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 6.6ms
2025-12-01 11:22:50,703 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-01 11:22:50,705 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:50,706 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-01 11:22:50,706 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.3ms
2025-12-01 11:22:50,707 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:50,707 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:50,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,710 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:50,710 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:50,710 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:22:50,714 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 2 del cliente 4
2025-12-01 11:22:50,714 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 2
2025-12-01 11:22:50,714 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 2.
2025-12-01 11:22:50,716 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 10.6ms
2025-12-01 11:22:50,717 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-01 11:22:50,717 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-01 11:22:50,718 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.0ms
2025-12-01 11:22:50,718 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.8ms
2025-12-01 11:22:50,720 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 14.7ms
2025-12-01 11:22:50,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:50,722 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:50,722 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:50,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,724 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:50,724 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:50,726 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/usuarios/
2025-12-01 11:22:50,734 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:50,736 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 4: page=1, limit=10, search='None'
2025-12-01 11:22:50,744 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios √∫nicos de 2 filas crudas
2025-12-01 11:22:50,745 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:50,745 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 4 - Total: 2, P√°gina: 1
2025-12-01 11:22:50,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:50,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:50,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:50,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,751 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:50,751 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:50,751 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/roles/all-active/
2025-12-01 11:22:50,755 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 2 del cliente 4 para lista simple
2025-12-01 11:22:50,760 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 0 roles activos para cliente 4
2025-12-01 11:22:50,760 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 4 - Total: 0
2025-12-01 11:22:50,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:22:50,760 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 39.7ms
2025-12-01 11:22:50,761 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:50,761 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:50,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,764 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:50,764 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:50,764 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:22:50,766 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 2 del cliente 4
2025-12-01 11:22:50,767 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 2
2025-12-01 11:22:50,767 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 2.
2025-12-01 11:22:50,768 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 21.9ms
2025-12-01 11:22:50,768 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-01 11:22:50,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:50,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:50,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,772 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:50,773 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:50,773 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/usuarios/
2025-12-01 11:22:50,773 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 12.8ms
2025-12-01 11:22:50,776 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:50,776 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 4: page=1, limit=10, search='None'
2025-12-01 11:22:50,781 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios √∫nicos de 2 filas crudas
2025-12-01 11:22:50,781 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-01 11:22:50,781 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 4 - Total: 2, P√°gina: 1
2025-12-01 11:22:50,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-01 11:22:50,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:50,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:50,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:50,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:50,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:50,784 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:50,786 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:50,786 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/roles/all-active/
2025-12-01 11:22:50,788 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 2 del cliente 4 para lista simple
2025-12-01 11:22:50,790 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 0 roles activos para cliente 4
2025-12-01 11:22:50,790 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 4 - Total: 0
2025-12-01 11:22:50,790 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 21.2ms
2025-12-01 11:22:50,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 8.6ms
2025-12-01 11:22:51,424 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:22:51,424 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.7ms
2025-12-01 11:22:51,424 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:22:51,424 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.8ms
2025-12-01 11:22:51,424 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:51,424 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:51,424 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:51,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:51,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:51,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:51,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:51,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:51,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:51,432 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:51,432 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:51,433 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/roles/
2025-12-01 11:22:51,437 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:51,437 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 4: page=1, limit=10, search='None'
2025-12-01 11:22:51,437 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=4, page=1, limit=10, search='None'
2025-12-01 11:22:51,440 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 4: 4
2025-12-01 11:22:51,443 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 4 roles para la p√°gina 1 de 4 totales
2025-12-01 11:22:51,443 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 4, Total: 4, P√°gina: 1/1, Resultados: 4
2025-12-01 11:22:51,443 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 4, Total roles: 4
2025-12-01 11:22:51,445 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 16.8ms
2025-12-01 11:22:51,446 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:22:51,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:51,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:51,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:51,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:51,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:51,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:51,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:51,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:51,449 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:51,449 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:51,451 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/roles/
2025-12-01 11:22:51,453 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:51,454 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 4: page=1, limit=10, search='None'
2025-12-01 11:22:51,454 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=4, page=1, limit=10, search='None'
2025-12-01 11:22:51,455 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 4: 4
2025-12-01 11:22:51,457 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 4 roles para la p√°gina 1 de 4 totales
2025-12-01 11:22:51,457 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 4, Total: 4, P√°gina: 1/1, Resultados: 4
2025-12-01 11:22:51,457 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 4, Total roles: 4
2025-12-01 11:22:51,458 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 11.6ms
2025-12-01 11:22:52,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:22:52,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:22:52,551 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.1ms
2025-12-01 11:22:52,551 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 0.7ms
2025-12-01 11:22:52,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:52,551 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:52,557 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:52,557 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:52,557 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/areas/
2025-12-01 11:22:52,561 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:52,561 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 4: skip=0, limit=10, search='None'
2025-12-01 11:22:52,564 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 4: 0 √°reas de 0 totales
2025-12-01 11:22:52,564 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 4 - Total: 0, P√°gina: 1
2025-12-01 11:22:52,566 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 11.4ms
2025-12-01 11:22:52,569 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:22:52,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:52,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:52,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:52,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:52,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:52,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:52,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:52,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:52,571 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:52,571 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:52,571 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/areas/
2025-12-01 11:22:52,571 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:22:52,571 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 4: skip=0, limit=10, search='None'
2025-12-01 11:22:52,571 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 4: 0 √°reas de 0 totales
2025-12-01 11:22:52,571 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 4 - Total: 0, P√°gina: 1
2025-12-01 11:22:52,577 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 8.1ms
2025-12-01 11:22:54,041 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-01 11:22:54,041 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-12-01 11:22:54,042 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-01 11:22:54,043 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:22:54,043 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-01 11:22:54,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:54,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:54,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:54,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-01 11:22:54,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:22:54,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-01 11:22:54,045 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-01 11:22:54,045 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:22:54,045 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/auth/logout/
2025-12-01 11:22:54,048 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:54,048 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 4, Usuario 2
2025-12-01 11:22:54,048 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 4, Usuario: 2 (admin_tech)
2025-12-01 11:22:54,049 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:22:54,050 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=4, usuario_id=2, exito=True
2025-12-01 11:22:54,050 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 7.4ms
2025-12-01 11:23:05,093 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-01 11:23:05,093 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-01 11:23:05,095 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,095 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:05,099 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-12-01 11:23:05,099 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:05,100 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/login/
2025-12-01 11:23:05,102 - app.modules.auth.presentation.endpoints - INFO - Cliente 5 resuelto y validado para login.
2025-12-01 11:23:05,102 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_global', cliente_id_destino=5
2025-12-01 11:23:05,102 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=5
2025-12-01 11:23:05,305 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 4: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:23:05,305 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_global', usuario_id=4, cliente_origen=5, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-01 11:23:05,305 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 4: level=4, super_admin=False, type=tenant_admin
2025-12-01 11:23:05,305 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:23:05,305 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 5, Usuario 4, Tipo: web, Token ID: 14470, Rotaci√≥n: False
2025-12-01 11:23:05,305 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14470
2025-12-01 11:23:05,305 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_global autenticado exitosamente (WEB) para cliente 5
2025-12-01 11:23:05,311 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:23:05,311 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=5, usuario_id=4, exito=True
2025-12-01 11:23:05,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 218.3ms
2025-12-01 11:23:05,320 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-01 11:23:05,320 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-01 11:23:05,325 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:23:05,325 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:05,325 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:05,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,327 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:05,328 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:05,328 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/clientes/tenant/branding
2025-12-01 11:23:05,345 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=5 por usuario: admin_global
2025-12-01 11:23:05,345 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=5
2025-12-01 11:23:05,346 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=5
2025-12-01 11:23:05,348 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:23:05,348 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 24.5ms
2025-12-01 11:23:05,348 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.7ms
2025-12-01 11:23:05,348 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:23:05,350 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.2ms
2025-12-01 11:23:05,352 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:23:05,353 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:05,353 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:05,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,354 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,354 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,354 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,355 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:05,355 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:05,355 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:23:05,355 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 4 del cliente 5
2025-12-01 11:23:05,355 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 4
2025-12-01 11:23:05,355 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 4.
2025-12-01 11:23:05,355 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 6.0ms
2025-12-01 11:23:05,360 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:23:05,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:05,361 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:05,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:05,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:05,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:05,363 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:05,363 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:05,364 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:23:05,365 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 4 del cliente 5
2025-12-01 11:23:05,365 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 4
2025-12-01 11:23:05,366 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 4.
2025-12-01 11:23:05,366 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 6.9ms
2025-12-01 11:23:07,729 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:23:07,729 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:23:07,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-01 11:23:07,731 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 2.7ms
2025-12-01 11:23:07,732 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:07,732 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:07,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,736 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:07,736 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:07,736 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:23:07,738 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 4 del cliente 5
2025-12-01 11:23:07,739 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 4
2025-12-01 11:23:07,739 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 4.
2025-12-01 11:23:07,740 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 10.4ms
2025-12-01 11:23:07,741 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 12.6ms
2025-12-01 11:23:07,742 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:23:07,742 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:07,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:07,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,745 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:07,745 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:07,745 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/roles/
2025-12-01 11:23:07,750 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 4 del cliente 5 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:23:07,750 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 5: page=1, limit=10, search='None'
2025-12-01 11:23:07,750 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=5, page=1, limit=10, search='None'
2025-12-01 11:23:07,751 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 5: 4
2025-12-01 11:23:07,753 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 4 roles para la p√°gina 1 de 4 totales
2025-12-01 11:23:07,753 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 5, Total: 4, P√°gina: 1/1, Resultados: 4
2025-12-01 11:23:07,753 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 5, Total roles: 4
2025-12-01 11:23:07,755 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:23:07,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 13.3ms
2025-12-01 11:23:07,755 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:07,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:07,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,758 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:07,758 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:07,758 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-01 11:23:07,762 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 4 del cliente 5
2025-12-01 11:23:07,762 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 4
2025-12-01 11:23:07,763 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 4.
2025-12-01 11:23:07,765 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-01 11:23:07,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:07,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:07,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:07,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:07,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:07,768 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:07,768 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:07,768 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/roles/
2025-12-01 11:23:07,768 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 13.6ms
2025-12-01 11:23:07,772 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 4 del cliente 5 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-01 11:23:07,772 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 5: page=1, limit=10, search='None'
2025-12-01 11:23:07,772 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=5, page=1, limit=10, search='None'
2025-12-01 11:23:07,773 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 5: 4
2025-12-01 11:23:07,774 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 4 roles para la p√°gina 1 de 4 totales
2025-12-01 11:23:07,775 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 5, Total: 4, P√°gina: 1/1, Resultados: 4
2025-12-01 11:23:07,775 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 5, Total roles: 4
2025-12-01 11:23:07,776 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 12.0ms
2025-12-01 11:23:08,542 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:23:08,542 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-01 11:23:08,542 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.2ms
2025-12-01 11:23:08,542 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.0ms
2025-12-01 11:23:08,549 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:23:08,550 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:08,550 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:08,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:08,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:08,550 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:08,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:08,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:08,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:08,553 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:08,553 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:08,554 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/areas/
2025-12-01 11:23:08,556 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 4 del cliente 5 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:23:08,557 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 5: skip=0, limit=10, search='None'
2025-12-01 11:23:08,558 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 5: 0 √°reas de 0 totales
2025-12-01 11:23:08,559 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 5 - Total: 0, P√°gina: 1
2025-12-01 11:23:08,559 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 10.2ms
2025-12-01 11:23:08,561 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-01 11:23:08,561 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:08,561 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:08,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:08,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:08,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:08,563 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:08,563 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:08,563 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:08,564 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:08,564 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:08,564 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/areas/
2025-12-01 11:23:08,568 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 4 del cliente 5 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-01 11:23:08,569 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 5: skip=0, limit=10, search='None'
2025-12-01 11:23:08,570 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 5: 0 √°reas de 0 totales
2025-12-01 11:23:08,570 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 5 - Total: 0, P√°gina: 1
2025-12-01 11:23:08,571 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 10.2ms
2025-12-01 11:23:12,270 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-01 11:23:12,270 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.4ms
2025-12-01 11:23:12,271 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-01 11:23:12,272 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:12,272 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-01 11:23:12,272 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:12,272 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:12,272 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:12,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-01 11:23:12,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:12,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-01 11:23:12,273 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-01 11:23:12,275 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-01 11:23:12,275 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/logout/
2025-12-01 11:23:12,277 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-01 11:23:12,277 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 5, Usuario 4
2025-12-01 11:23:12,277 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 5, Usuario: 4 (admin_global)
2025-12-01 11:23:12,281 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:23:12,281 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=5, usuario_id=4, exito=True
2025-12-01 11:23:12,281 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 9.7ms
2025-12-01 11:23:20,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-01 11:23:20,596 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-01 11:23:20,598 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-01 11:23:20,598 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:20,598 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:20,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,600 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:20,600 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:20,600 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-12-01 11:23:20,600 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-12-01 11:23:20,600 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-12-01 11:23:20,600 - app.modules.auth.application.services.auth_service - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-12-01 11:23:20,800 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 11:23:20,800 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=1, access_level=5, user_type=super_admin
2025-12-01 11:23:20,800 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=1
2025-12-01 11:23:20,800 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-01 11:23:20,800 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:23:20,800 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14471, Rotaci√≥n: False
2025-12-01 11:23:20,800 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14471
2025-12-01 11:23:20,800 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 1
2025-12-01 11:23:20,809 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-01 11:23:20,809 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=1, usuario_id=1, exito=True
2025-12-01 11:23:20,810 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 211.2ms
2025-12-01 11:23:20,817 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-01 11:23:20,817 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.6ms
2025-12-01 11:23:20,820 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-01 11:23:20,821 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:20,821 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:20,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,822 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:20,822 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:20,822 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-01 11:23:20,824 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-01 11:23:20,824 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-01 11:23:20,826 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-01 11:23:20,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.2ms
2025-12-01 11:23:20,831 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:23:20,832 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.8ms
2025-12-01 11:23:20,833 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-01 11:23:20,834 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.6ms
2025-12-01 11:23:20,834 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:23:20,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:20,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:20,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,837 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:20,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:20,838 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:23:20,839 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:23:20,839 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:23:20,840 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:23:20,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 5.8ms
2025-12-01 11:23:20,840 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-01 11:23:20,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:20,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:20,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:20,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:20,843 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:20,843 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:20,845 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:20,845 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-01 11:23:20,847 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-01 11:23:20,847 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-01 11:23:20,848 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-01 11:23:20,849 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 6.2ms
2025-12-01 11:23:23,560 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-01 11:23:23,560 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-01 11:23:23,561 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.1ms
2025-12-01 11:23:23,562 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.1ms
2025-12-01 11:23:23,563 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:23:23,563 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:23,565 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:23,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:23,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:23,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:23,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:23,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:23,566 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:23,566 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:23,566 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:23,566 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:23:23,568 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:23:23,569 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:23:23,570 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:23:23,572 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.2ms
2025-12-01 11:23:23,573 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:23,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:23,575 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:23,575 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:23,575 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-01 11:23:23,577 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-01 11:23:23,577 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-01 11:23:23,580 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-01 11:23:23,580 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.7ms
2025-12-01 11:23:28,923 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/
2025-12-01 11:23:28,923 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/ 200 0.7ms
2025-12-01 11:23:28,924 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/
2025-12-01 11:23:28,925 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/estadisticas/
2025-12-01 11:23:28,926 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/ 200 1.2ms
2025-12-01 11:23:28,926 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/estadisticas/ 200 1.0ms
2025-12-01 11:23:28,926 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/estadisticas/
2025-12-01 11:23:28,928 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/estadisticas/ 200 1.6ms
2025-12-01 11:23:28,928 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/
2025-12-01 11:23:28,929 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:28,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:28,934 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,935 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,935 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,936 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:28,937 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:28,937 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/
2025-12-01 11:23:28,941 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5 recibida por usuario: superadmin
2025-12-01 11:23:28,945 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/estadisticas/
2025-12-01 11:23:28,945 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/ 200 17.8ms
2025-12-01 11:23:28,946 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:28,946 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:28,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:28,948 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/estadisticas/
2025-12-01 11:23:28,950 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5/estadisticas recibida por usuario: superadmin
2025-12-01 11:23:28,950 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 5
2025-12-01 11:23:28,955 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 5
2025-12-01 11:23:28,956 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/estadisticas/ 200 11.8ms
2025-12-01 11:23:28,958 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/
2025-12-01 11:23:28,959 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:28,959 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:28,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,961 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:28,961 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:28,961 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/
2025-12-01 11:23:28,961 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/estadisticas/
2025-12-01 11:23:28,961 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5 recibida por usuario: superadmin
2025-12-01 11:23:28,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:28,965 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:28,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,965 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:28,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:28,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:28,966 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:28,966 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:28,966 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/estadisticas/
2025-12-01 11:23:28,968 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5/estadisticas recibida por usuario: superadmin
2025-12-01 11:23:28,968 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 5
2025-12-01 11:23:28,972 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 5
2025-12-01 11:23:28,973 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/ 200 13.9ms
2025-12-01 11:23:28,973 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/estadisticas/ 200 11.7ms
2025-12-01 11:23:30,192 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/5/modulos/
2025-12-01 11:23:30,192 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/5/modulos/
2025-12-01 11:23:30,192 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/5/modulos/ 200 1.0ms
2025-12-01 11:23:30,192 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/5/modulos/ 200 0.6ms
2025-12-01 11:23:30,192 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/5/modulos/
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:30,192 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/5/modulos/
2025-12-01 11:23:30,198 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/5/modulos/ recibida
2025-12-01 11:23:30,198 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 5
2025-12-01 11:23:30,199 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 5 recuperados: 5 m√≥dulos
2025-12-01 11:23:30,200 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/5/modulos/ 200 5.3ms
2025-12-01 11:23:30,201 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/5/modulos/
2025-12-01 11:23:30,202 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:30,202 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:30,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:30,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:30,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:30,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:30,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:30,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:30,203 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:30,203 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:30,203 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/5/modulos/
2025-12-01 11:23:30,206 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/5/modulos/ recibida
2025-12-01 11:23:30,206 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 5
2025-12-01 11:23:30,207 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 5 recuperados: 5 m√≥dulos
2025-12-01 11:23:30,207 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/5/modulos/ 200 5.4ms
2025-12-01 11:23:32,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/5/
2025-12-01 11:23:32,134 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/5/ 200 1.3ms
2025-12-01 11:23:32,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/5/
2025-12-01 11:23:32,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 11:23:32,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-01 11:23:32,137 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/5/ 200 1.5ms
2025-12-01 11:23:32,137 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.2ms
2025-12-01 11:23:32,137 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.2ms
2025-12-01 11:23:32,140 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/5/
2025-12-01 11:23:32,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:32,141 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/5/
2025-12-01 11:23:32,143 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/5 recibida
2025-12-01 11:23:32,143 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 5
2025-12-01 11:23:32,144 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 5: 1 conexiones
2025-12-01 11:23:32,144 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:32,144 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 11:23:32,144 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 11:23:32,144 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 11:23:32,150 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 11:23:32,150 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 11:23:32,150 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/5/ 200 11.3ms
2025-12-01 11:23:32,151 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 5.8ms
2025-12-01 11:23:32,152 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/5/
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,155 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:32,155 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:32,155 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/5/
2025-12-01 11:23:32,156 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/5 recibida
2025-12-01 11:23:32,157 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 5
2025-12-01 11:23:32,157 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 5: 1 conexiones
2025-12-01 11:23:32,158 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-01 11:23:32,159 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:32,159 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:32,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:32,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:32,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:32,160 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:32,160 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:32,160 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-01 11:23:32,162 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-01 11:23:32,162 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-01 11:23:32,163 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-01 11:23:32,164 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-01 11:23:32,164 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/5/ 200 12.2ms
2025-12-01 11:23:32,164 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.1ms
2025-12-01 11:23:34,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-12-01 11:23:34,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-12-01 11:23:34,625 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 1.0ms
2025-12-01 11:23:34,625 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 0.6ms
2025-12-01 11:23:34,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:34,625 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:34,630 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:34,630 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-12-01 11:23:34,630 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 5 - page: 1, limit: 10
2025-12-01 11:23:34,630 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 5, page: 1, limit: 10
2025-12-01 11:23:34,643 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 5 recuperados - Total: 2, P√°gina: 1
2025-12-01 11:23:34,644 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 15.2ms
2025-12-01 11:23:34,646 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-12-01 11:23:34,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:34,646 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:34,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:34,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:34,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:34,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:34,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:34,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:34,647 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:34,647 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:34,647 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-12-01 11:23:34,649 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 5 - page: 1, limit: 10
2025-12-01 11:23:34,649 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 5, page: 1, limit: 10
2025-12-01 11:23:34,654 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 5 recuperados - Total: 2, P√°gina: 1
2025-12-01 11:23:34,654 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 9.3ms
2025-12-01 11:23:40,794 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/4/actividad/
2025-12-01 11:23:40,794 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/4/actividad/ 200 0.7ms
2025-12-01 11:23:40,795 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/4/sesiones/
2025-12-01 11:23:40,795 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/4/sesiones/ 200 0.8ms
2025-12-01 11:23:40,797 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/4/actividad/
2025-12-01 11:23:40,798 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:40,798 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:40,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:40,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:40,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:40,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:40,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:40,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:40,800 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:40,800 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:40,801 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/4/actividad/
2025-12-01 11:23:40,804 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 4, cliente_id: 5
2025-12-01 11:23:40,804 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [ACTIVIDAD] Usando cliente_id proporcionado: 5
2025-12-01 11:23:40,810 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/4/sesiones/
2025-12-01 11:23:40,810 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:40,810 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:40,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:40,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:40,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:40,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:40,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:40,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:40,812 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:40,812 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:40,813 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/4/sesiones/
2025-12-01 11:23:40,814 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 4, cliente_id: 5
2025-12-01 11:23:40,815 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [SESIONES] Usando cliente_id proporcionado: 5
2025-12-01 11:23:40,817 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/4/actividad/ 200 21.7ms
2025-12-01 11:23:40,820 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/4/sesiones/ 200 9.4ms
2025-12-01 11:23:50,004 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:23:50,004 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:23:50,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-12-01 11:23:50,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-12-01 11:23:50,007 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:50,007 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:50,010 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:23:50,012 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 5, page: 1
2025-12-01 11:23:50,012 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 5, page: 1
2025-12-01 11:23:50,016 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 2, P√°gina: 1
2025-12-01 11:23:50,016 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.7ms
2025-12-01 11:23:50,019 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:23:50,019 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:50,019 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:50,020 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:50,022 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-01 11:23:50,023 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 5, page: 1
2025-12-01 11:23:50,024 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 5, page: 1
2025-12-01 11:23:50,026 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 2, P√°gina: 1
2025-12-01 11:23:50,027 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.6ms
2025-12-01 11:23:55,187 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/2121/
2025-12-01 11:23:55,187 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/2121/ 200 0.6ms
2025-12-01 11:23:55,188 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/2121/
2025-12-01 11:23:55,188 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:55,191 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/2121/
2025-12-01 11:23:55,194 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 2121, cliente_id: 5
2025-12-01 11:23:55,194 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id proporcionado (5), consultando log 2121 directamente en BD del tenant
2025-12-01 11:23:55,197 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 2121 encontrado en BD del cliente 5
2025-12-01 11:23:55,199 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/2121/ 200 10.8ms
2025-12-01 11:23:59,783 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/2122/
2025-12-01 11:23:59,783 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/2122/ 200 0.6ms
2025-12-01 11:23:59,784 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/2122/
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-01 11:23:59,784 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/2122/
2025-12-01 11:23:59,784 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 2122, cliente_id: 5
2025-12-01 11:23:59,784 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id proporcionado (5), consultando log 2122 directamente en BD del tenant
2025-12-01 11:23:59,784 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 2122 encontrado en BD del cliente 5
2025-12-01 11:23:59,790 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/2122/ 200 5.6ms
2025-12-01 11:26:00,219 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-01 11:26:00,219 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-01 11:26:00,220 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-01 11:26:00,220 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-01 11:26:00,220 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-01 11:26:00,220 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 01:25:24,619 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 01:25:24,640 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 01:25:24,640 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 01:25:24,643 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 01:25:24,643 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 01:25:24,643 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 01:25:25,595 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 01:25:25,595 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 01:25:25,683 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 01:25:25,683 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 01:25:25,683 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 01:25:25,889 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 01:25:25,889 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 01:25:25,996 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'static', 'www', 'cdn', 'admin', 'backend', 'api'}
2025-12-03 01:25:50,270 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-03 01:25:50,271 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.9ms
2025-12-03 01:25:50,271 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-03 01:25:50,271 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:50,271 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:50,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:50,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:50,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:50,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:50,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:50,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:50,308 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:54,954 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-03 01:25:54,954 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-03 01:25:54,958 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-12-03 01:25:54,959 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:54,959 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/login/
2025-12-03 01:25:54,965 - app.modules.auth.presentation.endpoints - INFO - Cliente 5 resuelto y validado para login.
2025-12-03 01:25:54,965 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=5
2025-12-03 01:25:54,965 - app.modules.auth.application.services.auth_service - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=5
2025-12-03 01:25:55,192 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 01:25:55,192 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=5, access_level=5, user_type=super_admin
2025-12-03 01:25:55,192 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=5
2025-12-03 01:25:55,192 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 01:25:55,224 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 01:25:55,225 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 5, Usuario 1, Tipo: web, Token ID: 14472, Rotaci√≥n: False
2025-12-03 01:25:55,225 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14472
2025-12-03 01:25:55,225 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 5
2025-12-03 01:25:55,230 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 01:25:55,230 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=5, usuario_id=1, exito=True
2025-12-03 01:25:55,230 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 4961.3ms
2025-12-03 01:25:55,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-03 01:25:55,244 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-03 01:25:55,246 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 01:25:55,246 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:55,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:55,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,249 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:55,249 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:55,249 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/clientes/tenant/branding
2025-12-03 01:25:55,251 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-03 01:25:55,270 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:55,271 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 401 24.4ms
2025-12-03 01:25:55,287 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 01:25:55,289 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 01:25:55,289 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.0ms
2025-12-03 01:25:55,290 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.1ms
2025-12-03 01:25:55,293 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 01:25:55,294 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 01:25:55,294 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.3ms
2025-12-03 01:25:55,294 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:55,294 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:55,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,298 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:55,298 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:55,298 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-03 01:25:55,301 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:55,302 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 401 9.0ms
2025-12-03 01:25:55,303 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 01:25:55,305 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:55,305 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:55,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,307 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:55,308 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:55,308 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-12-03 01:25:55,308 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 01:25:55,309 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:55,309 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:55,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,310 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:55,310 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:55,310 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-03 01:25:55,313 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:55,313 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 401 7.1ms
2025-12-03 01:25:55,319 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 5, Usuario 1, Tipo: web
2025-12-03 01:25:55,320 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-03 01:25:55,320 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 01:25:55,320 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 01:25:55,320 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14473, Rotaci√≥n: True
2025-12-03 01:25:55,326 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: 0
2025-12-03 01:25:55,326 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-03 01:25:55,326 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-03 01:25:55,326 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14473
2025-12-03 01:25:55,326 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-03 01:25:55,333 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 01:25:55,333 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-03 01:25:55,335 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 31.0ms
2025-12-03 01:25:55,341 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 01:25:55,342 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 01:25:55,344 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:55,344 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:55,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,345 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,345 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,347 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,347 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:55,347 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:55,347 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-03 01:25:55,350 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:55,352 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/clientes/tenant/branding
2025-12-03 01:25:55,352 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:55,352 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 401 16.1ms
2025-12-03 01:25:55,352 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 401 15.6ms
2025-12-03 01:25:55,359 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:55,360 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/menus/getmenu/
2025-12-03 01:25:55,365 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:55,365 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 401 7.2ms
2025-12-03 01:25:58,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 01:25:58,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 01:25:58,245 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.2ms
2025-12-03 01:25:58,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.3ms
2025-12-03 01:25:58,247 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 01:25:58,248 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:58,248 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:58,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:58,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:58,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:58,250 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:58,250 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:58,250 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:58,251 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:58,251 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:58,251 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/clientes/
2025-12-03 01:25:58,253 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:58,253 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 401 5.8ms
2025-12-03 01:25:58,255 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 01:25:58,255 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:58,256 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:58,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:58,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:58,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:58,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:58,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:58,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:58,259 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:58,259 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:58,259 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/clientes/
2025-12-03 01:25:58,260 - app.api.deps - WARNING - Usuario 'superadmin' del token v√°lido no encontrado en BD (o eliminado).
2025-12-03 01:25:58,261 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 01:25:58,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:25:58,263 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 01:25:58,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:58,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:58,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:58,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 01:25:58,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:25:58,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 01:25:58,269 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 01:25:58,269 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 01:25:58,269 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-12-03 01:25:58,270 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 401 14.2ms
2025-12-03 01:25:58,272 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 5
2025-12-03 01:25:58,273 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-12-03 01:25:58,280 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 01:25:58,280 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-12-03 01:25:58,280 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 18.7ms
2025-12-03 01:26:12,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 01:26:12,462 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.6ms
2025-12-03 01:26:12,463 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,463 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 01:26:12,470 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-03 01:26:12,471 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-03 01:26:12,472 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 01:26:12,473 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 01:26:12,473 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14474, Rotaci√≥n: True
2025-12-03 01:26:12,476 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-03 01:26:12,477 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-03 01:26:12,477 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-03 01:26:12,477 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14474
2025-12-03 01:26:12,478 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-03 01:26:12,481 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 01:26:12,482 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-03 01:26:12,482 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 17.4ms
2025-12-03 01:26:12,486 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-03 01:26:12,487 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.5ms
2025-12-03 01:26:12,490 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-03 01:26:12,490 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,490 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,491 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,491 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,491 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,491 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,491 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,491 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,491 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-12-03 01:26:12,495 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-12-03 01:26:12,495 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-12-03 01:26:12,495 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-12-03 01:26:12,504 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-12-03 01:26:12,504 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-12-03 01:26:12,510 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 20.5ms
2025-12-03 01:26:12,515 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-03 01:26:12,515 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.4ms
2025-12-03 01:26:12,517 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 01:26:12,518 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,518 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,519 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-03 01:26:12,522 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-03 01:26:12,522 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-03 01:26:12,524 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-03 01:26:12,524 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 7.1ms
2025-12-03 01:26:12,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 01:26:12,552 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.0ms
2025-12-03 01:26:12,553 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/
2025-12-03 01:26:12,554 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/estadisticas/
2025-12-03 01:26:12,554 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/ 200 2.4ms
2025-12-03 01:26:12,554 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 01:26:12,557 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 01:26:12,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/estadisticas/ 200 2.4ms
2025-12-03 01:26:12,557 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,558 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,558 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,559 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,559 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,559 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 01:26:12,559 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/estadisticas/
2025-12-03 01:26:12,560 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/
2025-12-03 01:26:12,562 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 01:26:12,562 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 01:26:12,602 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 01:26:12,602 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 48.3ms
2025-12-03 01:26:12,602 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/estadisticas/ 200 45.9ms
2025-12-03 01:26:12,602 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/ 200 45.7ms
2025-12-03 01:26:12,602 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/
2025-12-03 01:26:12,602 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 52.2ms
2025-12-03 01:26:12,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,610 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,610 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,610 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/
2025-12-03 01:26:12,614 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5 recibida por usuario: superadmin
2025-12-03 01:26:12,615 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/estadisticas/
2025-12-03 01:26:12,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,617 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,617 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,617 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/estadisticas/
2025-12-03 01:26:12,620 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5/estadisticas recibida por usuario: superadmin
2025-12-03 01:26:12,620 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 5
2025-12-03 01:26:12,627 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 5
2025-12-03 01:26:12,629 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/ 200 21.5ms
2025-12-03 01:26:12,630 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,632 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,632 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,632 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 01:26:12,632 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/estadisticas/ 200 17.5ms
2025-12-03 01:26:12,634 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 01:26:12,634 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 01:26:12,635 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 01:26:12,636 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/
2025-12-03 01:26:12,636 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,636 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,638 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,639 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,639 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/
2025-12-03 01:26:12,640 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5 recibida por usuario: superadmin
2025-12-03 01:26:12,641 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 12.0ms
2025-12-03 01:26:12,641 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/estadisticas/
2025-12-03 01:26:12,643 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:12,643 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:12,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:12,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:12,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:12,644 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:12,645 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:12,645 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/estadisticas/
2025-12-03 01:26:12,646 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5/estadisticas recibida por usuario: superadmin
2025-12-03 01:26:12,646 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 5
2025-12-03 01:26:12,648 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 5
2025-12-03 01:26:12,650 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/ 200 13.8ms
2025-12-03 01:26:12,650 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/estadisticas/ 200 9.5ms
2025-12-03 01:26:15,101 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 01:26:15,101 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.5ms
2025-12-03 01:26:15,104 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 01:26:15,105 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:15,105 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:15,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:15,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:15,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:15,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:15,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:15,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:15,107 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:15,107 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:15,107 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 01:26:15,109 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 01:26:15,110 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 01:26:15,120 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 01:26:15,121 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 17.2ms
2025-12-03 01:26:15,123 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:15,123 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 01:26:15,123 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 01:26:15,123 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 01:26:15,129 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 01:26:15,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.0ms
2025-12-03 01:26:16,778 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 01:26:16,779 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.0ms
2025-12-03 01:26:16,779 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 01:26:16,780 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.1ms
2025-12-03 01:26:16,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 01:26:16,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:16,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:16,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:16,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:16,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:16,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:16,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:16,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:16,784 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:16,784 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:16,784 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 01:26:16,786 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-03 01:26:16,786 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-03 01:26:16,788 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 01:26:16,790 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 01:26:16,790 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 9.3ms
2025-12-03 01:26:16,794 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 01:26:16,795 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:16,795 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:16,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:16,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:16,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:16,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:16,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:16,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:16,796 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:16,796 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:16,796 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 01:26:16,798 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-03 01:26:16,798 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-03 01:26:16,800 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 01:26:16,801 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 01:26:16,802 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.4ms
2025-12-03 01:26:20,577 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 01:26:20,579 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:20,579 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:20,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:20,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:20,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:20,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:20,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:20,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:20,580 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:20,580 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:20,580 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 01:26:20,582 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 01:26:20,582 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 01:26:20,584 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 01:26:20,585 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.7ms
2025-12-03 01:26:20,588 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 01:26:20,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:20,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:20,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:20,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:20,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:20,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:20,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:20,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:20,589 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:20,589 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:20,590 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 01:26:20,592 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 01:26:20,592 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 01:26:20,595 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 01:26:20,596 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.4ms
2025-12-03 01:26:22,939 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 01:26:22,941 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 0.8ms
2025-12-03 01:26:22,942 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 01:26:22,943 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 01:26:22,943 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 01:26:22,943 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.1ms
2025-12-03 01:26:22,945 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 01:26:22,946 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 2.3ms
2025-12-03 01:26:22,946 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.2ms
2025-12-03 01:26:22,946 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,947 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:22,948 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:22,948 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 01:26:22,950 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 01:26:22,954 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 01:26:22,955 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 10.3ms
2025-12-03 01:26:22,955 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:22,955 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:22,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,956 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:22,956 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:22,956 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 01:26:22,959 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 01:26:22,959 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 01:26:22,962 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 01:26:22,965 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 10.1ms
2025-12-03 01:26:22,965 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 01:26:22,966 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:22,966 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:22,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,967 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:22,967 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:22,967 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 01:26:22,969 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 01:26:22,971 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 01:26:22,972 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:22,972 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:22,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:22,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:22,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:22,973 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:22,973 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:22,973 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 01:26:22,975 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 01:26:22,975 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 01:26:22,978 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 01:26:22,978 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 13.7ms
2025-12-03 01:26:22,980 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.7ms
2025-12-03 01:26:24,076 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:24,076 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:24,077 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.9ms
2025-12-03 01:26:24,077 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.6ms
2025-12-03 01:26:24,079 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:24,080 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:24,080 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:24,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,081 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:24,081 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:24,081 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:24,082 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-03 01:26:24,083 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-03 01:26:24,086 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-03 01:26:24,087 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 7.4ms
2025-12-03 01:26:24,094 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:24,094 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:24,094 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:24,095 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:24,096 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:24,097 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-03 01:26:24,097 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-03 01:26:24,098 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-03 01:26:24,098 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 4.8ms
2025-12-03 01:26:24,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-03 01:26:24,731 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 01:26:24,732 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.6ms
2025-12-03 01:26:24,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-03 01:26:24,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 01:26:24,733 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.7ms
2025-12-03 01:26:24,733 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.1ms
2025-12-03 01:26:24,733 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.1ms
2025-12-03 01:26:24,735 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 01:26:24,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:24,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:24,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,737 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:24,737 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:24,737 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 01:26:24,737 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 01:26:24,739 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 01:26:24,739 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 01:26:24,742 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-03 01:26:24,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:24,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:24,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,744 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:24,744 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:24,744 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 01:26:24,746 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 01:26:24,746 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 01:26:24,747 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 01:26:24,747 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 01:26:24,748 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 13.1ms
2025-12-03 01:26:24,748 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 11.5ms
2025-12-03 01:26:24,748 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:24,751 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 01:26:24,751 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 01:26:24,754 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 01:26:24,754 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 01:26:24,755 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-03 01:26:24,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:24,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:24,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:24,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:24,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:24,757 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:24,757 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:24,757 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 01:26:24,759 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 01:26:24,760 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 01:26:24,760 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 01:26:24,762 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 01:26:24,762 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 12.3ms
2025-12-03 01:26:24,763 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.5ms
2025-12-03 01:26:36,117 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:36,118 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:36,118 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:36,118 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:36,118 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:36,118 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:36,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:36,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:36,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:36,119 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:36,119 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:36,119 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:36,121 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-03 01:26:36,121 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-03 01:26:36,123 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-03 01:26:36,123 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.4ms
2025-12-03 01:26:36,125 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:36,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:36,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:36,126 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:36,127 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-03 01:26:36,128 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-03 01:26:36,129 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-03 01:26:36,129 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-03 01:26:36,130 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.5ms
2025-12-03 01:26:50,265 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 01:26:50,266 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 01:26:50,266 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:50,266 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:50,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,267 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:50,267 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:50,268 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 01:26:50,268 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:50,268 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:50,268 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,268 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,269 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:50,269 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:50,269 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 01:26:50,271 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 01:26:50,271 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 01:26:50,272 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 01:26:50,272 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 01:26:50,274 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 01:26:50,274 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 01:26:50,275 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-03 01:26:50,275 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.7ms
2025-12-03 01:26:50,275 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 10.5ms
2025-12-03 01:26:50,275 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 01:26:50,275 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:50,275 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 01:26:50,281 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 01:26:50,283 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 01:26:50,284 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 01:26:50,284 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:50,285 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:50,286 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:50,286 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 01:26:50,287 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 01:26:50,287 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 01:26:50,287 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-12-03 01:26:50,290 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 12.1ms
2025-12-03 01:26:50,290 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 12.0ms
2025-12-03 01:26:54,953 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 01:26:54,954 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.6ms
2025-12-03 01:26:54,954 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 01:26:54,955 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.5ms
2025-12-03 01:26:54,956 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 01:26:54,956 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:54,956 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:54,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:54,957 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 01:26:54,959 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-03 01:26:54,959 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-03 01:26:54,961 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-03 01:26:54,961 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:54,991 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:54,991 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,013 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,016 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,017 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-03 01:26:55,018 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 61.9ms
2025-12-03 01:26:55,020 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 01:26:55,021 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:55,021 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:55,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:55,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:55,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:55,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:55,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:55,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:55,022 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:55,022 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:55,022 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 01:26:55,024 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-03 01:26:55,024 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-03 01:26:55,025 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,025 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,026 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,026 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,026 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:55,031 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-03 01:26:55,031 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 11.3ms
2025-12-03 01:26:56,627 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 01:26:56,627 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 01:26:56,627 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.9ms
2025-12-03 01:26:56,627 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-12-03 01:26:56,630 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 01:26:56,630 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:56,631 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:56,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:56,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:56,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:56,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:56,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:56,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:56,632 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:56,632 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:56,632 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-03 01:26:56,634 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 01:26:56,634 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 01:26:56,634 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:56,637 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:56,642 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 26, P√°gina: 1
2025-12-03 01:26:56,642 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 13.3ms
2025-12-03 01:26:56,644 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 01:26:56,644 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 01:26:56,644 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 01:26:56,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:56,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:56,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:56,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 01:26:56,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 01:26:56,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 01:26:56,646 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 01:26:56,646 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 01:26:56,646 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-03 01:26:56,648 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 01:26:56,648 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 01:26:56,649 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:56,650 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 01:26:56,651 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 26, P√°gina: 1
2025-12-03 01:26:56,651 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.7ms
2025-12-03 01:49:00,648 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 01:49:00,648 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 01:49:00,648 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 01:49:00,648 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 01:49:00,653 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 01:49:00,653 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 01:49:01,509 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 01:49:01,509 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 01:49:01,509 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 01:49:01,509 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 01:49:01,518 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 01:49:01,518 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 01:49:01,840 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 01:49:01,840 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 01:49:01,910 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 01:49:01,910 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 01:49:01,910 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 01:49:02,152 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 01:49:02,152 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 01:49:02,303 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'api', 'cdn', 'www', 'backend', 'assets', 'static', 'admin'}
2025-12-03 08:33:12,153 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 08:33:12,153 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 08:33:12,153 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 08:33:12,163 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 08:33:12,176 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 08:33:12,176 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 08:33:12,684 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 08:33:12,684 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 08:33:12,773 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 08:33:12,773 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 08:33:12,773 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 08:33:12,973 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 08:33:12,973 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 08:33:13,103 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'api', 'static', 'assets', 'cdn', 'admin', 'backend'}
2025-12-03 08:33:40,655 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 08:33:40,655 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 08:33:40,655 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.3ms
2025-12-03 08:33:40,655 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.8ms
2025-12-03 08:33:40,660 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:40,660 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:40,660 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:40,662 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': innova.app.local:5173
2025-12-03 08:33:40,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-03 08:33:40,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:40,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-03 08:33:40,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-03 08:33:40,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:40,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-03 08:33:40,783 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', C√≥digo='INNOVA002', ID=3
2025-12-03 08:33:44,899 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-03 08:33:44,899 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-03 08:33:44,904 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 3: multi - bd_cliente_innova
2025-12-03 08:33:44,904 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_innova, servidor=localhost
2025-12-03 08:33:44,904 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3, db_type=multi, bd=bd_cliente_innova, path=/api/v1/auth/refresh/
2025-12-03 08:33:44,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:44,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 08:33:44,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 08:33:44,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 08:33:44,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 08:33:44,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 08:33:44,910 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 08:33:44,911 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-03 08:33:44,912 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 08:33:44,912 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/refresh/
2025-12-03 08:33:44,913 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 08:33:44,913 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 08:33:44,915 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 2.1ms
2025-12-03 08:33:44,916 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 2.2ms
2025-12-03 08:33:44,916 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:44,916 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 08:33:44,917 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:44,919 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:44,919 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-12-03 08:33:44,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-12-03 08:33:44,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,920 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detect√≥ subdominio v√°lido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-12-03 08:33:44,920 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-12-03 08:33:44,920 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:44,920 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 08:33:44,921 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:44,921 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-12-03 08:33:44,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-12-03 08:33:44,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,921 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detect√≥ subdominio v√°lido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-12-03 08:33:44,921 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-12-03 08:33:44,921 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:44,921 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 08:33:44,923 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 5.9ms
2025-12-03 08:33:44,928 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-03 08:33:44,949 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 3
2025-12-03 08:33:44,949 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-12-03 08:33:44,949 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-12-03 08:33:44,954 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:33:44,954 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-12-03 08:33:44,958 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:33:44,975 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 2
2025-12-03 08:33:44,975 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-12-03 08:33:44,975 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:33:44,980 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:33:44,981 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-12-03 08:33:44,982 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:44,982 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:44,983 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:44,983 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 08:33:44,983 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 08:33:44,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 08:33:44,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 08:33:44,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,988 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 08:33:44,988 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 08:33:44,989 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-12-03 08:33:44,989 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 08:33:44,989 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:44,990 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 08:33:44,990 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 4331.6ms
2025-12-03 08:33:44,993 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 4332.1ms
2025-12-03 08:33:44,993 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:44,993 - app.core.security.jwt - ERROR - Error decodificando refresh token: Signature verification failed.
2025-12-03 08:33:44,993 - app.core.security.jwt - ERROR - Error decodificando refresh token: Signature verification failed.
2025-12-03 08:33:44,996 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:44,996 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-12-03 08:33:44,996 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 08:33:44,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 08:33:44,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-03 08:33:44,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:44,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-03 08:33:44,998 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-12-03 08:33:44,999 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-12-03 08:33:44,999 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-12-03 08:33:44,999 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-12-03 08:33:45,002 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 86.0ms
2025-12-03 08:33:45,002 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 85.6ms
2025-12-03 08:33:45,011 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 4
2025-12-03 08:33:45,011 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-12-03 08:33:45,018 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:33:45,018 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-12-03 08:33:45,020 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-03 08:33:45,025 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-03 08:33:45,031 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 08:33:45,035 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:33:45,036 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14475, Rotaci√≥n: True
2025-12-03 08:33:45,040 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-03 08:33:45,040 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-03 08:33:45,040 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-03 08:33:45,041 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14475
2025-12-03 08:33:45,041 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-03 08:33:45,044 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:33:45,045 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-03 08:33:45,047 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 5
2025-12-03 08:33:45,047 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-12-03 08:33:45,049 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:33:45,050 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-12-03 08:33:45,052 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 70.3ms
2025-12-03 08:33:45,053 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 70.7ms
2025-12-03 08:33:45,055 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 61.8ms
2025-12-03 08:33:45,065 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-03 08:33:45,065 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.9ms
2025-12-03 08:33:45,069 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-03 08:33:45,070 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,070 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,072 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,072 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,072 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-12-03 08:33:45,076 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-12-03 08:33:45,076 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-12-03 08:33:45,076 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-12-03 08:33:45,094 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-12-03 08:33:45,094 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-12-03 08:33:45,095 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 26.1ms
2025-12-03 08:33:45,099 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-03 08:33:45,099 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-03 08:33:45,102 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 08:33:45,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,103 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-03 08:33:45,106 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-03 08:33:45,122 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-03 08:33:45,122 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-03 08:33:45,125 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-03 08:33:45,125 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 23.1ms
2025-12-03 08:33:45,137 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 08:33:45,138 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.1ms
2025-12-03 08:33:45,138 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 08:33:45,139 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 08:33:45,140 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 08:33:45,141 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.6ms
2025-12-03 08:33:45,141 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 2.2ms
2025-12-03 08:33:45,142 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 08:33:45,142 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 08:33:45,142 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 2.5ms
2025-12-03 08:33:45,143 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 2.2ms
2025-12-03 08:33:45,143 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.1ms
2025-12-03 08:33:45,149 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 08:33:45,149 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,150 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,151 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,151 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,151 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 08:33:45,153 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 08:33:45,153 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 08:33:45,192 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 08:33:45,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 08:33:45,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 08:33:45,195 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,195 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,196 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,196 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,196 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,197 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,198 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,198 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 08:33:45,200 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 08:33:45,204 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 08:33:45,204 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 08:33:45,211 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 08:33:45,212 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 63.7ms
2025-12-03 08:33:45,213 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 19.9ms
2025-12-03 08:33:45,213 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 19.8ms
2025-12-03 08:33:45,216 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 08:33:45,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,218 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,218 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,218 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 08:33:45,221 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 08:33:45,221 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 08:33:45,222 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 08:33:45,222 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 08:33:45,222 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 08:33:45,223 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,225 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,226 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,226 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 08:33:45,226 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:45,226 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:33:45,226 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:33:45,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:45,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:33:45,227 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:33:45,227 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:45,228 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 08:33:45,229 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 08:33:45,229 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 08:33:45,232 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 08:33:45,233 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 08:33:45,236 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 20.4ms
2025-12-03 08:33:45,237 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 14.4ms
2025-12-03 08:33:45,237 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.3ms
2025-12-03 08:33:51,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:51,483 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:33:51,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:51,483 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-12-03 08:33:51,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-12-03 08:33:51,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:51,484 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detect√≥ subdominio v√°lido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-12-03 08:33:51,484 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-12-03 08:33:51,484 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:51,484 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 08:33:51,485 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:33:51,486 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-12-03 08:33:51,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-12-03 08:33:51,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:33:51,486 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detect√≥ subdominio v√°lido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-12-03 08:33:51,486 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-12-03 08:33:51,487 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:33:51,487 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 08:33:51,489 - app.core.security.jwt - ERROR - Error decodificando refresh token: Signature verification failed.
2025-12-03 08:33:51,490 - app.core.security.jwt - ERROR - Error decodificando refresh token: Signature verification failed.
2025-12-03 08:33:51,490 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 8.1ms
2025-12-03 08:33:51,491 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 7.8ms
2025-12-03 08:34:13,901 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 08:34:13,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-12-03 08:34:13,902 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 08:34:13,904 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.6ms
2025-12-03 08:34:13,904 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:34:13,904 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:34:13,909 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:34:13,909 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:34:13,915 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:34:13,917 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 11.3ms
2025-12-03 08:34:13,917 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:34:13,917 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:34:13,923 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:34:13,923 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:34:13,925 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:34:13,925 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.0ms
2025-12-03 08:36:34,036 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 08:36:34,036 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 08:36:34,036 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 08:36:34,036 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 08:36:34,039 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 08:36:34,039 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 08:36:35,480 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 08:36:35,480 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 08:36:35,480 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 08:36:35,480 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 08:36:35,480 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 08:36:35,480 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 08:36:35,886 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 08:36:35,886 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 08:36:35,956 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 08:36:35,956 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 08:36:35,956 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 08:36:36,129 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 08:36:36,129 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 08:36:36,242 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'admin', 'cdn', 'www', 'static', 'backend', 'api'}
2025-12-03 08:56:58,648 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 08:56:58,649 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 2.1ms
2025-12-03 08:56:58,649 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 08:56:58,649 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-12-03 08:56:58,653 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:56:58,653 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:56:58,653 - app.api.deps - WARNING - Error de validaci√≥n JWT: Signature has expired.
2025-12-03 08:56:58,660 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 401 6.3ms
2025-12-03 08:56:58,663 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:56:58,663 - app.api.deps - WARNING - Error de validaci√≥n JWT: Signature has expired.
2025-12-03 08:56:58,663 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 08:56:58,663 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.5ms
2025-12-03 08:56:58,663 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 401 4.4ms
2025-12-03 08:56:58,663 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:56:58,663 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 08:56:58,697 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-03 08:56:58,698 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-03 08:56:58,698 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 08:56:58,700 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:56:58,700 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14476, Rotaci√≥n: True
2025-12-03 08:56:58,701 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-03 08:56:58,701 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-03 08:56:58,701 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-03 08:56:58,701 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14476
2025-12-03 08:56:58,701 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-03 08:56:58,702 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 08:56:58,703 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-03 08:56:58,703 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 34.4ms
2025-12-03 08:56:58,707 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:56:58,707 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:56:58,708 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:56:58,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,708 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,709 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,709 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:56:58,709 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:56:58,709 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:56:58,710 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-03 08:56:58,712 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:56:58,712 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:56:58,713 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:56:58,713 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.7ms
2025-12-03 08:56:58,713 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:56:58,713 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:56:58,713 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:56:58,713 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:56:58,713 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:56:58,713 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 5.7ms
2025-12-03 08:56:58,944 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 08:56:58,944 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 08:56:58,944 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 08:56:58,944 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 08:56:58,944 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 08:56:58,944 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 08:56:59,895 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 08:56:59,903 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 08:56:59,903 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 08:56:59,908 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 08:56:59,911 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 08:56:59,911 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 08:57:00,255 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 08:57:00,255 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 08:57:00,359 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 08:57:00,359 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 08:57:00,359 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 08:57:00,632 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 08:57:00,633 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 08:57:00,796 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'assets', 'www', 'backend', 'cdn', 'admin', 'api'}
2025-12-03 08:57:00,844 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:57:00,844 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 08:57:00,844 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 08:57:00,845 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:00,845 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:00,845 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,845 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,846 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:00,846 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:00,846 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:57:00,873 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-03 08:57:00,876 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:57:00,876 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:57:00,878 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:57:00,878 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 34.3ms
2025-12-03 08:57:00,878 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 34.2ms
2025-12-03 08:57:00,881 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 36.9ms
2025-12-03 08:57:00,882 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:00,882 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:00,882 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:00,882 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:00,884 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:00,886 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-03 08:57:00,886 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-03 08:57:00,889 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:00,890 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:00,891 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:57:00,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:00,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:00,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,893 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:00,893 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:00,893 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:57:00,895 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:57:00,895 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:57:00,897 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:57:00,897 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 14.9ms
2025-12-03 08:57:00,898 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.4ms
2025-12-03 08:57:00,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:00,901 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:00,901 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:00,901 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:00,902 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:00,904 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-03 08:57:00,904 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-03 08:57:00,905 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:00,905 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:00,906 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 5.7ms
2025-12-03 08:57:07,351 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:07,352 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:07,352 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:07,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:07,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:07,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:07,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:07,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:07,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:07,353 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:07,354 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:07,354 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:07,356 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-03 08:57:07,356 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-03 08:57:07,358 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:07,358 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:07,359 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.9ms
2025-12-03 08:57:07,361 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:07,362 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:07,362 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:07,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:07,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:07,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:07,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:07,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:07,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:07,363 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:07,363 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:07,363 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:07,365 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-12-03 08:57:07,365 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-12-03 08:57:07,367 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:07,368 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:07,368 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.4ms
2025-12-03 08:57:11,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:11,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:11,531 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:11,531 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:11,531 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:57:11,532 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:57:11,532 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:57:11,534 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:57:11,536 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.9ms
2025-12-03 08:57:11,538 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:11,538 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:11,540 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:11,540 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 08:57:11,542 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 08:57:11,542 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 08:57:11,544 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 08:57:11,545 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.3ms
2025-12-03 08:57:14,657 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 08:57:14,658 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.0ms
2025-12-03 08:57:14,660 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 08:57:14,660 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 08:57:14,662 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 08:57:14,662 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.0ms
2025-12-03 08:57:14,663 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.8ms
2025-12-03 08:57:14,663 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 08:57:14,664 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.3ms
2025-12-03 08:57:14,665 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:14,665 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:14,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,666 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:14,666 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:14,666 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 08:57:14,669 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 08:57:14,672 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 08:57:14,673 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 9.7ms
2025-12-03 08:57:14,673 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:14,673 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:14,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,674 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:14,674 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:14,674 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 08:57:14,676 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 08:57:14,676 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 08:57:14,685 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 08:57:14,686 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 13.9ms
2025-12-03 08:57:14,686 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:14,687 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 08:57:14,691 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 08:57:14,691 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:14,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:14,694 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:14,694 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:14,694 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 08:57:14,695 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 08:57:14,697 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 08:57:14,698 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 08:57:14,699 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 12.8ms
2025-12-03 08:57:14,701 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.5ms
2025-12-03 08:57:16,466 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-03 08:57:16,466 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-12-03 08:57:16,467 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 1.4ms
2025-12-03 08:57:16,467 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 1.0ms
2025-12-03 08:57:16,469 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:16,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:16,472 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:16,472 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:16,472 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-03 08:57:16,473 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-03 08:57:16,474 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-03 08:57:16,478 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-03 08:57:16,479 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 9.4ms
2025-12-03 08:57:16,480 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:16,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:16,482 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:16,482 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:16,483 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-12-03 08:57:16,484 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-12-03 08:57:16,484 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-12-03 08:57:16,485 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-12-03 08:57:16,486 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.5ms
2025-12-03 08:57:18,125 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-03 08:57:18,126 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 08:57:18,126 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-12-03 08:57:18,126 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-12-03 08:57:18,127 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 2.0ms
2025-12-03 08:57:18,127 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.6ms
2025-12-03 08:57:18,128 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.5ms
2025-12-03 08:57:18,128 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.3ms
2025-12-03 08:57:18,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 08:57:18,130 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:18,131 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:18,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,132 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:18,132 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:18,132 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 08:57:18,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:18,134 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 08:57:18,135 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 08:57:18,137 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 1 conexiones
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,139 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:18,139 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:18,139 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:18,140 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 08:57:18,140 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 08:57:18,141 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:18,141 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:18,143 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 12.9ms
2025-12-03 08:57:18,143 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.9ms
2025-12-03 08:57:18,143 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 08:57:18,143 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:18,143 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:18,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,147 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:18,147 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:18,147 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 08:57:18,148 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:18,150 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 08:57:18,150 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 08:57:18,151 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 1 conexiones
2025-12-03 08:57:18,152 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:18,152 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:18,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:18,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:18,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:18,153 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:18,153 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:18,153 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:18,156 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 08:57:18,156 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 08:57:18,156 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:18,157 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:18,157 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 12.9ms
2025-12-03 08:57:18,158 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.9ms
2025-12-03 08:57:23,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 08:57:23,194 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.7ms
2025-12-03 08:57:23,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 08:57:23,195 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 1.0ms
2025-12-03 08:57:23,197 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 08:57:23,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:23,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:23,198 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 08:57:23,200 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-03 08:57:23,200 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-03 08:57:27,322 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-03 08:57:27,322 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-03 08:57:27,323 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-03 08:57:27,323 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,333 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,338 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,343 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,345 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,346 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-03 08:57:27,347 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4150.3ms
2025-12-03 08:57:27,348 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 08:57:27,349 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:27,349 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:27,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:27,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:27,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:27,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:27,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:27,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:27,350 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:27,350 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:27,351 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-12-03 08:57:27,352 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-12-03 08:57:27,352 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-12-03 08:57:27,353 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,354 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,354 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,356 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,357 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:27,359 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-12-03 08:57:27,360 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 11.6ms
2025-12-03 08:57:28,545 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 08:57:28,545 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-12-03 08:57:28,546 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 08:57:28,546 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.7ms
2025-12-03 08:57:28,547 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 08:57:28,548 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:28,548 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:28,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:28,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:28,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:28,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:28,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:28,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:28,549 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:28,549 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:28,549 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-03 08:57:28,551 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 08:57:28,551 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 08:57:28,552 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:28,553 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:28,558 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 26, P√°gina: 1
2025-12-03 08:57:28,558 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.1ms
2025-12-03 08:57:28,561 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-12-03 08:57:28,561 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:28,562 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-12-03 08:57:28,564 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 08:57:28,564 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-12-03 08:57:28,566 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:28,566 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 08:57:28,568 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 26, P√°gina: 1
2025-12-03 08:57:28,568 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.9ms
2025-12-03 08:57:37,199 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 08:57:37,199 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:37,200 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:37,200 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:37,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,201 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:37,201 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:37,201 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 08:57:37,201 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:37,202 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:37,205 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 08:57:37,205 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 08:57:37,206 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 1 conexiones
2025-12-03 08:57:37,207 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 08:57:37,207 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 08:57:37,208 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:37,208 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:37,209 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 10.8ms
2025-12-03 08:57:37,209 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.5ms
2025-12-03 08:57:37,211 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-12-03 08:57:37,213 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-12-03 08:57:37,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:37,213 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:37,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,214 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:37,214 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:37,214 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-12-03 08:57:37,216 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-12-03 08:57:37,216 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-12-03 08:57:37,217 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 1 conexiones
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 08:57:37,218 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-12-03 08:57:37,218 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-12-03 08:57:37,218 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-12-03 08:57:37,218 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-12-03 08:57:37,218 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-12-03 08:57:37,223 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 11.6ms
2025-12-03 08:57:37,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 11.3ms
2025-12-03 09:16:58,041 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 09:16:58,041 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.0ms
2025-12-03 09:16:58,041 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:16:58,041 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 09:16:58,055 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-12-03 09:16:58,059 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-12-03 09:16:58,059 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 09:16:58,059 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:16:58,059 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14477, Rotaci√≥n: True
2025-12-03 09:16:58,059 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-03 09:16:58,059 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-03 09:16:58,059 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-12-03 09:16:58,059 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14477
2025-12-03 09:16:58,059 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-12-03 09:16:58,059 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:16:58,059 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-12-03 09:16:58,059 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 21.0ms
2025-12-03 09:16:58,069 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-03 09:16:58,069 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.4ms
2025-12-03 09:16:58,071 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-03 09:16:58,071 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:16:58,071 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:16:58,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:16:58,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:16:58,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:16:58,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:16:58,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:16:58,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:16:58,073 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:16:58,073 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:16:58,073 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-12-03 09:16:58,073 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-12-03 09:16:58,073 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-12-03 09:16:58,073 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-12-03 09:16:58,073 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-12-03 09:16:58,073 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-12-03 09:16:58,073 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 5.9ms
2025-12-03 09:16:58,080 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-03 09:16:58,080 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.4ms
2025-12-03 09:16:58,080 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:16:58,080 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-03 09:16:58,080 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-03 09:16:58,080 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-03 09:16:58,080 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-03 09:16:58,080 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 4.5ms
2025-12-03 09:16:58,101 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 09:16:58,101 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.5ms
2025-12-03 09:16:58,456 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 09:16:58,456 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 09:16:58,456 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 09:16:58,456 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 09:16:58,456 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 09:16:58,456 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 09:16:59,878 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 09:16:59,879 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 09:16:59,879 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 09:16:59,880 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 09:16:59,880 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 09:16:59,880 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 09:17:00,290 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 09:17:00,290 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 09:17:00,390 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 09:17:00,390 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 09:17:00,390 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 09:17:00,570 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 09:17:00,570 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 09:17:00,691 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'backend', 'admin', 'cdn', 'static', 'www', 'assets', 'api'}
2025-12-03 09:17:00,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:17:00,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 09:17:00,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 09:17:00,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-12-03 09:17:00,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 09:17:00,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:00,740 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 09:17:00,760 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-12-03 09:17:00,770 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 09:17:00,770 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 09:17:00,770 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 34.2ms
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 34.0ms
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 33.9ms
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 33.8ms
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 33.8ms
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 39.0ms
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 09:17:00,770 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 09:17:00,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:00,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:00,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:00,779 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 09:17:00,785 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 09:17:00,785 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 09:17:00,786 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 09:17:00,786 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 09:17:00,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:17:00,791 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:00,791 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:00,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,792 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:00,792 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:00,792 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 09:17:00,794 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 09:17:00,794 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 09:17:00,794 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 09:17:00,794 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 17.6ms
2025-12-03 09:17:00,794 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 17.5ms
2025-12-03 09:17:00,794 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 7.1ms
2025-12-03 09:17:00,794 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-12-03 09:17:00,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:00,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:00,799 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-12-03 09:17:00,799 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-12-03 09:17:00,799 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-12-03 09:17:00,805 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-12-03 09:17:00,805 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:00,805 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-12-03 09:17:00,809 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-12-03 09:17:00,809 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 13.4ms
2025-12-03 09:17:00,809 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 6.8ms
2025-12-03 09:17:01,981 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-12-03 09:17:01,982 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.6ms
2025-12-03 09:17:01,984 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 09:17:01,984 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:01,984 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:01,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:01,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:01,985 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:01,985 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:01,985 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:01,985 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:01,985 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:01,985 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:01,985 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 09:17:01,989 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 09:17:01,989 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 09:17:01,991 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 09:17:01,991 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.8ms
2025-12-03 09:17:01,994 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-12-03 09:17:01,994 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:01,994 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:01,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:01,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:01,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:01,995 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:01,995 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:01,995 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:01,995 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:01,995 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:01,995 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-12-03 09:17:01,997 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-12-03 09:17:01,997 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-12-03 09:17:02,000 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-12-03 09:17:02,000 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.8ms
2025-12-03 09:17:05,234 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-03 09:17:05,234 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-12-03 09:17:05,236 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-03 09:17:05,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:05,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:17:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:17:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:17:05,237 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:17:05,237 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:05,237 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/logout/
2025-12-03 09:17:05,239 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:05,240 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-12-03 09:17:05,240 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 1, Usuario: 1 (superadmin)
2025-12-03 09:17:05,243 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:05,243 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=1, usuario_id=1, exito=True
2025-12-03 09:17:05,244 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 8.3ms
2025-12-03 09:17:08,901 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 09:17:08,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.5ms
2025-12-03 09:17:08,903 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 09:17:08,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:08,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:08,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:08,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:08,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:08,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:08,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:08,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:08,907 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:13,005 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-12-03 09:17:13,005 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-12-03 09:17:13,005 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-12-03 09:17:13,005 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:13,005 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/refresh/
2025-12-03 09:17:13,005 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcion√≥ refresh token. Cliente: web
2025-12-03 09:17:13,010 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 4106.1ms
2025-12-03 09:17:16,440 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 09:17:16,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:16,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:16,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:16,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:16,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:16,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:16,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:16,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:16,443 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:16,443 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:16,443 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/refresh/
2025-12-03 09:17:16,446 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcion√≥ refresh token. Cliente: web
2025-12-03 09:17:16,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 6.5ms
2025-12-03 09:17:26,589 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-03 09:17:26,590 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-03 09:17:26,591 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-03 09:17:26,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:26,592 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:26,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,594 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:26,594 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:26,594 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/login/
2025-12-03 09:17:26,599 - app.modules.auth.presentation.endpoints - INFO - Cliente 2 resuelto y validado para login.
2025-12-03 09:17:26,600 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_acme', cliente_id_destino=2
2025-12-03 09:17:26,600 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=2
2025-12-03 09:17:26,600 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,834 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,834 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,834 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-03 09:17:26,834 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_acme', usuario_id=1, cliente_origen=2, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-03 09:17:26,834 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,848 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,848 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-12-03 09:17:26,849 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,851 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:26,852 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 2, Usuario 1, Tipo: web, Token ID: 2049, Rotaci√≥n: False
2025-12-03 09:17:26,853 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 2049
2025-12-03 09:17:26,853 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_acme autenticado exitosamente (WEB) para cliente 2
2025-12-03 09:17:26,853 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,853 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:26,853 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=2, usuario_id=1, exito=True
2025-12-03 09:17:26,857 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 265.5ms
2025-12-03 09:17:26,863 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-03 09:17:26,863 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-03 09:17:26,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 09:17:26,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:26,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:26,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,873 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:26,873 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:26,873 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/clientes/tenant/branding
2025-12-03 09:17:26,874 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,890 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:26,890 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=2 por usuario: admin_acme
2025-12-03 09:17:26,890 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=2
2025-12-03 09:17:26,891 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=2
2025-12-03 09:17:26,892 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 24.8ms
2025-12-03 09:17:26,894 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 09:17:26,895 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-03 09:17:26,896 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-03 09:17:26,896 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 2.4ms
2025-12-03 09:17:26,896 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.2ms
2025-12-03 09:17:26,896 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.3ms
2025-12-03 09:17:26,899 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 09:17:26,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-03 09:17:26,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-03 09:17:26,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 3.3ms
2025-12-03 09:17:26,903 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 3.5ms
2025-12-03 09:17:26,903 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 3.4ms
2025-12-03 09:17:26,903 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:17:26,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:26,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:26,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,909 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:26,909 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:26,909 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-12-03 09:17:26,910 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,911 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:26,911 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-12-03 09:17:26,912 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 09:17:26,912 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,971 - app.modules.menus.application.services.menu_helper - INFO - √Årbol de men√∫ construido con 5 items ra√≠z.
2025-12-03 09:17:26,972 - app.modules.menus.application.services.menu_service - INFO - √Årbol de men√∫ construido para usuario 1 con 5 items ra√≠z.
2025-12-03 09:17:26,972 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-03 09:17:26,973 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:26,973 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:26,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,975 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:26,975 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:26,975 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-03 09:17:26,976 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,977 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:26,977 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,980 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,984 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:26,984 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-03 09:17:26,985 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,989 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:26,995 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:26,995 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:26,996 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:26,996 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-03 09:17:26,996 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-03 09:17:26,996 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-03 09:17:26,996 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-03 09:17:26,997 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:26,997 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:26,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:26,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:26,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:26,998 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:26,998 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:26,998 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-03 09:17:27,000 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 96.2ms
2025-12-03 09:17:27,000 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,001 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:27,002 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,003 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,004 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-03 09:17:27,004 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,006 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-03 09:17:27,006 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-03 09:17:27,007 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 35.0ms
2025-12-03 09:17:27,008 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 11.6ms
2025-12-03 09:17:27,010 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-03 09:17:27,010 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:17:27,010 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:27,010 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:27,010 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:27,010 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:27,010 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:27,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:27,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:27,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:27,013 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:27,014 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:27,014 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-12-03 09:17:27,015 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,016 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:27,016 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,017 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,018 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:27,018 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-12-03 09:17:27,018 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,020 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,022 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:27,023 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:27,023 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:27,023 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios √∫nicos de 3 filas crudas
2025-12-03 09:17:27,023 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-03 09:17:27,023 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, P√°gina: 1
2025-12-03 09:17:27,025 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-03 09:17:27,025 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:27,025 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:27,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:27,026 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-12-03 09:17:27,029 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,031 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:27,031 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-12-03 09:17:27,032 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 09:17:27,032 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,033 - app.modules.menus.application.services.menu_helper - INFO - √Årbol de men√∫ construido con 5 items ra√≠z.
2025-12-03 09:17:27,033 - app.modules.menus.application.services.menu_service - INFO - √Årbol de men√∫ construido para usuario 1 con 5 items ra√≠z.
2025-12-03 09:17:27,034 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:27,034 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:27,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:27,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:27,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:27,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:27,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:27,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:27,037 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:27,038 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:27,038 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-12-03 09:17:27,039 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,040 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:27,040 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,041 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,042 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-12-03 09:17:27,042 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:27,042 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-12-03 09:17:27,042 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-12-03 09:17:27,043 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 33.3ms
2025-12-03 09:17:27,043 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 32.8ms
2025-12-03 09:17:27,043 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 19.7ms
2025-12-03 09:17:29,740 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-03 09:17:29,741 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-03 09:17:29,741 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.2ms
2025-12-03 09:17:29,742 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.1ms
2025-12-03 09:17:29,743 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-03 09:17:29,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:29,745 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:29,745 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:29,745 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:29,745 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:29,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:29,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:29,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:29,747 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:29,747 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:29,748 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-12-03 09:17:29,748 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,749 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:29,750 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,750 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,751 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:29,752 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-12-03 09:17:29,752 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-12-03 09:17:29,752 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,756 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-12-03 09:17:29,756 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,760 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-03 09:17:29,760 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:29,760 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:29,760 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:29,760 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-03 09:17:29,760 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-12-03 09:17:29,761 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 17.5ms
2025-12-03 09:17:29,763 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-03 09:17:29,763 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:29,763 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:29,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:29,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:29,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:29,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:29,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:29,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:29,765 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:29,765 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:29,765 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-12-03 09:17:29,766 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,767 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:29,767 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,768 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,768 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:29,770 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-12-03 09:17:29,770 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-12-03 09:17:29,770 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,771 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-12-03 09:17:29,771 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:29,773 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la p√°gina 1 de 3 totales
2025-12-03 09:17:29,773 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:29,773 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:29,774 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-12-03 09:17:29,774 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, P√°gina: 1/1, Resultados: 3
2025-12-03 09:17:29,774 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-12-03 09:17:29,775 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 12.3ms
2025-12-03 09:17:30,693 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-03 09:17:30,694 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-03 09:17:30,694 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.4ms
2025-12-03 09:17:30,695 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.1ms
2025-12-03 09:17:30,697 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-03 09:17:30,697 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:30,697 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:30,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:30,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:30,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:30,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:30,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:30,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:30,700 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:30,700 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:30,701 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-12-03 09:17:30,701 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,702 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:30,702 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,703 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,704 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:30,704 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-12-03 09:17:30,704 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,708 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,710 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 2: 2 √°reas de 2 totales
2025-12-03 09:17:30,710 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 2 - Total: 2, P√°gina: 1
2025-12-03 09:17:30,710 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 15.8ms
2025-12-03 09:17:30,710 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-03 09:17:30,710 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:30,710 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:30,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:30,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:30,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:30,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:30,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:30,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:30,716 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:30,716 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:30,716 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-12-03 09:17:30,718 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,718 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inv√°lido.
2025-12-03 09:17:30,719 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,719 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,719 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:30,719 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-12-03 09:17:30,720 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,721 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:30,722 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 2: 2 √°reas de 2 totales
2025-12-03 09:17:30,723 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 2 - Total: 2, P√°gina: 1
2025-12-03 09:17:30,723 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 10.1ms
2025-12-03 09:17:32,955 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-03 09:17:32,956 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.4ms
2025-12-03 09:17:32,957 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-03 09:17:32,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:32,958 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-12-03 09:17:32,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:32,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:32,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:32,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-03 09:17:32,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:32,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-03 09:17:32,959 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-12-03 09:17:32,959 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-12-03 09:17:32,959 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/logout/
2025-12-03 09:17:32,960 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:32,962 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:32,965 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:32,966 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 2, Usuario 1
2025-12-03 09:17:32,966 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 2, Usuario: 1 (admin_acme)
2025-12-03 09:17:32,966 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-12-03 09:17:32,968 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:32,968 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=2, usuario_id=1, exito=True
2025-12-03 09:17:32,969 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 12.3ms
2025-12-03 09:17:38,805 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-03 09:17:38,805 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.5ms
2025-12-03 09:17:38,805 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-03 09:17:38,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:38,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:38,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:38,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:38,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:38,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:38,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:38,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:38,815 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:38,817 - app.core.tenant.routing - WARNING - [METADATA] No se encontr√≥ configuraci√≥n para cliente 4, usando Single-DB como fallback
2025-12-03 09:17:38,817 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:38,817 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-12-03 09:17:38,818 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcion√≥ refresh token. Cliente: web
2025-12-03 09:17:38,818 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 7.5ms
2025-12-03 09:17:46,465 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-03 09:17:46,466 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.4ms
2025-12-03 09:17:46,467 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-03 09:17:46,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:46,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:46,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,470 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:46,470 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:46,470 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-12-03 09:17:46,474 - app.modules.auth.presentation.endpoints - INFO - Cliente 4 resuelto y validado para login.
2025-12-03 09:17:46,474 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=4
2025-12-03 09:17:46,474 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=4
2025-12-03 09:17:46,680 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 2: level=4, super_admin=False, type=tenant_admin
2025-12-03 09:17:46,680 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=2, cliente_origen=4, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-03 09:17:46,685 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 2: level=4, super_admin=False, type=tenant_admin
2025-12-03 09:17:46,685 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:46,685 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 4, Usuario 2, Tipo: web, Token ID: 14478, Rotaci√≥n: False
2025-12-03 09:17:46,685 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14478
2025-12-03 09:17:46,688 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 4
2025-12-03 09:17:46,691 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:17:46,692 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=4, usuario_id=2, exito=True
2025-12-03 09:17:46,692 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 224.4ms
2025-12-03 09:17:46,701 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-12-03 09:17:46,701 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-12-03 09:17:46,703 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 09:17:46,703 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:46,703 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:46,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,707 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:46,707 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:46,707 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-03 09:17:46,710 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=4 por usuario: admin_tech
2025-12-03 09:17:46,710 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=4
2025-12-03 09:17:46,712 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=4
2025-12-03 09:17:46,712 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 9.4ms
2025-12-03 09:17:46,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 09:17:46,731 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.1ms
2025-12-03 09:17:46,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-12-03 09:17:46,733 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-03 09:17:46,733 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-12-03 09:17:46,733 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.8ms
2025-12-03 09:17:46,733 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.5ms
2025-12-03 09:17:46,733 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.4ms
2025-12-03 09:17:46,733 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:17:46,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:46,737 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:46,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,742 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:46,742 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:46,742 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 09:17:46,744 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 2 del cliente 4
2025-12-03 09:17:46,744 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 2
2025-12-03 09:17:46,744 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 2.
2025-12-03 09:17:46,744 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-03 09:17:46,744 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 12.6ms
2025-12-03 09:17:46,744 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:46,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:46,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,750 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:46,750 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:46,750 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/areas/
2025-12-03 09:17:46,760 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:46,760 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 4: skip=0, limit=10, search='None'
2025-12-03 09:17:46,763 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 4: 0 √°reas de 0 totales
2025-12-03 09:17:46,763 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 4 - Total: 0, P√°gina: 1
2025-12-03 09:17:46,766 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 18.1ms
2025-12-03 09:17:46,766 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:17:46,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:46,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:46,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,769 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:46,769 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:46,769 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 09:17:46,770 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 2 del cliente 4
2025-12-03 09:17:46,771 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 2
2025-12-03 09:17:46,771 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 2.
2025-12-03 09:17:46,772 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-03 09:17:46,774 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:46,774 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:46,775 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/areas/
2025-12-03 09:17:46,775 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: skip=0, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:46,775 - app.modules.menus.application.services.area_service - INFO - Obteniendo √°reas paginadas para cliente 4: skip=0, limit=10, search='None'
2025-12-03 09:17:46,781 - app.modules.menus.application.services.area_service - INFO - Paginaci√≥n completada para cliente 4: 0 √°reas de 0 totales
2025-12-03 09:17:46,781 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de √°reas recuperada para cliente 4 - Total: 0, P√°gina: 1
2025-12-03 09:17:46,781 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 16.8ms
2025-12-03 09:17:46,784 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 10.6ms
2025-12-03 09:17:49,297 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-03 09:17:49,298 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-12-03 09:17:49,298 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.4ms
2025-12-03 09:17:49,299 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.3ms
2025-12-03 09:17:49,301 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-03 09:17:49,301 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:49,301 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:49,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:49,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:49,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:49,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:49,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:49,304 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:49,305 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:49,305 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:49,305 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/roles/
2025-12-03 09:17:49,308 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:49,308 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 4: page=1, limit=10, search='None'
2025-12-03 09:17:49,308 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=4, page=1, limit=10, search='None'
2025-12-03 09:17:49,312 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 4: 4
2025-12-03 09:17:49,315 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 4 roles para la p√°gina 1 de 4 totales
2025-12-03 09:17:49,315 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 4, Total: 4, P√°gina: 1/1, Resultados: 4
2025-12-03 09:17:49,315 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 4, Total roles: 4
2025-12-03 09:17:49,317 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 16.0ms
2025-12-03 09:17:49,318 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-03 09:17:49,318 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:49,318 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:49,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:49,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:49,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:49,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:49,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:49,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:49,321 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:49,322 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:49,322 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/roles/
2025-12-03 09:17:49,325 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:49,325 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 4: page=1, limit=10, search='None'
2025-12-03 09:17:49,325 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=4, page=1, limit=10, search='None'
2025-12-03 09:17:49,327 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 4: 4
2025-12-03 09:17:49,328 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 4 roles para la p√°gina 1 de 4 totales
2025-12-03 09:17:49,328 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 4, Total: 4, P√°gina: 1/1, Resultados: 4
2025-12-03 09:17:49,328 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 4, Total roles: 4
2025-12-03 09:17:49,330 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 10.8ms
2025-12-03 09:17:50,118 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-03 09:17:50,119 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 0.8ms
2025-12-03 09:17:50,120 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-03 09:17:50,122 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.6ms
2025-12-03 09:17:50,122 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-03 09:17:50,122 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-03 09:17:50,124 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-03 09:17:50,124 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.1ms
2025-12-03 09:17:50,124 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.1ms
2025-12-03 09:17:50,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:50,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:50,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,128 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:50,128 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:50,128 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/usuarios/
2025-12-03 09:17:50,130 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:50,130 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 4: page=1, limit=10, search='None'
2025-12-03 09:17:50,143 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios √∫nicos de 2 filas crudas
2025-12-03 09:17:50,143 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-03 09:17:50,143 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 4 - Total: 2, P√°gina: 1
2025-12-03 09:17:50,145 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-03 09:17:50,145 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:50,145 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:50,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:50,146 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/roles/all-active/
2025-12-03 09:17:50,150 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 2 del cliente 4 para lista simple
2025-12-03 09:17:50,152 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 0 roles activos para cliente 4
2025-12-03 09:17:50,152 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 4 - Total: 0
2025-12-03 09:17:50,152 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 29.2ms
2025-12-03 09:17:50,153 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 9.2ms
2025-12-03 09:17:50,155 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-03 09:17:50,156 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-03 09:17:50,156 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:50,156 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:50,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,158 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:50,158 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:50,158 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/usuarios/
2025-12-03 09:17:50,163 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 2 del cliente 4 - Paginaci√≥n: page=1, limit=10, B√∫squeda: 'None'
2025-12-03 09:17:50,163 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 4: page=1, limit=10, search='None'
2025-12-03 09:17:50,167 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios √∫nicos de 2 filas crudas
2025-12-03 09:17:50,167 - app.modules.users.application.services.user_service - INFO - Obtenci√≥n paginada de usuarios completada exitosamente
2025-12-03 09:17:50,168 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 4 - Total: 2, P√°gina: 1
2025-12-03 09:17:50,168 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:17:50,168 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:17:50,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:17:50,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:17:50,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:17:50,170 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:17:50,171 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:17:50,171 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/roles/all-active/
2025-12-03 09:17:50,173 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 2 del cliente 4 para lista simple
2025-12-03 09:17:50,174 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 0 roles activos para cliente 4
2025-12-03 09:17:50,174 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 4 - Total: 0
2025-12-03 09:17:50,175 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 19.9ms
2025-12-03 09:17:50,175 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 19.8ms
2025-12-03 09:21:17,110 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-03 09:21:17,111 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-12-03 09:21:17,113 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-03 09:21:17,113 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:21:17,113 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-12-03 09:21:17,114 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:21:17,114 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:17,114 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:21:17,122 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-03 09:21:17,122 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:17,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-03 09:21:17,123 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-12-03 09:21:17,123 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:21:17,123 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/logout/
2025-12-03 09:21:17,125 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-12-03 09:21:17,126 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 4, Usuario 2
2025-12-03 09:21:17,126 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 4, Usuario: 2 (admin_tech)
2025-12-03 09:21:17,127 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:21:17,127 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=4, usuario_id=2, exito=True
2025-12-03 09:21:17,128 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 15.3ms
2025-12-03 09:21:26,083 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-03 09:21:26,084 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-03 09:21:26,086 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-03 09:21:26,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:21:26,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:21:26,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,087 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:21:26,087 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:21:26,087 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-12-03 09:21:26,092 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-12-03 09:21:26,092 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-12-03 09:21:26,092 - app.modules.auth.application.services.auth_service - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-12-03 09:21:26,297 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 09:21:26,297 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=1, access_level=5, user_type=super_admin
2025-12-03 09:21:26,297 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=1
2025-12-03 09:21:26,297 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-12-03 09:21:26,297 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:21:26,297 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14479, Rotaci√≥n: False
2025-12-03 09:21:26,297 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14479
2025-12-03 09:21:26,297 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 1
2025-12-03 09:21:26,297 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-12-03 09:21:26,303 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=1, usuario_id=1, exito=True
2025-12-03 09:21:26,304 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 218.4ms
2025-12-03 09:21:26,310 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-12-03 09:21:26,310 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:21:26,313 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:21:26,314 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-12-03 09:21:26,315 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-12-03 09:21:26,316 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-12-03 09:21:26,316 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-12-03 09:21:26,318 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.0ms
2025-12-03 09:21:26,325 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:21:26,325 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,331 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:21:26,333 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:21:26,333 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 09:21:26,335 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 09:21:26,335 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 09:21:26,336 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 09:21:26,337 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 7.8ms
2025-12-03 09:21:26,339 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-12-03 09:21:26,339 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-12-03 09:21:26,344 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-12-03 09:21:26,344 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-12-03 09:21:26,345 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-12-03 09:21:26,346 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 5.9ms
2025-12-03 09:21:53,048 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 09:21:53,048 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 09:21:53,049 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 09:21:53,049 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 09:21:53,049 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 09:21:53,049 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 09:21:54,012 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 09:21:54,014 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 09:21:54,014 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 09:21:54,014 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 09:21:54,015 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 09:21:54,015 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 09:21:54,284 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 09:21:54,284 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 09:21:54,349 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 09:21:54,349 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 09:21:54,349 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 09:21:54,544 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 09:21:54,544 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 09:21:54,644 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'cdn', 'api', 'assets', 'backend', 'static', 'admin'}
2025-12-03 09:21:56,311 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 09:21:56,312 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 09:21:56,312 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 09:21:56,312 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 09:21:56,312 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 09:21:56,312 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 12:00:25,267 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:27,212 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:27,212 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:27,212 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:27,217 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:27,217 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:27,217 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:28,057 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:28,260 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:28,261 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:28,261 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:28,263 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:28,264 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:28,264 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:29,747 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:29,944 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:29,944 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:29,944 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:29,944 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:29,947 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:29,947 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:31,547 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:31,752 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:31,752 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:31,752 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:31,757 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:31,757 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:31,757 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:36,287 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:36,482 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:36,482 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:36,482 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:36,485 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:36,486 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:36,486 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:37,362 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:37,586 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:37,587 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:37,587 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:37,588 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:37,588 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:37,588 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:42,791 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:43,008 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:43,008 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:43,008 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:43,008 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:43,008 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:43,008 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:44,016 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:44,239 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:44,240 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:44,240 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:44,242 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:44,243 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:44,243 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:45,254 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:45,473 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:45,473 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:45,473 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:45,476 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:45,476 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:45,476 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:46,530 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:46,755 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:46,756 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:46,756 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:46,759 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:46,759 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:46,759 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:47,678 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:47,938 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:47,938 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:47,938 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:47,942 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:47,942 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:47,943 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:48,917 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:49,136 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:49,136 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:49,136 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:49,138 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:49,139 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:49,139 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:50,780 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:51,008 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:51,008 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:51,008 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:51,014 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:51,014 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:51,014 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:52,759 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:52,982 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:52,982 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:52,982 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:52,984 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:52,984 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:52,985 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:53,969 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:54,187 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:54,187 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:54,187 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:54,187 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:54,187 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:54,187 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:55,936 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:56,158 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:56,158 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:56,158 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:56,158 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:56,158 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:56,158 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:57,202 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:57,407 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:57,408 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:57,408 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:57,409 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:57,409 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:57,409 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:58,328 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:00:58,558 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:58,558 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:58,558 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:00:58,558 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:00:58,558 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:00:58,558 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:02:24,599 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:02:24,809 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:02:24,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:02:24,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:02:24,809 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:02:24,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:02:24,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:51,944 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:03:52,191 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:52,192 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:52,192 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:52,194 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:52,194 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:52,194 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:53,284 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:03:53,491 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:53,491 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:53,491 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:53,491 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:53,491 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:53,491 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:57,328 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:03:57,581 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:57,581 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:57,581 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:57,583 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:57,583 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:57,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:58,645 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:03:58,864 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:58,864 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:58,865 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:58,867 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:03:58,867 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:03:58,867 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:03:59,870 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:00,082 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:00,082 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:00,082 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:00,082 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:00,082 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:00,082 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:01,167 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:01,380 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:01,382 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:01,382 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:01,384 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:01,384 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:01,384 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:02,496 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:02,721 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:02,721 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:02,722 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:02,724 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:02,724 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:02,724 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:03,692 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:03,933 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:03,934 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:03,934 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:03,936 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:03,936 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:03,936 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:04,937 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:05,148 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:05,150 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:05,150 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:05,150 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:05,150 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:05,150 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:06,250 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:06,498 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:06,499 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:06,499 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:06,500 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:06,501 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:06,501 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:07,526 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:07,748 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:07,751 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:07,751 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:07,753 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:07,753 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:07,753 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:09,481 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:09,688 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:09,688 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:09,688 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:09,690 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:09,690 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:09,690 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:10,730 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:10,941 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:10,941 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:10,941 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:10,946 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:10,946 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:10,946 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:12,668 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:12,912 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:12,913 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:12,913 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:12,915 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:12,915 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:12,916 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:13,941 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:14,181 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:14,181 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:14,181 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:14,181 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:14,181 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:14,181 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:15,209 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:15,433 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:15,433 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:15,433 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:15,435 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:15,436 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:15,436 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:16,470 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:16,687 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:16,687 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:16,687 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:16,689 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:16,689 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:16,689 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:17,721 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:04:17,938 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:17,938 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:17,938 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:04:17,941 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:04:17,941 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:04:17,941 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:05:11,102 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:05:11,329 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:05:11,329 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:05:11,330 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:05:11,332 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:05:11,332 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:05:11,332 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:05:14,468 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:05:14,677 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:05:14,679 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:05:14,679 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:05:14,679 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:05:14,679 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:05:14,679 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:06:19,253 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:06:19,473 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:06:19,473 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:06:19,473 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:06:19,473 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:06:19,473 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:06:19,473 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:06:47,737 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:06:47,967 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:06:47,969 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:06:47,969 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:06:47,969 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:06:47,969 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:06:47,969 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:27,221 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:27,444 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:27,444 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:27,444 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:27,444 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:27,444 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:27,444 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:29,177 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:29,399 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:29,399 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:29,399 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:29,404 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:29,404 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:29,404 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:31,114 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:31,336 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:31,337 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:31,337 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:31,339 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:31,339 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:31,339 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:32,354 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:32,584 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:32,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:32,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:32,584 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:32,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:32,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:34,342 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:34,572 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:34,573 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:34,573 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:34,574 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:34,575 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:34,575 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:35,597 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:35,836 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:35,836 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:35,836 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:35,838 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:35,840 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:35,840 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:36,849 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:37,073 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:37,073 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:37,074 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:37,076 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:37,076 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:37,076 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:38,144 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:38,369 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:38,370 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:38,370 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:38,370 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:38,370 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:38,370 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:40,090 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:40,323 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:40,324 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:40,324 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:40,324 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:40,324 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:40,324 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:41,364 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:41,594 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:41,594 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:41,594 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:41,594 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:41,594 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:41,594 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:42,644 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:42,849 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:42,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:42,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:42,853 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:42,853 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:42,853 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:48,040 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:48,259 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:48,259 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:48,260 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:48,261 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:48,262 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:48,262 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:49,363 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:49,569 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:49,569 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:49,569 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:49,573 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:49,573 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:49,573 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:50,564 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:50,791 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:50,791 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:50,791 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:50,793 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:50,794 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:50,794 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:51,874 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:52,091 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:52,092 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:52,092 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:52,093 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:52,094 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:52,094 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:53,129 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:53,334 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:53,334 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:53,334 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:53,334 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:53,334 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:53,334 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:54,345 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:54,559 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:54,559 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:54,559 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:54,564 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:54,564 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:54,564 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:56,339 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:56,579 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:56,579 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:56,579 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:56,579 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:56,579 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:56,579 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:57,586 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:57,802 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:57,803 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:57,803 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:57,805 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:57,806 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:57,806 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:58,844 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:07:59,059 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:59,059 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:59,059 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:07:59,059 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:07:59,059 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:07:59,059 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:08:24,989 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:08:25,199 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:08:25,199 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:08:25,199 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:08:25,199 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:08:25,199 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:08:25,199 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:08:52,026 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:08:52,235 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:08:52,235 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:08:52,235 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:08:52,235 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:08:52,235 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:08:52,235 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:09:16,103 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:09:16,316 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:09:16,316 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:09:16,316 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:09:16,326 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:09:16,326 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:09:16,326 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:05,368 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:05,576 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:05,576 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:05,576 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:05,583 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:05,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:05,584 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:06,586 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:06,800 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:06,800 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:06,800 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:06,806 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:06,806 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:06,806 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:07,816 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:08,035 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:08,036 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:08,036 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:08,036 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:08,036 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:08,036 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:09,032 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:09,261 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:09,262 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:09,262 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:09,264 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:09,265 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:09,265 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:10,293 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:10,556 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:10,556 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:10,556 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:10,566 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:10,566 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:10,566 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:11,557 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:11,788 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:11,790 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:11,790 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:11,792 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:11,792 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:11,792 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:12,784 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:13,015 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:13,016 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:13,016 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:13,018 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:13,018 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:13,019 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:13,991 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:14,228 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:14,228 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:14,228 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:14,231 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:14,231 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:14,232 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:15,288 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:15,520 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:15,520 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:15,520 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:15,523 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:15,524 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:15,524 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:16,527 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:16,764 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:16,764 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:16,765 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:16,766 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:16,767 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:16,767 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:17,789 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:18,011 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:18,011 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:18,011 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:18,014 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:18,014 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:18,014 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:29,416 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:29,650 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:29,651 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:29,651 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:29,653 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:29,653 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:29,654 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:30,705 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:30,920 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:30,920 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:30,920 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:30,922 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:30,923 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:30,923 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:31,864 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:32,087 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:32,087 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:32,087 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:32,087 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:32,087 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:32,087 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:33,119 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:33,330 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:33,337 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:33,337 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:33,339 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:33,339 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:33,339 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:34,328 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:34,551 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:34,551 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:34,551 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:34,551 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:34,551 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:34,551 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:35,597 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:35,825 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:35,825 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:35,825 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:35,828 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:35,828 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:35,828 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:36,797 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:37,017 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:37,017 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:37,017 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:37,017 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:37,017 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:37,017 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:45,679 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:45,911 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:45,912 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:45,912 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:45,914 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:45,914 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:45,914 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:46,897 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:47,099 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:47,099 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:47,099 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:47,099 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:47,099 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:47,107 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:50,207 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:50,433 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:50,433 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:50,433 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:50,437 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:50,437 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:50,437 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:53,623 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:53,835 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:53,835 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:53,835 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:53,837 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:53,837 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:53,837 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:57,697 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:10:57,909 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:57,909 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:57,909 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:10:57,911 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:10:57,912 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:10:57,912 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:03,054 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:03,249 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:03,249 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:03,249 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:03,249 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:03,255 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:03,255 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:06,367 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:06,625 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:06,625 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:06,625 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:06,627 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:06,629 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:06,629 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:11,047 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:11,257 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:11,257 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:11,257 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:11,257 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:11,257 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:11,257 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:14,337 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:14,559 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:14,559 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:14,559 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:14,562 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:14,562 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:14,562 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:17,699 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:17,899 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:17,899 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:17,899 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:17,907 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:17,907 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:17,907 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:20,253 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:20,478 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:20,479 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:20,479 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:20,481 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:20,481 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:20,481 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:24,914 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:25,140 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:25,148 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:25,148 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:25,149 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:25,149 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:25,149 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:28,988 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:29,208 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:29,208 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:29,208 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:29,208 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:29,208 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:29,208 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:31,642 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:31,847 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:31,847 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:31,847 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:31,847 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:31,847 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:31,847 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:35,638 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:35,848 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:35,848 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:35,848 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:35,858 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:35,858 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:35,858 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:38,398 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:38,588 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:38,588 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:38,588 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:38,592 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:38,592 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:38,592 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:41,638 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:41,849 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:41,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:41,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:41,849 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:41,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:41,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:44,919 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:45,140 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:45,140 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:45,140 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:45,140 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:45,140 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:45,140 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:48,269 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:48,488 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:48,488 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:48,489 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:48,491 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:48,491 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:48,492 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:51,618 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:51,848 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:51,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:51,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:51,849 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:51,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:51,849 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:56,306 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:11:56,544 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:56,544 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:56,545 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:11:56,546 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:11:56,548 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:11:56,548 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:01,068 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:01,288 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:01,288 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:01,288 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:01,288 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:01,288 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:01,288 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:04,483 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:04,689 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:04,689 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:04,689 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:04,689 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:04,689 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:04,689 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:07,972 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:08,159 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:08,159 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:08,159 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:08,159 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:08,159 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:08,159 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:11,149 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:11,369 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:11,369 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:11,369 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:11,369 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:11,369 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:11,369 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:44,119 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:44,379 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:44,379 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:44,379 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:44,379 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:44,379 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:44,379 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:49,514 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:49,753 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:49,759 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:49,759 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:49,759 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:49,759 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:49,759 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:53,610 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:53,804 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:53,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:53,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:53,809 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:53,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:53,809 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:56,921 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:12:57,119 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:57,119 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:57,119 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:12:57,119 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:12:57,119 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:12:57,119 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:00,194 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:13:00,407 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:00,407 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:00,407 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:00,409 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:00,409 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:00,409 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:03,529 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:13:03,741 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:03,742 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:03,742 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:03,743 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:03,743 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:03,743 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:06,798 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:13:07,020 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:07,020 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:07,020 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:07,020 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:07,020 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:07,020 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:10,954 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:13:11,169 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:11,170 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:11,170 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:11,172 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:11,172 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:11,172 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:14,180 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:13:14,396 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:14,396 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:14,396 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:14,399 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:14,399 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:14,399 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:30,577 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:13:30,789 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:30,789 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:30,789 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:13:30,789 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:13:30,789 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:13:30,789 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:15:51,861 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:15:52,084 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:15:52,095 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:15:52,095 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:15:52,097 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:15:52,097 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:15:52,097 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:15:55,076 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:15:55,302 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:15:55,306 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:15:55,306 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:15:55,306 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:15:55,306 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:15:55,306 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:15:58,500 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:15:58,722 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:15:58,722 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:15:58,722 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:15:58,722 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:15:58,722 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:15:58,722 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:16:24,052 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:16:24,267 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:16:24,267 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:16:24,267 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:16:24,267 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:16:24,267 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:16:24,267 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:18:58,625 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:18:58,884 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:18:58,884 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:18:58,884 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:18:58,897 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:18:58,898 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:18:58,898 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:06,116 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:06,315 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:06,315 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:06,315 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:06,328 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:06,329 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:06,330 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:09,523 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:09,732 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:09,732 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:09,733 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:12,846 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:13,068 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:13,069 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:13,069 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:16,939 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:17,145 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:17,146 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:17,146 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:20,370 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:20,577 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:20,578 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:20,578 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:24,355 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:24,568 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:24,568 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:24,568 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:28,435 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:28,650 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:28,650 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:28,650 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:19:39,496 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:19:39,715 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:19:39,715 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:19:39,715 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:20:09,028 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:20:09,254 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:20:09,255 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:20:09,255 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:20:13,241 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:20:13,447 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:20:13,447 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:20:13,447 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:20:19,356 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:20:19,574 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:20:19,574 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:20:19,574 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:21:26,778 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:21:27,008 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:21:27,009 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:21:27,009 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:21:27,013 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:21:27,014 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:21:27,014 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:21:27,020 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:21:27,020 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:21:27,020 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:22:06,727 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:22:06,942 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:22:06,942 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:22:06,942 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:22:06,948 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:22:06,948 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:22:06,948 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:22:06,952 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:22:06,952 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] aioodbc NO disponible
2025-12-03 12:22:06,952 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] CR√çTICO: Instalar: pip install aioodbc
2025-12-03 12:23:23,795 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:23:23,986 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:23:24,019 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:23:24,301 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 12:23:24,301 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 12:23:25,042 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 12:23:25,042 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 12:23:25,179 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 12:23:25,179 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 12:23:25,179 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 12:23:25,387 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 12:23:25,387 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 12:23:25,387 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 12:23:25,387 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 12:23:25,387 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 12:23:25,493 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'admin', 'backend', 'static', 'www', 'api', 'cdn'}
2025-12-03 12:28:23,313 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 12:28:23,313 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 12:28:23,313 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 12:28:23,313 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 12:28:23,313 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 12:28:23,313 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 12:28:24,288 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:28:24,515 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:28:24,523 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:28:24,763 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 12:28:24,763 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 12:28:24,894 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 12:28:24,894 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 12:28:25,030 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 12:28:25,030 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 12:28:25,030 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 12:28:25,233 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 12:28:25,233 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 12:28:25,233 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 12:28:25,234 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 12:28:25,234 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 12:28:25,342 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'api', 'assets', 'admin', 'backend', 'static', 'www', 'cdn'}
2025-12-03 12:38:23,763 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 12:38:23,763 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 12:38:23,763 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 12:38:23,763 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 12:38:23,763 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 12:38:23,763 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 12:38:24,710 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:38:24,946 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:38:24,953 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:38:25,183 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 12:38:25,183 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 12:38:25,309 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 12:38:25,310 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 12:38:25,441 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 12:38:25,441 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 12:38:25,441 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 12:38:25,647 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 12:38:25,647 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 12:38:25,647 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 12:38:25,647 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 12:38:25,648 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 12:38:25,763 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'backend', 'admin', 'www', 'cdn', 'api', 'assets'}
2025-12-03 12:40:04,365 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 12:40:04,365 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 12:40:04,365 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 12:40:04,365 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 12:40:04,365 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 12:40:04,365 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 12:40:05,274 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:40:05,520 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:40:05,520 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:40:05,743 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-12-03 12:40:05,743 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-12-03 12:40:05,850 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-12-03 12:40:05,851 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-12-03 12:40:05,984 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-12-03 12:40:05,984 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-12-03 12:40:05,984 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-12-03 12:40:06,271 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-12-03 12:40:06,271 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-12-03 12:40:06,271 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-12-03 12:40:06,272 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-12-03 12:40:06,272 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-12-03 12:40:06,385 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'api', 'www', 'admin', 'static', 'assets', 'backend', 'cdn'}
2025-12-03 12:50:04,806 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-12-03 12:50:04,806 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-12-03 12:50:04,807 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-12-03 12:50:04,807 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-12-03 12:50:04,808 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-12-03 12:50:04,808 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-12-03 12:50:05,714 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:50:05,962 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:50:05,964 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:51:52,259 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:51:52,503 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:51:52,512 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:51:56,750 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:51:57,037 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:51:57,046 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:02,825 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:03,123 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:03,131 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:08,165 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:08,553 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:08,562 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:13,417 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:13,672 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:13,682 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:18,366 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:18,620 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:18,626 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:23,371 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:23,616 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:23,621 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:28,325 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:28,618 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:28,629 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:34,152 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:34,391 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:34,399 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:39,096 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:39,320 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:39,326 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:44,064 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:44,291 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:44,298 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:49,030 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:49,277 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:49,285 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:54,817 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:52:55,027 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:52:55,027 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:52:59,857 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:00,081 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:00,088 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:04,866 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:05,119 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:05,125 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:09,824 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:10,057 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:10,066 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:14,847 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:15,083 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:15,091 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:20,167 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:20,469 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:20,480 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:25,324 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:25,583 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:25,592 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:30,495 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:30,785 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:30,794 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:34,862 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:35,155 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:35,165 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:53:39,961 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:53:40,210 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:53:40,219 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:54:13,305 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:54:13,544 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:54:13,550 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:54:17,766 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:54:18,028 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:54:18,038 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:54:23,045 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:54:23,283 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:54:23,290 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:54:28,551 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-12-03 12:54:28,828 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] SQLAlchemy async disponible
2025-12-03 12:54:28,828 - app.infrastructure.database.connection_async - INFO - [ASYNC_CONNECTION] aioodbc disponible
2025-12-03 12:54:33,801 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)

2025-10-20 23:12:11,252 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-20 23:12:11,253 - app.main - INFO - 127.0.0.1 <- GET /docs 1.0ms
2025-10-20 23:12:11,580 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-20 23:12:11,646 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 66.0ms
2025-10-20 23:14:06,732 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-20 23:14:06,875 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-20 23:14:06,875 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 142.8ms
2025-10-20 23:14:06,893 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 18.0ms
2025-10-20 23:14:06,900 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-20 23:14:06,903 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-20 23:14:06,913 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 12.6ms
2025-10-20 23:14:06,950 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-20 23:14:06,956 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-20 23:14:06,957 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-20 23:14:06,990 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-20 23:14:06,990 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-20 23:14:06,991 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 41.5ms
2025-10-20 23:14:06,994 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-20 23:14:06,996 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-20 23:14:06,996 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-20 23:14:06,997 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-20 23:14:06,998 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-20 23:14:06,998 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.9ms
2025-10-20 23:14:11,769 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-20 23:14:11,770 - app.api.v1.endpoints.auth - INFO - Usuario cerró sesión exitosamente
2025-10-20 23:14:11,770 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 0.7ms
2025-10-20 23:14:18,008 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-20 23:14:18,238 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente
2025-10-20 23:14:18,238 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 230.2ms
2025-10-20 23:14:18,263 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-20 23:14:18,266 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-20 23:14:18,266 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-20 23:14:18,274 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-20 23:14:18,274 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-20 23:14:18,275 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-20 23:14:18,275 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-20 23:14:18,277 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-20 23:14:18,277 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-20 23:14:18,278 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-20 23:14:18,278 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-20 23:14:18,280 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-20 23:14:18,282 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-20 23:14:18,282 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-20 23:14:18,282 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 19.6ms
2025-10-20 23:14:18,283 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 7.9ms
2025-10-20 23:14:18,283 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 7.8ms
2025-10-20 23:14:18,286 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-20 23:14:18,288 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-20 23:14:18,288 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-20 23:14:18,292 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-20 23:14:18,292 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-20 23:14:18,293 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.8ms
2025-10-20 23:14:18,294 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-20 23:14:18,295 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-20 23:14:18,297 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-20 23:14:18,297 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-20 23:14:18,298 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-20 23:14:18,298 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-20 23:14:18,300 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-20 23:14:18,301 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-20 23:14:18,301 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-20 23:14:18,302 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 7.2ms
2025-10-20 23:14:18,302 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 7.1ms
2025-10-20 23:14:31,319 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-20 23:14:31,321 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-20 23:14:31,321 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-20 23:14:31,323 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-20 23:14:31,323 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-20 23:14:31,323 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-20 23:14:31,324 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-20 23:14:31,495 - app.services.autorizacion_service - INFO - Se obtuvieron 1676 registros pendientes de autorización
2025-10-20 23:14:31,536 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 217.7ms
2025-10-20 23:14:31,537 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 213.4ms
2025-10-20 23:14:31,545 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-20 23:14:31,547 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-20 23:14:31,547 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-20 23:14:31,548 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-20 23:14:31,549 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-20 23:14:31,549 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-20 23:14:31,549 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-20 23:14:31,613 - app.services.autorizacion_service - INFO - Se obtuvieron 1676 registros pendientes de autorización
2025-10-20 23:14:31,655 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 110.6ms
2025-10-20 23:14:31,656 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 106.8ms
2025-10-20 23:14:32,821 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-20 23:14:32,822 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-20 23:14:32,883 - app.services.autorizacion_service - INFO - Se obtuvieron 1676 registros pendientes de autorización
2025-10-20 23:14:32,925 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 103.7ms
2025-10-20 23:14:32,931 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-20 23:14:32,932 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-20 23:14:32,993 - app.services.autorizacion_service - INFO - Se obtuvieron 1676 registros pendientes de autorización
2025-10-20 23:14:33,035 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 103.8ms
2025-10-20 23:14:34,179 - app.main - INFO - 127.0.0.1 -> POST /api/v1/autorizacion/reporte/
2025-10-20 23:14:34,180 - app.main - INFO - 127.0.0.1 -> POST /api/v1/autorizacion/reporte/
2025-10-20 23:14:34,181 - app.services.autorizacion_service - INFO - Ejecutando SP sp_reporte_autorizacion_destajo - Rango: 2025-10-14 a 2025-10-21
2025-10-20 23:14:34,183 - app.services.autorizacion_service - INFO - Ejecutando SP sp_reporte_autorizacion_destajo - Rango: 2025-10-14 a 2025-10-21
2025-10-20 23:14:34,236 - app.services.autorizacion_service - INFO - El SP no devolvió resultados
2025-10-20 23:14:34,237 - app.services.autorizacion_service - INFO - El SP no devolvió resultados
2025-10-20 23:14:34,237 - app.main - INFO - 127.0.0.1 <- POST /api/v1/autorizacion/reporte/ 57.1ms
2025-10-20 23:14:34,237 - app.main - INFO - 127.0.0.1 <- POST /api/v1/autorizacion/reporte/ 58.7ms
2025-10-20 23:14:36,008 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-20 23:14:36,008 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-20 23:14:36,075 - app.services.autorizacion_service - INFO - Se obtuvieron 1676 registros pendientes de autorización
2025-10-20 23:14:36,119 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 111.0ms
2025-10-20 23:14:36,127 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-20 23:14:36,127 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-20 23:14:36,195 - app.services.autorizacion_service - INFO - Se obtuvieron 1676 registros pendientes de autorización
2025-10-20 23:14:36,236 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 109.6ms
2025-10-21 17:36:21,140 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-21 17:36:21,141 - app.main - INFO - 127.0.0.1 <- GET /docs 1.0ms
2025-10-21 17:36:21,223 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-21 17:36:21,296 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 72.6ms
2025-10-21 17:36:25,944 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 17:36:28,312 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 17:36:28,313 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2368.3ms
2025-10-21 17:36:28,333 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 21.2ms
2025-10-21 17:36:28,342 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 17:36:28,345 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 17:36:28,357 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 15.3ms
2025-10-21 17:36:28,382 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 17:36:28,388 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 17:36:28,389 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 17:36:28,430 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 17:36:28,430 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 17:36:28,430 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-21 17:36:28,431 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-21 17:36:28,604 - app.services.autorizacion_service - INFO - Se obtuvieron 1675 registros pendientes de autorización
2025-10-21 17:36:28,654 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 271.9ms
2025-10-21 17:36:28,654 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 224.0ms
2025-10-21 17:36:28,663 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 17:36:28,666 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 17:36:28,667 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 17:36:28,669 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 17:36:28,669 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 17:36:28,670 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 7.0ms
2025-10-21 17:36:28,672 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-21 17:36:28,673 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-21 17:36:28,758 - app.services.autorizacion_service - INFO - Se obtuvieron 1675 registros pendientes de autorización
2025-10-21 17:36:28,804 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 131.9ms
2025-10-21 17:36:32,505 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 17:36:32,530 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 17:36:32,557 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 51.4ms
2025-10-21 17:36:32,557 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 27.1ms
2025-10-21 17:36:32,564 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 17:36:32,566 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 17:36:32,567 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.8ms
2025-10-21 17:36:32,584 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 17:36:32,586 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 17:36:32,586 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 17:36:32,588 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 17:36:32,588 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 17:36:32,589 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-21 17:36:32,589 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-21 17:36:32,669 - app.services.autorizacion_service - INFO - Se obtuvieron 1675 registros pendientes de autorización
2025-10-21 17:36:32,717 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 132.9ms
2025-10-21 17:36:32,717 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 128.2ms
2025-10-21 17:36:32,722 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 17:36:32,724 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 17:36:32,724 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 17:36:32,726 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 17:36:32,726 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 17:36:32,727 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.7ms
2025-10-21 17:36:32,729 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-21 17:36:32,729 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-21 17:36:32,810 - app.services.autorizacion_service - INFO - Se obtuvieron 1675 registros pendientes de autorización
2025-10-21 17:36:32,868 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 139.8ms
2025-10-21 17:36:37,624 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-21 17:36:37,625 - app.api.v1.endpoints.auth - INFO - Usuario cerró sesión exitosamente
2025-10-21 17:36:37,625 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 1.3ms
2025-10-21 17:52:23,063 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-21 17:52:23,064 - app.main - INFO - 127.0.0.1 <- GET /docs 1.2ms
2025-10-21 17:52:23,137 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-21 17:52:23,203 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 66.3ms
2025-10-21 17:52:57,044 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 17:52:57,411 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 367.4ms
2025-10-21 17:53:30,158 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 17:53:30,381 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 222.8ms
2025-10-21 18:01:54,858 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:01:54,859 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 0.8ms
2025-10-21 18:06:32,852 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:06:32,853 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:06:32,853 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.8ms
2025-10-21 18:06:32,854 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.4ms
2025-10-21 18:12:38,296 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:12:38,297 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:12:38,297 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.1ms
2025-10-21 18:12:38,298 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.2ms
2025-10-21 18:12:44,653 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 18:12:44,894 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 240.5ms
2025-10-21 18:12:44,921 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:12:44,928 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:12:44,929 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:12:44,942 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:12:44,942 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:12:44,943 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:12:44,943 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:12:44,945 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:12:44,945 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:12:44,974 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:12:44,974 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:12:44,977 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:12:44,978 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:12:44,979 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:12:44,979 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 58.2ms
2025-10-21 18:12:44,980 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 36.8ms
2025-10-21 18:12:44,980 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 36.6ms
2025-10-21 18:12:44,985 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:12:44,988 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:12:44,988 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:12:44,991 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:12:44,992 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:12:44,992 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.3ms
2025-10-21 18:12:44,994 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:12:44,994 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:12:44,997 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:12:44,997 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:12:44,998 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:12:44,999 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:12:45,001 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:12:45,002 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:12:45,002 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:12:45,003 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 9.3ms
2025-10-21 18:12:45,003 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 9.1ms
2025-10-21 18:16:04,538 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:04,538 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:04,560 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 22.7ms
2025-10-21 18:16:04,560 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 22.5ms
2025-10-21 18:16:04,565 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:04,566 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 0.5ms
2025-10-21 18:16:04,569 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:04,574 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.9ms
2025-10-21 18:16:04,880 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/me/
2025-10-21 18:16:04,880 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/me/ 0.4ms
2025-10-21 18:16:04,881 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:04,889 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 7.4ms
2025-10-21 18:16:06,665 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:06,671 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:06,688 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 23.0ms
2025-10-21 18:16:06,688 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 17.2ms
2025-10-21 18:16:06,697 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:06,698 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 0.7ms
2025-10-21 18:16:06,703 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:06,712 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.9ms
2025-10-21 18:16:06,716 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:06,719 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 2.5ms
2025-10-21 18:16:11,801 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:11,806 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.1ms
2025-10-21 18:16:11,808 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:11,815 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.5ms
2025-10-21 18:16:11,818 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:11,819 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 0.6ms
2025-10-21 18:16:11,822 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:11,826 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.2ms
2025-10-21 18:16:11,830 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:11,832 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 1.9ms
2025-10-21 18:16:18,780 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 18:16:19,000 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 219.9ms
2025-10-21 18:16:19,019 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 18:16:19,020 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.7ms
2025-10-21 18:16:19,022 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:16:19,025 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:16:19,025 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:16:19,057 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:16:19,057 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:16:19,057 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 18:16:19,058 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 35.9ms
2025-10-21 18:16:19,058 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.7ms
2025-10-21 18:16:19,060 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:16:19,062 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:16:19,062 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:16:19,075 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:16:19,075 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:16:19,076 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 18:16:19,076 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 16.1ms
2025-10-21 18:16:19,076 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.6ms
2025-10-21 18:16:19,079 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:16:19,081 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:16:19,082 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:16:19,083 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:16:19,083 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 18:16:19,083 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.5ms
2025-10-21 18:16:19,084 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.5ms
2025-10-21 18:16:19,086 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 18:16:19,086 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:16:19,089 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:16:19,089 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:16:19,091 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:16:19,091 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:16:19,091 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 5.2ms
2025-10-21 18:16:19,091 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-21 18:16:19,093 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 18:16:19,094 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.6ms
2025-10-21 18:16:19,094 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:16:19,096 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:16:19,096 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:16:19,099 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:16:19,099 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:16:19,100 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.2ms
2025-10-21 18:16:19,102 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:16:19,105 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:16:19,105 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:16:19,106 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:16:19,106 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.9ms
2025-10-21 18:16:22,140 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:22,146 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:22,153 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.0ms
2025-10-21 18:16:22,153 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 7.2ms
2025-10-21 18:16:22,159 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:22,160 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 0.8ms
2025-10-21 18:16:22,162 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:22,168 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.3ms
2025-10-21 18:16:22,171 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:22,175 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 3.1ms
2025-10-21 18:16:32,330 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:32,337 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.9ms
2025-10-21 18:16:32,339 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:32,346 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.9ms
2025-10-21 18:16:32,350 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:32,351 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 0.6ms
2025-10-21 18:16:32,355 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:32,360 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.4ms
2025-10-21 18:16:32,364 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:32,367 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 3.1ms
2025-10-21 18:16:33,077 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:33,087 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:33,095 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 17.5ms
2025-10-21 18:16:33,095 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 7.5ms
2025-10-21 18:16:33,099 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:33,100 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 0.9ms
2025-10-21 18:16:33,103 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:16:33,108 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.2ms
2025-10-21 18:16:33,111 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-21 18:16:33,114 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 2.5ms
2025-10-21 18:21:12,162 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:21:12,162 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:21:12,183 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 20.4ms
2025-10-21 18:21:12,183 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 20.2ms
2025-10-21 18:21:12,495 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 18:21:12,496 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.5ms
2025-10-21 18:21:12,497 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:21:12,500 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:21:12,506 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 8.9ms
2025-10-21 18:22:23,163 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:23,177 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:23,181 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 18.3ms
2025-10-21 18:22:23,181 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.2ms
2025-10-21 18:22:23,185 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:22:23,187 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:22:23,192 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 6.8ms
2025-10-21 18:22:36,632 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:36,643 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.0ms
2025-10-21 18:22:36,645 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:36,652 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.5ms
2025-10-21 18:22:36,656 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:22:36,658 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:22:36,663 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 7.3ms
2025-10-21 18:22:41,980 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 18:22:42,202 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 222.0ms
2025-10-21 18:22:42,225 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:22:42,232 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:22:42,233 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:22:42,283 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:22:42,284 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:22:42,284 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 58.9ms
2025-10-21 18:22:42,286 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:22:42,288 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:22:42,289 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:22:42,310 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:22:42,311 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:22:42,311 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 25.2ms
2025-10-21 18:22:42,313 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:22:42,316 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:22:42,318 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:22:42,319 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:22:42,319 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.9ms
2025-10-21 18:22:42,321 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:22:42,324 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:22:42,324 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:22:42,325 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:22:42,326 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:22:42,326 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.6ms
2025-10-21 18:22:42,328 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:22:42,330 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:22:42,330 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:22:42,334 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:22:42,334 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:22:42,335 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.0ms
2025-10-21 18:22:42,337 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:22:42,339 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:22:42,340 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:22:42,340 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:22:42,340 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.6ms
2025-10-21 18:22:44,739 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:44,751 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:44,759 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 19.7ms
2025-10-21 18:22:44,759 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.2ms
2025-10-21 18:22:44,763 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:22:44,766 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:22:44,767 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 4.1ms
2025-10-21 18:22:44,782 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:22:44,784 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:22:44,784 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:22:44,786 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:22:44,786 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:22:44,787 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:22:44,787 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:22:44,789 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:22:44,790 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:22:44,790 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:22:44,792 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:22:44,792 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:22:44,796 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:22:44,796 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:22:44,797 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 15.2ms
2025-10-21 18:22:44,797 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.5ms
2025-10-21 18:22:44,797 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.4ms
2025-10-21 18:22:44,799 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:22:44,803 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:22:44,803 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:22:44,805 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:22:44,805 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:22:44,806 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:22:44,808 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:22:44,809 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:22:44,809 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:22:44,809 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:22:44,810 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 10.3ms
2025-10-21 18:22:44,811 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:22:44,811 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:22:44,815 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:22:44,815 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:22:44,816 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.0ms
2025-10-21 18:22:44,816 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.1ms
2025-10-21 18:22:46,587 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:46,594 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:22:46,599 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.4ms
2025-10-21 18:22:46,600 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.2ms
2025-10-21 18:22:46,606 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:22:46,608 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:22:46,609 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.0ms
2025-10-21 18:22:46,626 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:22:46,628 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:22:46,628 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:22:46,629 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:22:46,630 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:22:46,630 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:22:46,630 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:22:46,632 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:22:46,632 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:22:46,636 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:22:46,636 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:22:46,639 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:22:46,640 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:22:46,640 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:22:46,640 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 14.5ms
2025-10-21 18:22:46,641 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.6ms
2025-10-21 18:22:46,641 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.5ms
2025-10-21 18:22:46,643 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:22:46,645 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:22:46,645 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:22:46,647 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:22:46,647 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:22:46,647 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:22:46,649 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:22:46,649 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:22:46,653 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:22:46,653 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:22:46,653 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:22:46,654 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 10.5ms
2025-10-21 18:22:46,657 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:22:46,658 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:22:46,659 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:22:46,659 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 12.0ms
2025-10-21 18:22:46,660 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.7ms
2025-10-21 18:47:43,072 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:47:43,072 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:47:43,101 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 29.0ms
2025-10-21 18:47:43,101 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 28.7ms
2025-10-21 18:47:43,421 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 18:47:43,422 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.7ms
2025-10-21 18:47:43,424 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:47:43,426 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:47:43,433 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.0ms
2025-10-21 18:47:43,453 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 18:47:43,453 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.4ms
2025-10-21 18:47:43,455 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 18:47:43,455 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:47:43,455 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.8ms
2025-10-21 18:47:43,460 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:47:43,461 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:47:43,487 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:47:43,487 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:47:43,488 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 33.0ms
2025-10-21 18:47:43,489 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 18:47:43,490 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:47:43,490 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.9ms
2025-10-21 18:47:43,492 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:47:43,493 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:47:43,502 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:47:43,502 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:47:43,503 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 13.3ms
2025-10-21 18:47:43,505 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 18:47:43,506 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:47:43,508 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:47:43,509 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:47:43,509 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:47:43,510 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 5.0ms
2025-10-21 18:47:43,510 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.6ms
2025-10-21 18:47:43,512 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 18:47:43,512 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.5ms
2025-10-21 18:47:43,512 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:47:43,514 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:47:43,515 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:47:43,516 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:47:43,516 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:47:43,517 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.3ms
2025-10-21 18:47:43,518 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 18:47:43,518 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:47:43,520 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:47:43,520 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:47:43,526 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:47:43,526 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:47:43,526 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 8.6ms
2025-10-21 18:47:43,527 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.5ms
2025-10-21 18:47:43,529 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:47:43,531 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:47:43,532 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:47:43,533 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:47:43,533 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-21 18:48:00,381 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-21 18:48:00,382 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.5ms
2025-10-21 18:48:00,383 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-21 18:48:00,387 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 3.7ms
2025-10-21 18:48:04,306 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:48:04,307 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 0.7ms
2025-10-21 18:48:04,308 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:48:04,309 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 0.7ms
2025-10-21 18:48:10,102 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 18:48:10,325 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 222.7ms
2025-10-21 18:48:10,350 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:48:10,356 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:48:10,356 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:48:10,387 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:48:10,387 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:48:10,387 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 37.1ms
2025-10-21 18:48:10,389 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:48:10,390 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:48:10,391 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:48:10,406 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:48:10,406 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:48:10,407 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 17.8ms
2025-10-21 18:48:10,408 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:48:10,410 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:48:10,412 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:48:10,412 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:48:10,412 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-21 18:48:10,414 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:48:10,415 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:48:10,416 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:48:10,417 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:48:10,417 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:48:10,417 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.4ms
2025-10-21 18:48:10,419 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:48:10,421 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:48:10,421 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:48:10,424 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:48:10,424 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:48:10,424 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 5.2ms
2025-10-21 18:48:10,426 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:48:10,427 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:48:10,428 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:48:10,428 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:48:10,428 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 2.6ms
2025-10-21 18:48:15,463 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:48:15,471 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:48:15,478 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.3ms
2025-10-21 18:48:15,478 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 7.1ms
2025-10-21 18:48:15,484 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:48:15,486 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:48:15,488 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 4.3ms
2025-10-21 18:48:15,524 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:48:15,527 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:48:15,527 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:48:15,528 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:48:15,528 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:48:15,529 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-21 18:48:15,531 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:48:15,533 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:48:15,534 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:48:15,536 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:48:15,536 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:48:15,536 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.6ms
2025-10-21 18:48:20,058 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:48:20,061 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:48:20,061 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:48:20,063 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:48:20,063 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:48:20,063 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:48:20,065 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:48:20,065 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:48:20,069 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:48:20,069 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:48:20,069 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:48:20,069 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 11.2ms
2025-10-21 18:48:20,071 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:48:20,071 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:48:20,072 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:48:20,072 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.6ms
2025-10-21 18:48:20,072 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.4ms
2025-10-21 18:48:20,074 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:48:20,077 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:48:20,077 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:48:20,079 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:48:20,079 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:48:20,080 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:48:20,081 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.5ms
2025-10-21 18:48:20,082 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:48:20,083 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:48:20,086 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:48:20,086 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:48:20,087 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:48:20,087 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.0ms
2025-10-21 18:48:20,089 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:48:20,089 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:48:20,089 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:48:20,090 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.6ms
2025-10-21 18:48:21,000 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-21 18:48:21,001 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.9ms
2025-10-21 18:48:21,001 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-21 18:48:21,002 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.8ms
2025-10-21 18:48:21,003 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 18:48:21,005 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:48:21,006 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 18:48:21,012 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 18:48:21,013 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 9.7ms
2025-10-21 18:48:21,014 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 18:48:21,016 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:48:21,017 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 18:48:21,019 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 18:48:21,019 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.0ms
2025-10-21 18:50:44,394 - app.main - INFO - 127.0.0.1 -> POST /api/v2/auth/refresh/
2025-10-21 18:50:44,395 - app.main - INFO - 127.0.0.1 -> POST /api/v2/auth/refresh/
2025-10-21 18:50:44,395 - app.main - INFO - 127.0.0.1 <- POST /api/v2/auth/refresh/ 1.4ms
2025-10-21 18:50:44,395 - app.main - INFO - 127.0.0.1 <- POST /api/v2/auth/refresh/ 0.7ms
2025-10-21 18:50:53,298 - app.main - INFO - 127.0.0.1 -> POST /api/v2/auth/refresh/
2025-10-21 18:50:53,299 - app.main - INFO - 127.0.0.1 <- POST /api/v2/auth/refresh/ 0.9ms
2025-10-21 18:50:53,301 - app.main - INFO - 127.0.0.1 -> POST /api/v2/auth/refresh/
2025-10-21 18:50:53,302 - app.main - INFO - 127.0.0.1 <- POST /api/v2/auth/refresh/ 0.7ms
2025-10-21 18:50:55,764 - app.main - INFO - 127.0.0.1 -> POST /api/v2/auth/refresh/
2025-10-21 18:50:55,765 - app.main - INFO - 127.0.0.1 -> POST /api/v2/auth/refresh/
2025-10-21 18:50:55,766 - app.main - INFO - 127.0.0.1 <- POST /api/v2/auth/refresh/ 1.6ms
2025-10-21 18:50:55,766 - app.main - INFO - 127.0.0.1 <- POST /api/v2/auth/refresh/ 1.1ms
2025-10-21 18:51:05,556 - app.main - INFO - 127.0.0.1 -> POST /api/v2/auth/login/
2025-10-21 18:51:05,557 - app.main - INFO - 127.0.0.1 <- POST /api/v2/auth/login/ 0.6ms
2025-10-21 18:51:11,537 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:51:11,559 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 21.8ms
2025-10-21 18:51:11,561 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 18:51:11,567 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.9ms
2025-10-21 18:51:11,571 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 18:51:11,573 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 18:51:11,578 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 7.1ms
2025-10-21 18:51:16,598 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 18:51:16,835 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 236.4ms
2025-10-21 18:51:16,851 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:51:16,863 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:51:16,864 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:51:16,898 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:51:16,898 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:51:16,899 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 47.4ms
2025-10-21 18:51:16,901 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:51:16,903 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:51:16,903 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:51:16,918 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:51:16,918 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:51:16,918 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 17.6ms
2025-10-21 18:51:16,920 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:51:16,922 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:51:16,924 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:51:16,924 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:51:16,925 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-21 18:51:16,927 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 18:51:16,929 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 18:51:16,929 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 18:51:16,930 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 18:51:16,930 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 18:51:16,931 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.3ms
2025-10-21 18:51:16,932 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 18:51:16,934 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 18:51:16,935 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 18:51:16,938 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 18:51:16,938 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 18:51:16,939 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.2ms
2025-10-21 18:51:16,940 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 18:51:16,943 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 18:51:16,944 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 18:51:16,944 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 18:51:16,944 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-21 19:10:51,181 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 19:10:51,182 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 19:10:51,182 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 19:10:51,182 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 19:10:51,183 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 19:10:51,183 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 19:10:51,184 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 2.8ms
2025-10-21 19:10:51,184 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 2.2ms
2025-10-21 19:10:51,184 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 2.0ms
2025-10-21 19:10:51,184 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.9ms
2025-10-21 19:10:51,184 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.9ms
2025-10-21 19:10:51,185 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.8ms
2025-10-21 19:10:51,188 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 19:10:51,189 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.3ms
2025-10-21 19:10:51,491 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:10:51,491 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:10:51,492 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:10:51,492 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:10:51,568 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 77.0ms
2025-10-21 19:10:51,568 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 76.5ms
2025-10-21 19:10:51,568 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 76.3ms
2025-10-21 19:10:51,568 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 76.2ms
2025-10-21 19:10:51,572 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:10:51,573 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-10-21 19:10:51,573 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:10:51,573 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:10:51,574 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-10-21 19:10:51,575 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-10-21 19:10:51,575 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.2ms
2025-10-21 19:10:51,575 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 2.3ms
2025-10-21 19:10:51,576 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 2.3ms
2025-10-21 19:10:51,577 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 19:10:51,578 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.8ms
2025-10-21 19:10:51,580 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:10:51,581 - app.core.auth - ERROR - Error decodificando token: Signature has expired.
2025-10-21 19:10:51,581 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 1.0ms
2025-10-21 19:10:51,586 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:10:51,591 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.7ms
2025-10-21 19:10:51,595 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:10:51,605 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:10:51,605 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:10:51,638 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:10:51,638 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:10:51,638 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:10:51,641 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:10:51,643 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:10:51,643 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:10:51,643 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:10:51,644 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:10:51,644 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 48.7ms
2025-10-21 19:10:51,646 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:10:51,654 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:10:51,655 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:10:51,665 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:10:51,665 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:10:51,666 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 27.3ms
2025-10-21 19:10:51,666 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 22.9ms
2025-10-21 19:10:51,666 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 22.7ms
2025-10-21 19:11:19,862 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:11:19,863 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:11:19,863 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 1.1ms
2025-10-21 19:11:19,863 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 0.8ms
2025-10-21 19:11:19,865 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:11:19,866 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:11:19,873 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 8.2ms
2025-10-21 19:11:19,874 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.0ms
2025-10-21 19:11:19,876 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:11:19,885 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:11:19,885 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:11:19,914 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:11:19,914 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:11:19,914 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:11:19,916 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:11:19,916 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:11:19,931 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:11:19,931 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:11:19,932 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 55.7ms
2025-10-21 19:11:19,932 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 17.4ms
2025-10-21 19:11:19,934 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:11:19,937 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:11:19,939 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:11:19,939 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:11:19,940 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:11:19,941 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.3ms
2025-10-21 19:11:19,943 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:11:19,947 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 6.5ms
2025-10-21 19:12:17,720 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:12:17,734 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:12:17,739 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 19.2ms
2025-10-21 19:12:17,739 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.2ms
2025-10-21 19:12:17,745 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:12:17,748 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:12:17,753 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 7.9ms
2025-10-21 19:12:17,778 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:12:17,783 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:12:17,783 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:12:17,814 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:12:17,814 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:12:17,814 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:12:17,814 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:12:17,816 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:12:17,816 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:12:17,827 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:12:17,827 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:12:17,828 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:12:17,830 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:12:17,830 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:12:17,830 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 52.2ms
2025-10-21 19:12:17,830 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 16.3ms
2025-10-21 19:12:17,830 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 16.2ms
2025-10-21 19:12:17,832 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:12:17,834 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:12:17,835 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:12:17,836 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:12:17,836 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:12:17,837 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.6ms
2025-10-21 19:12:17,837 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:12:17,840 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:12:17,840 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:12:17,843 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:12:17,843 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:12:17,844 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:12:17,845 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:12:17,846 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:12:17,846 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:12:17,847 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.3ms
2025-10-21 19:12:17,847 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.3ms
2025-10-21 19:12:21,445 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:12:21,454 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:12:21,454 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 9.7ms
2025-10-21 19:12:21,463 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 9.0ms
2025-10-21 19:12:21,467 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:12:21,468 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:12:21,470 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.8ms
2025-10-21 19:12:21,486 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:12:21,488 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:12:21,488 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:12:21,488 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:12:21,489 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:12:21,489 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:12:21,489 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:12:21,490 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:12:21,490 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:12:21,494 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:12:21,494 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:12:21,496 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:12:21,496 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:12:21,496 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:12:21,496 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 10.8ms
2025-10-21 19:12:21,497 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.7ms
2025-10-21 19:12:21,497 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 7.7ms
2025-10-21 19:12:21,498 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:12:21,500 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:12:21,501 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:12:21,502 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:12:21,502 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:12:21,503 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.2ms
2025-10-21 19:12:21,503 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:12:21,504 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:12:21,504 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:12:21,507 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:12:21,508 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:12:21,508 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:12:21,511 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:12:21,513 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:12:21,513 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:12:21,513 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.7ms
2025-10-21 19:12:21,514 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.8ms
2025-10-21 19:12:24,236 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-21 19:12:24,237 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.5ms
2025-10-21 19:12:24,239 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-21 19:12:24,243 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 4.2ms
2025-10-21 19:12:35,009 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-21 19:12:35,010 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.4ms
2025-10-21 19:12:35,011 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 19:12:35,249 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 238.0ms
2025-10-21 19:12:35,268 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:12:35,272 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:12:35,273 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:12:35,274 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:12:35,275 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:12:35,275 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 7.7ms
2025-10-21 19:12:35,278 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:12:35,281 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:12:35,281 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:12:35,285 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:12:35,285 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:12:35,286 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.0ms
2025-10-21 19:12:35,289 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:12:35,292 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:12:35,293 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:12:35,293 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:12:35,293 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.6ms
2025-10-21 19:12:35,296 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:12:35,298 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:12:35,299 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:12:35,300 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:12:35,300 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:12:35,301 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-21 19:12:35,302 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:12:35,305 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:12:35,305 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:12:35,310 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:12:35,310 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:12:35,311 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.6ms
2025-10-21 19:12:35,313 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:12:35,315 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:12:35,316 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:12:35,316 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:12:35,316 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-21 19:46:14,754 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 19:46:14,755 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 19:46:14,755 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.6ms
2025-10-21 19:46:14,755 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-21 19:46:15,063 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:46:15,089 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:46:15,094 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 31.1ms
2025-10-21 19:46:15,094 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.1ms
2025-10-21 19:46:15,099 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 19:46:15,100 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.6ms
2025-10-21 19:46:15,101 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:46:15,104 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:46:15,110 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 8.6ms
2025-10-21 19:46:15,137 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 19:46:15,138 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 19:46:15,138 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.4ms
2025-10-21 19:46:15,138 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 19:46:15,139 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.6ms
2025-10-21 19:46:15,140 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.4ms
2025-10-21 19:46:15,142 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:46:15,147 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:46:15,148 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:46:15,197 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:46:15,197 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:46:15,198 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 19:46:15,199 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 56.9ms
2025-10-21 19:46:15,199 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:46:15,200 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 19:46:15,200 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 2.2ms
2025-10-21 19:46:15,202 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:46:15,202 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:46:15,228 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:46:15,228 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:46:15,229 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 19:46:15,230 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 30.8ms
2025-10-21 19:46:15,230 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 30.8ms
2025-10-21 19:46:15,231 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 2.4ms
2025-10-21 19:46:15,233 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:46:15,236 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:46:15,239 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:46:15,239 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:46:15,241 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 7.3ms
2025-10-21 19:46:15,241 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:46:15,244 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:46:15,244 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:46:15,246 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:46:15,246 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:46:15,247 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.8ms
2025-10-21 19:46:15,249 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:46:15,252 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:46:15,252 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:46:15,257 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:46:15,257 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:46:15,258 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.9ms
2025-10-21 19:46:15,259 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:46:15,262 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:46:15,263 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:46:15,263 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:46:15,264 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.5ms
2025-10-21 19:46:30,982 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:46:30,991 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:46:30,999 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 17.5ms
2025-10-21 19:46:31,000 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.5ms
2025-10-21 19:46:31,008 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:46:31,010 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:46:31,012 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.5ms
2025-10-21 19:46:31,040 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:46:31,043 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:46:31,043 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:46:31,044 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:46:31,044 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:46:31,045 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:46:31,045 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:46:31,048 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:46:31,048 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:46:31,052 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:46:31,052 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:46:31,055 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:46:31,056 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:46:31,056 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:46:31,057 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 16.7ms
2025-10-21 19:46:31,057 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 12.0ms
2025-10-21 19:46:31,057 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 11.9ms
2025-10-21 19:46:31,059 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:46:31,062 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:46:31,062 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:46:31,063 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:46:31,064 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:46:31,065 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:46:31,065 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.7ms
2025-10-21 19:46:31,068 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:46:31,068 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:46:31,073 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:46:31,073 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:46:31,074 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:46:31,077 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:46:31,078 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:46:31,078 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:46:31,079 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 14.1ms
2025-10-21 19:46:31,079 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.2ms
2025-10-21 19:53:25,454 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:53:25,455 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:53:25,513 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 19:53:25,515 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 19:53:25,515 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 60.6ms
2025-10-21 19:53:25,515 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 60.3ms
2025-10-21 19:53:25,520 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:53:25,522 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:53:25,533 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 12.6ms
2025-10-21 19:53:25,560 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:53:25,566 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:53:25,566 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:53:25,599 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:53:25,599 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:53:25,600 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:53:25,601 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:53:25,602 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:53:25,608 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:53:25,608 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:53:25,609 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 49.1ms
2025-10-21 19:53:25,609 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.0ms
2025-10-21 19:53:25,612 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:53:25,614 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:53:25,616 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:53:25,616 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:53:25,617 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.2ms
2025-10-21 19:53:25,617 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:53:25,619 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:53:25,619 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:53:25,620 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:53:25,620 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:53:25,621 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.6ms
2025-10-21 19:53:25,622 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:53:25,624 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:53:25,624 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:53:25,628 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:53:25,629 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:53:25,629 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:53:25,630 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.6ms
2025-10-21 19:53:25,631 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:53:25,632 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:53:25,633 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:53:25,634 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.1ms
2025-10-21 19:54:12,280 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-21 19:54:12,280 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.4ms
2025-10-21 19:54:12,282 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-21 19:54:12,282 - app.api.v1.endpoints.auth - INFO - Usuario cerró sesión exitosamente
2025-10-21 19:54:12,282 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 0.7ms
2025-10-21 19:54:19,221 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:54:19,222 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:54:19,222 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.6ms
2025-10-21 19:54:19,223 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 0.9ms
2025-10-21 19:54:21,134 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:54:21,135 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:54:21,136 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.6ms
2025-10-21 19:54:21,136 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.0ms
2025-10-21 19:54:32,056 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:54:32,057 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:54:32,057 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.0ms
2025-10-21 19:54:32,057 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 0.6ms
2025-10-21 19:54:41,971 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-21 19:54:41,972 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.4ms
2025-10-21 19:54:41,973 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 19:54:42,211 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-21 19:54:42,212 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 238.7ms
2025-10-21 19:54:42,239 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:54:42,244 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:54:42,244 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:54:42,274 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:54:42,274 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:54:42,275 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 36.1ms
2025-10-21 19:54:42,277 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:54:42,278 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:54:42,278 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:54:42,289 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:54:42,290 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:54:42,290 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 13.5ms
2025-10-21 19:54:42,292 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:54:42,293 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:54:42,295 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:54:42,295 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:54:42,295 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.5ms
2025-10-21 19:54:42,297 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:54:42,298 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:54:42,298 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:54:42,299 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:54:42,299 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:54:42,300 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 2.8ms
2025-10-21 19:54:42,301 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:54:42,304 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:54:42,304 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:54:42,308 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:54:42,308 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:54:42,308 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.6ms
2025-10-21 19:54:42,310 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:54:42,311 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:54:42,312 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:54:42,312 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:54:42,312 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 2.8ms
2025-10-21 19:59:00,895 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 19:59:00,895 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 19:59:00,896 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.8ms
2025-10-21 19:59:00,896 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-21 19:59:01,211 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:59:01,211 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 19:59:01,224 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 19:59:01,226 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 19:59:01,227 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 16.0ms
2025-10-21 19:59:01,227 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.9ms
2025-10-21 19:59:01,231 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 19:59:01,232 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.4ms
2025-10-21 19:59:01,234 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 19:59:01,236 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 19:59:01,243 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.0ms
2025-10-21 19:59:01,265 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 19:59:01,265 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.8ms
2025-10-21 19:59:01,266 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 19:59:01,266 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 19:59:01,267 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.7ms
2025-10-21 19:59:01,268 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.6ms
2025-10-21 19:59:01,270 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:59:01,275 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:59:01,275 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:59:01,305 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:59:01,305 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:59:01,306 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 19:59:01,306 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:59:01,307 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 36.5ms
2025-10-21 19:59:01,308 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:59:01,308 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:59:01,322 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:59:01,322 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:59:01,322 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 19:59:01,323 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 17.2ms
2025-10-21 19:59:01,323 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 19:59:01,324 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 17.7ms
2025-10-21 19:59:01,325 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 2.2ms
2025-10-21 19:59:01,325 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.8ms
2025-10-21 19:59:01,327 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:59:01,329 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:59:01,330 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:59:01,331 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:59:01,331 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 19:59:01,332 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.4ms
2025-10-21 19:59:01,334 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 19:59:01,334 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 19:59:01,336 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 19:59:01,336 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 19:59:01,337 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.2ms
2025-10-21 19:59:01,338 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 19:59:01,340 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 19:59:01,340 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 19:59:01,343 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 19:59:01,344 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 19:59:01,344 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 19:59:01,344 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.4ms
2025-10-21 19:59:01,346 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 19:59:01,347 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 19:59:01,347 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 19:59:01,348 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-21 20:08:12,450 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:08:12,469 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:08:12,469 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:08:12,471 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:08:12,471 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 20.9ms
2025-10-21 20:08:12,471 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-21 20:08:12,476 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:08:12,478 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:08:12,486 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.4ms
2025-10-21 20:08:12,510 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:08:12,514 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:08:12,514 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:08:12,545 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:08:12,545 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:08:12,545 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:08:12,547 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:08:12,547 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:08:12,563 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:08:12,563 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:08:12,563 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 53.8ms
2025-10-21 20:08:12,564 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 18.2ms
2025-10-21 20:08:12,565 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:08:12,567 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:08:12,569 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:08:12,569 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:08:12,569 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.1ms
2025-10-21 20:08:12,570 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:08:12,571 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:08:12,571 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:08:12,572 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:08:12,572 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:08:12,573 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.7ms
2025-10-21 20:08:12,575 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:08:12,576 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:08:12,577 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:08:12,580 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:08:12,580 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:08:12,581 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.0ms
2025-10-21 20:08:12,581 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:08:12,582 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:08:12,583 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:08:12,583 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:08:12,584 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.4ms
2025-10-21 20:10:31,401 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 20:10:31,402 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 20:10:31,402 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-21 20:10:31,402 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.6ms
2025-10-21 20:10:31,717 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:10:31,747 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:10:31,747 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:10:31,748 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:10:31,748 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 31.1ms
2025-10-21 20:10:31,749 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.7ms
2025-10-21 20:10:31,754 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 20:10:31,754 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.4ms
2025-10-21 20:10:31,756 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:10:31,759 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:10:31,766 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.9ms
2025-10-21 20:10:31,791 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 20:10:31,792 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.7ms
2025-10-21 20:10:31,792 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 20:10:31,792 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 20:10:31,793 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.8ms
2025-10-21 20:10:31,793 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.8ms
2025-10-21 20:10:31,794 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 20:10:31,795 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:10:31,795 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.0ms
2025-10-21 20:10:31,799 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:10:31,799 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:10:31,842 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:10:31,842 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:10:31,843 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 20:10:31,844 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 20:10:31,844 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 49.4ms
2025-10-21 20:10:31,844 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:10:31,845 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 2.0ms
2025-10-21 20:10:31,846 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:10:31,848 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:10:31,848 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:10:31,849 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 4.9ms
2025-10-21 20:10:31,849 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.0ms
2025-10-21 20:10:31,851 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:10:31,854 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:10:31,854 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:10:31,867 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:10:31,868 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:10:31,869 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 17.4ms
2025-10-21 20:10:31,869 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:10:31,873 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:10:31,873 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:10:31,874 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:10:31,874 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:10:31,875 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.4ms
2025-10-21 20:10:31,876 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:10:31,878 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:10:31,879 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:10:31,879 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:10:31,880 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-21 20:10:31,880 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:10:31,882 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:10:31,883 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:10:31,887 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:10:31,887 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:10:31,888 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.7ms
2025-10-21 20:10:51,867 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:10:51,868 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:10:51,868 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:10:51,869 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 1.6ms
2025-10-21 20:10:51,869 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:10:51,869 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 1.3ms
2025-10-21 20:10:51,869 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 1.2ms
2025-10-21 20:10:51,871 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:10:51,872 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.2ms
2025-10-21 20:10:51,875 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:10:51,877 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:10:51,878 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:10:51,879 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:10:51,879 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:10:51,879 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:10:51,880 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:10:51,881 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:10:51,881 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:10:51,884 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:10:51,884 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:10:51,885 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:10:51,886 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:10:51,886 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:10:51,886 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 11.6ms
2025-10-21 20:10:51,887 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.2ms
2025-10-21 20:10:51,887 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 7.2ms
2025-10-21 20:10:51,887 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:10:51,889 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:10:51,892 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 4.7ms
2025-10-21 20:23:56,431 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 20:23:56,431 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 20:23:56,431 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.7ms
2025-10-21 20:23:56,431 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.4ms
2025-10-21 20:23:56,743 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:23:56,767 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:23:56,768 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:23:56,769 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:23:56,769 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 25.9ms
2025-10-21 20:23:56,769 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.4ms
2025-10-21 20:23:56,773 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 20:23:56,773 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.3ms
2025-10-21 20:23:56,774 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:23:56,776 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:23:56,782 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 7.2ms
2025-10-21 20:23:56,803 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 20:23:56,804 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 20:23:56,804 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.0ms
2025-10-21 20:23:56,804 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 20:23:56,805 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.0ms
2025-10-21 20:23:56,805 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.7ms
2025-10-21 20:23:56,806 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:23:56,806 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 20:23:56,810 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:23:56,810 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:23:56,840 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:23:56,841 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:23:56,841 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 20:23:56,842 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 35.3ms
2025-10-21 20:23:56,842 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 35.2ms
2025-10-21 20:23:56,842 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:23:56,842 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 20:23:56,843 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:23:56,844 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:23:56,864 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:23:56,864 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:23:56,865 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 23.5ms
2025-10-21 20:23:56,865 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 23.2ms
2025-10-21 20:23:56,865 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 23.2ms
2025-10-21 20:23:56,867 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:23:56,869 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:23:56,870 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:23:56,870 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:23:56,871 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.0ms
2025-10-21 20:23:56,871 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:23:56,873 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:23:56,874 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:23:56,875 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:23:56,875 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:23:56,876 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.4ms
2025-10-21 20:23:56,877 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:23:56,879 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:23:56,879 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:23:56,882 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:23:56,882 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:23:56,883 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.6ms
2025-10-21 20:23:56,884 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:23:56,886 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:23:56,887 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:23:56,887 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:23:56,888 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.9ms
2025-10-21 20:24:10,857 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:24:10,858 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:24:10,858 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:24:10,858 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 1.6ms
2025-10-21 20:24:10,859 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:24:10,859 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 1.3ms
2025-10-21 20:24:10,860 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:24:10,861 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 2.4ms
2025-10-21 20:24:10,861 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-21 20:24:10,864 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:24:10,866 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:24:10,867 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:24:10,868 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:24:10,868 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:24:10,869 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:24:10,871 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:24:10,871 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:24:10,874 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:24:10,874 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:24:10,874 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:24:10,875 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 10.9ms
2025-10-21 20:24:10,876 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:24:10,877 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:24:10,877 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:24:10,877 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.6ms
2025-10-21 20:24:10,877 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:24:10,878 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.5ms
2025-10-21 20:24:10,879 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:24:10,881 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.7ms
2025-10-21 20:24:32,853 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:24:32,857 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:24:32,858 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:24:32,859 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:24:32,859 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.2ms
2025-10-21 20:24:32,859 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.9ms
2025-10-21 20:24:32,864 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:24:32,868 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:24:32,875 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 10.3ms
2025-10-21 20:24:32,895 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:24:32,901 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:24:32,902 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:24:32,947 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:24:32,947 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:24:32,948 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:24:32,960 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:24:32,960 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:24:32,976 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:24:32,976 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:24:32,977 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 81.7ms
2025-10-21 20:24:32,977 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 29.4ms
2025-10-21 20:24:32,979 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:24:32,988 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:24:32,990 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:24:32,990 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:24:32,991 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 11.3ms
2025-10-21 20:24:32,991 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:24:32,993 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:24:32,993 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:24:33,025 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:24:33,025 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:24:33,026 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 34.9ms
2025-10-21 20:24:33,027 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:24:33,029 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:24:33,029 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:24:33,032 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:24:33,032 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:24:33,033 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 5.8ms
2025-10-21 20:24:33,033 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:24:33,035 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:24:33,035 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:24:33,036 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:24:33,036 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.4ms
2025-10-21 20:27:21,706 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:27:21,719 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:27:21,719 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:27:21,720 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:27:21,720 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.2ms
2025-10-21 20:27:21,721 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.6ms
2025-10-21 20:27:21,726 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:27:21,728 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:27:21,733 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 7.3ms
2025-10-21 20:27:21,756 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:27:21,760 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:27:21,760 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:27:21,792 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:27:21,792 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:27:21,793 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:27:21,795 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:27:21,795 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:27:21,816 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:27:21,817 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:27:21,817 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 61.8ms
2025-10-21 20:27:21,818 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 25.2ms
2025-10-21 20:27:21,820 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:27:21,823 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:27:21,825 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:27:21,825 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:27:21,826 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.2ms
2025-10-21 20:27:21,826 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:27:21,829 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:27:21,829 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:27:21,830 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:27:21,830 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:27:21,831 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.6ms
2025-10-21 20:27:21,833 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:27:21,835 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:27:21,835 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:27:21,838 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:27:21,839 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:27:21,839 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:27:21,839 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.4ms
2025-10-21 20:27:21,841 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:27:21,842 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:27:21,842 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:27:21,843 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-21 20:27:25,677 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-21 20:27:25,678 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.6ms
2025-10-21 20:27:25,680 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-21 20:27:25,680 - app.api.v1.endpoints.auth - INFO - Usuario cerró sesión exitosamente
2025-10-21 20:27:25,680 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 0.7ms
2025-10-21 20:27:36,655 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:27:36,656 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:27:36,656 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.0ms
2025-10-21 20:27:36,656 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 0.6ms
2025-10-21 20:27:49,885 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-21 20:27:49,886 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.5ms
2025-10-21 20:27:49,888 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-21 20:27:50,122 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-21 20:27:50,122 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 234.5ms
2025-10-21 20:27:50,162 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:27:50,169 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:27:50,169 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:27:50,216 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:27:50,217 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:27:50,217 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:27:50,223 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:27:50,223 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:27:50,234 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:27:50,234 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:27:50,235 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 73.2ms
2025-10-21 20:27:50,235 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 18.3ms
2025-10-21 20:27:50,238 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:27:50,246 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:27:50,248 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:27:50,248 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:27:50,250 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 11.5ms
2025-10-21 20:27:50,250 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:27:50,257 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:27:50,257 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:27:50,293 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:27:50,293 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:27:50,294 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 44.1ms
2025-10-21 20:27:50,296 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:27:50,302 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:27:50,302 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:27:50,317 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:27:50,317 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:27:50,318 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:27:50,318 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 22.3ms
2025-10-21 20:27:50,325 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:27:50,327 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:27:50,328 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:27:50,328 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.9ms
2025-10-21 20:28:08,671 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-21 20:28:08,671 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-21 20:28:08,672 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 1.0ms
2025-10-21 20:28:08,672 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.8ms
2025-10-21 20:28:08,674 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:28:08,684 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:28:08,684 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:28:08,692 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:28:08,693 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 18.8ms
2025-10-21 20:28:08,695 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:28:08,697 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:28:08,697 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:28:08,701 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:28:08,701 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.1ms
2025-10-21 20:28:24,501 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-21 20:28:24,502 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 0.5ms
2025-10-21 20:28:24,504 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-21 20:28:24,504 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:28:24,508 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:28:24,508 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:28:24,527 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:28:24,527 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:28:24,528 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 24.1ms
2025-10-21 20:28:24,528 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 23.8ms
2025-10-21 20:28:24,530 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:28:24,533 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:28:24,533 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:28:24,537 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:28:24,537 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:28:24,538 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.8ms
2025-10-21 20:34:22,594 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-10-21 20:34:22,595 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 0.5ms
2025-10-21 20:34:22,597 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-10-21 20:34:22,597 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 0.3ms
2025-10-21 20:34:22,909 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:34:22,927 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:34:22,927 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:34:22,930 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:34:22,931 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:34:22,931 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 21.6ms
2025-10-21 20:34:22,933 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:34:22,936 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:34:22,936 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:34:22,937 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:34:22,937 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:34:22,937 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.2ms
2025-10-21 20:34:26,760 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:34:26,771 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:34:26,772 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:34:26,780 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:34:26,780 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 20.1ms
2025-10-21 20:34:26,783 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:34:26,786 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:34:26,786 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:34:26,792 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:34:26,792 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 9.6ms
2025-10-21 20:36:41,602 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:36:41,629 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:36:41,629 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:36:41,637 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:36:41,637 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:36:41,638 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 35.9ms
2025-10-21 20:36:41,640 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:36:41,643 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:36:41,643 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:36:41,646 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:36:41,647 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:36:41,647 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.5ms
2025-10-21 20:36:42,957 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:36:42,961 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:36:42,961 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:36:42,969 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:36:42,969 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 12.0ms
2025-10-21 20:36:42,971 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:36:42,974 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:36:42,974 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:36:42,978 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:36:42,979 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.6ms
2025-10-21 20:36:46,462 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 20:36:46,464 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 20:36:46,464 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-21 20:36:46,464 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-21 20:36:46,465 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 2.3ms
2025-10-21 20:36:46,465 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.0ms
2025-10-21 20:36:46,465 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.9ms
2025-10-21 20:36:46,465 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.9ms
2025-10-21 20:36:46,468 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:36:46,470 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:36:46,470 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:36:46,478 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:36:46,478 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:36:46,479 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:36:46,481 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:36:46,482 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:36:46,482 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:36:46,483 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 14.4ms
2025-10-21 20:36:46,483 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-21 20:36:46,485 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:36:46,487 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:36:46,487 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:36:46,491 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:36:46,492 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:36:46,492 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:36:46,492 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.5ms
2025-10-21 20:36:46,494 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:36:46,495 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:36:46,495 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:36:46,495 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.3ms
2025-10-21 20:37:05,953 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 20:37:05,953 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-21 20:37:05,955 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 20:37:05,955 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.3ms
2025-10-21 20:37:06,264 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:37:06,267 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:37:06,268 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:37:06,269 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:37:06,269 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.4ms
2025-10-21 20:37:06,269 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.8ms
2025-10-21 20:37:06,274 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-21 20:37:06,275 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.6ms
2025-10-21 20:37:06,277 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:37:06,279 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:37:06,282 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 5.3ms
2025-10-21 20:37:06,312 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 20:37:06,313 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.0ms
2025-10-21 20:37:06,313 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-21 20:37:06,314 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:37:06,316 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:06,317 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:37:06,320 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:37:06,320 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:37:06,320 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:37:06,321 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 7.7ms
2025-10-21 20:37:06,322 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:37:06,323 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:37:06,323 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:37:06,323 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.8ms
2025-10-21 20:37:06,324 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-21 20:37:06,326 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:37:06,328 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:37:06,329 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:37:06,370 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:37:06,370 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:37:06,371 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:37:06,373 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:06,373 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:37:06,376 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:37:06,376 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:37:06,377 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 50.4ms
2025-10-21 20:37:06,377 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.3ms
2025-10-21 20:37:06,379 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:37:06,381 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:37:06,383 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:37:06,383 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:37:06,384 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:37:06,384 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.3ms
2025-10-21 20:37:06,386 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:37:06,386 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:37:06,387 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:37:06,388 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:37:06,388 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.4ms
2025-10-21 20:37:15,353 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:37:15,356 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:15,356 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:37:15,359 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:37:15,360 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.5ms
2025-10-21 20:37:15,362 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:37:15,365 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:15,365 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:37:15,369 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:37:15,369 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.1ms
2025-10-21 20:37:17,397 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:37:17,400 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:37:17,400 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:37:17,404 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:37:17,404 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:37:17,405 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.3ms
2025-10-21 20:37:17,406 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:37:17,409 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:37:17,410 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:37:17,413 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:37:17,413 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:37:17,414 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.4ms
2025-10-21 20:37:23,641 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:37:23,644 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:37:23,644 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:37:23,646 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:37:23,646 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:37:23,647 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 5.4ms
2025-10-21 20:37:23,649 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:37:23,652 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:37:23,652 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:37:23,653 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:37:23,653 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:37:23,654 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 5.1ms
2025-10-21 20:37:26,320 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:37:26,324 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:26,324 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:37:26,329 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:37:26,329 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:37:26,330 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.8ms
2025-10-21 20:37:26,331 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:37:26,332 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:37:26,333 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:37:26,334 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:37:26,335 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.3ms
2025-10-21 20:37:26,336 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:37:26,339 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:26,339 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:37:26,343 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:37:26,343 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:37:26,344 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.4ms
2025-10-21 20:37:26,344 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:37:26,346 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:37:26,347 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:37:26,347 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:37:26,348 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.6ms
2025-10-21 20:37:29,701 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:37:29,704 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:29,705 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:37:29,709 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:37:29,710 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 8.5ms
2025-10-21 20:37:29,712 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:37:29,715 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:29,715 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:37:29,718 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:37:29,719 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.7ms
2025-10-21 20:37:31,024 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:37:31,026 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:37:31,027 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:37:31,031 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:37:31,031 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:37:31,032 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.6ms
2025-10-21 20:37:31,034 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:37:31,036 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:37:31,037 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:37:31,040 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:37:31,040 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:37:31,041 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.1ms
2025-10-21 20:37:32,994 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:37:32,996 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:37:32,996 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:37:32,997 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:37:32,998 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:37:32,998 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.4ms
2025-10-21 20:37:33,001 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:37:33,003 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:37:33,004 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:37:33,005 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:37:33,005 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:37:33,006 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.9ms
2025-10-21 20:37:35,250 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/area/1/tree/
2025-10-21 20:37:35,250 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/area/1/tree/ 0.4ms
2025-10-21 20:37:35,252 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/area/1/tree/
2025-10-21 20:37:35,254 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/area/1/tree/ recibida.
2025-10-21 20:37:35,254 - app.services.menu_service - INFO - Obteniendo árbol de menú para area_id: 1
2025-10-21 20:37:35,256 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:37:35,256 - app.services.menu_service - INFO - Árbol de menú del área 1 construido con 1 items raíz.
2025-10-21 20:37:35,256 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/area/1/tree/ 4.5ms
2025-10-21 20:37:36,012 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:37:36,015 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:36,015 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:37:36,020 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:37:36,020 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:37:36,021 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:37:36,023 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:37:36,024 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:37:36,025 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:37:36,025 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 12.9ms
2025-10-21 20:37:36,025 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.8ms
2025-10-21 20:37:36,028 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:37:36,031 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:36,031 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:37:36,035 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:37:36,035 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:37:36,035 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:37:36,036 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.4ms
2025-10-21 20:37:36,037 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:37:36,038 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:37:36,038 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:37:36,039 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.5ms
2025-10-21 20:37:59,602 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:37:59,613 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:59,613 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:37:59,627 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:37:59,628 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 26.2ms
2025-10-21 20:37:59,630 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:37:59,633 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:37:59,633 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:37:59,637 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:37:59,637 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.2ms
2025-10-21 20:38:00,430 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:00,434 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:00,434 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:00,445 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:00,446 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:00,446 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 16.0ms
2025-10-21 20:38:00,448 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:00,451 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:00,451 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:00,455 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:00,455 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:00,456 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.6ms
2025-10-21 20:38:01,564 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:38:01,566 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:38:01,566 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:38:01,569 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:38:01,570 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:38:01,570 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 6.3ms
2025-10-21 20:38:01,572 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:38:01,575 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:38:01,575 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:38:01,576 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:38:01,577 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:38:01,577 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.9ms
2025-10-21 20:38:03,874 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:38:03,877 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:38:03,878 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:38:03,906 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:38:03,906 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:38:03,907 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-21 20:38:03,907 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 33.0ms
2025-10-21 20:38:03,908 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 1.0ms
2025-10-21 20:38:03,909 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:38:03,911 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:38:03,911 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:38:03,912 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:38:03,912 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:38:03,913 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.2ms
2025-10-21 20:38:03,913 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-21 20:38:03,914 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 0.8ms
2025-10-21 20:38:03,915 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-21 20:38:03,916 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-21 20:38:04,054 - app.services.autorizacion_service - INFO - Se obtuvieron 1675 registros pendientes de autorización
2025-10-21 20:38:04,103 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 187.2ms
2025-10-21 20:38:04,110 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-21 20:38:04,111 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-21 20:38:04,185 - app.services.autorizacion_service - INFO - Se obtuvieron 1675 registros pendientes de autorización
2025-10-21 20:38:04,233 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 122.4ms
2025-10-21 20:38:06,302 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:38:06,305 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:38:06,305 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:38:06,307 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:38:06,307 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:38:06,308 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.6ms
2025-10-21 20:38:06,309 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:06,309 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:06,312 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:06,314 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:06,314 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:06,316 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:06,316 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:06,324 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:06,324 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:06,325 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 16.1ms
2025-10-21 20:38:06,325 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 15.8ms
2025-10-21 20:38:06,327 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:38:06,329 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:38:06,329 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:38:06,330 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:38:06,330 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:38:06,331 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.8ms
2025-10-21 20:38:06,331 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:06,331 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:06,334 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:06,334 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:06,334 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:06,336 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:06,337 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:06,340 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:06,340 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:06,341 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 9.7ms
2025-10-21 20:38:06,341 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.7ms
2025-10-21 20:38:07,204 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:07,207 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:07,207 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:07,211 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:07,211 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.5ms
2025-10-21 20:38:07,213 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:07,216 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:07,216 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:07,219 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:07,220 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.4ms
2025-10-21 20:38:08,078 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:08,081 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:08,082 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:08,086 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:08,086 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:08,087 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 9.2ms
2025-10-21 20:38:08,089 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:08,092 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:08,092 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:08,096 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:08,096 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:08,097 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.5ms
2025-10-21 20:38:09,502 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:38:09,505 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:38:09,505 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:38:09,506 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:38:09,506 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:38:09,507 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.8ms
2025-10-21 20:38:09,509 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-21 20:38:09,511 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-21 20:38:09,512 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-21 20:38:09,513 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-21 20:38:09,513 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-21 20:38:09,513 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.3ms
2025-10-21 20:38:10,564 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:10,567 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:10,567 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:10,571 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:10,571 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:10,572 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.5ms
2025-10-21 20:38:10,574 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:10,577 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:10,577 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:10,581 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:10,582 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:10,582 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 8.3ms
2025-10-21 20:38:11,602 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-21 20:38:11,603 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.7ms
2025-10-21 20:38:11,605 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:11,608 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:11,609 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:11,612 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:11,613 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.6ms
2025-10-21 20:38:11,615 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:11,618 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:11,618 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:11,621 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:11,622 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.6ms
2025-10-21 20:38:23,378 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:38:23,381 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:38:23,381 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:38:23,382 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:38:23,383 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.8ms
2025-10-21 20:38:23,383 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.0ms
2025-10-21 20:38:23,392 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:38:23,395 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:38:23,398 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 6.4ms
2025-10-21 20:38:23,420 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:38:23,423 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:38:23,423 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:38:23,425 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:38:23,425 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:38:23,427 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.7ms
2025-10-21 20:38:23,427 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:23,430 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:23,430 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:23,432 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:23,433 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.1ms
2025-10-21 20:38:23,435 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:38:23,437 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:38:23,437 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:38:23,439 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:38:23,439 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:38:23,440 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:23,441 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.7ms
2025-10-21 20:38:23,444 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:23,444 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:23,448 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:23,449 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 8.7ms
2025-10-21 20:38:26,267 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:26,270 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:26,270 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:26,276 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:26,276 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:26,277 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.0ms
2025-10-21 20:38:26,277 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:26,281 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:26,282 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:26,282 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:26,283 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.1ms
2025-10-21 20:38:26,284 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:26,287 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:26,287 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:26,292 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:26,292 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:26,293 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.2ms
2025-10-21 20:38:26,294 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:26,296 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:26,297 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:26,298 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:26,298 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.7ms
2025-10-21 20:38:28,133 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:28,136 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:28,136 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:28,140 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:28,140 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.9ms
2025-10-21 20:38:28,143 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:28,145 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:28,146 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:28,149 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:28,150 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.2ms
2025-10-21 20:38:29,562 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:29,565 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:29,566 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:29,570 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:29,570 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:29,571 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.6ms
2025-10-21 20:38:29,572 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:29,574 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:29,576 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:29,576 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:29,577 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.7ms
2025-10-21 20:38:29,577 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:29,580 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:29,581 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:29,584 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:29,584 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:29,585 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.9ms
2025-10-21 20:38:29,586 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:29,588 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:29,589 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:29,589 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:29,590 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.0ms
2025-10-21 20:38:30,682 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:30,685 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:30,685 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:30,688 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:30,689 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.9ms
2025-10-21 20:38:30,692 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:30,694 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:30,694 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:30,698 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:30,699 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.3ms
2025-10-21 20:38:31,652 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:31,654 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:31,655 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:31,659 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:31,659 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:31,660 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.8ms
2025-10-21 20:38:31,661 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:31,664 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:31,665 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:31,665 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:31,666 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.5ms
2025-10-21 20:38:31,667 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:38:31,670 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:31,670 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:38:31,674 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:38:31,674 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:38:31,675 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.0ms
2025-10-21 20:38:31,676 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:38:31,679 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:38:31,680 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:38:31,680 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:38:31,681 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.9ms
2025-10-21 20:38:32,833 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:32,836 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:32,836 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:32,839 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:32,840 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.9ms
2025-10-21 20:38:32,842 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:38:32,844 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:38:32,845 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:38:32,848 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:38:32,849 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.9ms
2025-10-21 20:38:34,199 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-21 20:38:34,200 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-21 20:38:34,200 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 0.9ms
2025-10-21 20:38:34,200 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 0.6ms
2025-10-21 20:38:34,202 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:34,204 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:34,204 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:34,206 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:34,206 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:34,207 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 4.7ms
2025-10-21 20:38:34,209 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:38:34,210 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:38:34,211 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:38:34,213 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:38:34,213 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:38:34,214 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 5.1ms
2025-10-21 20:40:14,758 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:14,771 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:14,771 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:14,773 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:14,773 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.9ms
2025-10-21 20:40:14,773 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.2ms
2025-10-21 20:40:14,778 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:40:14,780 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:40:14,784 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 6.7ms
2025-10-21 20:40:14,817 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:14,821 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:14,822 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:14,849 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:14,849 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:14,849 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:40:14,851 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:14,851 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:40:14,859 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:40:14,860 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:40:14,860 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 42.8ms
2025-10-21 20:40:14,860 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.9ms
2025-10-21 20:40:14,862 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:40:14,864 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:40:14,866 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:40:14,866 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:40:14,867 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.8ms
2025-10-21 20:40:14,868 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:14,870 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:14,870 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:14,871 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:14,871 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:14,872 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.4ms
2025-10-21 20:40:14,873 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:40:14,876 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:14,876 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:40:14,879 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:40:14,879 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:40:14,880 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.7ms
2025-10-21 20:40:14,881 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:40:14,883 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:40:14,884 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:40:14,884 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:40:14,885 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-21 20:40:17,116 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:17,117 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:17,118 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:17,119 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:17,120 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.8ms
2025-10-21 20:40:17,120 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.1ms
2025-10-21 20:40:17,127 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:40:17,129 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:40:17,130 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.2ms
2025-10-21 20:40:17,167 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:17,169 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:17,169 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:17,170 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:17,170 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:17,171 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:40:17,171 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.0ms
2025-10-21 20:40:17,173 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:17,173 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:40:17,178 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:40:17,179 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 8.2ms
2025-10-21 20:40:17,181 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:17,182 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:17,183 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:17,184 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:17,184 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:17,185 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.2ms
2025-10-21 20:40:17,185 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:40:17,188 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:17,188 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:40:17,190 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:40:17,192 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.6ms
2025-10-21 20:40:26,101 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:26,102 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:26,103 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:26,104 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:26,105 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.2ms
2025-10-21 20:40:26,105 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.5ms
2025-10-21 20:40:26,113 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:40:26,114 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:40:26,116 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.2ms
2025-10-21 20:40:26,154 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:26,157 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:26,157 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:26,158 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:26,158 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:26,159 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-21 20:40:26,159 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:40:26,161 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:26,161 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:40:26,164 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:40:26,165 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.6ms
2025-10-21 20:40:26,166 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:26,168 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:26,168 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:26,170 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:26,170 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:26,171 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.2ms
2025-10-21 20:40:26,171 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:40:26,173 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:26,173 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:40:26,176 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:40:26,177 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.8ms
2025-10-21 20:40:28,234 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:28,236 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:28,236 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 20:40:28,238 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 20:40:28,238 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.8ms
2025-10-21 20:40:28,238 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.0ms
2025-10-21 20:40:28,247 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-21 20:40:28,249 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-21 20:40:28,250 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.9ms
2025-10-21 20:40:28,295 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:28,297 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:28,297 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:28,298 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:28,298 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:28,298 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:40:28,300 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:40:28,300 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:40:28,305 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:40:28,305 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:40:28,305 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 10.9ms
2025-10-21 20:40:28,306 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.3ms
2025-10-21 20:40:28,308 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-21 20:40:28,310 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-21 20:40:28,310 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-21 20:40:28,312 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-21 20:40:28,312 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-21 20:40:28,313 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.0ms
2025-10-21 20:40:28,313 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:40:28,315 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:40:28,315 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:40:28,319 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:40:28,319 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:40:28,320 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.1ms
2025-10-21 20:40:43,504 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:40:43,507 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:43,507 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:40:43,510 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:40:43,511 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.4ms
2025-10-21 20:40:43,513 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:40:43,515 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:43,515 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:40:43,518 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:40:43,519 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.5ms
2025-10-21 20:40:44,048 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:40:44,051 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:44,051 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:40:44,056 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:40:44,056 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:40:44,057 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.5ms
2025-10-21 20:40:44,059 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:40:44,061 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:40:44,062 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:40:44,062 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:40:44,063 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.6ms
2025-10-21 20:40:44,065 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:40:44,067 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:40:44,067 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:40:44,071 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:40:44,071 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:40:44,071 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.5ms
2025-10-21 20:40:44,073 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:40:44,076 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:40:44,076 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:40:44,077 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:40:44,077 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-21 20:41:37,002 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:41:37,025 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:41:37,026 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:41:37,051 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:41:37,052 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 49.4ms
2025-10-21 20:41:37,054 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:41:37,056 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:41:37,056 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:41:37,059 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:41:37,060 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.6ms
2025-10-21 20:41:40,177 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:41:40,180 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:41:40,181 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:41:40,189 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:41:40,190 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:41:40,190 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 12.7ms
2025-10-21 20:41:40,192 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-21 20:41:40,195 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-21 20:41:40,196 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-21 20:41:40,198 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-21 20:41:40,199 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-21 20:41:40,199 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 6.6ms
2025-10-21 20:43:12,545 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:43:12,561 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:43:12,561 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:43:12,567 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:43:12,568 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 22.7ms
2025-10-21 20:43:12,569 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 20:43:12,571 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:43:12,571 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 20:43:12,573 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 20:43:12,574 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 4.3ms
2025-10-21 20:43:16,545 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:43:16,553 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:43:16,553 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:43:16,562 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:43:16,563 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:43:16,563 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 18.6ms
2025-10-21 20:43:16,564 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:43:16,566 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:43:16,568 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:43:16,569 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:43:16,570 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.0ms
2025-10-21 20:43:16,571 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-21 20:43:16,573 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 20:43:16,573 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-21 20:43:16,577 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-21 20:43:16,577 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 1, Página: 1
2025-10-21 20:43:16,578 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.8ms
2025-10-21 20:43:16,578 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-21 20:43:16,580 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-21 20:43:16,581 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-21 20:43:16,581 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-21 20:43:16,581 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.2ms
2025-10-21 21:10:48,384 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-21 21:10:48,385 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 1.0ms
2025-10-21 21:10:48,386 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-21 21:10:48,387 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.6ms
2025-10-21 21:10:48,701 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 21:10:48,702 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-10-21 21:10:48,702 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 1.3ms
2025-10-21 21:10:48,704 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 21:10:48,704 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-10-21 21:10:48,705 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 0.9ms
2025-10-21 21:10:48,706 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-21 21:10:48,706 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.6ms
2025-10-21 21:10:48,708 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-21 21:10:48,732 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-21 21:10:48,733 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 25.2ms
2025-10-21 21:10:48,737 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 21:10:48,746 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 21:10:48,746 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 21:10:48,760 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 21:10:48,761 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 23.9ms
2025-10-21 21:10:48,763 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-21 21:10:48,764 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-21 21:10:48,765 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-21 21:10:48,768 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-21 21:10:48,768 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.6ms
2025-10-26 01:21:03,059 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 01:21:03,061 - app.main - INFO - 127.0.0.1 <- GET /docs 1.6ms
2025-10-26 01:21:03,208 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 01:21:03,267 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 58.8ms
2025-10-26 01:21:06,128 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 01:21:06,128 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 01:21:06,128 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-26 01:21:06,129 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 01:21:06,443 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:06,447 - app.core.auth - ERROR - Error decodificando refresh token: Signature verification failed.
2025-10-26 01:21:06,447 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:06,447 - app.core.auth - ERROR - Error decodificando refresh token: Signature verification failed.
2025-10-26 01:21:06,448 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.0ms
2025-10-26 01:21:06,448 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.0ms
2025-10-26 01:21:06,450 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:06,450 - app.core.auth - ERROR - Error decodificando refresh token: Signature verification failed.
2025-10-26 01:21:06,451 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.6ms
2025-10-26 01:21:06,452 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:06,452 - app.core.auth - ERROR - Error decodificando refresh token: Signature verification failed.
2025-10-26 01:21:06,453 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.6ms
2025-10-26 01:21:14,598 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 01:21:14,599 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.5ms
2025-10-26 01:21:14,603 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 01:21:14,983 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 01:21:14,989 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 386.2ms
2025-10-26 01:21:15,008 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 01:21:15,008 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.6ms
2025-10-26 01:21:15,011 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 01:21:15,012 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.7ms
2025-10-26 01:21:15,012 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:15,019 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:15,019 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:15,068 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:15,069 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:15,070 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 57.8ms
2025-10-26 01:21:15,071 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 01:21:15,072 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.7ms
2025-10-26 01:21:15,072 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:15,074 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:15,075 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:15,087 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:15,088 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:15,089 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 16.6ms
2025-10-26 01:21:15,090 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 01:21:15,091 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.4ms
2025-10-26 01:21:15,092 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:15,094 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:15,096 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:15,096 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:15,097 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.5ms
2025-10-26 01:21:15,098 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:15,098 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 01:21:15,100 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:15,100 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:15,102 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:15,102 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:15,103 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.7ms
2025-10-26 01:21:15,104 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 5.7ms
2025-10-26 01:21:15,107 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 01:21:15,107 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.5ms
2025-10-26 01:21:15,109 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:15,112 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:15,112 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:15,118 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:15,118 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:15,119 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.4ms
2025-10-26 01:21:15,119 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:15,124 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:15,126 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:15,127 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:15,128 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 8.9ms
2025-10-26 01:21:20,594 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:20,612 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 01:21:20,612 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 18.3ms
2025-10-26 01:21:20,614 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:20,616 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 01:21:20,617 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.7ms
2025-10-26 01:21:20,621 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 01:21:20,622 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.7ms
2025-10-26 01:21:20,624 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 01:21:20,627 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 01:21:20,631 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 6.9ms
2025-10-26 01:21:30,230 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 01:21:30,454 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 01:21:30,455 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 224.1ms
2025-10-26 01:21:30,470 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:30,481 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:30,481 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:30,533 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:30,533 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:30,533 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 63.7ms
2025-10-26 01:21:30,536 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:30,538 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:30,538 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:30,562 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:30,563 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:30,563 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 27.6ms
2025-10-26 01:21:30,565 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:30,567 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:30,569 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:30,570 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:30,570 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.8ms
2025-10-26 01:21:30,572 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:30,574 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:30,574 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:30,576 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:30,576 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:30,576 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.3ms
2025-10-26 01:21:30,578 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:30,580 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:30,580 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:30,584 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:30,584 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:30,585 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.0ms
2025-10-26 01:21:30,587 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:30,589 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:30,590 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:30,590 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:30,591 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-26 01:21:32,306 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:32,309 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 01:21:32,310 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:32,310 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.1ms
2025-10-26 01:21:32,312 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 01:21:32,313 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.3ms
2025-10-26 01:21:32,320 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 01:21:32,322 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 01:21:32,324 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 4.3ms
2025-10-26 01:21:32,342 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:32,344 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:32,345 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:32,346 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:32,346 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:32,347 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:32,347 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:32,347 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.7ms
2025-10-26 01:21:32,351 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:32,352 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:32,352 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:32,355 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:32,355 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:32,358 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:32,359 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:32,360 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 12.7ms
2025-10-26 01:21:32,360 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 12.6ms
2025-10-26 01:21:32,362 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:32,365 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:32,366 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:32,367 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:32,368 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:32,368 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:32,368 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:32,371 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:32,371 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:32,375 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:32,375 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:32,377 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:32,378 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:32,378 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:32,379 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 16.8ms
2025-10-26 01:21:32,380 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.6ms
2025-10-26 01:21:32,380 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 11.4ms
2025-10-26 01:21:33,884 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:33,886 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 01:21:33,886 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 01:21:33,888 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 01:21:33,888 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.2ms
2025-10-26 01:21:33,888 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.2ms
2025-10-26 01:21:33,895 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 01:21:33,897 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 01:21:33,899 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.7ms
2025-10-26 01:21:33,914 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:33,916 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:33,916 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:33,917 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:33,918 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:33,918 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:33,918 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:33,920 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:33,921 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:33,921 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:33,923 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:33,924 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:33,927 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:33,927 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:33,928 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 13.6ms
2025-10-26 01:21:33,928 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 9.8ms
2025-10-26 01:21:33,928 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.7ms
2025-10-26 01:21:33,931 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:21:33,933 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:21:33,934 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:21:33,935 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:21:33,936 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:21:33,936 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:21:33,938 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:21:33,939 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:21:33,939 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:21:33,940 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:21:33,940 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 9.5ms
2025-10-26 01:21:33,942 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:21:33,943 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:21:33,946 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:21:33,946 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:21:33,947 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 11.0ms
2025-10-26 01:21:33,948 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.1ms
2025-10-26 01:21:36,409 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-26 01:21:36,409 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.6ms
2025-10-26 01:21:36,411 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-26 01:21:36,411 - app.api.v1.endpoints.auth - INFO - [LOGOUT-WEB] Cookie eliminada exitosamente
2025-10-26 01:21:36,411 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 0.6ms
2025-10-26 01:48:24,152 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 01:48:24,152 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.5ms
2025-10-26 01:48:24,460 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 01:48:24,855 - app.api.v1.endpoints.auth - ERROR - Error almacenando refresh token: name 'RefreshTokenService' is not defined
2025-10-26 01:48:24,856 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 01:48:24,860 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 400.1ms
2025-10-26 01:48:24,874 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 01:48:24,876 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.3ms
2025-10-26 01:48:24,876 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 01:48:24,877 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.3ms
2025-10-26 01:48:24,879 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 01:48:24,880 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.0ms
2025-10-26 01:48:24,880 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 01:48:24,881 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:48:24,886 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:48:24,886 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:48:24,920 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:48:24,921 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:48:24,921 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:48:24,923 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:48:24,923 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:48:24,948 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:48:24,948 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:48:24,948 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 68.1ms
2025-10-26 01:48:24,949 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 67.9ms
2025-10-26 01:48:24,949 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 27.9ms
2025-10-26 01:48:24,951 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 01:48:24,952 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.2ms
2025-10-26 01:48:24,952 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 01:48:24,952 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:48:24,952 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 01:48:24,954 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:48:24,956 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:48:24,956 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:48:24,958 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 01:48:24,958 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 01:48:24,959 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 01:48:24,959 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 01:48:24,960 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 7.6ms
2025-10-26 01:48:24,960 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 7.6ms
2025-10-26 01:48:24,960 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 7.7ms
2025-10-26 01:48:24,963 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 01:48:24,965 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 01:48:24,965 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 01:48:24,969 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 01:48:24,969 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 01:48:24,969 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 01:48:24,971 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 01:48:24,972 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 01:48:24,972 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 01:48:24,972 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.2ms
2025-10-26 01:48:24,972 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 2.9ms
2025-10-26 01:48:43,606 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 01:48:43,607 - app.main - INFO - 127.0.0.1 <- GET /docs 0.7ms
2025-10-26 01:48:43,749 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 01:48:43,828 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 78.9ms
2025-10-26 01:49:16,076 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-26 01:49:16,076 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.4ms
2025-10-26 01:49:16,078 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-26 01:49:16,078 - app.api.v1.endpoints.auth - INFO - [LOGOUT-WEB] Cookie eliminada exitosamente
2025-10-26 01:49:16,079 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 0.7ms
2025-10-26 02:00:09,992 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 02:00:09,993 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.8ms
2025-10-26 02:00:10,297 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:00:10,689 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:00:10,690 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 1
2025-10-26 02:00:10,690 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:00:10,695 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 397.3ms
2025-10-26 02:00:10,709 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 02:00:10,709 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 02:00:10,710 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.3ms
2025-10-26 02:00:10,710 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.8ms
2025-10-26 02:00:10,713 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 02:00:10,714 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 02:00:10,715 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:00:10,715 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:00:10,716 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 3.1ms
2025-10-26 02:00:10,721 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:00:10,721 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:00:10,743 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:00:10,744 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:00:10,746 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:00:10,746 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:00:10,784 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:00:10,785 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:00:10,785 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 71.1ms
2025-10-26 02:00:10,786 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 71.0ms
2025-10-26 02:00:10,786 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 70.9ms
2025-10-26 02:00:10,788 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 02:00:10,789 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 02:00:10,789 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.2ms
2025-10-26 02:00:10,790 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:00:10,790 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:00:10,792 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:00:10,794 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:00:10,794 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:00:10,797 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:00:10,797 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:00:10,798 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:00:10,798 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:00:10,799 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 10.1ms
2025-10-26 02:00:10,799 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 9.9ms
2025-10-26 02:00:10,800 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 9.8ms
2025-10-26 02:00:10,803 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:00:10,805 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:00:10,805 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:00:10,809 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:00:10,810 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:00:10,810 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:00:10,812 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:00:10,813 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:00:10,813 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:00:10,814 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.0ms
2025-10-26 02:00:10,814 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.0ms
2025-10-26 02:00:59,270 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 02:00:59,271 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 02:00:59,271 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-26 02:00:59,271 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 02:00:59,273 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:00:59,309 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:00:59,322 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:00:59,323 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:00:59,327 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:00:59,328 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 2
2025-10-26 02:00:59,328 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:00:59,329 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:00:59,329 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 55.6ms
2025-10-26 02:00:59,330 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:00:59,330 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:00:59,331 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.2ms
2025-10-26 02:01:01,814 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:01:01,816 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:01:01,818 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:01:01,819 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:01:01,821 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:01:01,821 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 3
2025-10-26 02:01:01,821 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:01:01,822 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:01:01,824 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:01:01,824 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:01:01,825 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.8ms
2025-10-26 02:01:01,825 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.4ms
2025-10-26 02:01:16,827 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:01:17,084 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:01:17,084 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 4
2025-10-26 02:01:17,084 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:01:17,085 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 258.4ms
2025-10-26 02:01:17,105 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:01:17,112 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:01:17,112 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:01:17,153 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:01:17,154 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:01:17,154 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:01:17,156 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:01:17,156 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:01:17,168 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:01:17,169 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:01:17,169 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 64.0ms
2025-10-26 02:01:17,170 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 15.6ms
2025-10-26 02:01:17,172 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:01:17,174 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:01:17,176 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:01:17,177 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:01:17,177 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:01:17,179 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:01:17,179 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:01:17,180 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:01:17,180 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:01:17,181 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 8.5ms
2025-10-26 02:01:17,181 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.8ms
2025-10-26 02:01:17,183 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:01:17,186 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:01:17,186 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:01:17,190 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:01:17,190 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:01:17,190 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:01:17,193 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:01:17,193 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:01:17,194 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:01:17,194 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.6ms
2025-10-26 02:01:17,194 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.9ms
2025-10-26 02:01:36,430 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 02:01:36,430 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 02:01:36,430 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.7ms
2025-10-26 02:01:36,430 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.5ms
2025-10-26 02:01:36,432 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:01:36,434 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:01:36,434 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:01:36,440 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:01:36,441 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 8.5ms
2025-10-26 02:01:36,443 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:01:36,445 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:01:36,446 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:01:36,449 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:01:36,449 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.5ms
2025-10-26 02:01:37,067 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 02:01:37,068 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 02:01:37,069 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 1.1ms
2025-10-26 02:01:37,069 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 0.6ms
2025-10-26 02:01:37,071 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 02:01:37,074 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 02:01:37,074 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 02:01:37,082 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 02:01:37,082 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 02:01:37,082 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 11.3ms
2025-10-26 02:01:37,085 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 02:01:37,087 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 02:01:37,087 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 02:01:37,090 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 02:01:37,090 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 02:01:37,090 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 5.7ms
2025-10-26 02:01:38,003 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-10-26 02:01:38,004 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 0.9ms
2025-10-26 02:01:38,004 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-10-26 02:01:38,006 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 1.6ms
2025-10-26 02:01:38,007 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 02:01:38,010 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 02:01:38,010 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 02:01:38,013 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 02:01:38,013 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 02:01:38,014 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 6.8ms
2025-10-26 02:01:38,016 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 02:01:38,019 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 02:01:38,019 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 02:01:38,020 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 02:01:38,020 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 02:01:38,021 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.7ms
2025-10-26 02:01:39,839 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:01:39,842 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:01:39,843 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:01:39,844 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:01:39,845 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:01:39,846 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.8ms
2025-10-26 02:01:39,846 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-26 02:01:39,847 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-26 02:01:39,848 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 1.6ms
2025-10-26 02:01:39,848 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 1.4ms
2025-10-26 02:01:39,850 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:01:39,853 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:01:39,854 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:01:39,855 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:01:39,856 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:01:39,857 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:01:39,857 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.8ms
2025-10-26 02:01:39,857 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:01:40,029 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:01:40,072 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 215.7ms
2025-10-26 02:01:40,074 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:01:40,075 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:01:40,143 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:01:40,187 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 112.7ms
2025-10-26 02:01:45,782 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:01:45,784 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:01:45,787 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:01:45,787 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:01:45,788 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:01:45,789 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 5
2025-10-26 02:01:45,789 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:01:45,789 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:01:45,791 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:01:45,792 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:01:45,792 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 9.7ms
2025-10-26 02:01:45,792 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 02:01:51,949 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:01:52,160 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:01:52,161 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 6
2025-10-26 02:01:52,161 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:01:52,162 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 212.4ms
2025-10-26 02:01:52,176 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:01:52,179 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:01:52,180 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:01:52,181 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:01:52,182 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:01:52,182 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.4ms
2025-10-26 02:01:52,185 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:01:52,187 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:01:52,188 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:01:52,192 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:01:52,193 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:01:52,193 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.7ms
2025-10-26 02:01:52,196 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:01:52,198 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:01:52,199 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:01:52,199 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:01:52,200 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.0ms
2025-10-26 02:01:52,201 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:01:52,204 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:01:52,204 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:01:52,205 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:01:52,205 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:01:52,206 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.3ms
2025-10-26 02:01:52,208 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:01:52,211 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:01:52,212 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:01:52,216 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:01:52,216 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:01:52,217 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:01:52,218 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:01:52,219 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:01:52,219 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:01:52,219 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.5ms
2025-10-26 02:01:52,220 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.2ms
2025-10-26 02:02:11,184 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:02:11,199 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:02:11,206 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:02:11,206 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:02:11,209 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:02:11,210 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 7
2025-10-26 02:02:11,210 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:02:11,211 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:02:11,212 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:02:11,212 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:02:11,213 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 28.2ms
2025-10-26 02:02:11,213 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.3ms
2025-10-26 02:02:45,951 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 02:02:45,951 - app.main - INFO - 127.0.0.1 <- GET /docs 0.6ms
2025-10-26 02:02:46,104 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 02:02:46,164 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 59.9ms
2025-10-26 02:11:13,802 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 02:11:13,802 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.4ms
2025-10-26 02:11:14,112 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:11:14,135 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:11:14,142 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:11:14,143 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:11:14,148 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:11:14,148 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 8
2025-10-26 02:11:14,149 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:11:14,149 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 37.2ms
2025-10-26 02:11:14,153 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/me/
2025-10-26 02:11:14,154 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/me/ 0.7ms
2025-10-26 02:11:14,156 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/me/
2025-10-26 02:11:14,200 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/me/ 44.0ms
2025-10-26 02:11:17,754 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:11:17,755 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:11:17,757 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:11:17,758 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:11:17,758 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:11:17,759 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 9
2025-10-26 02:11:17,759 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:11:17,759 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:11:17,762 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:11:17,762 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:11:17,762 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.6ms
2025-10-26 02:11:17,763 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.4ms
2025-10-26 02:11:23,581 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 02:11:23,581 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.7ms
2025-10-26 02:11:23,894 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:11:24,127 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:11:24,128 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 10
2025-10-26 02:11:24,128 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:11:24,129 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 234.6ms
2025-10-26 02:11:24,149 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 02:11:24,150 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.7ms
2025-10-26 02:11:24,153 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 02:11:24,154 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:11:24,156 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:11:24,156 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:11:24,194 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:11:24,194 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:11:24,194 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 41.4ms
2025-10-26 02:11:24,195 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 41.1ms
2025-10-26 02:11:24,196 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 02:11:24,197 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.5ms
2025-10-26 02:11:24,197 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:11:24,199 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:11:24,200 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:11:24,213 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:11:24,213 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:11:24,214 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 17.3ms
2025-10-26 02:11:24,216 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 02:11:24,216 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:11:24,219 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:11:24,220 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:11:24,221 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:11:24,221 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 5.3ms
2025-10-26 02:11:24,221 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.1ms
2025-10-26 02:11:24,223 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 02:11:24,224 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.5ms
2025-10-26 02:11:24,224 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:11:24,226 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:11:24,226 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:11:24,227 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:11:24,227 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:11:24,228 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.3ms
2025-10-26 02:11:24,229 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 02:11:24,230 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:11:24,232 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:11:24,232 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:11:24,236 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:11:24,236 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:11:24,237 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 7.5ms
2025-10-26 02:11:24,237 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.2ms
2025-10-26 02:11:24,239 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:11:24,241 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:11:24,242 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:11:24,242 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:11:24,243 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.4ms
2025-10-26 02:11:26,314 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:11:26,316 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:11:26,327 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:11:26,328 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:11:26,330 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:11:26,330 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 11
2025-10-26 02:11:26,330 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:11:26,331 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:11:26,332 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:11:26,332 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:11:26,333 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 19.1ms
2025-10-26 02:11:26,333 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.3ms
2025-10-26 02:11:42,816 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:11:42,817 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:11:42,819 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:11:42,820 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:11:42,821 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:11:42,821 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 12
2025-10-26 02:11:42,822 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:11:42,822 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.3ms
2025-10-26 02:11:42,826 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 02:11:42,827 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.6ms
2025-10-26 02:11:42,829 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:11:42,831 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:11:42,832 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.8ms
2025-10-26 02:18:31,812 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 02:18:31,813 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.4ms
2025-10-26 02:18:32,121 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:18:32,144 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:18:32,161 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:18:32,162 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:18:32,165 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:18:32,165 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 13
2025-10-26 02:18:32,166 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:18:32,166 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 44.6ms
2025-10-26 02:18:32,170 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:18:32,173 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:18:32,180 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.4ms
2025-10-26 02:18:50,495 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:18:50,496 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:18:50,498 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:18:50,498 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:18:50,498 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:18:50,499 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 14
2025-10-26 02:18:50,499 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:18:50,499 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.9ms
2025-10-26 02:18:50,502 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:18:50,503 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:18:50,504 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 1.9ms
2025-10-26 02:19:20,607 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:19:20,833 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:19:20,834 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 15
2025-10-26 02:19:20,834 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:19:20,834 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 227.3ms
2025-10-26 02:19:20,856 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:19:20,863 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:19:20,863 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:19:20,901 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:19:20,901 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:19:20,901 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:19:20,904 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:19:20,904 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:19:20,913 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:19:20,914 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:19:20,914 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 58.0ms
2025-10-26 02:19:20,914 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 13.0ms
2025-10-26 02:19:20,917 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:19:20,920 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:19:20,922 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:19:20,922 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:19:20,923 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.1ms
2025-10-26 02:19:20,923 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:19:20,925 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:19:20,925 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:19:20,926 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:19:20,927 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:19:20,927 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.3ms
2025-10-26 02:19:20,929 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:19:20,931 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:19:20,931 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:19:20,937 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:19:20,937 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:19:20,938 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.0ms
2025-10-26 02:19:20,938 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:19:20,941 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:19:20,942 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:19:20,942 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:19:20,943 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.9ms
2025-10-26 02:19:22,203 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:19:22,205 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:19:22,207 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:19:22,208 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:19:22,209 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:19:22,210 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 16
2025-10-26 02:19:22,210 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:19:22,211 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:19:22,212 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:19:22,213 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:19:22,213 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 9.7ms
2025-10-26 02:19:22,214 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 02:19:29,621 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:19:29,623 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:19:29,625 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:19:29,625 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:19:29,627 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:19:29,627 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 17
2025-10-26 02:19:29,628 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:19:29,628 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:19:29,630 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:19:29,631 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:19:29,631 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.6ms
2025-10-26 02:19:29,631 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.1ms
2025-10-26 02:19:35,684 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:19:35,914 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:19:35,914 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 18
2025-10-26 02:19:35,915 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:19:35,915 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 230.6ms
2025-10-26 02:19:35,935 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:19:35,943 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:19:35,943 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:19:35,985 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:19:35,985 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:19:35,986 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:19:35,990 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:19:35,990 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:19:35,999 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:19:35,999 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:19:36,000 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 64.9ms
2025-10-26 02:19:36,000 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 14.6ms
2025-10-26 02:19:36,002 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:19:36,005 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:19:36,007 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:19:36,007 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:19:36,007 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:19:36,007 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.1ms
2025-10-26 02:19:36,010 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:19:36,010 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:19:36,011 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:19:36,011 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:19:36,012 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.5ms
2025-10-26 02:19:36,013 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:19:36,016 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:19:36,017 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:19:36,021 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:19:36,021 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:19:36,022 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:19:36,022 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.6ms
2025-10-26 02:19:36,024 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:19:36,025 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:19:36,026 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:19:36,027 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.1ms
2025-10-26 02:19:38,902 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 02:19:38,902 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 02:19:38,903 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 0.9ms
2025-10-26 02:19:38,903 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 0.8ms
2025-10-26 02:19:38,905 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 02:19:38,911 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 02:19:38,912 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 02:19:38,918 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 02:19:38,918 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 02:19:38,919 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 13.8ms
2025-10-26 02:19:38,921 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 02:19:38,923 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 02:19:38,923 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 02:19:38,926 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 02:19:38,926 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 02:19:38,927 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 6.0ms
2025-10-26 02:19:39,202 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 02:19:39,203 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.8ms
2025-10-26 02:19:39,205 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:19:39,208 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:19:39,208 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:19:39,215 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:19:39,216 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 10.8ms
2025-10-26 02:19:39,218 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:19:39,222 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:19:39,222 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:19:39,225 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:19:39,226 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.3ms
2025-10-26 02:19:42,686 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:19:42,700 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:19:42,706 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:19:42,706 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:19:42,709 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:19:42,709 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 19
2025-10-26 02:19:42,709 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:19:42,710 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:19:42,711 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:19:42,711 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:19:42,711 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 25.3ms
2025-10-26 02:19:42,711 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.8ms
2025-10-26 02:21:02,872 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 02:21:02,873 - app.main - INFO - 127.0.0.1 <- GET /docs 0.6ms
2025-10-26 02:21:03,017 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 02:21:03,070 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 53.4ms
2025-10-26 02:21:05,419 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:21:05,419 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:21:05,496 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:21:05,507 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:21:05,507 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:21:05,509 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:21:05,510 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 20
2025-10-26 02:21:05,510 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:21:05,511 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:21:05,511 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:21:05,512 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 92.8ms
2025-10-26 02:21:05,512 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 92.5ms
2025-10-26 02:21:11,705 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:21:11,707 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:21:11,711 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:21:11,711 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:21:11,713 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:21:11,715 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 21
2025-10-26 02:21:11,715 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:21:11,716 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.6ms
2025-10-26 02:21:11,718 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:21:11,720 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:21:11,720 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:21:11,721 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-26 02:21:18,372 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:21:18,613 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:21:18,614 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 22
2025-10-26 02:21:18,614 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:21:18,619 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 247.5ms
2025-10-26 02:21:18,639 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:21:18,647 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:21:18,647 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:21:18,690 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:21:18,690 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:21:18,691 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 51.4ms
2025-10-26 02:21:18,693 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:21:18,695 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:21:18,696 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:21:18,704 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:21:18,704 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:21:18,704 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.7ms
2025-10-26 02:21:18,706 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:21:18,709 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:21:18,710 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:21:18,710 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:21:18,711 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-26 02:21:18,713 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:21:18,715 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:21:18,716 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:21:18,717 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:21:18,717 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:21:18,717 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.4ms
2025-10-26 02:21:18,719 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:21:18,721 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:21:18,721 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:21:18,724 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:21:18,724 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:21:18,725 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 5.8ms
2025-10-26 02:21:18,726 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:21:18,728 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:21:18,728 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:21:18,729 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:21:18,729 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.2ms
2025-10-26 02:21:21,483 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:21:21,484 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 02:21:21,487 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:21:21,489 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:21:21,492 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:21:21,493 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 23
2025-10-26 02:21:21,493 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:21:21,494 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:21:21,494 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.3ms
2025-10-26 02:21:21,496 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 02:21:21,496 - app.core.auth - WARNING - [REFRESH] Token no válido o revocado en BD
2025-10-26 02:21:21,497 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.1ms
2025-10-26 02:24:32,685 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:24:32,686 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:24:32,804 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:24:32,810 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:24:32,811 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:24:32,815 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:24:32,815 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 24
2025-10-26 02:24:32,816 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:24:32,817 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:24:32,819 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:24:32,819 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:24:32,850 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ac66655dd028cd5119570506e7c01bd3d89fd4dcd0e6cb59ad16a02a8f73abc9). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:24:32,850 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ac66655dd028cd5119570506e7c01bd3d89fd4dcd0e6cb59ad16a02a8f73abc9). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:24:32,852 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ac66655dd028cd5119570506e7c01bd3d89fd4dcd0e6cb59ad16a02a8f73abc9). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:24:32,854 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:24:32,854 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:24:32,854 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 169.3ms
2025-10-26 02:24:32,854 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 168.6ms
2025-10-26 02:24:33,161 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 02:24:33,162 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.6ms
2025-10-26 02:24:33,163 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:24:33,165 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:24:33,175 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 11.9ms
2025-10-26 02:24:39,756 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 02:24:39,757 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.7ms
2025-10-26 02:24:39,759 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 02:24:40,003 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:24:40,003 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 26
2025-10-26 02:24:40,003 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 02:24:40,004 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 245.0ms
2025-10-26 02:24:40,024 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 02:24:40,025 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.7ms
2025-10-26 02:24:40,028 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 02:24:40,028 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:24:40,037 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:24:40,037 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:24:40,084 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:24:40,085 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:24:40,085 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 57.5ms
2025-10-26 02:24:40,085 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 57.0ms
2025-10-26 02:24:40,088 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 02:24:40,089 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:24:40,091 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:24:40,091 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:24:40,111 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:24:40,111 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:24:40,111 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 23.3ms
2025-10-26 02:24:40,112 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 23.0ms
2025-10-26 02:24:40,113 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 02:24:40,114 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.3ms
2025-10-26 02:24:40,115 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:24:40,117 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:24:40,119 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:24:40,119 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:24:40,120 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.5ms
2025-10-26 02:24:40,121 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 02:24:40,122 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.8ms
2025-10-26 02:24:40,123 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:24:40,126 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:24:40,126 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:24:40,127 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:24:40,127 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:24:40,128 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.6ms
2025-10-26 02:24:40,128 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 02:24:40,129 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.9ms
2025-10-26 02:24:40,131 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:24:40,133 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:24:40,133 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:24:40,137 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:24:40,137 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:24:40,138 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.5ms
2025-10-26 02:24:40,140 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:24:40,142 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:24:40,143 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:24:40,143 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:24:40,143 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.3ms
2025-10-26 02:24:42,261 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:24:42,262 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:24:42,265 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:24:42,280 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:24:42,281 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:24:42,283 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:24:42,283 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 27
2025-10-26 02:24:42,284 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:24:42,285 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:24:42,292 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:24:42,293 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:24:42,294 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0c6b5f20de1262ebd5928b3a3ac51e06fe133121272cd8da02e6ec4de2b0c5aa). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:24:42,295 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0c6b5f20de1262ebd5928b3a3ac51e06fe133121272cd8da02e6ec4de2b0c5aa). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:24:42,296 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0c6b5f20de1262ebd5928b3a3ac51e06fe133121272cd8da02e6ec4de2b0c5aa). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:24:42,297 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:24:42,298 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:24:42,298 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 37.2ms
2025-10-26 02:24:42,298 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 36.8ms
2025-10-26 02:24:42,303 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:24:42,305 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:24:42,307 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.3ms
2025-10-26 02:24:42,322 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:24:42,325 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:24:42,325 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:24:42,326 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:24:42,327 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:24:42,327 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:24:42,328 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:24:42,330 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:24:42,331 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:24:42,332 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:24:42,333 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:24:42,333 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:24:42,337 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:24:42,337 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:24:42,337 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 15.8ms
2025-10-26 02:24:42,338 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.5ms
2025-10-26 02:24:42,338 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.3ms
2025-10-26 02:24:42,340 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:24:42,343 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:24:42,343 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:24:42,345 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:24:42,345 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:24:42,346 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.1ms
2025-10-26 02:24:42,346 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:24:42,348 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:24:42,349 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:24:42,349 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:24:42,350 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:24:42,352 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:24:42,353 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:24:42,356 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:24:42,357 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:24:42,357 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 11.0ms
2025-10-26 02:24:42,358 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.1ms
2025-10-26 02:24:57,480 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:24:57,481 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:24:57,483 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:24:57,485 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:24:57,485 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:24:57,487 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:24:57,487 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 29
2025-10-26 02:24:57,487 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:24:57,490 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:24:57,492 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:24:57,492 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:24:57,494 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (a4dfa657d02a3953737419d8c9f06aa69f6107e9573376f83cb82046f14718be). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:24:57,494 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (a4dfa657d02a3953737419d8c9f06aa69f6107e9573376f83cb82046f14718be). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:24:57,496 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (a4dfa657d02a3953737419d8c9f06aa69f6107e9573376f83cb82046f14718be). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:24:57,497 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:24:57,497 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:24:57,498 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 17.5ms
2025-10-26 02:24:57,498 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 17.0ms
2025-10-26 02:24:57,504 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:24:57,505 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:24:57,507 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.1ms
2025-10-26 02:24:57,525 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:24:57,528 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:24:57,528 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:24:57,529 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:24:57,530 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:24:57,530 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:24:57,532 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:24:57,532 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:24:57,537 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:24:57,537 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:24:57,538 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 12.9ms
2025-10-26 02:24:57,538 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.8ms
2025-10-26 02:24:57,540 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:24:57,543 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:24:57,544 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:24:57,545 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:24:57,545 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.9ms
2025-10-26 02:24:57,546 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:24:57,548 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:24:57,548 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:24:57,549 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:24:57,550 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:24:57,550 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-26 02:24:57,552 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:24:57,556 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:24:57,556 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:24:57,561 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:24:57,561 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:24:57,562 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.9ms
2025-10-26 02:24:57,563 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:24:57,565 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:24:57,566 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:24:57,566 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:24:57,567 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-26 02:25:14,978 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:25:14,987 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:25:14,987 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:25:15,006 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:25:15,006 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 27.9ms
2025-10-26 02:25:15,008 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:25:15,011 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:25:15,011 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:25:15,014 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:25:15,014 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.8ms
2025-10-26 02:25:22,519 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:25:22,520 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:25:22,525 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:25:22,537 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:25:22,537 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:25:22,541 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:25:22,541 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 31
2025-10-26 02:25:22,541 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:25:22,544 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:25:22,545 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:25:22,545 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:25:22,546 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (12550f9c662ac9f0dca2a3d995748ae790d20fd9affaa3e449ec312219090a74). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:25:22,547 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (12550f9c662ac9f0dca2a3d995748ae790d20fd9affaa3e449ec312219090a74). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:25:22,548 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (12550f9c662ac9f0dca2a3d995748ae790d20fd9affaa3e449ec312219090a74). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:25:22,549 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:25:22,550 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:25:22,550 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 30.8ms
2025-10-26 02:25:22,550 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 30.3ms
2025-10-26 02:25:22,556 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:25:22,558 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:25:22,562 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 6.1ms
2025-10-26 02:25:22,576 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:22,579 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:22,579 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:22,627 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:22,627 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:22,628 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:25:22,631 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:25:22,631 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:25:22,634 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:25:22,634 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 58.5ms
2025-10-26 02:25:22,635 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.1ms
2025-10-26 02:25:22,637 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:22,639 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:22,639 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:22,640 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:22,641 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:22,641 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-26 02:25:22,642 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:25:22,644 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:25:22,645 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:25:22,649 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:25:22,650 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 8.8ms
2025-10-26 02:25:36,443 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:25:36,443 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:25:36,445 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:25:36,446 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:25:36,447 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:25:36,448 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:25:36,448 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 33
2025-10-26 02:25:36,449 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:25:36,450 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:25:36,451 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:25:36,451 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:25:36,452 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c18e8b9c07865206872361948d6b24e9e99df7a32c178ff13cfb1d26a1588c9c). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:25:36,453 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c18e8b9c07865206872361948d6b24e9e99df7a32c178ff13cfb1d26a1588c9c). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:25:36,454 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c18e8b9c07865206872361948d6b24e9e99df7a32c178ff13cfb1d26a1588c9c). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:25:36,455 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:25:36,456 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:25:36,456 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.2ms
2025-10-26 02:25:36,456 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.0ms
2025-10-26 02:25:36,461 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:25:36,462 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:25:36,463 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.9ms
2025-10-26 02:25:36,479 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:36,482 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:36,482 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:36,483 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:36,484 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:36,484 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:25:36,486 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:25:36,486 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:25:36,488 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:25:36,489 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 9.7ms
2025-10-26 02:25:36,489 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.6ms
2025-10-26 02:25:36,491 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:36,494 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:36,494 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:36,495 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:36,496 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:36,496 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.1ms
2025-10-26 02:25:36,497 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:25:36,499 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:25:36,499 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:25:36,502 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:25:36,503 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.3ms
2025-10-26 02:25:47,113 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:47,116 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:47,116 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:47,117 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:47,118 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:47,118 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.0ms
2025-10-26 02:25:47,121 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:47,123 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:47,124 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:47,126 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:47,126 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:47,127 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.9ms
2025-10-26 02:25:47,423 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-26 02:25:47,423 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-26 02:25:47,424 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 0.9ms
2025-10-26 02:25:47,424 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 0.8ms
2025-10-26 02:25:47,426 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:25:47,427 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:25:47,563 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:25:47,606 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 179.7ms
2025-10-26 02:25:47,612 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:25:47,613 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:25:47,677 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:25:47,722 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 110.0ms
2025-10-26 02:25:51,840 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:25:51,840 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:25:51,843 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:25:51,845 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:25:51,845 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:25:51,846 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:25:51,847 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 35
2025-10-26 02:25:51,847 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:25:51,849 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:25:51,852 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:25:51,852 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:25:51,854 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c11ca8ab9a091e2dbe6e876b4377613fb56c6c7ed4f75dfac7a1393be7b1ac96). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:25:51,855 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c11ca8ab9a091e2dbe6e876b4377613fb56c6c7ed4f75dfac7a1393be7b1ac96). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:25:51,856 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c11ca8ab9a091e2dbe6e876b4377613fb56c6c7ed4f75dfac7a1393be7b1ac96). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:25:51,857 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:25:51,857 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:25:51,858 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 18.3ms
2025-10-26 02:25:51,858 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 18.0ms
2025-10-26 02:25:51,863 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:25:51,864 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:25:51,866 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.2ms
2025-10-26 02:25:51,882 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:51,884 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:51,884 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:51,885 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:51,886 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:51,886 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:25:51,886 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:25:51,958 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:25:52,010 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 128.3ms
2025-10-26 02:25:52,010 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 124.3ms
2025-10-26 02:25:52,013 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:25:52,015 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:25:52,016 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:25:52,017 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:25:52,018 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:25:52,018 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.5ms
2025-10-26 02:25:52,019 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:25:52,020 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:25:52,107 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:25:52,158 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 139.1ms
2025-10-26 02:26:33,045 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 02:26:33,046 - app.main - INFO - 127.0.0.1 <- GET /docs 0.7ms
2025-10-26 02:26:33,185 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 02:26:33,260 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 74.4ms
2025-10-26 02:26:50,471 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:26:50,472 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:26:50,495 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:26:50,506 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:26:50,506 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:26:50,511 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:26:50,512 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 37
2025-10-26 02:26:50,512 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:26:50,513 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:26:50,517 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:26:50,517 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:26:50,519 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (74ae93d40598c51191167b3be66a7c1a0bba86358e5687d62aa443abf038ac5b). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:26:50,520 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (74ae93d40598c51191167b3be66a7c1a0bba86358e5687d62aa443abf038ac5b). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:26:50,521 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (74ae93d40598c51191167b3be66a7c1a0bba86358e5687d62aa443abf038ac5b). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:26:50,522 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:26:50,523 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:26:50,523 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 52.3ms
2025-10-26 02:26:50,524 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 51.9ms
2025-10-26 02:26:50,529 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:26:50,532 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:26:50,539 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 10.1ms
2025-10-26 02:26:50,555 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:26:50,561 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:26:50,561 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:26:50,605 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:26:50,605 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:26:50,605 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:26:50,606 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:26:50,775 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:26:50,827 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 271.4ms
2025-10-26 02:26:50,827 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 221.9ms
2025-10-26 02:26:50,830 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:26:50,832 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:26:50,832 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:26:50,834 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:26:50,834 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:26:50,834 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-26 02:26:50,836 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:26:50,837 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:26:50,922 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:26:50,967 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 131.2ms
2025-10-26 02:27:43,444 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:27:43,445 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:27:43,468 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:27:43,470 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:27:43,471 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:27:43,475 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:27:43,476 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 39
2025-10-26 02:27:43,476 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:27:43,478 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:27:43,479 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:27:43,480 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:27:43,481 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ac0c40ef115081195df3d6bbce1c42a9a3e90b867c263114ae32fb9fd76c89bc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:27:43,482 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ac0c40ef115081195df3d6bbce1c42a9a3e90b867c263114ae32fb9fd76c89bc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:27:43,483 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ac0c40ef115081195df3d6bbce1c42a9a3e90b867c263114ae32fb9fd76c89bc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:27:43,484 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:27:43,484 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:27:43,485 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 40.3ms
2025-10-26 02:27:43,485 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 39.8ms
2025-10-26 02:27:43,489 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:27:43,491 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:27:43,501 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 12.7ms
2025-10-26 02:27:43,516 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:27:43,521 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:27:43,521 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:27:43,560 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:27:43,561 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:27:43,561 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:27:43,562 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:27:43,750 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:27:43,794 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 277.9ms
2025-10-26 02:27:43,794 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 233.1ms
2025-10-26 02:27:43,797 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:27:43,799 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:27:43,799 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:27:43,800 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:27:43,801 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:27:43,801 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 02:27:43,802 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:27:43,803 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:27:43,871 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:27:43,917 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 114.5ms
2025-10-26 02:30:16,141 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 02:30:16,142 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 02:30:16,143 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.2ms
2025-10-26 02:30:16,143 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 02:30:31,587 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:30:31,587 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 02:30:31,655 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:30:31,659 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:30:31,660 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:30:31,664 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 02:30:31,665 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 41
2025-10-26 02:30:31,665 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:30:31,666 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 02:30:31,667 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 02:30:31,668 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 02:30:31,670 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (e6aa6fadb03fa8680641489abc51e68dd3c30e5f98736d2ad77e7ca305a93cec). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 02:30:31,671 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (e6aa6fadb03fa8680641489abc51e68dd3c30e5f98736d2ad77e7ca305a93cec). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:30:31,673 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB1344A1C030'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (e6aa6fadb03fa8680641489abc51e68dd3c30e5f98736d2ad77e7ca305a93cec). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 02:30:31,674 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 02:30:31,674 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 02:30:31,675 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 88.1ms
2025-10-26 02:30:31,675 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 87.8ms
2025-10-26 02:30:31,680 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 02:30:31,683 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 02:30:31,692 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 11.7ms
2025-10-26 02:30:31,715 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:30:31,722 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:30:31,723 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:30:31,766 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:30:31,767 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:30:31,767 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:30:31,767 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:30:44,285 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:30:44,334 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 12618.8ms
2025-10-26 02:30:44,335 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 12567.7ms
2025-10-26 02:30:44,337 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:30:44,344 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:30:44,344 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:30:44,379 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:30:44,379 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:30:44,380 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 42.9ms
2025-10-26 02:30:44,380 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 02:30:44,381 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 02:30:44,449 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 02:30:44,492 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 111.2ms
2025-10-26 02:30:46,768 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:30:46,771 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:30:46,771 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:30:46,773 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:30:46,773 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:30:46,774 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.4ms
2025-10-26 02:30:46,775 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:30:46,775 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:30:46,778 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:30:46,780 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:30:46,781 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:30:46,784 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:30:46,784 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:30:46,821 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:30:46,822 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:30:46,822 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 47.5ms
2025-10-26 02:30:46,822 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 47.4ms
2025-10-26 02:30:46,824 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 02:30:46,827 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 02:30:46,827 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 02:30:46,828 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 02:30:46,828 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 02:30:46,829 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 02:30:46,830 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 02:30:46,830 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 02:30:46,832 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 02:30:46,833 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 02:30:46,833 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 02:30:46,835 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:30:46,835 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 02:30:46,838 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 02:30:46,838 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 02:30:46,839 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 9.4ms
2025-10-26 02:30:46,839 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.5ms
2025-10-26 02:30:57,268 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 02:30:57,269 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.7ms
2025-10-26 02:30:57,271 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 02:30:57,271 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:30:57,274 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:30:57,274 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:30:57,282 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:30:57,282 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 11.5ms
2025-10-26 02:30:57,283 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 11.5ms
2025-10-26 02:30:57,285 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 02:30:57,288 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 02:30:57,288 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 02:30:57,291 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 02:30:57,292 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.9ms
2025-10-26 15:30:49,482 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 15:30:49,483 - app.main - INFO - 127.0.0.1 <- GET /docs 0.9ms
2025-10-26 15:30:49,527 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 15:30:49,585 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 57.4ms
2025-10-26 15:31:01,997 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 15:31:01,997 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 15:31:01,998 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-26 15:31:01,998 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.6ms
2025-10-26 15:31:02,308 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:31:02,309 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:31:02,578 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:31:02,580 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 15:31:02,581 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:31:02,586 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:31:02,587 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 1
2025-10-26 15:31:02,587 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:31:02,588 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:31:02,589 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 15:31:02,589 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:31:02,590 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (d0e1f1b891e14585fdccc869d9d98c1ce95eac3cbd360f3bc0aa431fc0f86c97). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 15:31:02,591 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (d0e1f1b891e14585fdccc869d9d98c1ce95eac3cbd360f3bc0aa431fc0f86c97). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:31:02,594 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (d0e1f1b891e14585fdccc869d9d98c1ce95eac3cbd360f3bc0aa431fc0f86c97). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:31:02,596 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 15:31:02,596 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:31:02,597 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 288.4ms
2025-10-26 15:31:02,597 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 288.2ms
2025-10-26 15:31:02,602 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 15:31:02,603 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.6ms
2025-10-26 15:31:02,604 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:31:02,607 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:31:02,627 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 22.3ms
2025-10-26 15:31:24,947 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:31:24,949 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:31:24,950 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:31:24,951 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:31:24,952 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:31:24,953 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 3
2025-10-26 15:31:24,953 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:31:24,954 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 7.4ms
2025-10-26 15:31:24,957 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:31:24,959 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:31:24,961 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:31:24,962 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:31:24,963 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (49a36751b371f2854547e1d3555e50e4784f823e4d47ed56fc24eec32591c9f2). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 15:31:24,963 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (49a36751b371f2854547e1d3555e50e4784f823e4d47ed56fc24eec32591c9f2). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:31:24,965 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (49a36751b371f2854547e1d3555e50e4784f823e4d47ed56fc24eec32591c9f2). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:31:24,966 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 15:31:24,966 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:31:24,967 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.2ms
2025-10-26 15:31:24,973 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:31:24,975 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:31:24,976 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.1ms
2025-10-26 15:41:59,378 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 15:41:59,379 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.6ms
2025-10-26 15:41:59,685 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:41:59,726 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:41:59,732 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:41:59,732 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:41:59,736 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:41:59,736 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 5
2025-10-26 15:41:59,736 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:41:59,736 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 51.4ms
2025-10-26 15:41:59,740 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 15:41:59,740 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.3ms
2025-10-26 15:41:59,741 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:41:59,743 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:41:59,753 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 11.6ms
2025-10-26 15:42:46,508 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:42:46,510 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:42:46,511 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:42:46,512 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:42:46,513 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:42:46,513 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 6
2025-10-26 15:42:46,514 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:42:46,514 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.2ms
2025-10-26 15:42:46,516 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:42:46,519 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:42:46,520 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:42:46,521 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:42:46,522 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0bf3e81ffa2a0cf097bee754443d3d15b64658056e9319dac770c38f8b778c47). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 15:42:46,522 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0bf3e81ffa2a0cf097bee754443d3d15b64658056e9319dac770c38f8b778c47). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:42:46,524 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0bf3e81ffa2a0cf097bee754443d3d15b64658056e9319dac770c38f8b778c47). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:42:46,525 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 15:42:46,525 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:42:46,526 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 9.6ms
2025-10-26 15:42:46,530 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:42:46,532 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:42:46,533 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.1ms
2025-10-26 15:42:52,671 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:42:52,683 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:42:52,688 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:42:52,689 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:42:52,694 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:42:52,694 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 8
2025-10-26 15:42:52,695 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:42:52,695 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 24.5ms
2025-10-26 15:42:52,697 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:42:52,700 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:42:52,706 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:42:52,707 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:42:52,711 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ca0bc7c8705e3a31171109f256dafca19f3a3080a941e9edd084c4eb8496ac66). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 15:42:52,712 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ca0bc7c8705e3a31171109f256dafca19f3a3080a941e9edd084c4eb8496ac66). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:42:52,713 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ca0bc7c8705e3a31171109f256dafca19f3a3080a941e9edd084c4eb8496ac66). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:42:52,715 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 15:42:52,715 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:42:52,715 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 18.2ms
2025-10-26 15:42:52,719 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:42:52,723 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:42:52,729 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.3ms
2025-10-26 15:42:55,400 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:42:55,400 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:42:55,409 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:42:55,413 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:42:55,414 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:42:55,417 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:42:55,418 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 10
2025-10-26 15:42:55,418 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:42:55,419 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:42:55,420 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:42:55,420 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:42:55,421 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (183d28f9818a7c0f23b7b501f27819fb7d805efd44c733891231c0be44b8da6e). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 15:42:55,422 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (183d28f9818a7c0f23b7b501f27819fb7d805efd44c733891231c0be44b8da6e). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:42:55,423 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (183d28f9818a7c0f23b7b501f27819fb7d805efd44c733891231c0be44b8da6e). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:42:55,425 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 15:42:55,425 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:42:55,425 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 25.6ms
2025-10-26 15:42:55,425 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 25.2ms
2025-10-26 15:42:55,429 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:42:55,431 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:42:55,434 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 4.9ms
2025-10-26 15:43:38,400 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:43:38,400 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:43:38,501 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:43:38,503 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 15:43:38,504 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:43:38,506 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:43:38,506 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 12
2025-10-26 15:43:38,506 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:43:38,508 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:43:38,509 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 15:43:38,509 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:43:38,510 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (f5f54c0444ed22de759a49050708552d7cfbf4041b67da84f7fe83667469dfcd). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 15:43:38,511 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (f5f54c0444ed22de759a49050708552d7cfbf4041b67da84f7fe83667469dfcd). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:43:38,513 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (f5f54c0444ed22de759a49050708552d7cfbf4041b67da84f7fe83667469dfcd). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:43:38,516 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 15:43:38,516 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:43:38,517 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 116.9ms
2025-10-26 15:43:38,517 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 116.5ms
2025-10-26 15:43:38,523 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:43:38,526 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:43:38,535 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 12.3ms
2025-10-26 15:43:44,506 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:43:44,509 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:43:44,510 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:43:44,510 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:43:44,512 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:43:44,513 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 14
2025-10-26 15:43:44,513 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:43:44,514 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 7.1ms
2025-10-26 15:43:44,516 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:43:44,518 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:43:44,520 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:43:44,520 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:43:44,522 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (1514f2541df36af4d8b25536c0f503ad76e88cee236a47a186d728060099a1c2). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 15:43:44,522 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (1514f2541df36af4d8b25536c0f503ad76e88cee236a47a186d728060099a1c2). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:43:44,524 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB13AFE960A3'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (1514f2541df36af4d8b25536c0f503ad76e88cee236a47a186d728060099a1c2). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 15:43:44,525 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 15:43:44,525 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:43:44,526 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.0ms
2025-10-26 15:43:44,530 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:43:44,532 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:43:44,533 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.6ms
2025-10-26 15:49:56,642 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:49:56,642 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:49:56,757 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:49:56,766 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:49:56,766 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token validado en BD para usuario: admin
2025-10-26 15:49:56,768 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:49:56,769 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:49:56,769 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token antiguo revocado para usuario: admin
2025-10-26 15:49:56,772 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:49:56,773 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 16
2025-10-26 15:49:56,773 - app.api.v1.endpoints.auth - INFO - [REFRESH] Nuevo token almacenado para usuario: admin
2025-10-26 15:49:56,773 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:49:56,774 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:49:56,775 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:49:56,775 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:49:56,776 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 133.8ms
2025-10-26 15:49:56,776 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 133.6ms
2025-10-26 15:49:56,780 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 15:49:56,782 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 15:49:56,791 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 11.0ms
2025-10-26 15:50:05,269 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 15:50:05,269 - app.main - INFO - 127.0.0.1 <- GET /docs 0.5ms
2025-10-26 15:50:05,341 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 15:50:05,403 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 62.8ms
2025-10-26 15:50:17,247 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:50:17,249 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:50:17,250 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:50:17,250 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:50:17,251 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.9ms
2025-10-26 15:50:17,252 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:50:17,254 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:50:17,256 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:50:17,256 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:50:17,256 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.2ms
2025-10-26 15:50:25,421 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:50:25,423 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:50:25,425 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:50:25,425 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:50:25,425 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.6ms
2025-10-26 15:50:25,428 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:50:25,430 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:50:25,432 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:50:25,433 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:50:25,433 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.3ms
2025-10-26 15:50:32,604 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 15:50:32,605 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.4ms
2025-10-26 15:50:32,607 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 15:50:32,843 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:50:32,844 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 17
2025-10-26 15:50:32,844 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 15:50:32,845 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 238.1ms
2025-10-26 15:50:32,871 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 15:50:32,871 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 15:50:32,872 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.0ms
2025-10-26 15:50:32,872 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.7ms
2025-10-26 15:50:32,876 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 15:50:32,876 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 15:50:32,877 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.3ms
2025-10-26 15:50:32,878 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:50:32,878 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.5ms
2025-10-26 15:50:32,883 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:50:32,883 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:50:32,902 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:50:32,902 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:50:32,904 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 26.2ms
2025-10-26 15:50:32,906 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 15:50:32,907 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 15:50:32,908 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.5ms
2025-10-26 15:50:32,908 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.3ms
2025-10-26 15:50:32,908 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:50:32,910 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:50:32,910 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:50:32,946 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:50:32,947 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:50:32,948 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 39.9ms
2025-10-26 15:50:32,950 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:50:32,952 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:50:32,955 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:50:32,955 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:50:32,956 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.1ms
2025-10-26 15:50:32,958 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:50:32,961 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:50:32,961 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:50:32,965 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:50:32,965 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:50:32,966 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.7ms
2025-10-26 15:50:32,968 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:50:32,970 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:50:32,971 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:50:32,972 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:50:32,972 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:50:32,973 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-26 15:50:32,975 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:50:32,978 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:50:32,979 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:50:32,979 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:50:32,980 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-26 15:51:00,518 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:51:00,519 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:51:00,561 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:51:00,564 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:51:00,564 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token validado en BD para usuario: admin
2025-10-26 15:51:00,567 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:51:00,568 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:51:00,568 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token antiguo revocado para usuario: admin
2025-10-26 15:51:00,579 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:51:00,579 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 18
2025-10-26 15:51:00,579 - app.api.v1.endpoints.auth - INFO - [REFRESH] Nuevo token almacenado para usuario: admin
2025-10-26 15:51:00,579 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:51:00,581 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:51:00,582 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:51:00,582 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:51:00,583 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 64.5ms
2025-10-26 15:51:00,583 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 63.8ms
2025-10-26 15:51:10,972 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:51:10,972 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:51:10,975 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:51:10,976 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:51:10,976 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token validado en BD para usuario: admin
2025-10-26 15:51:10,978 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:51:10,978 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:51:10,978 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token antiguo revocado para usuario: admin
2025-10-26 15:51:10,980 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:51:10,980 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 19
2025-10-26 15:51:10,980 - app.api.v1.endpoints.auth - INFO - [REFRESH] Nuevo token almacenado para usuario: admin
2025-10-26 15:51:10,981 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:51:10,983 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:51:10,984 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:51:10,984 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:51:10,984 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.5ms
2025-10-26 15:51:10,985 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.2ms
2025-10-26 15:51:19,483 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:51:19,485 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:51:19,488 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:51:19,489 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token validado en BD para usuario: admin
2025-10-26 15:51:19,492 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 15:51:19,492 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 15:51:19,492 - app.api.v1.endpoints.auth - INFO - [REFRESH] Token antiguo revocado para usuario: admin
2025-10-26 15:51:19,494 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:51:19,495 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 20
2025-10-26 15:51:19,495 - app.api.v1.endpoints.auth - INFO - [REFRESH] Nuevo token almacenado para usuario: admin
2025-10-26 15:51:19,496 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 15:51:19,496 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.5ms
2025-10-26 15:51:19,498 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:51:19,501 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 15:51:19,502 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:51:19,503 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token inválido, revocado o expirado para usuario: admin
2025-10-26 15:51:19,503 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.1ms
2025-10-26 15:55:46,634 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 15:55:46,635 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 15:55:46,635 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-26 15:55:46,635 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.7ms
2025-10-26 15:55:46,938 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:55:46,939 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:55:47,038 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:55:47,038 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD
2025-10-26 15:55:47,038 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:55:47,069 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:55:47,069 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:55:47,070 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:55:47,070 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD
2025-10-26 15:55:47,071 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:55:47,072 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 133.2ms
2025-10-26 15:55:47,072 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 15:55:52,541 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 15:55:52,541 - app.main - INFO - 127.0.0.1 <- GET /docs 0.5ms
2025-10-26 15:55:52,608 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 15:55:52,669 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 60.9ms
2025-10-26 15:56:01,795 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:56:01,796 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:56:01,797 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:56:01,797 - app.api.v1.endpoints.auth - WARNING - [REFRESH-WEB] Token inválido, revocado o expirado
2025-10-26 15:56:01,797 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.1ms
2025-10-26 15:56:01,799 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:56:01,799 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:56:01,801 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:56:01,801 - app.api.v1.endpoints.auth - WARNING - [REFRESH-WEB] Token inválido, revocado o expirado
2025-10-26 15:56:01,802 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 15:56:13,052 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:56:13,053 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:56:13,056 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:56:13,056 - app.api.v1.endpoints.auth - WARNING - [REFRESH-WEB] Token inválido, revocado o expirado
2025-10-26 15:56:13,057 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.1ms
2025-10-26 15:56:13,059 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:56:13,060 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:56:13,062 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 15:56:13,063 - app.api.v1.endpoints.auth - WARNING - [REFRESH-WEB] Token inválido, revocado o expirado
2025-10-26 15:56:13,063 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.4ms
2025-10-26 15:56:19,956 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 15:56:20,224 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:56:20,225 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 21
2025-10-26 15:56:20,225 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 15:56:20,225 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 15:56:20,232 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 275.6ms
2025-10-26 15:56:20,258 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:56:20,266 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:56:20,267 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:56:20,323 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:56:20,323 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:56:20,324 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 65.6ms
2025-10-26 15:56:20,326 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:56:20,328 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:56:20,328 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:56:20,348 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:56:20,348 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:56:20,349 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 22.9ms
2025-10-26 15:56:20,351 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:56:20,353 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:56:20,355 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:56:20,355 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:56:20,355 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.8ms
2025-10-26 15:56:20,357 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:56:20,359 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:56:20,360 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:56:20,361 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:56:20,361 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:56:20,362 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.4ms
2025-10-26 15:56:20,364 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:56:20,366 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:56:20,366 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:56:20,370 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:56:20,371 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:56:20,371 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.5ms
2025-10-26 15:56:20,373 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:56:20,375 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:56:20,376 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:56:20,376 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:56:20,377 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-26 15:56:29,815 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:56:29,816 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:56:29,817 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:56:29,817 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD
2025-10-26 15:56:29,818 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:56:29,819 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:56:29,819 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:56:29,820 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 15:56:29,820 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD
2025-10-26 15:56:29,821 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:56:29,822 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.9ms
2025-10-26 15:56:29,823 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.8ms
2025-10-26 15:58:44,429 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 15:58:44,429 - app.main - INFO - 127.0.0.1 <- GET /docs 0.9ms
2025-10-26 15:58:44,494 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 15:58:44,554 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 59.4ms
2025-10-26 15:58:48,488 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:58:48,488 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:58:48,489 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:58:48,489 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:58:48,492 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:58:48,492 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:58:48,493 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.0ms
2025-10-26 15:58:48,493 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.0ms
2025-10-26 15:58:56,501 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 15:58:56,873 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:58:56,874 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 22
2025-10-26 15:58:56,874 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 15:58:56,874 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 15:58:56,879 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 378.5ms
2025-10-26 15:58:56,899 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:58:56,908 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:58:56,908 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:58:56,951 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:58:56,951 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:58:56,951 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 52.2ms
2025-10-26 15:58:56,954 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:58:56,956 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:58:56,956 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:58:56,970 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:58:56,971 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:58:56,971 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 17.9ms
2025-10-26 15:58:56,973 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:58:56,975 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:58:56,977 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:58:56,977 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:58:56,978 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-26 15:58:56,979 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:58:56,982 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:58:56,982 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:58:56,984 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:58:56,984 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:58:56,984 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-26 15:58:56,987 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:58:56,990 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:58:56,990 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:58:56,994 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:58:56,994 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:58:56,994 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.2ms
2025-10-26 15:58:56,996 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:58:56,998 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:58:56,999 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:58:56,999 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:58:57,000 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.1ms
2025-10-26 15:59:01,741 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:59:01,742 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:59:01,742 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:59:01,744 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:59:01,744 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:59:01,745 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:59:01,746 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.7ms
2025-10-26 15:59:01,746 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-26 15:59:19,396 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 15:59:19,607 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 15:59:19,608 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 23
2025-10-26 15:59:19,608 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 15:59:19,608 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 15:59:19,609 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 213.0ms
2025-10-26 15:59:19,624 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:59:19,628 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:59:19,628 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:59:19,629 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:59:19,629 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:59:19,630 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.7ms
2025-10-26 15:59:19,631 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:59:19,632 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:59:19,634 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:59:19,635 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:59:19,635 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:59:19,637 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:59:19,638 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:59:19,642 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:59:19,642 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:59:19,643 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 12.4ms
2025-10-26 15:59:19,644 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 12.2ms
2025-10-26 15:59:19,644 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 15:59:19,647 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 15:59:19,647 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 15:59:19,648 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 15:59:19,648 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 15:59:19,649 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.1ms
2025-10-26 15:59:19,650 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 15:59:19,653 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 15:59:19,654 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 15:59:19,654 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 15:59:19,655 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.5ms
2025-10-26 15:59:19,656 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 15:59:19,658 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 15:59:19,658 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 15:59:19,662 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 15:59:19,662 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 15:59:19,664 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.1ms
2025-10-26 15:59:22,826 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:59:22,827 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:59:22,827 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:59:22,828 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 15:59:22,829 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 15:59:22,829 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 212, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 15:59:22,830 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.7ms
2025-10-26 15:59:22,831 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.6ms
2025-10-26 16:03:19,204 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 16:03:19,205 - app.main - INFO - 127.0.0.1 <- GET /docs 1.1ms
2025-10-26 16:03:20,338 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 16:03:20,388 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 50.3ms
2025-10-26 16:03:30,257 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 16:03:30,258 - app.main - INFO - 127.0.0.1 <- GET /docs 0.8ms
2025-10-26 16:03:30,298 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 16:03:30,299 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 1.7ms
2025-10-26 16:03:40,685 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:03:40,686 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:03:40,686 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 328, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 16:03:40,689 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:03:40,689 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:03:40,689 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 328, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 16:03:40,690 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.2ms
2025-10-26 16:03:40,691 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.8ms
2025-10-26 16:03:57,354 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:03:57,354 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:03:57,354 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 328, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 16:03:57,356 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:03:57,356 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:03:57,357 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 328, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 16:03:57,357 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.7ms
2025-10-26 16:03:57,358 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.5ms
2025-10-26 16:04:03,037 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:04:03,038 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:04:03,038 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 328, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 16:04:03,039 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.2ms
2025-10-26 16:04:03,041 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:04:03,042 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:04:03,042 - app.core.auth - ERROR - Error validando refresh token: 'Cookie' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 328, in get_current_user_from_refresh
    payload = decode_refresh_token(refresh_token)
  File "D:\base_fastapi\app\core\auth.py", line 71, in decode_refresh_token
    payload = jwt.decode(token, settings.REFRESH_SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "D:\base_fastapi\venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'Cookie' object has no attribute 'rsplit'
2025-10-26 16:04:03,046 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.5ms
2025-10-26 16:05:57,567 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 16:05:57,567 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 16:05:57,568 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.1ms
2025-10-26 16:05:57,568 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.8ms
2025-10-26 16:05:57,881 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:05:57,881 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:05:59,967 - app.db.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 16:05:59,967 - app.core.auth - ERROR - Error validando refresh token en BD: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 31, in execute_auth_query
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 134, in validate_refresh_token_in_db
    result = execute_auth_query(query, (token, usuario_id))
  File "D:\base_fastapi\app\db\queries.py", line 45, in execute_auth_query
    raise DatabaseError(status_code=500, detail=f"Error en la autenticación: {str(e)}")
          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 16:05:59,969 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:05:59,970 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:05:59,970 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:05:59,971 - app.db.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 16:05:59,972 - app.core.auth - ERROR - Error validando refresh token en BD: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 31, in execute_auth_query
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 134, in validate_refresh_token_in_db
    result = execute_auth_query(query, (token, usuario_id))
  File "D:\base_fastapi\app\db\queries.py", line 45, in execute_auth_query
    raise DatabaseError(status_code=500, detail=f"Error en la autenticación: {str(e)}")
          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 16:05:59,973 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:05:59,973 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2092.5ms
2025-10-26 16:05:59,974 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.0ms
2025-10-26 16:06:16,486 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:06:16,487 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:06:16,487 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:06:16,513 - app.db.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 16:06:16,516 - app.core.auth - ERROR - Error validando refresh token en BD: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 31, in execute_auth_query
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 134, in validate_refresh_token_in_db
    result = execute_auth_query(query, (token, usuario_id))
  File "D:\base_fastapi\app\db\queries.py", line 45, in execute_auth_query
    raise DatabaseError(status_code=500, detail=f"Error en la autenticación: {str(e)}")
          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 16:06:16,518 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:06:16,519 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:06:16,522 - app.db.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 16:06:16,522 - app.core.auth - ERROR - Error validando refresh token en BD: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 31, in execute_auth_query
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'token'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_revocado'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\core\auth.py", line 134, in validate_refresh_token_in_db
    result = execute_auth_query(query, (token, usuario_id))
  File "D:\base_fastapi\app\db\queries.py", line 45, in execute_auth_query
    raise DatabaseError(status_code=500, detail=f"Error en la autenticación: {str(e)}")
          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 16:06:16,525 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:06:16,526 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 39.4ms
2025-10-26 16:06:16,526 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 39.7ms
2025-10-26 16:08:55,637 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:08:55,637 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:08:55,637 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:08:55,766 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:08:55,766 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:08:55,767 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:08:55,769 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:08:55,769 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:08:55,775 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:08:55,775 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:08:55,776 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:08:55,779 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:08:55,780 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 24
2025-10-26 16:08:55,780 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:08:55,780 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:08:55,780 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:08:55,782 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 16:08:55,782 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:08:55,782 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 145.3ms
2025-10-26 16:08:55,782 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 145.0ms
2025-10-26 16:09:03,833 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:09:03,834 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:09:03,836 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:09:03,836 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:09:03,836 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:09:03,837 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:09:03,838 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:09:03,839 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:09:03,839 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:09:03,840 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:09:03,841 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:09:03,842 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 25
2025-10-26 16:09:03,842 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:09:03,842 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:09:03,843 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 9.7ms
2025-10-26 16:09:03,845 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:09:03,846 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:09:03,848 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 16:09:03,848 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:09:03,848 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.2ms
2025-10-26 16:09:15,618 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 16:09:15,619 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.6ms
2025-10-26 16:09:15,620 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:09:17,601 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:09:17,602 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 26
2025-10-26 16:09:17,602 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 16:09:17,602 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:09:17,607 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 1986.4ms
2025-10-26 16:09:17,630 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 16:09:17,631 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.1ms
2025-10-26 16:09:17,631 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 16:09:17,632 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.8ms
2025-10-26 16:09:17,634 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 16:09:17,634 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:09:17,642 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:09:17,642 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:09:17,697 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:09:17,697 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:09:17,698 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 63.5ms
2025-10-26 16:09:17,698 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 63.5ms
2025-10-26 16:09:17,698 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 16:09:17,699 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.1ms
2025-10-26 16:09:17,701 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 16:09:17,702 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:09:17,702 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.2ms
2025-10-26 16:09:17,705 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:09:17,705 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:09:17,734 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:09:17,734 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:09:17,735 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 16:09:17,736 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 34.1ms
2025-10-26 16:09:17,736 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.2ms
2025-10-26 16:09:17,739 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:09:17,741 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:09:17,742 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:09:17,743 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:09:17,743 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.6ms
2025-10-26 16:09:17,745 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:09:17,747 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:09:17,747 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:09:17,748 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:09:17,748 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:09:17,749 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.6ms
2025-10-26 16:09:17,750 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:09:17,752 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:09:17,752 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:09:17,757 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:09:17,757 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:09:17,758 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.0ms
2025-10-26 16:09:17,761 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:09:17,763 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:09:17,764 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:09:17,764 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:09:17,764 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.4ms
2025-10-26 16:09:21,070 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:09:21,070 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:09:21,076 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:09:21,076 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:09:21,076 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:09:21,080 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:09:21,080 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:09:21,084 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:09:21,084 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:09:21,084 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:09:21,085 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:09:21,086 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 27
2025-10-26 16:09:21,086 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:09:21,086 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:09:21,086 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:09:21,087 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:09:21,088 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 16:09:21,088 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:09:21,088 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 19.0ms
2025-10-26 16:09:21,089 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.5ms
2025-10-26 16:09:45,676 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:09:45,898 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:09:45,899 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 28
2025-10-26 16:09:45,899 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 16:09:45,899 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:09:45,900 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 223.9ms
2025-10-26 16:09:45,915 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:09:45,918 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:09:45,918 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:09:45,920 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:09:45,920 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:09:45,921 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:09:45,921 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:09:45,923 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:09:45,924 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:09:45,924 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:09:45,925 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:09:45,926 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:09:45,929 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:09:45,929 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:09:45,929 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 14.9ms
2025-10-26 16:09:45,930 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 9.2ms
2025-10-26 16:09:45,930 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.1ms
2025-10-26 16:09:45,933 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:09:45,935 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:09:45,936 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:09:45,937 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:09:45,937 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:09:45,938 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 16:09:45,938 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:09:45,940 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:09:45,941 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:09:45,941 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:09:45,941 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:09:45,944 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:09:45,944 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:09:45,948 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:09:45,948 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:09:45,949 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.6ms
2025-10-26 16:09:45,949 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.9ms
2025-10-26 16:09:49,821 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:09:49,822 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:09:49,825 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:09:49,825 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:09:49,826 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:09:49,827 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:09:49,827 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:09:49,828 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:09:49,829 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:09:49,829 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:09:49,831 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:09:49,831 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 29
2025-10-26 16:09:49,832 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:09:49,832 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:09:49,833 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:09:49,833 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:09:49,836 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 16:09:49,836 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:09:49,836 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.1ms
2025-10-26 16:09:49,837 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.5ms
2025-10-26 16:11:09,255 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:11:09,255 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:11:09,298 - app.core.auth - WARNING - Refresh token no encontrado en BD para usuario_id=1
2025-10-26 16:11:09,298 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:11:09,298 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:11:09,298 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:11:09,299 - app.core.auth - WARNING - Refresh token no encontrado en BD para usuario_id=1
2025-10-26 16:11:09,299 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:11:09,300 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 44.9ms
2025-10-26 16:11:09,300 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.7ms
2025-10-26 16:11:17,877 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:11:17,877 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:11:17,879 - app.core.auth - WARNING - Refresh token no encontrado en BD para usuario_id=1
2025-10-26 16:11:17,879 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:11:17,879 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.7ms
2025-10-26 16:11:17,881 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:11:17,882 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:11:17,883 - app.core.auth - WARNING - Refresh token no encontrado en BD para usuario_id=1
2025-10-26 16:11:17,883 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:11:17,884 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.7ms
2025-10-26 16:11:22,923 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:11:23,154 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:11:23,154 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 30
2025-10-26 16:11:23,154 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 16:11:23,155 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:11:23,155 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 232.2ms
2025-10-26 16:11:23,170 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:11:23,178 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:11:23,179 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:11:23,217 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:11:23,218 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:11:23,218 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 47.9ms
2025-10-26 16:11:23,220 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:11:23,222 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:11:23,223 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:11:23,239 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:11:23,239 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:11:23,240 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 19.7ms
2025-10-26 16:11:23,242 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:11:23,244 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:11:23,246 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:11:23,246 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:11:23,246 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-26 16:11:23,248 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:11:23,250 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:11:23,250 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:11:23,252 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:11:23,252 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:11:23,252 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.8ms
2025-10-26 16:11:23,254 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:11:23,255 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:11:23,256 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:11:23,259 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:11:23,259 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:11:23,260 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.4ms
2025-10-26 16:11:23,262 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:11:23,264 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:11:23,265 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:11:23,265 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:11:23,266 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.9ms
2025-10-26 16:11:33,060 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:11:33,061 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:11:33,075 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:11:33,075 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:11:33,075 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:11:33,079 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:11:33,079 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:11:33,082 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:11:33,083 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:11:33,083 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:11:33,087 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:11:33,087 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 31
2025-10-26 16:11:33,088 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:11:33,088 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:11:33,088 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:11:33,089 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:11:33,090 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 16:11:33,090 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:11:33,090 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 30.3ms
2025-10-26 16:11:33,091 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-26 16:14:13,386 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:14:13,386 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:14:13,429 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:14:13,429 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:14:13,429 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:14:13,431 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:14:13,431 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:14:13,434 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:14:13,434 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:14:13,434 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:14:13,438 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:14:13,439 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 32
2025-10-26 16:14:13,439 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:14:13,439 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:14:13,439 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 53.4ms
2025-10-26 16:15:54,380 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:15:54,380 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:15:54,421 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:15:54,421 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:15:54,421 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:15:54,424 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:15:54,425 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:15:54,428 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:15:54,429 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:15:54,429 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:15:54,437 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:15:54,437 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 33
2025-10-26 16:15:54,437 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:15:54,438 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:15:54,438 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 58.5ms
2025-10-26 16:15:54,747 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 16:15:54,747 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.6ms
2025-10-26 16:15:54,749 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 16:15:54,751 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 16:15:54,768 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 19.1ms
2025-10-26 16:15:58,556 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 16:15:58,556 - app.main - INFO - 127.0.0.1 <- GET /docs 0.5ms
2025-10-26 16:15:58,623 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 16:15:58,678 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 55.4ms
2025-10-26 16:16:08,715 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 16:16:08,715 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.4ms
2025-10-26 16:16:08,717 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:16:08,717 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:16:08,719 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:16:08,719 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:16:08,719 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:16:08,720 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:16:08,720 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:16:08,721 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:16:08,722 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:16:08,722 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:16:08,724 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:16:08,724 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 34
2025-10-26 16:16:08,725 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:16:08,725 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:16:08,725 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.4ms
2025-10-26 16:16:16,832 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:16:17,045 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:16:17,045 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 35
2025-10-26 16:16:17,045 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 16:16:17,045 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:16:17,046 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 214.0ms
2025-10-26 16:16:17,068 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:16:17,075 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:16:17,075 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:16:17,119 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:16:17,119 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:16:17,119 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:16:17,120 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 51.2ms
2025-10-26 16:16:17,121 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:16:17,121 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:16:17,138 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:16:17,138 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:16:17,139 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 19.5ms
2025-10-26 16:16:17,140 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:16:17,142 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:16:17,144 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:16:17,144 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:16:17,145 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.5ms
2025-10-26 16:16:17,145 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:16:17,147 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:16:17,147 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:16:17,148 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:16:17,148 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:16:17,149 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.6ms
2025-10-26 16:16:17,150 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:16:17,153 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:16:17,153 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:16:17,157 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:16:17,157 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:16:17,158 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.6ms
2025-10-26 16:16:17,158 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:16:17,161 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:16:17,161 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:16:17,162 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:16:17,163 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.6ms
2025-10-26 16:16:20,489 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:16:20,490 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:16:20,492 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:16:20,493 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:16:20,493 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:16:20,494 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:16:20,495 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:16:20,498 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:16:20,499 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:16:20,499 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:16:20,500 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:16:20,500 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 36
2025-10-26 16:16:20,500 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:16:20,501 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:16:20,501 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.8ms
2025-10-26 16:16:48,483 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:16:48,484 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:16:48,567 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:16:48,567 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:16:48,567 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:16:48,568 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:16:48,568 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:16:48,569 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:16:48,569 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:16:48,569 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:16:48,570 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:16:48,570 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 37
2025-10-26 16:16:48,570 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:16:48,570 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:16:48,571 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 87.2ms
2025-10-26 16:16:55,236 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:16:59,624 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:16:59,624 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 38
2025-10-26 16:16:59,624 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 16:16:59,625 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:16:59,632 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 4395.6ms
2025-10-26 16:16:59,654 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:16:59,661 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:16:59,661 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:16:59,721 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:16:59,721 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:16:59,722 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 67.7ms
2025-10-26 16:16:59,724 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:16:59,726 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:16:59,726 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:16:59,757 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:16:59,757 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:16:59,758 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 33.5ms
2025-10-26 16:16:59,760 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:16:59,762 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:16:59,764 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:16:59,764 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:16:59,764 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.3ms
2025-10-26 16:16:59,766 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:16:59,768 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:16:59,768 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:16:59,769 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:16:59,769 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:16:59,770 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.4ms
2025-10-26 16:16:59,771 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:16:59,774 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:16:59,774 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:16:59,779 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:16:59,779 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:16:59,779 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.2ms
2025-10-26 16:16:59,781 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:16:59,783 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:16:59,784 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:16:59,784 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:16:59,784 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.2ms
2025-10-26 16:17:02,829 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 16:17:02,829 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 16:17:02,830 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 1.2ms
2025-10-26 16:17:02,830 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.7ms
2025-10-26 16:17:02,832 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 16:17:02,834 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:17:02,834 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 16:17:02,840 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 16:17:02,840 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 8.5ms
2025-10-26 16:17:02,842 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 16:17:02,845 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:17:02,845 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 16:17:02,849 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 16:17:02,849 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.3ms
2025-10-26 16:17:03,409 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 16:17:03,410 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 16:17:03,410 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 1.1ms
2025-10-26 16:17:03,411 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 1.0ms
2025-10-26 16:17:03,413 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 16:17:03,416 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 16:17:03,417 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 16:17:03,423 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 16:17:03,423 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 16:17:03,424 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 10.6ms
2025-10-26 16:17:03,427 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 16:17:03,429 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 16:17:03,429 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 16:17:03,433 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 16:17:03,433 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 16:17:03,434 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.0ms
2025-10-26 16:17:21,813 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:17:21,813 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:17:21,820 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:17:21,820 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:17:21,821 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:17:21,825 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: unknown
2025-10-26 16:17:21,825 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:17:21,829 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:17:21,830 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:17:21,830 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:17:21,831 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:17:21,831 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 39
2025-10-26 16:17:21,832 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:17:21,832 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:17:21,832 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 19.4ms
2025-10-26 16:21:38,081 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:21:38,082 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:21:38,199 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:21:38,200 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:21:38,200 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:21:38,202 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 16:21:38,202 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:21:38,206 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:21:38,206 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:21:38,207 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:21:38,207 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: name 'fecha_expiracion' is not defined
Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 111, in store_refresh_token
    fecha_expiracion,
    ^^^^^^^^^^^^^^^^
NameError: name 'fecha_expiracion' is not defined
2025-10-26 16:21:38,208 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 111, in store_refresh_token
    fecha_expiracion,
    ^^^^^^^^^^^^^^^^
NameError: name 'fecha_expiracion' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 16:21:38,209 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 16:21:38,209 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 128.1ms
2025-10-26 16:27:04,000 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 16:27:04,000 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.5ms
2025-10-26 16:27:04,311 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:27:04,691 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: RefreshTokenService.store_refresh_token() got an unexpected keyword argument 'client_type'
Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
                 ~~~~^^^^^^^^^^^^^^^^^
TypeError: RefreshTokenService.store_refresh_token() got an unexpected keyword argument 'client_type'
2025-10-26 16:27:04,692 - app.api.v1.endpoints.auth - ERROR - Error almacenando refresh token: Error interno del servidor en store_refresh_token
2025-10-26 16:27:04,692 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:27:04,698 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 387.0ms
2025-10-26 16:27:04,728 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 16:27:04,730 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 16:27:04,734 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 5.8ms
2025-10-26 16:27:04,735 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 4.3ms
2025-10-26 16:27:04,740 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 16:27:04,740 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 16:27:04,741 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:27:04,742 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:27:04,752 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:27:04,752 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:27:04,801 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:27:04,801 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:27:04,803 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:27:04,804 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:27:04,821 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:27:04,821 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:27:04,822 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 82.5ms
2025-10-26 16:27:04,822 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 82.0ms
2025-10-26 16:27:04,823 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 81.6ms
2025-10-26 16:27:04,823 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 81.4ms
2025-10-26 16:27:04,826 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 16:27:04,827 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 16:27:04,827 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.4ms
2025-10-26 16:27:04,828 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:27:04,828 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:27:04,830 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:27:04,831 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:27:04,832 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:27:04,832 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:27:04,834 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:27:04,836 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:27:04,836 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:27:04,837 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 10.5ms
2025-10-26 16:27:04,838 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 9.9ms
2025-10-26 16:27:04,838 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 9.9ms
2025-10-26 16:27:04,841 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:27:04,843 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:27:04,844 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:27:04,848 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:27:04,849 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:27:04,849 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:27:04,851 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:27:04,852 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:27:04,852 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:27:04,853 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 12.3ms
2025-10-26 16:27:04,853 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-26 16:27:11,087 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 16:27:11,088 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.8ms
2025-10-26 16:27:11,090 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:27:11,090 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:27:11,097 - app.core.auth - WARNING - Refresh token no encontrado en BD para usuario_id=1
2025-10-26 16:27:11,097 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:27:11,097 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 7.6ms
2025-10-26 16:38:34,296 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 16:38:34,296 - app.main - INFO - 127.0.0.1 <- GET /docs 0.6ms
2025-10-26 16:38:34,366 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 16:38:34,422 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 56.3ms
2025-10-26 16:38:45,859 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 16:38:45,859 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.4ms
2025-10-26 16:38:46,175 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:38:46,176 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:38:46,334 - app.core.auth - WARNING - Refresh token no encontrado en BD para usuario_id=1
2025-10-26 16:38:46,334 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:38:46,335 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 159.1ms
2025-10-26 16:38:55,011 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 16:38:55,012 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.6ms
2025-10-26 16:38:55,013 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:38:57,064 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:38:57,065 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 40
2025-10-26 16:38:57,065 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 16:38:57,065 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:38:57,070 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 2057.1ms
2025-10-26 16:38:57,091 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 16:38:57,091 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.7ms
2025-10-26 16:38:57,094 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 16:38:57,095 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:38:57,100 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:38:57,100 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:38:57,153 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:38:57,154 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:38:57,154 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 60.2ms
2025-10-26 16:38:57,154 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 59.8ms
2025-10-26 16:38:57,157 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 16:38:57,157 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.6ms
2025-10-26 16:38:57,157 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:38:57,160 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:38:57,160 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:38:57,206 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:38:57,206 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:38:57,207 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 49.8ms
2025-10-26 16:38:57,208 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 16:38:57,209 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.6ms
2025-10-26 16:38:57,209 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:38:57,211 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:38:57,213 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:38:57,213 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:38:57,214 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.8ms
2025-10-26 16:38:57,215 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 16:38:57,216 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.8ms
2025-10-26 16:38:57,216 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:38:57,218 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:38:57,218 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:38:57,220 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:38:57,220 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:38:57,221 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.5ms
2025-10-26 16:38:57,222 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 16:38:57,223 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.2ms
2025-10-26 16:38:57,224 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:38:57,226 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:38:57,227 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:38:57,230 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:38:57,230 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:38:57,231 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.5ms
2025-10-26 16:38:57,233 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:38:57,235 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:38:57,236 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:38:57,236 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:38:57,236 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.3ms
2025-10-26 16:39:04,663 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:39:04,664 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:39:04,669 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:39:04,669 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:39:04,669 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:39:04,673 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 16:39:04,673 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:39:04,677 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:39:04,677 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:39:04,677 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:39:04,679 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:39:04,679 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 41
2025-10-26 16:39:04,680 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:39:04,680 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:39:04,680 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 17.0ms
2025-10-26 16:40:00,685 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:40:00,686 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:40:02,540 - app.core.auth - WARNING - Refresh token no encontrado en BD para usuario_id=1
2025-10-26 16:40:02,541 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 16:40:02,541 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1856.0ms
2025-10-26 16:40:08,234 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 16:40:08,477 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:40:08,478 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 42
2025-10-26 16:40:08,478 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 16:40:08,478 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 16:40:08,482 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 247.5ms
2025-10-26 16:40:08,496 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:40:08,504 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:40:08,504 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:40:08,548 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:40:08,548 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:40:08,549 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 52.2ms
2025-10-26 16:40:08,551 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:40:08,552 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:40:08,553 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:40:08,575 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:40:08,575 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:40:08,576 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 25.3ms
2025-10-26 16:40:08,578 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:40:08,580 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:40:08,581 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:40:08,581 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:40:08,582 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.9ms
2025-10-26 16:40:08,583 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 16:40:08,585 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 16:40:08,585 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 16:40:08,586 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 16:40:08,586 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 16:40:08,586 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.2ms
2025-10-26 16:40:08,588 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 16:40:08,590 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 16:40:08,590 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 16:40:08,594 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 16:40:08,595 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 16:40:08,595 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.3ms
2025-10-26 16:40:08,597 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 16:40:08,599 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 16:40:08,600 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 16:40:08,600 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 16:40:08,601 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-26 16:40:15,409 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 16:40:15,410 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 16:40:15,412 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 16:40:15,412 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 16:40:15,412 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 16:40:15,417 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 16:40:15,417 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 16:40:15,422 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 16:40:15,423 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 16:40:15,423 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 16:40:15,424 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 16:40:15,425 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 43
2025-10-26 16:40:15,425 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 16:40:15,425 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 16:40:15,426 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 16.6ms
2025-10-26 18:11:22,700 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 18:11:22,700 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 18:11:23,004 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:11:23,004 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:11:23,041 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 18:11:23,041 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:11:23,041 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 18:11:23,044 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 18:11:23,044 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 18:11:23,049 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:11:23,049 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:11:23,049 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 18:11:23,075 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:11:23,075 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 44
2025-10-26 18:11:23,075 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 18:11:23,076 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:11:23,076 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 71.9ms
2025-10-26 18:11:31,795 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:11:31,796 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:11:31,798 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 18:11:31,799 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:11:31,799 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 18:11:31,800 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 18:11:31,800 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 18:11:31,802 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:11:31,803 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:11:31,803 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 18:11:31,805 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:11:31,806 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 45
2025-10-26 18:11:31,806 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 18:11:31,807 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:11:31,807 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.9ms
2025-10-26 18:14:25,375 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:14:25,376 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:14:26,069 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 18:14:26,069 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:14:26,069 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 18:14:26,072 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 18:14:26,072 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 18:14:26,074 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:14:26,075 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:14:26,075 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 18:14:26,079 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:14:26,079 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 46
2025-10-26 18:14:26,079 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 18:14:26,080 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:14:26,080 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 704.7ms
2025-10-26 18:14:26,391 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 18:14:26,392 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.5ms
2025-10-26 18:14:26,394 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:14:26,396 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:14:26,404 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.9ms
2025-10-26 18:14:37,205 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:14:37,206 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:14:37,209 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 18:14:37,209 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:14:37,209 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 18:14:37,210 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 18:14:37,210 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 18:14:37,215 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:14:37,216 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:14:37,217 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 18:14:37,219 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:14:37,220 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 47
2025-10-26 18:14:37,221 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 18:14:37,221 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:14:37,222 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 16.4ms
2025-10-26 18:14:37,224 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:14:37,224 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:14:37,226 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 18:14:37,226 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 18:14:37,227 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 18:14:47,382 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 18:14:47,383 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.6ms
2025-10-26 18:14:47,385 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 18:14:47,600 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:14:47,600 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 48
2025-10-26 18:14:47,601 - app.api.v1.endpoints.auth - INFO - [LOGIN] Token almacenado en BD para usuario: admin
2025-10-26 18:14:47,601 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 18:14:47,601 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 216.7ms
2025-10-26 18:14:47,626 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 18:14:47,627 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.0ms
2025-10-26 18:14:47,630 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 18:14:47,631 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:14:47,639 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:14:47,639 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:14:47,691 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:14:47,691 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:14:47,692 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 61.4ms
2025-10-26 18:14:47,692 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 60.7ms
2025-10-26 18:14:47,694 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 18:14:47,694 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.4ms
2025-10-26 18:14:47,694 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:14:47,697 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:14:47,698 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:14:47,721 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:14:47,721 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:14:47,721 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 27.0ms
2025-10-26 18:14:47,723 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 18:14:47,723 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.8ms
2025-10-26 18:14:47,724 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:14:47,725 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:14:47,727 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:14:47,727 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:14:47,728 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.2ms
2025-10-26 18:14:47,729 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 18:14:47,730 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.0ms
2025-10-26 18:14:47,730 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:14:47,733 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:14:47,733 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:14:47,734 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:14:47,734 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:14:47,735 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.0ms
2025-10-26 18:14:47,736 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 18:14:47,737 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.6ms
2025-10-26 18:14:47,737 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:14:47,739 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:14:47,739 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:14:47,743 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:14:47,743 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:14:47,744 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.8ms
2025-10-26 18:14:47,745 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:14:47,748 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:14:47,749 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:14:47,749 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:14:47,750 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-26 18:14:50,740 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:14:50,741 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:14:50,743 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 18:14:50,743 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:14:50,743 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 18:14:50,744 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 18:14:50,744 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 18:14:50,745 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:14:50,746 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:14:50,746 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 18:14:50,747 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:14:50,748 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 49
2025-10-26 18:14:50,748 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 18:14:50,748 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:14:50,749 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:14:50,750 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:14:50,752 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 18:14:50,752 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 18:14:50,753 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.6ms
2025-10-26 18:14:50,753 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.1ms
2025-10-26 18:15:53,592 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:15:53,593 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:15:53,626 - app.core.auth - INFO - Refresh token válido en BD para usuario_id=1
2025-10-26 18:15:53,626 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:15:53,626 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] JWT validado para usuario: admin
2025-10-26 18:15:53,629 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Dispositivo: web
2025-10-26 18:15:53,629 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token validado en BD para usuario: admin
2025-10-26 18:15:53,632 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:15:53,632 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:15:53,632 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token antiguo revocado para usuario: admin
2025-10-26 18:15:53,636 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:15:53,636 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Dispositivo: web - Token ID: 50
2025-10-26 18:15:53,637 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Nuevo token almacenado para usuario: admin
2025-10-26 18:15:53,637 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:15:53,637 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:15:53,638 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Iniciando proceso de refresh
2025-10-26 18:15:53,639 - app.core.auth - WARNING - Refresh token revocado para usuario_id=1
2025-10-26 18:15:53,639 - app.core.auth - WARNING - [REFRESH] Token inválido o revocado para usuario: admin
2025-10-26 18:15:53,639 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 47.5ms
2025-10-26 18:15:53,639 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.2ms
2025-10-26 18:16:02,955 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:03,075 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:03,076 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:03,077 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:03,078 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:03,080 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:03,080 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:03,080 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 124.8ms
2025-10-26 18:16:03,082 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:03,083 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:03,085 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:03,085 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:03,086 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:03,087 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:03,087 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:03,088 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.9ms
2025-10-26 18:16:03,091 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:16:03,093 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:16:03,110 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 19.7ms
2025-10-26 18:16:07,306 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:07,307 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:07,309 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:07,310 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:07,311 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:07,312 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:07,313 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:07,313 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:07,315 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:07,317 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:07,317 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:07,318 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:07,319 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:07,319 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:07,320 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.8ms
2025-10-26 18:16:07,320 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.3ms
2025-10-26 18:16:07,326 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:16:07,328 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:16:07,330 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.4ms
2025-10-26 18:16:13,527 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:13,527 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:13,529 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:13,531 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:13,531 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:13,532 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:13,534 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:13,534 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:13,535 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:13,537 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:13,537 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:13,538 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:13,539 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:13,540 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:13,540 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.1ms
2025-10-26 18:16:13,540 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.9ms
2025-10-26 18:16:13,545 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:16:13,547 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:16:13,548 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.2ms
2025-10-26 18:16:18,395 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:18,395 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:18,397 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:18,399 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:18,399 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:18,400 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:18,402 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:18,402 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:18,404 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:18,406 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:18,406 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:18,407 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:18,409 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:18,409 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:18,409 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.3ms
2025-10-26 18:16:18,409 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.0ms
2025-10-26 18:16:18,414 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:16:18,415 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:16:18,417 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.3ms
2025-10-26 18:16:27,798 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 18:16:28,030 - app.db.queries - ERROR - Error en execute_insert: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'expires_at'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'client_type'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'created_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:28,030 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'expires_at'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'client_type'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'created_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:28,031 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'expires_at'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'client_type'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'created_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:28,033 - app.api.v1.endpoints.auth - ERROR - Error almacenando refresh token: Error interno del servidor en store_refresh_token
2025-10-26 18:16:28,033 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 18:16:28,034 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 235.3ms
2025-10-26 18:16:28,053 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:28,061 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:28,062 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:28,098 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:28,098 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:28,099 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 45.6ms
2025-10-26 18:16:28,100 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:28,102 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:28,103 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:28,121 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:28,121 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:28,121 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 21.0ms
2025-10-26 18:16:28,123 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:28,126 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:28,128 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:28,128 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:28,129 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.4ms
2025-10-26 18:16:28,131 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:28,133 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:28,133 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:28,134 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:28,134 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:28,135 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.0ms
2025-10-26 18:16:28,137 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:28,139 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:28,139 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:28,144 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:28,145 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:28,145 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.5ms
2025-10-26 18:16:28,147 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:28,149 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:28,150 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:28,150 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:28,150 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.3ms
2025-10-26 18:16:35,261 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:35,263 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:37,341 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:37,348 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:37,348 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:37,349 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:37,351 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:37,351 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:37,353 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:37,353 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:37,354 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:37,355 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:37,356 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:37,356 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:37,356 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2095.0ms
2025-10-26 18:16:37,357 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2093.9ms
2025-10-26 18:16:37,361 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:16:37,363 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:16:37,377 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 16.4ms
2025-10-26 18:16:37,393 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:37,397 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:37,397 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:37,450 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:37,451 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:37,451 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:37,451 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:37,453 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:37,455 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:37,455 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:37,457 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:37,457 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:37,487 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:37,487 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:37,488 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 94.9ms
2025-10-26 18:16:37,488 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 37.0ms
2025-10-26 18:16:37,488 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 36.8ms
2025-10-26 18:16:37,491 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:37,493 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:37,493 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:37,494 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:37,494 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:37,495 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:37,496 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:37,497 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:37,497 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:37,498 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:37,498 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 7.6ms
2025-10-26 18:16:37,500 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:37,500 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:37,504 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:37,504 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:37,505 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.3ms
2025-10-26 18:16:37,506 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.8ms
2025-10-26 18:16:44,036 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:44,037 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:44,039 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:44,040 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:44,040 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:44,041 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:44,042 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:44,042 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:44,044 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:44,045 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:44,045 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:44,046 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:44,047 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:44,047 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:44,048 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.2ms
2025-10-26 18:16:44,048 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.0ms
2025-10-26 18:16:44,052 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:16:44,053 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:16:44,054 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.5ms
2025-10-26 18:16:44,068 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:44,071 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:44,071 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:44,072 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:44,072 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:44,073 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:44,075 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:44,075 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:44,078 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:44,079 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:44,079 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 10.8ms
2025-10-26 18:16:44,080 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.0ms
2025-10-26 18:16:44,082 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:44,084 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:44,085 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:44,085 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:44,085 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-26 18:16:44,086 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:44,087 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:44,087 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:44,088 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:44,089 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:44,090 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.0ms
2025-10-26 18:16:44,092 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:44,094 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:44,094 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:44,098 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:44,098 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:44,099 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.8ms
2025-10-26 18:16:44,099 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:44,101 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:44,102 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:44,102 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:44,103 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-26 18:16:50,646 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:50,646 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:16:50,648 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:50,649 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:50,649 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:50,650 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:50,651 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:50,651 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:50,653 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:16:50,657 - app.db.queries - ERROR - Error en execute_update: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-10-26 18:16:50,657 - app.services.refresh_token_service - ERROR - Error inesperado revocando token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:50,659 - app.services.base_service - ERROR - ERROR INESPERADO en revoke_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 91, in execute_update
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'is_revoked'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'revoked_at'. (207); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 223, in revoke_token
    result = execute_update(REVOKE_REFRESH_TOKEN, (token_hash,))
  File "D:\base_fastapi\app\db\queries.py", line 115, in execute_update
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la actualización: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 239, in revoke_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al revocar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:16:50,660 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en revoke_token
2025-10-26 18:16:50,660 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:16:50,661 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.2ms
2025-10-26 18:16:50,661 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.7ms
2025-10-26 18:16:50,668 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:16:50,670 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:16:50,671 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.1ms
2025-10-26 18:16:50,690 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:50,693 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:50,694 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:50,695 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:50,696 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:50,696 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:50,699 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:50,699 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:50,702 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:50,703 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:50,703 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 12.8ms
2025-10-26 18:16:50,703 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.2ms
2025-10-26 18:16:50,705 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:50,707 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:50,708 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:50,708 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:50,709 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:16:50,709 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.9ms
2025-10-26 18:16:50,711 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:16:50,711 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:16:50,712 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:16:50,712 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:16:50,714 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 18:16:50,715 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:16:50,718 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:16:50,718 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:16:50,721 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:16:50,721 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:16:50,722 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:16:50,722 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.1ms
2025-10-26 18:16:50,724 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:16:50,725 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:16:50,725 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:16:50,726 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-26 18:18:02,295 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-26 18:18:02,295 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.6ms
2025-10-26 18:18:02,614 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-26 18:18:02,625 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 18:18:02,625 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:18:02,626 - app.api.v1.endpoints.auth - WARNING - [LOGOUT-WEB] Token no encontrado en BD
2025-10-26 18:18:02,626 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 12.5ms
2025-10-26 18:18:24,186 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:18:24,186 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:18:24,188 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:18:24,188 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:18:24,188 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 18:18:24,189 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-26 18:19:39,290 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:19:39,291 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:19:39,292 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:19:39,292 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:19:39,292 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.8ms
2025-10-26 18:19:39,292 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.4ms
2025-10-26 18:19:55,214 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 18:19:55,519 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:19:55,519 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 1
2025-10-26 18:19:55,519 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 18:19:55,524 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 309.5ms
2025-10-26 18:19:55,544 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:19:55,550 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:19:55,551 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:19:55,582 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:19:55,582 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:19:55,583 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 38.7ms
2025-10-26 18:19:55,585 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:19:55,587 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:19:55,587 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:19:55,595 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:19:55,596 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:19:55,596 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.5ms
2025-10-26 18:19:55,599 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:19:55,602 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:19:55,604 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:19:55,605 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:19:55,605 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.1ms
2025-10-26 18:19:55,608 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:19:55,610 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:19:55,611 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:19:55,612 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:19:55,612 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:19:55,613 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.2ms
2025-10-26 18:19:55,614 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:19:55,617 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:19:55,617 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:19:55,621 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:19:55,621 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:19:55,622 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.4ms
2025-10-26 18:19:55,624 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:19:55,626 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:19:55,627 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:19:55,627 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:19:55,627 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.5ms
2025-10-26 18:20:04,296 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:04,297 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:04,301 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:04,307 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:04,308 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:04,309 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:20:04,309 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 2
2025-10-26 18:20:04,310 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:04,311 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:04,312 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:04,313 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:04,314 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c71c16eed9d091c02642e83dccfc51307c159e4b923a0e2b6b2ba53c54c0d7dc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 18:20:04,314 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c71c16eed9d091c02642e83dccfc51307c159e4b923a0e2b6b2ba53c54c0d7dc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:04,317 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c71c16eed9d091c02642e83dccfc51307c159e4b923a0e2b6b2ba53c54c0d7dc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:04,318 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 18:20:04,319 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:04,319 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 22.7ms
2025-10-26 18:20:04,319 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 22.2ms
2025-10-26 18:20:04,323 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:20:04,325 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:20:04,326 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.3ms
2025-10-26 18:20:04,341 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:04,344 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:04,344 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:04,345 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:04,345 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:04,346 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:04,346 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:04,348 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:04,349 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:04,349 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:04,352 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:04,352 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:04,355 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:04,355 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:04,355 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 14.1ms
2025-10-26 18:20:04,356 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.2ms
2025-10-26 18:20:04,356 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.1ms
2025-10-26 18:20:04,358 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:04,360 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:04,361 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:04,362 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:04,362 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:04,362 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:04,365 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:04,366 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:04,366 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:04,367 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:04,367 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 9.1ms
2025-10-26 18:20:04,369 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:04,369 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:04,373 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:04,373 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:04,373 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.8ms
2025-10-26 18:20:04,374 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.9ms
2025-10-26 18:20:15,540 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:15,541 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:15,543 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:15,547 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:15,547 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:15,548 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:20:15,549 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 4
2025-10-26 18:20:15,549 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:15,550 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:15,551 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:15,552 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:15,552 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (e14ed6bbb2c1a2aa10868c3a0ed660765c5fd513adbe139bc6379f693e7d2884). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 18:20:15,553 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (e14ed6bbb2c1a2aa10868c3a0ed660765c5fd513adbe139bc6379f693e7d2884). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:15,554 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (e14ed6bbb2c1a2aa10868c3a0ed660765c5fd513adbe139bc6379f693e7d2884). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:15,555 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 18:20:15,556 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:15,556 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 16.0ms
2025-10-26 18:20:15,556 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.4ms
2025-10-26 18:20:15,562 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:20:15,564 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:20:15,565 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.2ms
2025-10-26 18:20:15,585 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:15,587 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:15,587 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:15,589 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:15,589 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:15,589 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:15,592 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:15,593 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:15,597 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:15,598 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:15,598 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 13.4ms
2025-10-26 18:20:15,599 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.1ms
2025-10-26 18:20:15,601 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:15,603 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:15,605 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:15,605 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:15,606 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-26 18:20:15,606 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:15,609 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:15,609 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:15,611 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:15,611 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:15,612 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.8ms
2025-10-26 18:20:15,614 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:15,617 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:15,617 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:15,620 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:15,621 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:15,621 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.7ms
2025-10-26 18:20:15,622 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:15,624 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:15,625 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:15,625 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:15,627 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.9ms
2025-10-26 18:20:24,389 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:24,390 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:24,392 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:24,393 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:24,394 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:24,396 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:20:24,397 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 6
2025-10-26 18:20:24,397 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:24,400 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:24,402 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:24,403 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:24,404 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c4e9ce58e5daef6c12b5f4575aa7c62e769e6fcbb8ab2a26ae7becaa1f1b6cb0). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 18:20:24,405 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c4e9ce58e5daef6c12b5f4575aa7c62e769e6fcbb8ab2a26ae7becaa1f1b6cb0). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:24,406 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (c4e9ce58e5daef6c12b5f4575aa7c62e769e6fcbb8ab2a26ae7becaa1f1b6cb0). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:24,408 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 18:20:24,408 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:24,408 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 19.5ms
2025-10-26 18:20:24,409 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 19.1ms
2025-10-26 18:20:24,413 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:20:24,415 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:20:24,417 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.5ms
2025-10-26 18:20:24,433 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:24,436 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:24,436 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:24,438 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:24,438 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:24,438 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:24,438 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:24,440 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:24,440 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:24,443 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:24,444 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:24,445 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:24,446 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:24,446 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:24,447 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 13.5ms
2025-10-26 18:20:24,447 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.8ms
2025-10-26 18:20:24,447 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 8.6ms
2025-10-26 18:20:24,450 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:24,453 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:24,453 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:24,454 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:24,454 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:24,455 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.2ms
2025-10-26 18:20:24,456 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:24,456 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:24,458 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:24,459 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:24,459 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:24,461 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:24,461 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:24,467 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:24,467 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:24,469 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 12.8ms
2025-10-26 18:20:24,469 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 13.0ms
2025-10-26 18:20:35,517 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:35,520 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:35,521 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:35,521 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:35,522 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:20:35,523 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 8
2025-10-26 18:20:35,523 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:35,524 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.4ms
2025-10-26 18:20:35,525 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:35,528 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:20:35,530 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:35,531 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:35,532 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (fab4e0f5cddcee4133aa0bfa82fe31059ff4c9593b15fcf1fcec4e7e3bf2af0d). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 18:20:35,533 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (fab4e0f5cddcee4133aa0bfa82fe31059ff4c9593b15fcf1fcec4e7e3bf2af0d). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:35,534 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (fab4e0f5cddcee4133aa0bfa82fe31059ff4c9593b15fcf1fcec4e7e3bf2af0d). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:20:35,535 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 18:20:35,535 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:20:35,536 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.2ms
2025-10-26 18:20:35,540 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:20:35,542 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:20:35,543 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.2ms
2025-10-26 18:20:35,560 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:35,563 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:35,563 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:35,564 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:35,565 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:35,565 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.6ms
2025-10-26 18:20:35,567 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:35,569 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:35,570 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:35,573 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:35,573 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:35,574 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.9ms
2025-10-26 18:20:35,577 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:35,580 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:35,581 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:35,581 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:35,581 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-26 18:20:35,583 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:20:35,585 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:20:35,585 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:20:35,587 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:20:35,587 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:20:35,588 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.2ms
2025-10-26 18:20:35,589 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:20:35,591 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:20:35,592 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:20:35,597 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:20:35,598 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:20:35,598 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 9.2ms
2025-10-26 18:20:35,600 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:20:35,602 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:20:35,603 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:20:35,603 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:20:35,603 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.1ms
2025-10-26 18:20:39,400 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-26 18:20:39,402 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:20:39,402 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:20:39,402 - app.api.v1.endpoints.auth - WARNING - [LOGOUT-WEB] Token no encontrado en BD
2025-10-26 18:20:39,403 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 2.7ms
2025-10-26 18:20:45,450 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:45,451 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:45,452 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:20:45,452 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:20:45,454 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.6ms
2025-10-26 18:20:45,455 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.6ms
2025-10-26 18:20:48,989 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:48,990 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:48,991 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:20:48,992 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:20:48,992 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 18:20:48,993 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.5ms
2025-10-26 18:20:55,490 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:55,491 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:20:55,492 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:20:55,492 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:20:55,492 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.2ms
2025-10-26 18:20:55,493 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.8ms
2025-10-26 18:21:13,726 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:21:13,727 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:21:13,728 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.6ms
2025-10-26 18:21:13,730 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:21:13,731 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:21:13,731 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.5ms
2025-10-26 18:21:18,222 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:21:18,222 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:21:18,225 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:21:18,225 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:21:18,225 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.9ms
2025-10-26 18:21:18,226 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.4ms
2025-10-26 18:21:20,987 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:21:20,988 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:21:20,989 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:21:20,989 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:21:20,990 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.3ms
2025-10-26 18:21:20,990 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.0ms
2025-10-26 18:23:00,829 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 18:23:00,829 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 18:23:00,830 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.8ms
2025-10-26 18:23:00,830 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.6ms
2025-10-26 18:23:01,147 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:23:01,148 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:23:01,149 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:23:01,149 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 18:23:01,149 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.1ms
2025-10-26 18:23:01,149 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.7ms
2025-10-26 18:23:25,574 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 18:23:25,798 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:23:25,798 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 10
2025-10-26 18:23:25,798 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 18:23:25,799 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 224.3ms
2025-10-26 18:23:25,813 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:23:25,820 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:23:25,820 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:23:25,852 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:23:25,852 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:23:25,853 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 40.1ms
2025-10-26 18:23:25,855 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:23:25,857 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:25,857 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:23:25,866 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:23:25,866 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:23:25,867 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.8ms
2025-10-26 18:23:25,869 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:23:25,871 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:23:25,873 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:23:25,873 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:23:25,874 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.0ms
2025-10-26 18:23:25,876 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:23:25,878 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:23:25,878 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:23:25,880 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:23:25,880 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:23:25,880 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.3ms
2025-10-26 18:23:25,882 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:23:25,885 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:25,885 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:23:25,889 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:23:25,889 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:23:25,890 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.7ms
2025-10-26 18:23:25,892 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:23:25,894 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:23:25,894 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:23:25,895 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:23:25,895 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.5ms
2025-10-26 18:23:30,998 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 18:23:30,999 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.9ms
2025-10-26 18:23:31,001 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 18:23:31,002 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:23:31,004 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:31,004 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:23:31,012 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:23:31,013 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 11.9ms
2025-10-26 18:23:31,013 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 11.8ms
2025-10-26 18:23:31,015 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:23:31,017 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:31,018 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:23:31,021 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:23:31,021 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.8ms
2025-10-26 18:23:35,464 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 18:23:35,465 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 0.9ms
2025-10-26 18:23:35,465 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 18:23:35,466 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 1.1ms
2025-10-26 18:23:35,468 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:23:35,470 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:23:35,471 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:23:35,477 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:23:35,477 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:23:35,478 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 10.1ms
2025-10-26 18:23:35,480 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:23:35,482 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:23:35,483 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:23:35,485 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:23:35,486 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:23:35,486 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 6.1ms
2025-10-26 18:23:36,301 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-10-26 18:23:36,302 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 0.6ms
2025-10-26 18:23:36,304 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:23:36,307 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:23:36,307 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:23:36,310 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:23:36,311 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:23:36,311 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 6.9ms
2025-10-26 18:23:36,313 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:23:36,317 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:23:36,317 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:23:36,318 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:23:36,318 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:23:36,319 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 5.8ms
2025-10-26 18:23:55,423 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:23:55,425 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:55,426 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:23:55,431 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:23:55,432 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 8.7ms
2025-10-26 18:23:55,434 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:23:55,436 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:55,436 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:23:55,440 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:23:55,440 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.6ms
2025-10-26 18:23:56,756 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:23:56,759 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:23:56,759 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:23:56,763 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:23:56,763 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:23:56,764 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 8.1ms
2025-10-26 18:23:56,767 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:23:56,770 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:23:56,771 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:23:56,774 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:23:56,774 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:23:56,775 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.9ms
2025-10-26 18:23:57,704 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:23:57,706 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:23:57,706 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:23:57,707 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:23:57,707 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:23:57,707 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 3.9ms
2025-10-26 18:23:57,710 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:23:57,712 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:23:57,713 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:23:57,713 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:23:57,714 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:23:57,714 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.7ms
2025-10-26 18:23:58,824 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:23:58,826 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:58,826 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:23:58,830 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:23:58,830 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.5ms
2025-10-26 18:23:58,832 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:23:58,835 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:58,835 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:23:58,838 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:23:58,838 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.7ms
2025-10-26 18:23:59,387 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:23:59,389 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:59,390 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:23:59,394 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:23:59,394 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:23:59,395 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.2ms
2025-10-26 18:23:59,396 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:23:59,398 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:23:59,399 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:23:59,399 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:23:59,400 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.5ms
2025-10-26 18:23:59,401 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 18:23:59,404 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:23:59,405 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 18:23:59,409 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 18:23:59,409 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 18:23:59,410 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.8ms
2025-10-26 18:23:59,410 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 18:23:59,413 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 18:23:59,413 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 18:23:59,413 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 18:23:59,414 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-26 18:24:00,777 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:24:00,779 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:24:00,780 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:24:00,783 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:24:00,783 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.0ms
2025-10-26 18:24:00,785 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:24:00,788 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:24:00,788 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:24:00,791 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:24:00,792 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 6.4ms
2025-10-26 18:24:01,393 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:24:01,398 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:24:01,398 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:24:01,404 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:24:01,404 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:24:01,405 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 12.5ms
2025-10-26 18:24:01,407 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:24:01,410 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:24:01,410 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:24:01,414 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:24:01,414 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:24:01,414 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.0ms
2025-10-26 18:24:01,955 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:24:01,958 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:24:01,958 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:24:01,959 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:24:01,959 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:24:01,959 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 3.9ms
2025-10-26 18:24:01,961 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:24:01,964 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:24:01,964 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:24:01,965 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:24:01,965 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:24:01,966 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.5ms
2025-10-26 18:24:02,555 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:24:02,558 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:24:02,558 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:24:02,561 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:24:02,561 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:24:02,562 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 6.7ms
2025-10-26 18:24:02,564 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 18:24:02,567 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 18:24:02,567 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 18:24:02,570 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 18:24:02,570 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 18:24:02,571 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.0ms
2025-10-26 18:24:03,374 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:24:03,377 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:24:03,377 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:24:03,378 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:24:03,378 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:24:03,379 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.2ms
2025-10-26 18:24:03,381 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 18:24:03,383 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 18:24:03,383 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 18:24:03,384 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 18:24:03,385 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 18:24:03,385 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.7ms
2025-10-26 18:24:05,603 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:24:05,606 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:24:05,606 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:24:05,610 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:24:05,611 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.6ms
2025-10-26 18:24:05,613 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 18:24:05,615 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 18:24:05,616 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 18:24:05,618 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 18:24:05,618 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.5ms
2025-10-26 18:24:06,725 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:24:06,727 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:24:06,728 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:24:06,729 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:24:06,729 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:24:06,730 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 18:24:06,731 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:24:06,733 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:24:06,734 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:24:06,735 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:24:06,735 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:24:06,735 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.1ms
2025-10-26 18:24:07,042 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-26 18:24:07,042 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/autorizacion/pendientes/
2025-10-26 18:24:07,043 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 0.9ms
2025-10-26 18:24:07,043 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/autorizacion/pendientes/ 0.8ms
2025-10-26 18:24:07,045 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:24:07,045 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:24:07,197 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:24:07,245 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 199.5ms
2025-10-26 18:24:07,247 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:24:07,247 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:24:07,317 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:24:07,356 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 109.3ms
2025-10-26 18:24:09,443 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:24:09,444 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:24:09,447 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:24:09,451 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:24:09,451 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:24:09,452 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:24:09,453 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 11
2025-10-26 18:24:09,453 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:24:09,455 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:24:09,456 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:24:09,456 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:24:09,457 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (22ffd77d52756b1e963dac8ea38c2931dd093bdc96c224b189bde3a239fc41a5). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 18:24:09,458 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (22ffd77d52756b1e963dac8ea38c2931dd093bdc96c224b189bde3a239fc41a5). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:24:09,459 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (22ffd77d52756b1e963dac8ea38c2931dd093bdc96c224b189bde3a239fc41a5). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:24:09,460 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 18:24:09,461 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:24:09,461 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 18.0ms
2025-10-26 18:24:09,461 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 17.5ms
2025-10-26 18:24:09,465 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:24:09,468 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:24:09,469 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.4ms
2025-10-26 18:24:09,483 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:24:09,485 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:24:09,485 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:24:09,486 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:24:09,487 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:24:09,487 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:24:09,487 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:24:09,559 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:24:09,614 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 130.9ms
2025-10-26 18:24:09,615 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 127.6ms
2025-10-26 18:24:09,617 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:24:09,619 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:24:09,619 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:24:09,621 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:24:09,621 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:24:09,621 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.5ms
2025-10-26 18:24:09,622 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:24:09,623 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:24:09,702 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:24:09,753 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 130.9ms
2025-10-26 18:27:26,147 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:27:26,147 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:27:26,183 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:27:26,187 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:27:26,188 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:27:26,192 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:27:26,192 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 13
2025-10-26 18:27:26,192 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:27:26,194 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:27:26,195 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:27:26,195 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:27:26,196 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (8a8303d3475284d9758fcf5f1814a63e50d00836d04e4a1be8b9be5dc63f2f03). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 18:27:26,196 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (8a8303d3475284d9758fcf5f1814a63e50d00836d04e4a1be8b9be5dc63f2f03). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:27:26,198 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (8a8303d3475284d9758fcf5f1814a63e50d00836d04e4a1be8b9be5dc63f2f03). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:27:26,199 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 18:27:26,200 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:27:26,200 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 53.4ms
2025-10-26 18:27:26,200 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 53.0ms
2025-10-26 18:27:26,517 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 18:27:26,517 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.4ms
2025-10-26 18:27:26,519 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:27:26,521 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:27:26,533 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 14.5ms
2025-10-26 18:27:26,548 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 18:27:26,550 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.2ms
2025-10-26 18:27:26,550 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:27:26,550 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:27:26,732 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:27:26,772 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 222.3ms
2025-10-26 18:27:26,774 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 18:27:26,775 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.6ms
2025-10-26 18:27:26,775 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:27:26,781 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:27:26,781 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:27:26,819 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:27:26,819 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:27:26,819 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:27:26,820 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:27:26,890 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:27:26,942 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 166.9ms
2025-10-26 18:27:26,943 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 123.5ms
2025-10-26 18:27:26,945 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:27:26,948 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:27:26,948 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:27:26,950 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:27:26,950 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:27:26,951 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.2ms
2025-10-26 18:27:33,036 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:27:33,036 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 18:27:38,953 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:27:38,973 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:27:38,973 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:27:38,982 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 18:27:38,983 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 15
2025-10-26 18:27:38,983 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:27:38,984 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 18:27:38,985 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 18:27:38,985 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 18:27:38,986 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (dc745cf673cfb212b5dfbb7e2e21c9e7bbced6080d77a07d326b31cf0b9b8854). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 18:27:38,987 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (dc745cf673cfb212b5dfbb7e2e21c9e7bbced6080d77a07d326b31cf0b9b8854). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:27:38,988 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (dc745cf673cfb212b5dfbb7e2e21c9e7bbced6080d77a07d326b31cf0b9b8854). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 18:27:38,989 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 18:27:38,989 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 18:27:38,989 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5953.4ms
2025-10-26 18:27:38,990 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5953.2ms
2025-10-26 18:27:38,995 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 18:27:38,997 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 18:27:39,005 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 10.3ms
2025-10-26 18:27:39,019 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:27:39,024 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:27:39,024 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:27:39,064 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:27:39,064 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:27:39,065 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:27:39,065 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:27:39,254 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:27:39,293 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 274.2ms
2025-10-26 18:27:39,294 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 228.7ms
2025-10-26 18:27:39,296 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 18:27:39,298 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 18:27:39,299 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 18:27:39,300 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 18:27:39,300 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 18:27:39,301 - app.main - INFO - 127.0.0.1 -> GET /api/v1/autorizacion/pendientes/
2025-10-26 18:27:39,301 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.3ms
2025-10-26 18:27:39,302 - app.services.autorizacion_service - INFO - Ejecutando SP sp_pendiente_autorizacion para obtener pendientes
2025-10-26 18:27:39,374 - app.services.autorizacion_service - INFO - Se obtuvieron 1634 registros pendientes de autorización
2025-10-26 18:27:39,417 - app.main - INFO - 127.0.0.1 <- GET /api/v1/autorizacion/pendientes/ 116.5ms
2025-10-26 19:19:29,613 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 19:19:29,614 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 19:19:29,614 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-26 19:19:29,614 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 19:19:29,920 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:19:29,921 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:19:30,073 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:19:30,074 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:19:30,078 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:19:30,081 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:19:30,081 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:19:30,084 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:19:30,084 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 17
2025-10-26 19:19:30,084 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:19:30,086 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:19:30,086 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:19:30,086 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:19:30,086 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 165.9ms
2025-10-26 19:19:30,086 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 165.2ms
2025-10-26 19:19:48,914 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:19:48,916 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:19:48,916 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:19:48,917 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:19:48,919 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:19:48,919 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:19:48,921 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:19:48,921 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 18
2025-10-26 19:19:48,922 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:19:48,922 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.7ms
2025-10-26 19:19:48,924 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:19:48,927 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:19:48,927 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:19:48,927 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:19:48,928 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.3ms
2025-10-26 19:20:00,045 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 19:20:00,046 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.6ms
2025-10-26 19:20:00,048 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 19:20:00,301 - app.services.refresh_token_service - INFO - [SESSIONS] Usuario 1 tiene 1 sesiones activas
2025-10-26 19:20:00,303 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:20:00,304 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 19
2025-10-26 19:20:00,304 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 19:20:00,308 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 260.9ms
2025-10-26 19:20:00,328 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 19:20:00,329 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.5ms
2025-10-26 19:20:00,332 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 19:20:00,333 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:20:00,339 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:20:00,340 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:20:00,388 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:20:00,389 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:20:00,389 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 57.2ms
2025-10-26 19:20:00,389 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 56.7ms
2025-10-26 19:20:00,391 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 19:20:00,392 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.7ms
2025-10-26 19:20:00,392 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:20:00,394 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:20:00,394 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:20:00,406 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:20:00,406 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:20:00,407 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 14.9ms
2025-10-26 19:20:00,408 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 19:20:00,409 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.8ms
2025-10-26 19:20:00,409 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:20:00,411 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:20:00,413 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:20:00,413 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:20:00,414 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.9ms
2025-10-26 19:20:00,415 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 19:20:00,416 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.8ms
2025-10-26 19:20:00,416 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:20:00,418 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:20:00,418 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:20:00,420 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:20:00,420 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:20:00,421 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.0ms
2025-10-26 19:20:00,422 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 19:20:00,423 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.3ms
2025-10-26 19:20:00,424 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:20:00,426 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:20:00,426 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:20:00,430 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:20:00,430 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:20:00,430 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.4ms
2025-10-26 19:20:00,432 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:20:00,434 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:20:00,435 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:20:00,435 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:20:00,436 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.5ms
2025-10-26 19:20:05,394 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:20:05,395 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:20:05,398 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:20:05,398 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:20:05,399 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:20:05,400 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:20:05,401 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:20:05,405 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:20:05,406 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 20
2025-10-26 19:20:05,406 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:20:05,409 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:20:05,409 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:20:05,409 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:20:05,409 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.0ms
2025-10-26 19:20:05,410 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.3ms
2025-10-26 19:20:56,081 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:20:56,087 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:20:56,087 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:20:56,102 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:20:56,104 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:20:56,105 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:20:56,109 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:20:56,109 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 21
2025-10-26 19:20:56,110 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:20:56,110 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 29.3ms
2025-10-26 19:20:56,113 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 19:20:56,114 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.3ms
2025-10-26 19:20:56,115 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:20:56,117 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:20:56,123 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 8.2ms
2025-10-26 19:21:18,514 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:21:18,514 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:21:18,602 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:21:18,602 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:21:18,603 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:21:18,604 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:21:18,604 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:21:18,605 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:21:18,605 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 22
2025-10-26 19:21:18,605 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:21:18,606 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:21:18,606 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:21:18,606 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:21:18,606 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 92.8ms
2025-10-26 19:21:18,607 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 92.5ms
2025-10-26 19:21:27,422 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:21:30,874 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:21:30,874 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:21:30,898 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:21:30,903 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:21:30,903 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:21:30,907 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:21:30,907 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 23
2025-10-26 19:21:30,908 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:21:30,908 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3486.8ms
2025-10-26 19:21:30,909 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:21:30,911 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:21:30,911 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:21:30,912 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:21:30,912 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.5ms
2025-10-26 19:21:52,994 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:21:52,994 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:21:52,996 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:21:52,997 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:21:52,997 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:21:52,998 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:21:52,998 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:21:52,998 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:21:52,998 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.3ms
2025-10-26 19:21:52,998 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 4.0ms
2025-10-26 19:22:03,972 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 19:22:04,212 - app.services.refresh_token_service - INFO - [SESSIONS] Usuario 1 tiene 0 sesiones activas
2025-10-26 19:22:04,213 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:22:04,213 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 24
2025-10-26 19:22:04,214 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 19:22:04,221 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 249.3ms
2025-10-26 19:22:04,241 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:22:04,247 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:22:04,247 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:22:04,292 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:22:04,292 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:22:04,292 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 51.4ms
2025-10-26 19:22:04,294 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:22:04,296 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:22:04,296 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:22:04,318 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:22:04,318 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:22:04,319 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 25.0ms
2025-10-26 19:22:04,321 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:22:04,323 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:22:04,325 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:22:04,325 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:22:04,326 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.1ms
2025-10-26 19:22:04,327 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:22:04,329 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:22:04,329 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:22:04,330 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:22:04,330 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:22:04,330 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.3ms
2025-10-26 19:22:04,332 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:22:04,334 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:22:04,334 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:22:04,337 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:22:04,338 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:22:04,338 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.3ms
2025-10-26 19:22:04,340 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:22:04,342 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:22:04,342 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:22:04,342 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:22:04,343 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 2.9ms
2025-10-26 19:22:11,232 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:22:11,232 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:22:11,235 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:22:11,235 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:22:11,236 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:22:11,237 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:22:11,237 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:22:11,239 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:22:11,239 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 25
2025-10-26 19:22:11,239 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:22:11,241 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:22:11,242 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:22:11,242 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:22:11,242 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.7ms
2025-10-26 19:22:11,243 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 10.4ms
2025-10-26 19:26:26,372 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:26:26,412 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:26:26,412 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:26:26,423 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:26:26,426 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:26:26,426 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:26:26,430 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:26:26,430 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 26
2025-10-26 19:26:26,430 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:26:26,430 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 58.6ms
2025-10-26 19:26:26,435 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:26:26,438 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:26:26,449 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 13.4ms
2025-10-26 19:26:28,358 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:26:28,359 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:26:28,361 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:26:28,361 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:26:28,362 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:26:28,363 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:26:28,363 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:26:28,364 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:26:28,364 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 27
2025-10-26 19:26:28,365 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:26:28,366 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:26:28,367 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:26:28,367 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:26:28,367 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 9.2ms
2025-10-26 19:26:28,368 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.8ms
2025-10-26 19:26:34,358 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 19:26:34,577 - app.services.refresh_token_service - INFO - [SESSIONS] Usuario 1 tiene 1 sesiones activas
2025-10-26 19:26:34,579 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:26:34,579 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 28
2025-10-26 19:26:34,579 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 19:26:34,580 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 221.7ms
2025-10-26 19:26:34,603 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:26:34,612 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:26:34,613 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:26:34,670 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:26:34,670 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:26:34,671 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 67.8ms
2025-10-26 19:26:34,672 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:26:34,674 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:26:34,674 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:26:34,698 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:26:34,699 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:26:34,699 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 27.5ms
2025-10-26 19:26:34,700 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:26:34,702 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:26:34,704 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:26:34,705 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:26:34,705 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.3ms
2025-10-26 19:26:34,707 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:26:34,709 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:26:34,709 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:26:34,711 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:26:34,711 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:26:34,712 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.7ms
2025-10-26 19:26:34,713 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:26:34,715 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:26:34,715 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:26:34,719 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:26:34,720 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:26:34,721 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.1ms
2025-10-26 19:26:34,722 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:26:34,724 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:26:34,725 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:26:34,725 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:26:34,726 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-26 19:26:37,137 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:26:37,138 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:26:37,140 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:26:37,140 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:26:37,141 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:26:37,143 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:26:37,143 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:26:37,144 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:26:37,145 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 29
2025-10-26 19:26:37,145 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:26:37,147 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:26:37,148 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:26:37,148 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:26:37,149 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.7ms
2025-10-26 19:26:37,149 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.3ms
2025-10-26 19:29:55,379 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 19:29:55,380 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.4ms
2025-10-26 19:29:55,695 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:29:55,729 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:29:55,729 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:29:55,740 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:29:55,744 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:29:55,744 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:29:55,748 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:29:55,748 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 30
2025-10-26 19:29:55,748 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:29:55,749 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 54.3ms
2025-10-26 19:29:55,753 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:29:55,755 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:29:55,765 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 12.3ms
2025-10-26 19:30:33,616 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:30:33,627 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:30:33,628 - app.core.auth - INFO - [VALIDATE] Token validado exitosamente para usuario 1
2025-10-26 19:30:33,637 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:30:33,641 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:30:33,641 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:30:33,645 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:30:33,646 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 31
2025-10-26 19:30:33,646 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:30:33,646 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 30.6ms
2025-10-26 19:30:33,648 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:30:33,650 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:30:33,650 - app.core.auth - WARNING - [VALIDATE] Token no encontrado en BD o está revocado
2025-10-26 19:30:33,650 - app.core.auth - ERROR - Error validando refresh token: Token revoked or not found in database
2025-10-26 19:30:33,650 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-26 19:30:40,179 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 19:30:40,180 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.9ms
2025-10-26 19:30:40,182 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 19:30:40,510 - app.services.refresh_token_service - INFO - [SESSIONS] Usuario 1 tiene 2 sesiones activas
2025-10-26 19:30:40,514 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:30:40,514 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 32
2025-10-26 19:30:40,514 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 19:30:40,520 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 337.9ms
2025-10-26 19:30:40,546 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 19:30:40,547 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 19:30:40,547 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.4ms
2025-10-26 19:30:40,548 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.4ms
2025-10-26 19:30:40,550 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 19:30:40,551 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:30:40,559 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:30:40,559 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:30:40,606 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:30:40,607 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:30:40,607 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 57.2ms
2025-10-26 19:30:40,607 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 19:30:40,608 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 56.9ms
2025-10-26 19:30:40,609 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.7ms
2025-10-26 19:30:40,611 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 19:30:40,611 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:30:40,613 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:30:40,614 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:30:40,629 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:30:40,629 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:30:40,630 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 19.4ms
2025-10-26 19:30:40,631 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 19.5ms
2025-10-26 19:30:40,631 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 19:30:40,632 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.1ms
2025-10-26 19:30:40,633 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:30:40,635 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:30:40,637 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:30:40,637 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:30:40,638 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.3ms
2025-10-26 19:30:40,640 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:30:40,642 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:30:40,642 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:30:40,644 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:30:40,644 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:30:40,644 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.9ms
2025-10-26 19:30:40,646 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:30:40,649 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:30:40,649 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:30:40,652 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:30:40,652 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:30:40,653 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.5ms
2025-10-26 19:30:40,654 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:30:40,657 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:30:40,658 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:30:40,658 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:30:40,658 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.7ms
2025-10-26 19:30:42,722 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:30:42,723 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:30:42,726 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:30:42,727 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:30:42,728 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:30:42,729 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:30:42,730 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:30:42,731 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 33
2025-10-26 19:30:42,731 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:30:42,733 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:30:42,733 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:30:42,734 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.8ms
2025-10-26 19:30:42,734 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.3ms
2025-10-26 19:31:43,934 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:31:43,935 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:31:43,938 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:31:43,938 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:31:43,940 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:31:43,940 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:31:43,940 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 6.2ms
2025-10-26 19:31:43,940 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 5.7ms
2025-10-26 19:31:49,707 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 19:31:49,933 - app.services.refresh_token_service - INFO - [SESSIONS] Usuario 1 tiene 0 sesiones activas
2025-10-26 19:31:49,935 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:31:49,936 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 34
2025-10-26 19:31:49,936 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 19:31:49,936 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 229.2ms
2025-10-26 19:31:49,952 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:31:49,959 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:31:49,959 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:31:50,013 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:31:50,013 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:31:50,014 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 61.8ms
2025-10-26 19:31:50,016 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:31:50,017 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:31:50,018 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:31:50,035 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:31:50,036 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:31:50,036 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 20.9ms
2025-10-26 19:31:50,039 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:31:50,041 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:31:50,044 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:31:50,044 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:31:50,044 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.6ms
2025-10-26 19:31:50,047 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:31:50,049 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:31:50,049 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:31:50,050 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:31:50,050 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:31:50,050 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.9ms
2025-10-26 19:31:50,052 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:31:50,054 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:31:50,054 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:31:50,057 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:31:50,058 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:31:50,058 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.5ms
2025-10-26 19:31:50,060 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:31:50,062 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:31:50,063 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:31:50,063 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:31:50,063 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.2ms
2025-10-26 19:32:12,802 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:32:12,803 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:32:12,805 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:32:12,807 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:32:12,811 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:32:12,812 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:32:12,813 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:32:12,814 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 35
2025-10-26 19:32:12,814 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:32:12,816 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:32:12,816 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:32:12,816 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.3ms
2025-10-26 19:32:12,817 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.0ms
2025-10-26 19:33:25,911 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:33:25,912 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:33:25,939 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:33:25,952 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:33:25,955 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:33:25,955 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:33:25,958 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:33:25,959 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 36
2025-10-26 19:33:25,959 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:33:25,960 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:33:25,960 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:33:25,960 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 49.1ms
2025-10-26 19:33:25,961 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 49.0ms
2025-10-26 19:36:22,373 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:36:22,429 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:36:22,456 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:36:22,512 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:36:22,512 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:36:22,524 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:36:22,525 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 37
2025-10-26 19:36:22,525 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:36:22,526 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 152.8ms
2025-10-26 19:36:22,832 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 19:36:22,832 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.5ms
2025-10-26 19:36:22,835 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:36:22,837 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:36:22,857 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 21.9ms
2025-10-26 19:36:25,221 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:36:25,222 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:36:25,225 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:36:25,225 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:36:25,255 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:36:25,256 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:36:25,396 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:36:25,396 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 38
2025-10-26 19:36:25,396 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:36:25,397 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 176.1ms
2025-10-26 19:36:25,398 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:36:25,398 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:36:25,399 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 177.3ms
2025-10-26 19:36:42,972 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:36:42,973 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:36:43,098 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:36:43,099 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:36:43,101 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:36:43,101 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:36:43,102 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:36:43,103 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 39
2025-10-26 19:36:43,103 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:36:43,104 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:36:43,104 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:36:43,104 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 132.8ms
2025-10-26 19:36:43,105 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 132.2ms
2025-10-26 19:37:05,701 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 19:37:05,988 - app.services.refresh_token_service - INFO - [SESSIONS] Usuario 1 tiene 0 sesiones activas
2025-10-26 19:37:05,991 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:37:05,991 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 40
2025-10-26 19:37:05,992 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 19:37:05,996 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 295.2ms
2025-10-26 19:37:06,023 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:37:06,031 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:37:06,031 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:37:06,083 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:37:06,083 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:37:06,084 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 60.4ms
2025-10-26 19:37:06,086 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:37:06,090 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:37:06,090 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:37:06,117 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:37:06,118 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:37:06,118 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 32.1ms
2025-10-26 19:37:06,121 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:37:06,123 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:37:06,126 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:37:06,126 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:37:06,127 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.9ms
2025-10-26 19:37:06,129 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:37:06,132 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:37:06,132 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:37:06,134 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:37:06,134 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:37:06,135 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.0ms
2025-10-26 19:37:06,137 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:37:06,140 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:37:06,141 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:37:06,144 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:37:06,145 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:37:06,145 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.9ms
2025-10-26 19:37:06,147 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:37:06,151 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:37:06,152 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:37:06,152 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:37:06,152 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.0ms
2025-10-26 19:37:15,670 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:37:15,671 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:37:15,677 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:37:15,679 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:37:15,690 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:37:15,694 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:37:15,698 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:37:15,698 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 41
2025-10-26 19:37:15,698 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:37:15,705 - app.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado
2025-10-26 19:37:15,707 - app.core.auth - WARNING - [REFRESH] Token no encontrado en BD o revocado
2025-10-26 19:37:15,708 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 37.6ms
2025-10-26 19:37:15,708 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 37.3ms
2025-10-26 19:38:17,390 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:17,407 - app.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido para usuario 1 - Cliente: web
2025-10-26 19:38:17,427 - app.core.auth - INFO - [REFRESH] Token validado para usuario: admin (Cliente: web)
2025-10-26 19:38:17,434 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:38:17,435 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:17,439 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:38:17,439 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 42
2025-10-26 19:38:17,439 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:17,439 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 49.3ms
2025-10-26 19:38:17,445 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:38:17,447 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:38:17,462 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 17.1ms
2025-10-26 19:38:26,074 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:26,184 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:38:26,185 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:38:26,186 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:26,187 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:38:26,187 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 43
2025-10-26 19:38:26,187 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:26,187 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 113.3ms
2025-10-26 19:38:26,191 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:38:26,192 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:38:26,198 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 6.3ms
2025-10-26 19:38:28,951 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:28,953 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:38:28,955 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:38:28,956 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:28,958 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:38:28,959 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 44
2025-10-26 19:38:28,959 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:28,960 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 8.4ms
2025-10-26 19:38:28,962 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:28,964 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:38:28,966 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:38:28,966 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:28,968 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (af06d457f23db1b18c994e8849099a9be4555781c7a7d922b6274dfa9f8fcd84). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 19:38:28,969 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (af06d457f23db1b18c994e8849099a9be4555781c7a7d922b6274dfa9f8fcd84). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:38:28,972 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (af06d457f23db1b18c994e8849099a9be4555781c7a7d922b6274dfa9f8fcd84). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:38:28,974 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 19:38:28,974 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:28,974 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.6ms
2025-10-26 19:38:28,978 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:38:28,980 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:38:28,981 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.7ms
2025-10-26 19:38:32,455 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:32,456 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:32,458 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:38:32,459 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:38:32,460 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:32,461 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:38:32,461 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 46
2025-10-26 19:38:32,462 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:32,464 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:38:32,465 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:38:32,465 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:32,467 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (769eb8a953c3612ce661a0db15a2a254955844022af719c8a687a854d8cb5427). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 19:38:32,467 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (769eb8a953c3612ce661a0db15a2a254955844022af719c8a687a854d8cb5427). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:38:32,468 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (769eb8a953c3612ce661a0db15a2a254955844022af719c8a687a854d8cb5427). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:38:32,469 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 19:38:32,470 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:32,470 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.1ms
2025-10-26 19:38:32,470 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 14.7ms
2025-10-26 19:38:32,476 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:38:32,478 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:38:32,479 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.3ms
2025-10-26 19:38:46,369 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:46,370 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:38:46,372 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:38:46,373 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 19:38:46,373 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:46,374 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:38:46,374 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 48
2025-10-26 19:38:46,375 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:46,376 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:38:46,377 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 19:38:46,377 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:38:46,378 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (6bc4220b984aa51ad6bf84051856caa7714280b07bfda691f3923ad2b4305e81). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 19:38:46,378 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (6bc4220b984aa51ad6bf84051856caa7714280b07bfda691f3923ad2b4305e81). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:38:46,379 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (6bc4220b984aa51ad6bf84051856caa7714280b07bfda691f3923ad2b4305e81). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:38:46,381 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 19:38:46,381 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:38:46,381 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.3ms
2025-10-26 19:38:46,382 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 11.8ms
2025-10-26 19:38:46,386 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:38:46,388 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:38:46,389 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.0ms
2025-10-26 19:39:04,772 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:04,772 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:08,178 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:08,181 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:39:08,182 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:08,185 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:39:08,186 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 50
2025-10-26 19:39:08,186 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:08,187 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:08,187 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:39:08,188 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:08,189 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (7ce8b9c8b758c5d00440ca9856c1afd67197ff548fbf7a7c3a552a475c709ab3). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 19:39:08,189 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (7ce8b9c8b758c5d00440ca9856c1afd67197ff548fbf7a7c3a552a475c709ab3). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:08,191 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (7ce8b9c8b758c5d00440ca9856c1afd67197ff548fbf7a7c3a552a475c709ab3). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:08,192 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 19:39:08,192 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:08,193 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3420.7ms
2025-10-26 19:39:08,193 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3420.5ms
2025-10-26 19:39:08,197 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:39:08,199 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:39:08,213 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 15.4ms
2025-10-26 19:39:11,793 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:11,794 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:11,798 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:11,800 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 19:39:11,803 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:11,806 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:39:11,807 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 52
2025-10-26 19:39:11,807 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:11,809 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:11,811 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 19:39:11,811 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:11,813 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (75752e8e5c0170cf5f6020d821f5e48b85539eead5e90de75cb9a58116c33d23). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 19:39:11,813 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (75752e8e5c0170cf5f6020d821f5e48b85539eead5e90de75cb9a58116c33d23). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:11,814 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (75752e8e5c0170cf5f6020d821f5e48b85539eead5e90de75cb9a58116c33d23). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:11,816 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 19:39:11,816 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:11,816 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 23.6ms
2025-10-26 19:39:11,817 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 23.1ms
2025-10-26 19:39:11,821 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:39:11,822 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:39:11,823 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.6ms
2025-10-26 19:39:20,547 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 19:39:20,787 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:39:20,787 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 54
2025-10-26 19:39:20,788 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 19:39:20,788 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 240.9ms
2025-10-26 19:39:20,809 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:39:20,815 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:39:20,816 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:39:20,859 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:39:20,859 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:39:20,860 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 50.6ms
2025-10-26 19:39:20,862 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:39:20,864 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:39:20,864 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:39:20,875 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:39:20,876 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:39:20,876 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 14.4ms
2025-10-26 19:39:20,878 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:39:20,880 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:39:20,882 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:39:20,882 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:39:20,882 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.3ms
2025-10-26 19:39:20,884 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:39:20,887 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:39:20,887 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:39:20,888 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:39:20,888 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:39:20,889 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.4ms
2025-10-26 19:39:20,891 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:39:20,893 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:39:20,893 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:39:20,896 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:39:20,896 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:39:20,897 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.2ms
2025-10-26 19:39:20,898 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:39:20,901 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:39:20,902 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:39:20,902 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:39:20,902 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.9ms
2025-10-26 19:39:28,673 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:28,674 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:28,676 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:28,678 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:39:28,678 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:28,680 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:39:28,681 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 55
2025-10-26 19:39:28,681 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:28,683 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:28,684 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:39:28,685 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:28,686 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (09a93dd027b3873f813707df55534967d22bd3af1b940b4bdf5f20a657510aa8). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 19:39:28,686 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (09a93dd027b3873f813707df55534967d22bd3af1b940b4bdf5f20a657510aa8). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:28,687 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (09a93dd027b3873f813707df55534967d22bd3af1b940b4bdf5f20a657510aa8). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:28,689 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 19:39:28,689 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:28,689 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 16.4ms
2025-10-26 19:39:28,690 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 16.0ms
2025-10-26 19:39:28,696 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:39:28,697 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:39:28,698 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 2.5ms
2025-10-26 19:39:28,713 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:39:28,715 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:39:28,715 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:39:28,716 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:39:28,717 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:39:28,717 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:39:28,717 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:39:28,719 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:39:28,719 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:39:28,722 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:39:28,722 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:39:28,725 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:39:28,726 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:39:28,727 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:39:28,727 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 14.3ms
2025-10-26 19:39:28,728 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.6ms
2025-10-26 19:39:28,728 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.6ms
2025-10-26 19:39:28,730 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:39:28,733 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:39:28,733 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:39:28,734 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:39:28,735 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:39:28,735 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:39:28,737 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:39:28,737 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:39:28,741 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:39:28,741 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:39:28,742 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:39:28,742 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 11.6ms
2025-10-26 19:39:28,744 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:39:28,745 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:39:28,745 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:39:28,746 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.0ms
2025-10-26 19:39:28,747 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.1ms
2025-10-26 19:39:38,300 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:38,301 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 19:39:38,303 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:38,304 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:39:38,304 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:38,305 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 19:39:38,305 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 57
2025-10-26 19:39:38,306 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:38,306 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 19:39:38,308 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 19:39:38,308 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 19:39:38,309 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (27f91bde90d2c956f92e959d4e4e35becd7909b4e8fb9834c4ee28b33dac6439). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 19:39:38,310 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (27f91bde90d2c956f92e959d4e4e35becd7909b4e8fb9834c4ee28b33dac6439). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:38,311 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (27f91bde90d2c956f92e959d4e4e35becd7909b4e8fb9834c4ee28b33dac6439). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 19:39:38,312 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 19:39:38,312 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 19:39:38,313 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.3ms
2025-10-26 19:39:38,313 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 12.0ms
2025-10-26 19:39:38,318 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 19:39:38,320 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 19:39:38,321 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.4ms
2025-10-26 19:39:38,338 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:39:38,341 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:39:38,341 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:39:38,343 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:39:38,343 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:39:38,343 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:39:38,345 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:39:38,345 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:39:38,348 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:39:38,348 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:39:38,349 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 10.3ms
2025-10-26 19:39:38,349 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 5.7ms
2025-10-26 19:39:38,352 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:39:38,354 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:39:38,355 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:39:38,356 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:39:38,356 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.7ms
2025-10-26 19:39:38,356 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 19:39:38,358 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 19:39:38,358 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 19:39:38,359 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 19:39:38,359 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 19:39:38,360 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.8ms
2025-10-26 19:39:38,362 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 19:39:38,364 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 19:39:38,365 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 19:39:38,368 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 19:39:38,369 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 19:39:38,370 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.2ms
2025-10-26 19:39:38,370 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 19:39:38,372 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 19:39:38,373 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 19:39:38,374 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 19:39:38,375 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.4ms
2025-10-26 20:24:50,970 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 20:24:50,971 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 20:24:50,971 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.1ms
2025-10-26 20:24:50,971 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-26 20:24:51,279 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 20:24:51,280 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 20:24:51,308 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 20:24:51,311 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 20:24:51,312 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 20:24:51,315 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 20:24:51,315 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 59
2025-10-26 20:24:51,315 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 20:24:51,316 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 20:24:51,317 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 20:24:51,317 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 20:24:51,318 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ca5808bda296aa520d462bddecccb063b628a854d96af1ed5d1cb90e0dd4ab3d). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 20:24:51,319 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ca5808bda296aa520d462bddecccb063b628a854d96af1ed5d1cb90e0dd4ab3d). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 20:24:51,320 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (ca5808bda296aa520d462bddecccb063b628a854d96af1ed5d1cb90e0dd4ab3d). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 20:24:51,321 - app.api.v1.endpoints.auth - ERROR - Error en rotación de token: Error interno del servidor en store_refresh_token
2025-10-26 20:24:51,321 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 20:24:51,321 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 42.1ms
2025-10-26 20:24:51,322 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 41.8ms
2025-10-26 20:24:51,327 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 20:24:51,328 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 1.1ms
2025-10-26 20:24:51,331 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 20:24:51,333 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 20:24:51,344 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 13.0ms
2025-10-26 20:24:51,364 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 20:24:51,365 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.0ms
2025-10-26 20:24:51,366 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 20:24:51,366 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 20:24:51,367 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.3ms
2025-10-26 20:24:51,367 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.1ms
2025-10-26 20:24:51,370 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 20:24:51,370 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 20:24:51,378 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 20:24:51,378 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 20:24:51,413 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 20:24:51,413 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 20:24:51,413 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 20:24:51,416 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 20:24:51,417 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 20:24:51,417 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 20:24:51,418 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 47.8ms
2025-10-26 20:24:51,418 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 47.6ms
2025-10-26 20:24:51,418 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 20:24:51,418 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 20:24:51,418 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.1ms
2025-10-26 20:24:51,420 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 2.2ms
2025-10-26 20:24:51,420 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 2.2ms
2025-10-26 20:24:51,423 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 20:24:51,424 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 20:24:51,426 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 20:24:51,426 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 20:24:51,447 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 20:24:51,447 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 20:24:51,449 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 20:24:51,449 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 20:24:51,450 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 20:24:51,451 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 20:24:51,451 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 27.7ms
2025-10-26 20:24:51,451 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 27.4ms
2025-10-26 20:24:51,454 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 20:24:51,457 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 20:24:51,457 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 20:24:51,458 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 20:24:51,458 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 20:24:51,460 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 20:24:51,460 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 20:24:51,463 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 20:24:51,464 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 20:24:51,464 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.5ms
2025-10-26 20:24:51,464 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.4ms
2025-10-26 22:28:29,374 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 22:28:29,376 - app.main - INFO - 127.0.0.1 <- GET /docs 1.4ms
2025-10-26 22:28:29,446 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 22:28:29,511 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 65.1ms
2025-10-26 22:28:52,674 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-26 22:28:52,675 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.5ms
2025-10-26 22:28:52,982 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-26 22:28:53,119 - app.db.queries - INFO - Actualización exitosa, filas afectadas: 0
2025-10-26 22:28:53,119 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:28:53,119 - app.api.v1.endpoints.auth - WARNING - [LOGOUT-WEB] Token no encontrado en BD
2025-10-26 22:28:53,120 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 137.5ms
2025-10-26 22:29:00,020 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 22:29:00,021 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 22:29:00,023 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:29:00,023 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 22:29:00,024 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 22:29:00,026 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:29:00,026 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.1ms
2025-10-26 22:29:00,028 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:29:00,029 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:29:00,029 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.5ms
2025-10-26 22:29:17,846 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 22:29:17,846 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.7ms
2025-10-26 22:29:17,849 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 22:29:20,070 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 22:29:20,070 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 61
2025-10-26 22:29:20,071 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 22:29:20,075 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 2226.4ms
2025-10-26 22:29:20,097 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 22:29:20,098 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.6ms
2025-10-26 22:29:20,100 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 22:29:20,101 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:29:20,101 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.0ms
2025-10-26 22:29:20,106 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:29:20,106 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:29:20,154 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:29:20,155 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:29:20,156 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 55.1ms
2025-10-26 22:29:20,157 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 22:29:20,158 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.7ms
2025-10-26 22:29:20,158 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:29:20,160 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:29:20,160 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:29:20,198 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:29:20,198 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:29:20,200 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 41.8ms
2025-10-26 22:29:20,201 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 22:29:20,202 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.7ms
2025-10-26 22:29:20,202 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:29:20,204 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:29:20,206 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:29:20,206 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:29:20,207 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.0ms
2025-10-26 22:29:20,209 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 22:29:20,210 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.9ms
2025-10-26 22:29:20,210 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:29:20,212 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:29:20,212 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:29:20,214 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:29:20,214 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:29:20,215 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 22:29:20,216 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 22:29:20,217 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.7ms
2025-10-26 22:29:20,217 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:29:20,219 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:29:20,220 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:29:20,224 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:29:20,224 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:29:20,225 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.3ms
2025-10-26 22:29:20,227 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:29:20,229 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:29:20,230 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:29:20,231 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:29:20,231 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.8ms
2025-10-26 22:29:31,950 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:29:31,951 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:29:31,954 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:29:31,961 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 22:29:31,961 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:29:31,961 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token antiguo ya estaba revocado o no existía para admin
2025-10-26 22:29:31,962 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 22:29:31,963 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 62
2025-10-26 22:29:31,963 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:29:31,964 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:29:31,965 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 22:29:31,965 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:29:31,966 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token antiguo ya estaba revocado o no existía para admin
2025-10-26 22:29:31,967 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (33e888227beff7c83e60cfcf8f9f3685ac1164b504d1158e8e1e6a74819b28ef). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 22:29:31,967 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (33e888227beff7c83e60cfcf8f9f3685ac1164b504d1158e8e1e6a74819b28ef). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:29:31,986 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (33e888227beff7c83e60cfcf8f9f3685ac1164b504d1158e8e1e6a74819b28ef). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:29:31,990 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 22:29:31,990 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:29:31,990 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 40.0ms
2025-10-26 22:29:31,990 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 39.3ms
2025-10-26 22:29:31,994 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 22:29:31,995 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.4ms
2025-10-26 22:29:31,996 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 22:29:31,998 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 22:29:31,999 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.1ms
2025-10-26 22:29:32,014 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:29:32,016 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:29:32,016 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:29:32,017 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:29:32,018 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:29:32,018 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:29:32,019 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:29:32,021 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:29:32,022 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:29:32,023 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:29:32,025 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:29:32,025 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:29:32,028 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:29:32,028 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:29:32,029 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 14.4ms
2025-10-26 22:29:32,029 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 10.7ms
2025-10-26 22:29:32,029 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 10.4ms
2025-10-26 22:29:32,031 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:29:32,033 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:29:32,033 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:29:32,034 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:29:32,034 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:29:32,035 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:29:32,036 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.1ms
2025-10-26 22:29:32,038 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:29:32,039 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:29:32,039 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:29:32,040 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:29:32,042 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:29:32,043 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:29:32,046 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:29:32,046 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:29:32,047 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 11.7ms
2025-10-26 22:29:32,047 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.8ms
2025-10-26 22:29:38,105 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:29:38,106 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:29:38,108 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:29:38,109 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 22:29:38,109 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:29:38,109 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token antiguo ya estaba revocado o no existía para admin
2025-10-26 22:29:38,110 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 22:29:38,111 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 64
2025-10-26 22:29:38,111 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:29:38,112 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:29:38,113 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 22:29:38,113 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:29:38,113 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token antiguo ya estaba revocado o no existía para admin
2025-10-26 22:29:38,115 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (260f8939fb25211a91871f9c09c858ff06c677509096a1ace2f60c10e396fe6b). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 22:29:38,115 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (260f8939fb25211a91871f9c09c858ff06c677509096a1ace2f60c10e396fe6b). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:29:38,116 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (260f8939fb25211a91871f9c09c858ff06c677509096a1ace2f60c10e396fe6b). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:29:38,118 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 22:29:38,118 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:29:38,118 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.1ms
2025-10-26 22:29:38,119 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 13.0ms
2025-10-26 22:29:38,123 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 22:29:38,124 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 22:29:38,126 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.3ms
2025-10-26 22:29:38,141 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:29:38,144 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:29:38,145 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:29:38,146 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:29:38,146 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:29:38,147 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:29:38,148 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:29:38,149 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:29:38,152 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:29:38,152 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:29:38,153 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 11.2ms
2025-10-26 22:29:38,153 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.4ms
2025-10-26 22:29:38,155 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:29:38,158 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:29:38,160 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:29:38,160 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:29:38,160 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:29:38,161 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.6ms
2025-10-26 22:29:38,163 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:29:38,163 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:29:38,164 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:29:38,164 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:29:38,165 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 22:29:38,167 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:29:38,169 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:29:38,169 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:29:38,173 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:29:38,174 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:29:38,175 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:29:38,175 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.3ms
2025-10-26 22:29:38,178 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:29:38,179 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:29:38,179 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:29:38,180 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.4ms
2025-10-26 22:39:25,288 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 22:39:25,288 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 22:39:25,289 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.0ms
2025-10-26 22:39:25,289 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.7ms
2025-10-26 22:39:25,598 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:25,599 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:25,628 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:39:25,632 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 22:39:25,632 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:39:25,633 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token antiguo ya estaba revocado o no existía para admin
2025-10-26 22:39:25,636 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 22:39:25,637 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 66
2025-10-26 22:39:25,637 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:39:25,638 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:39:25,639 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 22:39:25,639 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:39:25,639 - app.api.v1.endpoints.auth - WARNING - [REFRESH] Token antiguo ya estaba revocado o no existía para admin
2025-10-26 22:39:25,640 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (062140b169ccfdc51f0b9b85fa60082ea11482ea0aa50693016af10afbc786c4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 22:39:25,641 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (062140b169ccfdc51f0b9b85fa60082ea11482ea0aa50693016af10afbc786c4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:39:25,641 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (062140b169ccfdc51f0b9b85fa60082ea11482ea0aa50693016af10afbc786c4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:39:25,643 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 22:39:25,643 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:39:25,643 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 45.0ms
2025-10-26 22:39:25,644 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 44.7ms
2025-10-26 22:39:25,648 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 22:39:25,650 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 22:39:25,657 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 9.7ms
2025-10-26 22:39:25,671 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 22:39:25,672 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.8ms
2025-10-26 22:39:25,672 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 22:39:25,672 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 22:39:25,673 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.0ms
2025-10-26 22:39:25,673 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.9ms
2025-10-26 22:39:25,675 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:39:25,680 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:39:25,680 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:39:25,729 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:39:25,729 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:39:25,729 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:39:25,730 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 22:39:25,733 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:39:25,733 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:39:25,757 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:39:25,758 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:39:25,759 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 83.7ms
2025-10-26 22:39:25,759 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 22:39:25,759 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 22:39:25,760 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 30.4ms
2025-10-26 22:39:25,760 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 30.1ms
2025-10-26 22:39:25,761 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 2.0ms
2025-10-26 22:39:25,761 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.9ms
2025-10-26 22:39:25,763 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:39:25,766 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:39:25,768 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:39:25,769 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:39:25,769 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:39:25,771 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:39:25,771 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:39:25,772 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:39:25,772 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:39:25,772 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 8.8ms
2025-10-26 22:39:25,772 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 3.5ms
2025-10-26 22:39:25,774 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:39:25,776 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:39:25,777 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:39:25,780 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:39:25,780 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:39:25,781 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:39:25,781 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 6.6ms
2025-10-26 22:39:25,783 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:39:25,784 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:39:25,785 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:39:25,785 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.9ms
2025-10-26 22:39:28,809 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-26 22:39:28,809 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.5ms
2025-10-26 22:39:28,811 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-26 22:39:28,813 - app.db.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-10-26 22:39:28,814 - app.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya estaba revocado
2025-10-26 22:39:28,814 - app.api.v1.endpoints.auth - WARNING - [LOGOUT-WEB] Token no encontrado en BD
2025-10-26 22:39:28,814 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 3.0ms
2025-10-26 22:39:35,488 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:35,488 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:35,490 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:35,490 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:35,491 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.0ms
2025-10-26 22:39:35,491 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.5ms
2025-10-26 22:39:40,755 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:40,756 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:40,757 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:40,757 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:40,758 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.0ms
2025-10-26 22:39:40,758 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.2ms
2025-10-26 22:39:52,448 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:52,449 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:52,450 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:52,450 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:52,450 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.1ms
2025-10-26 22:39:52,450 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 1.8ms
2025-10-26 22:39:55,422 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:55,423 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:55,424 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:55,424 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:55,425 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 22:39:55,425 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.6ms
2025-10-26 22:39:55,665 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:55,666 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:55,668 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:55,668 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:55,669 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.1ms
2025-10-26 22:39:55,669 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.6ms
2025-10-26 22:39:55,837 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:55,838 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:55,839 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:55,839 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:55,840 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.7ms
2025-10-26 22:39:55,840 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.1ms
2025-10-26 22:39:56,135 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:56,136 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:39:56,137 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:56,138 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:39:56,138 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 3.4ms
2025-10-26 22:39:56,138 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.7ms
2025-10-26 22:57:03,328 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 22:57:03,329 - app.main - INFO - 127.0.0.1 <- GET /docs 0.8ms
2025-10-26 22:57:03,396 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 22:57:03,451 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 55.0ms
2025-10-26 22:57:28,834 - app.main - INFO - 127.0.0.1 -> GET /docs
2025-10-26 22:57:28,835 - app.main - INFO - 127.0.0.1 <- GET /docs 0.7ms
2025-10-26 22:57:28,871 - app.main - INFO - 127.0.0.1 -> GET /openapi.json
2025-10-26 22:57:28,873 - app.main - INFO - 127.0.0.1 <- GET /openapi.json 1.9ms
2025-10-26 22:57:34,940 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 22:57:34,941 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 22:57:34,941 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.0ms
2025-10-26 22:57:34,941 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.6ms
2025-10-26 22:57:35,252 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:57:35,253 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:57:35,254 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:57:35,254 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 22:57:35,254 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-26 22:57:35,255 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.0ms
2025-10-26 22:57:41,787 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 22:57:41,788 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.4ms
2025-10-26 22:57:41,789 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 22:57:42,143 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 22:57:42,144 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 68
2025-10-26 22:57:42,144 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 22:57:42,151 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 361.4ms
2025-10-26 22:57:42,173 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 22:57:42,173 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.6ms
2025-10-26 22:57:42,176 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 22:57:42,176 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:57:42,181 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:57:42,182 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:57:42,233 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:57:42,233 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:57:42,233 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 57.8ms
2025-10-26 22:57:42,234 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 57.6ms
2025-10-26 22:57:42,235 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 22:57:42,236 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.8ms
2025-10-26 22:57:42,236 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:57:42,239 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:57:42,239 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:57:42,246 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:57:42,247 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:57:42,248 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.5ms
2025-10-26 22:57:42,250 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 22:57:42,250 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.0ms
2025-10-26 22:57:42,251 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:57:42,255 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:57:42,257 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:57:42,257 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:57:42,258 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 7.1ms
2025-10-26 22:57:42,259 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 22:57:42,260 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 1.0ms
2025-10-26 22:57:42,261 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:57:42,264 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:57:42,264 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:57:42,265 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:57:42,266 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:57:42,267 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 6.0ms
2025-10-26 22:57:42,268 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 22:57:42,269 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.8ms
2025-10-26 22:57:42,269 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:57:42,272 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:57:42,272 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:57:42,275 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:57:42,276 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:57:42,277 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 7.9ms
2025-10-26 22:57:42,279 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:57:42,281 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:57:42,282 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:57:42,282 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:57:42,282 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 3.6ms
2025-10-26 22:59:09,001 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 22:59:09,001 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.4ms
2025-10-26 22:59:09,003 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-10-26 22:59:09,003 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/ 0.4ms
2025-10-26 22:59:09,305 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 22:59:09,352 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:59:09,352 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 22:59:09,378 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 22:59:09,379 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 73.8ms
2025-10-26 22:59:09,380 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 22:59:09,382 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:59:09,383 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 22:59:09,386 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 22:59:09,386 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 5.9ms
2025-10-26 22:59:09,986 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:59:09,989 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:59:09,989 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:59:10,000 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:59:10,000 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:59:10,001 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 14.4ms
2025-10-26 22:59:10,001 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:59:10,005 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:59:10,007 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:59:10,007 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:59:10,008 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 6.7ms
2025-10-26 22:59:10,009 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 22:59:10,012 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:59:10,012 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 22:59:10,017 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 22:59:10,017 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 22:59:10,018 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.8ms
2025-10-26 22:59:10,019 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 22:59:10,022 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 22:59:10,023 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 22:59:10,023 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 22:59:10,023 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.9ms
2025-10-26 22:59:20,137 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 22:59:20,140 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:59:20,140 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 22:59:20,143 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 22:59:20,144 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.2ms
2025-10-26 22:59:20,146 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/
2025-10-26 22:59:20,149 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 22:59:20,149 - app.services.rol_service - INFO - Obteniendo roles paginados: page=1, limit=10, search='None'
2025-10-26 22:59:20,153 - app.services.rol_service - INFO - Obtención paginada de roles completada exitosamente
2025-10-26 22:59:20,154 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/ 7.4ms
2025-10-26 22:59:20,844 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 22:59:20,847 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-10-26 22:59:20,848 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 4.0ms
2025-10-26 22:59:20,848 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/ 1.2ms
2025-10-26 22:59:20,856 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 22:59:20,859 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 22:59:20,859 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 22:59:20,870 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 22:59:20,871 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 22:59:20,871 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 15.8ms
2025-10-26 22:59:20,874 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/
2025-10-26 22:59:20,876 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/ recibida - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-10-26 22:59:20,876 - app.services.area_service - INFO - Obteniendo áreas paginadas: skip=0, limit=10, search='None'
2025-10-26 22:59:20,880 - app.services.area_service - INFO - Paginación completada: 1 áreas de 1 totales
2025-10-26 22:59:20,880 - app.api.v1.endpoints.areas - INFO - Lista paginada de áreas recuperada - Total: 1, Página: 1
2025-10-26 22:59:20,881 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/ 7.4ms
2025-10-26 22:59:21,428 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-10-26 22:59:21,428 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-10-26 22:59:21,429 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 1.2ms
2025-10-26 22:59:21,429 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 1.0ms
2025-10-26 22:59:21,432 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 22:59:21,435 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 22:59:21,435 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 22:59:21,437 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 22:59:21,437 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 22:59:21,438 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 6.1ms
2025-10-26 22:59:21,440 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 22:59:21,443 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 22:59:21,443 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 22:59:21,444 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 22:59:21,444 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 22:59:21,444 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.1ms
2025-10-26 22:59:23,751 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:59:23,752 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:59:23,757 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:59:23,758 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: type object 'RefreshTokenService' has no attribute 'revoke_token'
2025-10-26 22:59:23,770 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 22:59:23,770 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 69
2025-10-26 22:59:23,771 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:59:23,772 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:59:23,773 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: type object 'RefreshTokenService' has no attribute 'revoke_token'
2025-10-26 22:59:23,774 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0ef0ad11524c60afd432cf16b203f90a111ef962e8b8fc609308f912715ddf10). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 22:59:23,775 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0ef0ad11524c60afd432cf16b203f90a111ef962e8b8fc609308f912715ddf10). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:59:23,777 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (0ef0ad11524c60afd432cf16b203f90a111ef962e8b8fc609308f912715ddf10). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:59:23,779 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 22:59:23,779 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:59:23,779 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 28.5ms
2025-10-26 22:59:23,780 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 27.7ms
2025-10-26 22:59:23,785 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 22:59:23,785 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.4ms
2025-10-26 22:59:23,787 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 22:59:23,790 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 22:59:23,792 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 4.2ms
2025-10-26 22:59:23,808 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:59:23,811 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:59:23,811 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:59:23,864 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:59:23,865 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:59:23,865 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 22:59:23,867 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 22:59:23,868 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 22:59:23,868 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 22:59:23,868 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 22:59:23,869 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 60.4ms
2025-10-26 22:59:23,869 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 3.9ms
2025-10-26 22:59:23,872 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:59:23,874 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:59:23,875 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:59:23,876 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:59:23,876 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:59:23,877 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.8ms
2025-10-26 22:59:23,877 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 22:59:23,879 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 22:59:23,880 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 22:59:23,881 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 22:59:23,881 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 22:59:23,882 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.3ms
2025-10-26 22:59:43,638 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:59:43,639 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 22:59:43,641 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:59:43,641 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: type object 'RefreshTokenService' has no attribute 'revoke_token'
2025-10-26 22:59:43,643 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 22:59:43,643 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 71
2025-10-26 22:59:43,644 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:59:43,645 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 22:59:43,646 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: type object 'RefreshTokenService' has no attribute 'revoke_token'
2025-10-26 22:59:43,648 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (9c7d641515bcd0543e95313ff181e13116930274b963dda3d63404d7e5be75cc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 22:59:43,649 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (9c7d641515bcd0543e95313ff181e13116930274b963dda3d63404d7e5be75cc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:59:43,650 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (9c7d641515bcd0543e95313ff181e13116930274b963dda3d63404d7e5be75cc). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 22:59:43,652 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 22:59:43,653 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 22:59:43,653 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.4ms
2025-10-26 22:59:43,654 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 15.0ms
2025-10-26 22:59:43,660 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 22:59:43,662 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 22:59:43,663 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 3.1ms
2025-10-26 22:59:43,679 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:59:43,681 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:59:43,681 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:59:43,683 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:59:43,683 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:59:43,683 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 22:59:43,686 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 22:59:43,687 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 22:59:43,688 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 22:59:43,688 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 22:59:43,688 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 9.5ms
2025-10-26 22:59:43,689 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 5.2ms
2025-10-26 22:59:43,691 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 22:59:43,694 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 22:59:43,694 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 22:59:43,695 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 22:59:43,695 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 22:59:43,695 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 22:59:43,697 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 22:59:43,697 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 22:59:43,699 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 22:59:43,699 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 22:59:43,699 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 8.0ms
2025-10-26 22:59:43,700 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.2ms
2025-10-26 23:03:55,751 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:03:55,752 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:03:55,879 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:03:55,879 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: type object 'RefreshTokenService' has no attribute 'revoke_token'
2025-10-26 23:03:55,885 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 23:03:55,886 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 73
2025-10-26 23:03:55,886 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 23:03:55,888 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:03:55,888 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: type object 'RefreshTokenService' has no attribute 'revoke_token'
2025-10-26 23:03:55,889 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (fb9868f2e85119a849029f1f06f36da212a9cd165ee64cc3b702e1268d1e3b5a). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 23:03:55,890 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (fb9868f2e85119a849029f1f06f36da212a9cd165ee64cc3b702e1268d1e3b5a). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 23:03:55,892 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (fb9868f2e85119a849029f1f06f36da212a9cd165ee64cc3b702e1268d1e3b5a). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 118, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 132, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 23:03:55,894 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 23:03:55,894 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 23:03:55,895 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 143.3ms
2025-10-26 23:03:55,895 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 143.1ms
2025-10-26 23:03:55,899 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 23:03:55,902 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 23:03:55,921 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 21.3ms
2025-10-26 23:03:55,942 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:03:55,948 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:03:55,948 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:03:56,002 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:03:56,002 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:03:56,003 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 23:03:56,005 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 23:03:56,005 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 23:03:56,007 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 23:03:56,007 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 23:03:56,008 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 66.0ms
2025-10-26 23:03:56,008 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 5.6ms
2025-10-26 23:03:56,010 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:03:56,013 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:03:56,013 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:03:56,014 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:03:56,015 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:03:56,015 - app.main - INFO - 127.0.0.1 -> GET /api/v1/areas/list/
2025-10-26 23:03:56,016 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.3ms
2025-10-26 23:03:56,018 - app.api.v1.endpoints.areas - INFO - Solicitud GET /areas/list/ recibida para lista simple
2025-10-26 23:03:56,018 - app.services.area_service - INFO - Obteniendo lista simple de áreas activas
2025-10-26 23:03:56,019 - app.services.area_service - INFO - Lista simple obtenida: 1 áreas activas
2025-10-26 23:03:56,019 - app.api.v1.endpoints.areas - INFO - Lista simple de áreas recuperada - Total: 1 áreas activas
2025-10-26 23:03:56,020 - app.main - INFO - 127.0.0.1 <- GET /api/v1/areas/list/ 4.6ms
2025-10-26 23:26:05,627 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-10-26 23:26:05,627 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 0.5ms
2025-10-26 23:26:05,936 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/logout/
2025-10-26 23:26:05,937 - app.api.v1.endpoints.auth - WARNING - [LOGOUT] No se pudo validar token para revocar: name 'decode_refresh_token' is not defined
2025-10-26 23:26:05,937 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/logout/ 1.0ms
2025-10-26 23:26:17,150 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 23:26:17,151 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 23:26:17,151 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.3ms
2025-10-26 23:26:17,152 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 1.1ms
2025-10-26 23:26:17,462 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:26:17,463 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:26:17,464 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 23:26:17,465 - app.core.auth - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-10-26 23:26:17,465 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.9ms
2025-10-26 23:26:17,465 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 2.4ms
2025-10-26 23:26:27,179 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-10-26 23:26:27,179 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 0.6ms
2025-10-26 23:26:27,181 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/login/
2025-10-26 23:26:27,572 - app.services.refresh_token_service - INFO - [DEBUG-STORE] Almacenando refresh token para usuario_id=1, client_type=web
2025-10-26 23:26:27,576 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 23:26:27,577 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 75
2025-10-26 23:26:27,577 - app.api.v1.endpoints.auth - INFO - Usuario admin autenticado exitosamente (WEB) - Refresh en cookie
2025-10-26 23:26:27,582 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/login/ 400.7ms
2025-10-26 23:26:27,610 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 23:26:27,610 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.6ms
2025-10-26 23:26:27,613 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 23:26:27,614 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:26:27,619 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:26:27,620 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:26:27,665 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:26:27,665 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:26:27,666 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 52.8ms
2025-10-26 23:26:27,666 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 52.4ms
2025-10-26 23:26:27,668 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 23:26:27,669 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.7ms
2025-10-26 23:26:27,669 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 23:26:27,671 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 23:26:27,672 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 23:26:27,687 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 23:26:27,688 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 23:26:27,689 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 20.2ms
2025-10-26 23:26:27,690 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 23:26:27,691 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 0.8ms
2025-10-26 23:26:27,691 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 23:26:27,693 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 23:26:27,695 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 23:26:27,695 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 23:26:27,696 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.6ms
2025-10-26 23:26:27,697 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 23:26:27,698 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.9ms
2025-10-26 23:26:27,698 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:26:27,701 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:26:27,701 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:26:27,702 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:26:27,702 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:26:27,703 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 5.0ms
2025-10-26 23:26:27,705 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 23:26:27,705 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 0.4ms
2025-10-26 23:26:27,706 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 23:26:27,709 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 23:26:27,709 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 23:26:27,714 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 23:26:27,714 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 23:26:27,715 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 8.5ms
2025-10-26 23:26:27,717 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 23:26:27,720 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 23:26:27,721 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 23:26:27,722 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 23:26:27,722 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.8ms
2025-10-26 23:32:06,619 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:32:06,619 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:32:06,648 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:32:06,649 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: name 'usuario_id' is not defined
2025-10-26 23:32:06,649 - app.services.refresh_token_service - INFO - [DEBUG-STORE] Almacenando refresh token para usuario_id=1, client_type=web
2025-10-26 23:32:06,653 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 23:32:06,653 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 76
2025-10-26 23:32:06,653 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 23:32:06,654 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:32:06,654 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: name 'usuario_id' is not defined
2025-10-26 23:32:06,655 - app.services.refresh_token_service - INFO - [DEBUG-STORE] Almacenando refresh token para usuario_id=1, client_type=web
2025-10-26 23:32:06,655 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (21d1fdc89d4611bdbd174970026c2d247aee1b90d14299be956f48d6a6391308). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 23:32:06,656 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (21d1fdc89d4611bdbd174970026c2d247aee1b90d14299be956f48d6a6391308). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 119, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 23:32:06,657 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (21d1fdc89d4611bdbd174970026c2d247aee1b90d14299be956f48d6a6391308). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 119, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 133, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 23:32:06,659 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 23:32:06,659 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 23:32:06,659 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 40.7ms
2025-10-26 23:32:06,659 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 40.3ms
2025-10-26 23:32:06,977 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-10-26 23:32:06,977 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 0.4ms
2025-10-26 23:32:06,979 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 23:32:06,981 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 23:32:06,996 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 16.8ms
2025-10-26 23:32:07,024 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:32:07,030 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:32:07,030 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:32:07,087 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:32:07,087 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:32:07,087 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 23:32:07,089 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 23:32:07,089 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 23:32:07,108 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 23:32:07,108 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 23:32:07,109 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 23:32:07,109 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 85.3ms
2025-10-26 23:32:07,112 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 23:32:07,113 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 23:32:07,113 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 23:32:07,114 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 26.8ms
2025-10-26 23:32:07,115 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.7ms
2025-10-26 23:32:07,116 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:32:07,119 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:32:07,119 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:32:07,120 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:32:07,120 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:32:07,121 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 4.4ms
2025-10-26 23:32:07,121 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 23:32:07,123 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 23:32:07,123 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 23:32:07,127 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 23:32:07,127 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 23:32:07,128 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 23:32:07,130 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 23:32:07,131 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 23:32:07,132 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 23:32:07,132 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.5ms
2025-10-26 23:32:07,133 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.1ms
2025-10-26 23:38:11,008 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 23:38:11,009 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-10-26 23:38:11,009 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.9ms
2025-10-26 23:38:11,009 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 0.5ms
2025-10-26 23:38:11,317 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:38:11,318 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:38:11,448 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:38:11,448 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: name 'refresh_token' is not defined
2025-10-26 23:38:11,448 - app.services.refresh_token_service - INFO - [DEBUG-STORE] Almacenando refresh token para usuario_id=1, client_type=web
2025-10-26 23:38:11,452 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 23:38:11,452 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 78
2025-10-26 23:38:11,452 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 23:38:11,453 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:38:11,453 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: name 'refresh_token' is not defined
2025-10-26 23:38:11,453 - app.services.refresh_token_service - INFO - [DEBUG-STORE] Almacenando refresh token para usuario_id=1, client_type=web
2025-10-26 23:38:11,454 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (5c5eed6ba4396e31da2d538ec5b987252a96c92a76116f413363f3f5a4bf5cf4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 23:38:11,455 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (5c5eed6ba4396e31da2d538ec5b987252a96c92a76116f413363f3f5a4bf5cf4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 119, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 23:38:11,456 - app.services.base_service - ERROR - ERROR INESPERADO en store_refresh_token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (5c5eed6ba4396e31da2d538ec5b987252a96c92a76116f413363f3f5a4bf5cf4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 119, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\base_service.py", line 36, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 133, in store_refresh_token
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail="Error al almacenar el refresh token"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
2025-10-26 23:38:11,458 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error almacenando nuevo refresh token: Error interno del servidor en store_refresh_token
2025-10-26 23:38:11,458 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 23:38:11,458 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 141.4ms
2025-10-26 23:38:11,459 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 141.1ms
2025-10-26 23:38:11,464 - app.main - INFO - 127.0.0.1 -> GET /api/v1/auth/me/
2025-10-26 23:38:11,467 - app.api.v1.endpoints.auth - INFO - Solicitud /me/ recibida para usuario: admin
2025-10-26 23:38:11,477 - app.main - INFO - 127.0.0.1 <- GET /api/v1/auth/me/ 12.2ms
2025-10-26 23:38:11,506 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 23:38:11,507 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 23:38:11,508 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 1.2ms
2025-10-26 23:38:11,508 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 0.9ms
2025-10-26 23:38:11,508 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 23:38:11,510 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 1.4ms
2025-10-26 23:38:11,511 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-10-26 23:38:11,512 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:38:11,512 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-10-26 23:38:11,513 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 2.0ms
2025-10-26 23:38:11,517 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:38:11,517 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:38:11,567 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:38:11,567 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:38:11,568 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 23:38:11,568 - app.main - INFO - 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-10-26 23:38:11,570 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 23:38:11,570 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 23:38:11,586 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 23:38:11,586 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 23:38:11,587 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 74.9ms
2025-10-26 23:38:11,587 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 75.0ms
2025-10-26 23:38:11,588 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 19.8ms
2025-10-26 23:38:11,588 - app.main - INFO - 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 19.7ms
2025-10-26 23:38:11,590 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 23:38:11,592 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 23:38:11,595 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 23:38:11,595 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 23:38:11,596 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 5.4ms
2025-10-26 23:38:11,596 - app.main - INFO - 127.0.0.1 -> GET /api/v1/usuarios/
2025-10-26 23:38:11,596 - app.main - INFO - 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-10-26 23:38:11,599 - app.api.v1.endpoints.usuarios - INFO - Solicitud GET /usuarios/ recibida - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-10-26 23:38:11,599 - app.services.usuario_service - INFO - Obteniendo usuarios paginados: page=1, limit=10, search='None'
2025-10-26 23:38:11,603 - app.services.usuario_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-10-26 23:38:11,603 - app.api.v1.endpoints.usuarios - INFO - Lista paginada de usuarios recuperada - Total: 2, Página: 1
2025-10-26 23:38:11,605 - app.api.v1.endpoints.menus - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1
2025-10-26 23:38:11,605 - app.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-10-26 23:38:11,606 - app.utils.menu_helper - INFO - Árbol de menú construido con 1 items raíz.
2025-10-26 23:38:11,607 - app.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 1 items raíz.
2025-10-26 23:38:11,607 - app.main - INFO - 127.0.0.1 <- GET /api/v1/usuarios/ 11.4ms
2025-10-26 23:38:11,608 - app.main - INFO - 127.0.0.1 <- GET /api/v1/menus/getmenu/ 11.4ms
2025-10-26 23:38:11,609 - app.main - INFO - 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-10-26 23:38:11,612 - app.api.v1.endpoints.roles - INFO - Solicitud GET /roles/all-active/ recibida para lista simple
2025-10-26 23:38:11,613 - app.services.rol_service - INFO - Se encontraron 3 roles activos
2025-10-26 23:38:11,613 - app.api.v1.endpoints.roles - INFO - Lista simple de roles activos recuperada - Total: 3
2025-10-26 23:38:11,614 - app.main - INFO - 127.0.0.1 <- GET /api/v1/roles/all-active/ 4.5ms
2025-10-26 23:38:25,154 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:38:25,155 - app.main - INFO - 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-10-26 23:38:25,157 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:38:25,158 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: name 'refresh_token' is not defined
2025-10-26 23:38:25,158 - app.services.refresh_token_service - INFO - [DEBUG-STORE] Almacenando refresh token para usuario_id=1, client_type=web
2025-10-26 23:38:25,160 - app.db.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-10-26 23:38:25,160 - app.services.refresh_token_service - INFO - [STORE-TOKEN] Usuario 1 - Cliente: web - Token ID: 80
2025-10-26 23:38:25,161 - app.api.v1.endpoints.auth - INFO - [REFRESH-WEB] Token refrescado exitosamente para usuario: admin
2025-10-26 23:38:25,162 - app.main - INFO - 127.0.0.1 <- POST /api/v1/auth/refresh/ 7.4ms
2025-10-26 23:38:25,168 - app.core.auth - INFO - [REFRESH] Token validado exitosamente para usuario: admin (Cliente: web)
2025-10-26 23:38:25,171 - app.api.v1.endpoints.auth - ERROR - [REFRESH] Error al revocar token antiguo: name 'refresh_token' is not defined
2025-10-26 23:38:25,172 - app.services.refresh_token_service - INFO - [DEBUG-STORE] Almacenando refresh token para usuario_id=1, client_type=web
2025-10-26 23:38:25,179 - app.db.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (f4b8ad8347573b47be35c23a2ab125eeab577cdeba55e19d9c309af32b6059df). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-10-26 23:38:25,180 - app.services.refresh_token_service - ERROR - Error inesperado almacenando refresh token: DatabaseError.__init__() got an unexpected keyword argument 'status_code'
Traceback (most recent call last):
  File "D:\base_fastapi\app\db\queries.py", line 59, in execute_insert
    cursor.execute(query, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ__refresh___9F6BDB133EA7D3EC'. Cannot insert duplicate key in object 'dbo.refresh_tokens'. The duplicate key value is (f4b8ad8347573b47be35c23a2ab125eeab577cdeba55e19d9c309af32b6059df). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_fastapi\app\services\refresh_token_service.py", line 119, in store_refresh_token
    result = execute_insert(INSERT_REFRESH_TOKEN, params)
  File "D:\base_fastapi\app\db\queries.py", line 80, in execute_insert
    raise DatabaseError(
          ~~~~~~~~~~~~~^
        status_code=500,
        ^^^^^^^^^^^^^^^^
        detail=f"Error en la inserción: {str(e)}"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: DatabaseError.__init__() got an unexpected keyword argument 'status_code'

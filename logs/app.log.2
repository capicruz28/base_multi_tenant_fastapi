2025-11-30 19:09:53,647 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:53,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,651 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,651 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,651 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 19:09:53,653 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:09:53,656 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 19:09:53,656 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 19:09:53,658 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 19:09:53,658 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 11.0ms
2025-11-30 19:09:53,666 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 19:09:53,667 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.7ms
2025-11-30 19:09:53,668 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 19:09:53,670 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.5ms
2025-11-30 19:09:53,671 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 19:09:53,671 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 19:09:53,671 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:09:53,672 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 19:09:53,673 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,673 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:53,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,674 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,674 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,674 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:09:53,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 4.2ms
2025-11-30 19:09:53,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 4.1ms
2025-11-30 19:09:53,677 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:09:53,677 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:09:53,720 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:09:53,720 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 48.4ms
2025-11-30 19:09:53,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 19:09:53,723 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.2ms
2025-11-30 19:09:53,723 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:09:53,724 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 52.3ms
2025-11-30 19:09:53,724 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,724 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:53,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,725 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,725 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,725 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:09:53,728 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:09:53,731 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:09:53,732 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,732 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:53,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,733 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,733 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,734 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:09:53,736 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:09:53,736 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:09:53,744 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:09:53,745 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 22.3ms
2025-11-30 19:09:53,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:09:53,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:53,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,748 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,748 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,748 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:09:53,751 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:09:53,751 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:09:53,752 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:09:53,753 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 21.4ms
2025-11-30 19:09:53,753 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:09:53,753 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,754 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:53,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,755 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,755 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,755 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:09:53,757 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:09:53,758 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 12.6ms
2025-11-30 19:09:53,758 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:09:53,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:53,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,761 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:09:53,763 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:09:53,763 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:09:53,767 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:09:53,767 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.5ms
2025-11-30 19:09:53,768 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 9.7ms
2025-11-30 19:09:55,467 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:09:55,467 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:09:55,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-11-30 19:09:55,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-11-30 19:09:55,469 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:09:55,469 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:55,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:55,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:55,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:55,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:55,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:55,471 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:55,471 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:55,471 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:09:55,473 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:09:55,473 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:09:59,622 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:09:59,622 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:09:59,627 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:09:59,627 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:09:59,660 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:09:59,665 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:09:59,667 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 4197.4ms
2025-11-30 19:09:59,669 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:59,670 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:59,671 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:59,671 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:09:59,673 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:09:59,673 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:09:59,674 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:09:59,676 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:09:59,677 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:09:59,678 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.9ms
2025-11-30 19:10:01,707 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:10:01,708 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/ 200 0.4ms
2025-11-30 19:10:01,709 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:10:01,709 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:10:01,709 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:10:01,710 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:10:01,711 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:10:01,713 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1017
2025-11-30 19:10:01,713 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1017 desde BD del contexto actual
2025-11-30 19:10:01,714 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1017 no encontrado en contexto, buscando en BD ADMIN
2025-11-30 19:10:01,716 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1017 no encontrado en ninguna BD (contexto ni ADMIN)
2025-11-30 19:10:01,716 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticación con ID 1017 no encontrado.
2025-11-30 19:10:01,716 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 7.0ms
2025-11-30 19:12:07,261 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 19:12:07,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,263 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,263 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,263 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 19:12:07,315 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 19:12:07,323 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 19:12:07,335 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 19:12:07,347 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:12:07,348 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14436, Rotación: True
2025-11-30 19:12:07,355 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 19:12:07,356 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 19:12:07,356 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 19:12:07,356 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14436
2025-11-30 19:12:07,356 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 19:12:07,374 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:12:07,376 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 19:12:07,378 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 117.9ms
2025-11-30 19:12:07,378 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 19:12:07,378 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 19:12:07,380 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 19:12:07,382 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 2.8ms
2025-11-30 19:12:07,382 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 3.2ms
2025-11-30 19:12:07,382 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 3.4ms
2025-11-30 19:12:07,388 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 19:12:07,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': global.app.local:5173
2025-11-30 19:12:07,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-11-30 19:12:07,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-11-30 19:12:07,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-11-30 19:12:07,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-11-30 19:12:07,396 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', Código='GLOBAL004', ID=5
2025-11-30 19:12:07,403 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-11-30 19:12:07,403 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-11-30 19:12:07,403 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-11-30 19:12:07,404 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 19:12:07,407 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,407 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:12:07,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:12:07,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:12:07,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:12:07,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:12:07,411 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:12:07,412 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:12:07,412 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/refresh/
2025-11-30 19:12:07,412 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 19:12:07,413 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,413 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-11-30 19:12:07,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-11-30 19:12:07,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-11-30 19:12:07,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-11-30 19:12:07,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-11-30 19:12:07,418 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=4
2025-11-30 19:12:07,420 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-11-30 19:12:07,420 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-11-30 19:12:07,420 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-11-30 19:12:07,421 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 19:12:07,422 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,422 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,423 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,423 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,423 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 19:12:07,427 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 19:12:07,427 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 19:12:07,427 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 19:12:07,448 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 19:12:07,448 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 19:12:07,452 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 5
2025-11-30 19:12:07,452 - app.core.auth - WARNING - [REFRESH] Token JWT válido, pero inactivo/revocado en BD. Usuario: superadmin
2025-11-30 19:12:07,457 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:12:07,459 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-11-30 19:12:07,460 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:12:07,492 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 2
2025-11-30 19:12:07,493 - app.core.auth - WARNING - [REFRESH] Token JWT válido, pero inactivo/revocado en BD. Usuario: superadmin
2025-11-30 19:12:07,493 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:12:07,501 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:12:07,502 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-11-30 19:12:07,503 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 81.7ms
2025-11-30 19:12:07,503 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 114.2ms
2025-11-30 19:12:07,504 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 4
2025-11-30 19:12:07,504 - app.core.auth - WARNING - [REFRESH] Token JWT válido, pero inactivo/revocado en BD. Usuario: superadmin
2025-11-30 19:12:07,506 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:12:07,506 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-11-30 19:12:07,508 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 103.7ms
2025-11-30 19:12:07,510 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 97.9ms
2025-11-30 19:12:07,512 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 19:12:07,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,517 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,517 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,518 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 19:12:07,522 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 19:12:07,522 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 19:12:07,525 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 19:12:07,526 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 12.4ms
2025-11-30 19:12:07,546 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:12:07,547 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:12:07,547 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:12:07,548 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,548 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,549 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,549 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,549 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:12:07,556 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:12:07,557 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:12:07,631 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,631 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,634 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,635 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,635 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:12:07,637 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:12:07,637 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:12:07,647 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:12:07,649 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:12:07,651 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 104.9ms
2025-11-30 19:12:07,651 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 104.2ms
2025-11-30 19:12:07,651 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 104.1ms
2025-11-30 19:12:07,654 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,656 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,657 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,657 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:12:07,658 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:12:07,660 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:12:07,661 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:12:07,661 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:12:07,662 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,663 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:12:07,666 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:12:07,666 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:12:07,668 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:12:07,668 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:12:07,668 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:12:07,668 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 21.0ms
2025-11-30 19:12:07,676 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 14.9ms
2025-11-30 19:12:07,676 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.5ms
2025-11-30 19:13:25,828 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:13:25,828 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:13:25,828 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:13:25,828 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:13:25,828 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:13:25,828 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:13:26,638 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:13:26,640 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:13:26,640 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:13:26,641 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:13:26,641 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:13:26,641 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:13:26,945 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:13:26,945 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:13:27,018 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:13:27,018 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:13:27,018 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:13:27,208 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:13:27,210 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:13:27,313 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'api', 'www', 'cdn', 'backend', 'admin', 'assets'}
2025-11-30 19:13:31,185 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:13:31,187 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:13:31,187 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 1.2ms
2025-11-30 19:13:31,187 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 1.0ms
2025-11-30 19:13:31,190 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:13:31,190 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:31,190 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:31,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:31,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:31,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:31,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:31,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:31,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:31,191 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:31,191 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:31,191 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:13:31,262 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:13:31,268 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:13:31,268 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:13:35,417 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:13:35,417 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:13:35,423 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:13:35,423 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,455 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,459 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,470 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,472 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,474 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:13:35,475 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4285.2ms
2025-11-30 19:13:35,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:35,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:35,480 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:35,480 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:35,480 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:13:35,483 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:13:35,483 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:13:35,484 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,484 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,485 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,487 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,489 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:35,490 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:13:35,491 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.8ms
2025-11-30 19:13:36,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:13:36,900 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.7ms
2025-11-30 19:13:36,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:13:36,901 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 1.0ms
2025-11-30 19:13:36,903 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:13:36,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:36,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:36,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:36,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:36,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:36,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:36,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:36,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:36,905 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:36,905 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:36,905 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:13:36,908 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 19:13:36,916 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:13:36,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:36,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:36,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:36,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:36,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:36,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:36,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:36,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:36,918 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:36,918 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:36,918 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:13:36,919 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 15.4ms
2025-11-30 19:13:36,921 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 19:13:36,928 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 11.8ms
2025-11-30 19:13:41,116 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 19:13:41,116 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 19:13:41,116 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/2/actividad/ 200 0.9ms
2025-11-30 19:13:41,116 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/2/sesiones/ 200 0.6ms
2025-11-30 19:13:41,118 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 19:13:41,119 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 19:13:41,119 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:41,119 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:41,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:41,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:41,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:41,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:41,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:41,120 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:41,120 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:41,120 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:41,120 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/actividad/
2025-11-30 19:13:41,123 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 2
2025-11-30 19:13:41,125 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-11-30 19:13:41,126 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:41,126 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:41,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:41,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:41,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:41,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:41,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:41,128 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:41,128 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:41,128 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:41,128 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 19:13:41,129 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 2
2025-11-30 19:13:41,132 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/actividad/ 200 13.4ms
2025-11-30 19:13:41,133 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/sesiones/ 200 13.3ms
2025-11-30 19:13:43,251 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/3/actividad/
2025-11-30 19:13:43,251 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 19:13:43,252 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/3/actividad/ 200 0.9ms
2025-11-30 19:13:43,252 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/3/sesiones/ 200 0.6ms
2025-11-30 19:13:43,254 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/3/actividad/
2025-11-30 19:13:43,254 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 19:13:43,254 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:43,255 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:43,256 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:43,256 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/3/actividad/
2025-11-30 19:13:43,259 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 3
2025-11-30 19:13:43,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:43,261 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:43,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:43,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:43,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:43,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:43,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:43,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:43,262 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:43,262 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:43,262 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 19:13:43,264 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 3
2025-11-30 19:13:43,266 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/3/actividad/ 200 12.1ms
2025-11-30 19:13:43,266 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/3/sesiones/ 200 12.1ms
2025-11-30 19:13:47,610 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:13:47,611 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:47,611 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:47,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:47,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:47,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:47,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:47,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:47,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:47,612 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:47,612 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:47,612 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:13:47,614 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:13:47,615 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:13:47,615 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:47,618 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:47,622 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:13:47,623 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.7ms
2025-11-30 19:13:47,624 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:13:47,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:47,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:47,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:47,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:47,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:47,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:47,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:47,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:47,627 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:47,627 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:47,627 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:13:47,628 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:13:47,629 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:13:47,630 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:47,630 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:13:47,631 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:13:47,632 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.7ms
2025-11-30 19:13:49,162 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 19:13:49,164 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1016/ 200 0.5ms
2025-11-30 19:13:49,165 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:49,166 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:49,167 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:49,167 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:49,167 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 19:13:49,168 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1016
2025-11-30 19:13:49,168 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1016 desde BD del contexto actual
2025-11-30 19:13:49,171 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1016 no encontrado en contexto, buscando en BD ADMIN
2025-11-30 19:13:49,173 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1016 no encontrado en ninguna BD (contexto ni ADMIN)
2025-11-30 19:13:49,173 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticación con ID 1016 no encontrado.
2025-11-30 19:13:49,174 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 8.8ms
2025-11-30 19:13:58,358 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:13:58,359 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.5ms
2025-11-30 19:13:58,360 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:13:58,361 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:13:58,361 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:13:58,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:58,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:58,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:58,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:13:58,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:13:58,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:13:58,362 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:13:58,362 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:13:58,362 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:13:58,366 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:13:58,366 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1006 desde BD del contexto actual
2025-11-30 19:13:58,367 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 encontrado en BD del contexto: 1
2025-11-30 19:13:58,367 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 completo en BD del cliente 1
2025-11-30 19:13:58,371 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 10.8ms
2025-11-30 19:14:57,949 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:14:57,949 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:14:57,949 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:14:57,950 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:14:57,950 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:14:57,950 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:14:58,793 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:14:58,795 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:14:58,795 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:14:58,796 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:14:58,796 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:14:58,797 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:14:59,135 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:14:59,136 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:14:59,207 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:14:59,208 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:14:59,208 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:14:59,435 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:14:59,436 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:14:59,592 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'assets', 'admin', 'api', 'cdn', 'www', 'backend'}
2025-11-30 19:15:03,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 19:15:03,901 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 19:15:03,901 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.2ms
2025-11-30 19:15:03,901 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-11-30 19:15:03,903 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:15:03,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:03,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:03,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:03,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:03,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:03,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:03,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:03,905 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:03,905 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:03,905 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:03,905 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:15:03,972 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:15:03,977 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:15:03,977 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:15:03,986 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:15:03,987 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 83.0ms
2025-11-30 19:15:03,989 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:15:03,989 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:03,989 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:03,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:03,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:03,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:03,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:03,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:03,990 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:03,990 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:03,990 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:03,990 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:15:03,992 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:15:03,992 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:15:03,994 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:15:03,994 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.3ms
2025-11-30 19:15:04,567 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 19:15:04,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 0.6ms
2025-11-30 19:15:04,568 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 19:15:04,568 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 0.5ms
2025-11-30 19:15:04,568 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 19:15:04,571 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:04,571 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:04,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:04,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:04,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:04,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:04,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:04,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:04,572 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:04,572 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:04,572 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 19:15:04,574 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 19:15:04,575 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 20
2025-11-30 19:15:04,578 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 19:15:04,579 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 19:15:04,581 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.6ms
2025-11-30 19:15:04,583 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 19:15:04,583 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:04,583 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:04,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:04,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:04,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:04,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:04,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:04,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:04,585 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:04,585 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:04,585 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 19:15:04,587 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 19:15:04,587 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 20
2025-11-30 19:15:04,588 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 19:15:04,588 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 19:15:04,588 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.7ms
2025-11-30 19:15:08,050 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:15:08,050 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:08,050 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:08,051 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:08,051 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:08,051 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:08,051 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:08,051 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:08,051 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:08,052 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:08,052 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:08,052 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:15:08,055 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:15:08,055 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:15:08,056 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:15:08,057 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.8ms
2025-11-30 19:15:08,059 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:08,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:08,062 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:08,062 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:08,062 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:15:08,064 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:15:08,064 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:15:08,066 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:15:08,067 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.2ms
2025-11-30 19:15:09,383 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:15:09,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:09,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:09,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,385 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:09,385 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:09,385 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:15:09,387 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:15:09,391 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:15:09,392 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 8.1ms
2025-11-30 19:15:09,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:09,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:09,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,393 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:09,394 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:09,394 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:15:09,396 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:15:09,396 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:15:09,421 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:15:09,423 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 31.7ms
2025-11-30 19:15:09,423 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:15:09,424 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:09,424 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:09,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,425 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:09,425 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:09,425 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:15:09,427 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:15:09,429 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:15:09,430 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:09,430 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:09,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,431 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,431 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:09,431 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:09,431 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:09,431 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:09,431 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:09,431 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:15:09,433 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:15:09,433 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:15:09,435 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:15:09,435 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 12.8ms
2025-11-30 19:15:09,438 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.0ms
2025-11-30 19:15:10,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:15:10,477 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:10,477 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:10,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:10,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:10,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:10,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:10,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:10,479 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:10,479 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:10,479 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:10,479 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:15:10,480 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:15:10,481 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:15:14,582 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:15:14,582 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:15:14,586 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:15:14,586 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:15:14,642 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:15:14,649 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:15:14,651 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 4174.0ms
2025-11-30 19:15:14,653 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:15:14,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:14,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:14,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:14,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:14,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:14,655 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:14,655 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:14,655 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:14,655 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:14,655 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:14,655 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:15:14,657 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:15:14,658 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:15:14,659 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:15:14,659 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:15:14,660 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:15:14,662 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.8ms
2025-11-30 19:15:20,569 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:15:20,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:15:20,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:15:20,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:20,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:20,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:20,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:15:20,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:15:20,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:15:20,570 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:15:20,570 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:15:20,570 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:15:20,572 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1017
2025-11-30 19:15:20,573 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD del contexto actual
2025-11-30 19:15:20,579 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1017 no encontrado en contexto, buscando en BDs de clientes activos
2025-11-30 19:15:20,579 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 19:15:20,581 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:15:20,582 - app.infrastructure.database.queries - ERROR - Error en execute_query para cliente 2: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'dbo.cliente'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 19:15:20,582 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Error buscando log 1017 en cliente 2: Error en la consulta: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'dbo.cliente'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 19:15:20,584 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 3: multi - bd_cliente_innova
2025-11-30 19:15:20,584 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-11-30 19:15:20,624 - app.infrastructure.database.queries - ERROR - Error en execute_query para cliente 3: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'dbo.cliente'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 19:15:20,624 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Error buscando log 1017 en cliente 3: Error en la consulta: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'dbo.cliente'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 19:15:20,625 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-11-30 19:15:20,626 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-11-30 19:15:20,628 - app.core.tenant.routing - WARNING - [METADATA] No se encontró configuración para cliente 1002, usando Single-DB como fallback
2025-11-30 19:15:20,628 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1017 no encontrado en ninguna BD de cliente activo
2025-11-30 19:15:20,628 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticación con ID 1017 no encontrado.
2025-11-30 19:15:20,629 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 60.1ms
2025-11-30 19:19:58,405 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:19:58,405 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:19:58,405 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:19:58,405 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:19:58,406 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:19:58,406 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:19:59,292 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:19:59,295 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:19:59,296 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:19:59,296 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:19:59,296 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:19:59,297 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:19:59,651 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:19:59,651 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:19:59,720 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:19:59,721 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:19:59,721 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:20:00,009 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:20:00,010 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:20:00,121 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'backend', 'admin', 'api', 'static', 'assets', 'cdn'}
2025-11-30 19:32:10,286 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 19:32:10,288 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 2.3ms
2025-11-30 19:32:10,293 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 19:32:10,294 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:10,294 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:10,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:10,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:10,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:10,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:10,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:10,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:10,295 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:10,295 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:10,295 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 19:32:10,373 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 19:32:10,378 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 19:32:10,385 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 19:32:10,394 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:32:10,394 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14437, Rotación: True
2025-11-30 19:32:10,399 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 19:32:10,399 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 19:32:10,399 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 19:32:10,400 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14437
2025-11-30 19:32:10,400 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 19:32:10,407 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:32:10,407 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 19:32:10,408 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 115.8ms
2025-11-30 19:32:10,651 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:32:10,651 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:32:10,651 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:32:10,651 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:32:10,651 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:32:10,652 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:32:11,634 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:32:11,636 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:32:11,636 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:32:11,636 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:32:11,636 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:32:11,637 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:32:11,977 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:32:11,977 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:32:12,050 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:32:12,050 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:32:12,050 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:32:12,247 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:32:12,247 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:32:12,416 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'api', 'admin', 'backend', 'cdn', 'www', 'assets'}
2025-11-30 19:32:12,457 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 19:32:12,457 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.6ms
2025-11-30 19:32:12,459 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 19:32:12,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,461 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,461 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,461 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 19:32:12,486 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 19:32:12,486 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 19:32:12,486 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 19:32:12,498 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 19:32:12,498 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 19:32:12,499 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 39.5ms
2025-11-30 19:32:12,503 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 19:32:12,503 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 19:32:12,505 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 19:32:12,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,506 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,507 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,507 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 19:32:12,508 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:32:12,510 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 19:32:12,510 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 19:32:12,511 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 19:32:12,513 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 7.5ms
2025-11-30 19:32:12,515 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 19:32:12,516 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.7ms
2025-11-30 19:32:12,517 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 19:32:12,517 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 19:32:12,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.0ms
2025-11-30 19:32:12,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 2.0ms
2025-11-30 19:32:12,520 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 19:32:12,520 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:32:12,520 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 19:32:12,523 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,523 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,524 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,524 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,524 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:32:12,524 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 19:32:12,525 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 4.6ms
2025-11-30 19:32:12,526 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:32:12,526 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:32:12,565 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:32:12,566 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 46.1ms
2025-11-30 19:32:12,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 44.1ms
2025-11-30 19:32:12,569 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:32:12,570 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:32:12,570 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 50.2ms
2025-11-30 19:32:12,570 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,571 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,572 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,572 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,572 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:32:12,572 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,572 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,574 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,574 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,574 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:32:12,577 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:32:12,579 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:32:12,580 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:32:12,588 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:32:12,589 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 19.9ms
2025-11-30 19:32:12,590 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 19.9ms
2025-11-30 19:32:12,590 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:32:12,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,592 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,592 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,592 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:32:12,594 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:32:12,594 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:32:12,595 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:32:12,597 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:32:12,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,598 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:32:12,601 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:32:12,603 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:32:12,603 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 13.2ms
2025-11-30 19:32:12,603 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:12,604 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:12,605 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:32:12,607 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:32:12,607 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:32:12,610 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:32:12,611 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.6ms
2025-11-30 19:32:12,611 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 9.7ms
2025-11-30 19:32:14,090 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:32:14,091 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:32:14,091 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 19:32:14,091 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 19:32:14,093 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:32:14,094 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:14,094 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:14,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:14,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:14,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:14,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:14,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:14,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:14,095 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:14,095 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:14,095 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:32:14,097 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:32:14,097 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:32:18,238 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:32:18,238 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:32:18,246 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:32:18,246 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,283 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,287 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,293 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,295 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,297 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:32:18,298 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4204.8ms
2025-11-30 19:32:18,300 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:18,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:18,302 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:18,302 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:18,302 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:32:18,303 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:32:18,304 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:32:18,305 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,305 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,307 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,309 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,311 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:18,313 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:32:18,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.5ms
2025-11-30 19:32:19,576 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:32:19,577 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.7ms
2025-11-30 19:32:19,577 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:32:19,578 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 1.0ms
2025-11-30 19:32:19,578 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:32:19,581 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:19,581 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:19,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:19,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:19,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:19,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:19,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:19,582 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:19,582 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:19,582 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:19,583 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:32:19,585 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 19:32:19,594 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:32:19,595 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 14.8ms
2025-11-30 19:32:19,595 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:19,595 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:19,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:19,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:19,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:19,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:19,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:19,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:19,597 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:19,597 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:19,597 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:32:19,599 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 19:32:19,605 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 10.7ms
2025-11-30 19:32:28,052 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:32:28,052 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.7ms
2025-11-30 19:32:28,053 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:32:28,053 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.9ms
2025-11-30 19:32:28,055 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:28,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:28,057 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:28,057 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:28,057 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:32:28,059 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:32:28,059 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:32:28,060 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:28,062 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:28,065 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:32:28,066 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.6ms
2025-11-30 19:32:28,068 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:32:28,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:28,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:28,070 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:28,071 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:32:28,073 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:32:28,074 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:32:28,074 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:28,075 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:28,076 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:32:28,077 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.2ms
2025-11-30 19:32:29,329 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:32:29,329 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/ 200 0.5ms
2025-11-30 19:32:29,330 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:29,331 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:29,333 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:32:29,336 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1017
2025-11-30 19:32:29,336 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD del contexto actual
2025-11-30 19:32:29,339 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1017 no encontrado en contexto, buscando en BDs de clientes activos
2025-11-30 19:32:29,341 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 19:32:29,342 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:32:29,344 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1017 encontrado en BD del cliente 2
2025-11-30 19:32:29,345 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 200 15.1ms
2025-11-30 19:32:36,689 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 19:32:36,689 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/ 200 0.5ms
2025-11-30 19:32:36,692 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 19:32:36,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:36,693 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:36,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:36,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:36,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:36,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:36,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:36,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:36,694 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:36,694 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:36,695 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 19:32:36,698 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1005
2025-11-30 19:32:36,699 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1005 en BD del contexto actual
2025-11-30 19:32:36,699 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 encontrado en BD del contexto
2025-11-30 19:32:36,701 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 9.6ms
2025-11-30 19:32:39,318 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:32:39,318 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.5ms
2025-11-30 19:32:39,320 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:32:39,320 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:39,320 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:39,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:39,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:39,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:39,320 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:39,321 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:39,321 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:39,321 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:39,321 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:39,321 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:32:39,323 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:32:39,323 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 en BD del contexto actual
2025-11-30 19:32:39,324 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del contexto
2025-11-30 19:32:39,325 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 5.7ms
2025-11-30 19:32:53,451 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:32:53,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:32:53,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:32:53,452 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:32:53,455 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:32:53,455 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 en BD del contexto actual
2025-11-30 19:32:53,456 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del contexto
2025-11-30 19:32:53,457 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 6.1ms
2025-11-30 19:33:43,118 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:33:43,118 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:33:43,118 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:33:43,118 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:33:43,119 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:33:43,144 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:33:43,144 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 en BD del contexto actual
2025-11-30 19:33:43,152 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del contexto
2025-11-30 19:33:43,157 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 39.8ms
2025-11-30 19:33:59,438 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:33:59,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:33:59,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:33:59,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:33:59,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:33:59,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:33:59,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:33:59,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:33:59,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:33:59,440 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:33:59,440 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:33:59,440 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:33:59,442 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:33:59,442 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:33:59,443 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,458 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,462 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,475 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,478 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,480 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:33:59,480 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 42.5ms
2025-11-30 19:33:59,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:33:59,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:33:59,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:33:59,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:33:59,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:33:59,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:33:59,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:33:59,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:33:59,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:33:59,484 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:33:59,484 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:33:59,484 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:33:59,486 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:33:59,487 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:33:59,487 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,488 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,489 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,490 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,492 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:33:59,493 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:33:59,495 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.3ms
2025-11-30 19:34:00,779 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:34:00,780 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:34:00,780 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:34:00,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:34:00,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:34:00,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:34:00,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:34:00,780 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:34:00,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:34:00,781 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:34:00,781 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:34:00,781 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:34:00,783 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:34:00,783 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:34:00,784 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:34:00,786 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:34:00,791 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:34:00,792 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.8ms
2025-11-30 19:34:00,793 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:34:00,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:34:00,795 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:34:00,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:34:00,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:34:00,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:34:00,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:34:00,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:34:00,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:34:00,796 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:34:00,796 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:34:00,796 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:34:00,798 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:34:00,799 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:34:00,799 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:34:00,800 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:34:00,802 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:34:00,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.6ms
2025-11-30 19:34:44,301 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:34:44,301 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:34:44,301 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:34:44,301 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:34:44,302 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:34:44,302 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:34:50,112 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:34:50,114 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:34:50,114 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:34:50,114 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:34:50,114 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:34:50,114 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:34:50,396 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:34:50,396 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:34:50,468 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:34:50,468 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:34:50,468 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:34:50,658 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:34:50,658 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:34:50,771 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'cdn', 'backend', 'assets', 'api', 'static', 'www'}
2025-11-30 19:34:54,503 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-11-30 19:34:54,504 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.7ms
2025-11-30 19:34:54,506 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-11-30 19:34:54,506 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:34:54,506 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:34:54,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:34:54,507 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/logout/
2025-11-30 19:34:54,588 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 19:34:54,588 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 19:34:54,589 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 1, Usuario: 1 (superadmin)
2025-11-30 19:34:54,597 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:34:54,597 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=1, usuario_id=1, exito=True
2025-11-30 19:34:54,597 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 91.8ms
2025-11-30 19:35:02,765 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-11-30 19:35:02,765 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-11-30 19:35:02,767 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:02,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:02,769 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:02,769 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:02,769 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-11-30 19:35:02,774 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-11-30 19:35:02,775 - app.core.auth - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-11-30 19:35:02,775 - app.core.auth - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-11-30 19:35:03,006 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 19:35:03,007 - app.core.auth - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=1, access_level=5, user_type=super_admin
2025-11-30 19:35:03,007 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=1
2025-11-30 19:35:03,007 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 19:35:03,011 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:35:03,012 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14438, Rotación: False
2025-11-30 19:35:03,012 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14438
2025-11-30 19:35:03,012 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 1
2025-11-30 19:35:03,015 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:35:03,016 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=1, usuario_id=1, exito=True
2025-11-30 19:35:03,016 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 249.8ms
2025-11-30 19:35:03,026 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 19:35:03,026 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:03,027 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:03,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:03,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:03,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:03,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:03,027 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:03,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:03,029 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:03,029 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:03,029 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 19:35:03,030 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:35:03,033 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 19:35:03,033 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 19:35:03,035 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 19:35:03,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 10.1ms
2025-11-30 19:35:03,044 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:35:03,044 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:03,045 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:03,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:03,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:03,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:03,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:03,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:03,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:03,046 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:03,048 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:03,048 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:35:03,050 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:35:03,050 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:35:03,095 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:35:03,095 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 51.7ms
2025-11-30 19:35:03,097 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:35:03,098 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:03,098 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:03,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:03,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:03,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:03,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:03,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:03,099 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:03,099 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:03,099 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:03,099 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 19:35:03,100 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 19:35:03,101 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:35:03,101 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 19:35:03,102 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 5.2ms
2025-11-30 19:35:04,584 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 19:35:04,585 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.9ms
2025-11-30 19:35:04,586 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 19:35:04,587 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.8ms
2025-11-30 19:35:04,587 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:35:04,589 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:04,589 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:04,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:04,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:04,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:04,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:04,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:04,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:04,590 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:04,590 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:04,590 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:35:04,593 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:35:04,593 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:35:04,599 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:35:04,599 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 12.2ms
2025-11-30 19:35:04,602 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:35:04,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:04,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:04,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:04,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:04,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:04,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:04,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:04,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:04,603 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:04,603 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:04,604 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:35:04,605 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:35:04,606 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:35:04,607 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:35:04,608 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.1ms
2025-11-30 19:35:07,115 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:35:07,115 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:07,116 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:07,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,117 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:07,117 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:07,117 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:35:07,120 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:35:07,122 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:35:07,122 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 7.3ms
2025-11-30 19:35:07,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:07,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:07,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,124 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:07,124 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:07,124 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:35:07,128 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:35:07,128 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:35:07,137 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:35:07,139 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 17.6ms
2025-11-30 19:35:07,139 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:35:07,141 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:07,141 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:07,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,142 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:07,142 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:07,142 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:35:07,144 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:35:07,145 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:35:07,146 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:07,146 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:07,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:07,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:07,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:07,147 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:07,147 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:07,147 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:35:07,151 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:35:07,151 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:35:07,154 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:35:07,154 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.1ms
2025-11-30 19:35:07,155 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 9.6ms
2025-11-30 19:35:08,591 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:35:08,592 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:08,592 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:08,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:08,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:08,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:08,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:08,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:08,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:08,593 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:08,593 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:08,593 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:35:08,596 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:35:08,596 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:35:12,734 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:35:12,734 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:35:12,738 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:35:12,739 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:35:12,764 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:35:12,766 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:35:12,767 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 4176.0ms
2025-11-30 19:35:12,770 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:35:12,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:12,771 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:12,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:12,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:12,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:12,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:12,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:12,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:12,772 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:12,772 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:12,772 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:35:12,774 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:35:12,774 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:35:12,774 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:35:12,776 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:35:12,776 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:35:12,777 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.0ms
2025-11-30 19:35:15,427 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:35:15,427 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:35:15,427 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:35:15,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:15,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:15,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:15,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:35:15,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:35:15,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:35:15,428 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:35:15,428 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:35:15,428 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:35:15,429 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:35:15,429 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 en BD del contexto actual
2025-11-30 19:35:15,432 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del contexto
2025-11-30 19:35:15,434 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 8.2ms
2025-11-30 19:36:09,016 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:36:09,016 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:36:09,016 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:36:09,016 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,016 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,017 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:36:09,017 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:36:09,017 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:36:09,033 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:36:09,033 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:36:09,038 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,044 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,052 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,068 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,072 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,074 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:36:09,074 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 58.7ms
2025-11-30 19:36:09,075 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:36:09,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:36:09,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:36:09,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,078 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:36:09,078 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:36:09,079 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:36:09,081 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:36:09,081 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:36:09,082 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,083 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,084 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,086 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,089 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,090 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:36:09,091 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 15.5ms
2025-11-30 19:36:09,676 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:36:09,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:36:09,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:36:09,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,678 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:36:09,678 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:36:09,678 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:36:09,680 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:36:09,680 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:36:09,681 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,683 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,688 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:36:09,689 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.9ms
2025-11-30 19:36:09,691 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:36:09,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:36:09,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:36:09,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:36:09,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:36:09,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:36:09,692 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:36:09,692 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:36:09,692 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:36:09,694 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:36:09,695 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:36:09,696 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,696 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:36:09,699 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:36:09,699 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.1ms
2025-11-30 19:37:16,079 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:37:16,079 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:37:16,079 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:37:16,080 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:37:16,106 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:37:16,106 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 en BD del contexto actual
2025-11-30 19:37:16,114 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del contexto
2025-11-30 19:37:16,118 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 38.4ms
2025-11-30 19:37:31,773 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:37:31,773 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:37:31,773 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:37:31,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:37:31,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:37:31,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:37:31,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:37:31,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:37:31,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:37:31,775 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:37:31,775 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:37:31,775 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:37:31,780 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1017
2025-11-30 19:37:31,780 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD del contexto actual
2025-11-30 19:37:31,785 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1017 no encontrado en contexto, buscando en BDs de clientes activos
2025-11-30 19:37:31,788 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 19:37:31,788 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:37:31,803 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1017 encontrado en BD del cliente 2
2025-11-30 19:37:31,805 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 200 32.2ms
2025-11-30 19:37:44,696 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:37:44,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:37:44,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:37:44,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:37:44,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:37:44,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:37:44,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:37:44,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:37:44,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:37:44,699 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:37:44,699 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:37:44,699 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:37:44,705 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:37:44,705 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 en BD del contexto actual
2025-11-30 19:37:44,709 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del contexto
2025-11-30 19:37:44,713 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 16.0ms
2025-11-30 19:40:11,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:40:11,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:40:11,461 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:40:11,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:11,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:11,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:11,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:11,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:11,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:11,462 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:40:11,462 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:40:11,462 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:40:11,486 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:40:11,487 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:40:11,497 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:40:11,498 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 38.3ms
2025-11-30 19:40:11,499 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:40:11,500 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:40:11,500 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:40:11,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:11,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:11,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:11,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:11,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:11,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:11,502 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:40:11,502 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:40:11,502 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:40:11,503 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:40:11,504 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:40:11,505 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:40:11,506 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 5.9ms
2025-11-30 19:40:15,669 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:40:15,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:40:15,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:40:15,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,671 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:40:15,671 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:40:15,671 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:40:15,673 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:40:15,675 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:40:15,676 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 7.2ms
2025-11-30 19:40:15,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:40:15,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:40:15,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:40:15,677 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:40:15,681 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:40:15,681 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:40:15,690 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:40:15,691 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 14.9ms
2025-11-30 19:40:15,691 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:40:15,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:40:15,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:40:15,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,693 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:40:15,693 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:40:15,693 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:40:15,695 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:40:15,696 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:40:15,697 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:40:15,697 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:40:15,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:40:15,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:40:15,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:40:15,699 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:40:15,699 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:40:15,699 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:40:15,700 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:40:15,700 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:40:15,702 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:40:15,703 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 12.2ms
2025-11-30 19:40:15,704 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.5ms
2025-11-30 19:41:37,935 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:37,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:37,938 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:37,938 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:37,938 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:41:37,961 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:41:37,962 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:41:37,974 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:41:37,975 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 40.5ms
2025-11-30 19:41:37,977 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:41:37,977 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:37,977 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:37,977 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:37,979 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:41:37,981 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:41:37,981 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:41:37,983 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:41:37,983 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.4ms
2025-11-30 19:41:38,255 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:41:38,255 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:41:38,255 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:41:38,256 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:41:38,256 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:41:38,256 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:41:39,196 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:41:39,198 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:41:39,198 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:41:39,199 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:41:39,199 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:41:39,199 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:41:39,537 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:41:39,537 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:41:39,607 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:41:39,607 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:41:39,607 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:41:39,887 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:41:39,887 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:41:40,016 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'static', 'assets', 'cdn', 'backend', 'admin', 'api'}
2025-11-30 19:41:40,061 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:41:40,061 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:40,061 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:40,061 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:40,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:40,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:40,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:40,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:40,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:40,062 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:40,062 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:40,063 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:41:40,118 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:41:40,121 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:41:40,121 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:41:40,123 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:41:40,124 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 62.6ms
2025-11-30 19:41:40,125 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:41:40,126 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:40,126 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:40,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:40,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:40,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:40,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:40,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:40,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:40,127 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:40,127 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:40,127 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:41:40,129 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:41:40,129 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:41:40,131 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:41:40,131 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 5.9ms
2025-11-30 19:41:41,675 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:41:41,675 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:41,675 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:41,676 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:41,677 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:41:41,679 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:41:41,683 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 7.5ms
2025-11-30 19:41:41,683 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:41:41,684 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:41,684 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:41,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,685 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,685 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:41,685 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:41,685 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:41:41,687 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:41:41,687 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:41:41,697 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:41:41,698 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 19:41:41,698 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 15.4ms
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:41,699 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 19:41:41,702 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 19:41:41,704 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 19:41:41,704 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:41,704 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:41,705 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:41,706 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 19:41:41,706 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 8.2ms
2025-11-30 19:41:41,707 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 19:41:41,707 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 19:41:41,709 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 19:41:41,710 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 7.1ms
2025-11-30 19:41:43,197 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:41:43,198 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:43,198 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:43,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:43,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:43,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:43,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:43,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:43,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:43,199 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:43,199 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:43,199 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:41:43,200 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:41:43,200 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:41:47,330 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:41:47,330 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:41:47,335 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:41:47,335 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,368 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,369 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,380 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,381 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,382 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:41:47,383 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4186.3ms
2025-11-30 19:41:47,385 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:41:47,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:47,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:47,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:47,386 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 19:41:47,388 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 19:41:47,388 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 19:41:47,391 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,392 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,393 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,394 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,395 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:47,397 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 19:41:47,397 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.5ms
2025-11-30 19:41:48,454 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:41:48,456 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:48,456 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:48,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:48,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:48,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:48,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:48,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:48,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:48,457 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:48,457 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:48,457 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 19:41:48,458 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:41:48,460 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 19:41:48,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:48,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:48,467 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:48,468 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 19:41:48,470 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 19:41:48,477 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 22.5ms
2025-11-30 19:41:48,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 21.0ms
2025-11-30 19:41:52,010 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:41:52,010 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:52,010 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:52,010 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:52,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:52,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:52,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:52,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:52,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:52,011 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:52,011 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:52,012 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:41:52,023 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:41:52,023 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:41:52,028 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:52,034 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:52,038 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:41:52,039 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 29.1ms
2025-11-30 19:41:52,041 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:41:52,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:52,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:52,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:52,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:52,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:52,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:52,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:52,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:52,042 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:52,042 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:52,042 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:41:52,049 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:41:52,049 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 19:41:52,051 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:52,052 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:52,053 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 16, Página: 1
2025-11-30 19:41:52,054 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 13.3ms
2025-11-30 19:41:53,228 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:41:53,228 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:53,228 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:53,229 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 19:41:53,242 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1017
2025-11-30 19:41:53,242 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1017 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 19:41:53,250 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 19:41:53,250 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:53,257 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1017 encontrado en BD del cliente 2
2025-11-30 19:41:53,262 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 200 34.6ms
2025-11-30 19:41:57,040 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 19:41:57,041 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/ 200 0.5ms
2025-11-30 19:41:57,043 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 19:41:57,044 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:57,044 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:57,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:57,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:57,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:57,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:57,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:57,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:57,045 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:57,045 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:57,045 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 19:41:57,057 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1004
2025-11-30 19:41:57,058 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1004 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 19:41:57,064 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1004 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 19:41:57,065 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:57,079 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1004 encontrado en BD del cliente 2
2025-11-30 19:41:57,082 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1004/ 200 38.9ms
2025-11-30 19:41:59,091 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 19:41:59,092 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:41:59,092 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:41:59,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:59,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:59,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:59,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:41:59,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:41:59,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:41:59,093 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:41:59,093 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:41:59,093 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 19:41:59,095 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1005
2025-11-30 19:41:59,095 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 19:41:59,096 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1005 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 19:41:59,096 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:41:59,097 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 encontrado en BD del cliente 2
2025-11-30 19:41:59,098 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 6.7ms
2025-11-30 19:42:02,511 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:42:02,512 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:02,513 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:02,514 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:02,514 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 19:42:02,516 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 19:42:02,517 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 19:42:02,517 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 19:42:02,519 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:02,519 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del cliente 2
2025-11-30 19:42:02,521 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 10.7ms
2025-11-30 19:42:10,538 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:42:10,538 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:10,538 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:10,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:10,540 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:42:10,542 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:42:10,542 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:42:10,549 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:42:10,549 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 10.8ms
2025-11-30 19:42:10,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:42:10,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:10,551 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:10,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:10,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:10,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:10,553 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:10,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:10,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:10,554 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:10,555 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:10,555 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:42:10,560 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:42:10,560 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:42:10,575 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:42:10,577 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 25.8ms
2025-11-30 19:42:12,212 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/1002/
2025-11-30 19:42:12,212 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/1002/ 200 0.7ms
2025-11-30 19:42:12,213 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/1002/estadisticas/
2025-11-30 19:42:12,215 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/1002/estadisticas/ 200 1.1ms
2025-11-30 19:42:12,216 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/1002/
2025-11-30 19:42:12,216 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/1002/estadisticas/
2025-11-30 19:42:12,216 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/1002/
2025-11-30 19:42:12,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:12,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:12,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,218 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:12,219 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:12,219 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/1002/
2025-11-30 19:42:12,219 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/1002/ 200 3.9ms
2025-11-30 19:42:12,219 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/1002/estadisticas/ 200 3.9ms
2025-11-30 19:42:12,221 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/1002 recibida por usuario: superadmin
2025-11-30 19:42:12,225 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/1002/estadisticas/
2025-11-30 19:42:12,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/1002/ 200 10.4ms
2025-11-30 19:42:12,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:12,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:12,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,228 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:12,228 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:12,228 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/1002/estadisticas/
2025-11-30 19:42:12,230 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/1002/estadisticas recibida por usuario: superadmin
2025-11-30 19:42:12,230 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 1002
2025-11-30 19:42:12,238 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 1002
2025-11-30 19:42:12,241 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/1002/estadisticas/ 200 15.0ms
2025-11-30 19:42:12,241 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/1002/
2025-11-30 19:42:12,241 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:12,242 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:12,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,243 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:12,243 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:12,243 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/1002/
2025-11-30 19:42:12,244 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/1002 recibida por usuario: superadmin
2025-11-30 19:42:12,246 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/1002/estadisticas/
2025-11-30 19:42:12,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:12,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:12,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:12,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:12,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:12,248 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:12,248 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:12,248 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/1002/estadisticas/
2025-11-30 19:42:12,251 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/1002/estadisticas recibida por usuario: superadmin
2025-11-30 19:42:12,251 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 1002
2025-11-30 19:42:12,253 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 1002
2025-11-30 19:42:12,254 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/1002/ 200 12.6ms
2025-11-30 19:42:12,255 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/1002/estadisticas/ 200 8.4ms
2025-11-30 19:42:13,832 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:13,832 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:13,833 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-11-30 19:42:13,833 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-11-30 19:42:13,835 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:13,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:13,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:13,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:13,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:13,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:13,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:13,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:13,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:13,837 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:13,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:13,837 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:13,839 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 1002, page: 1
2025-11-30 19:42:13,839 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 1002, page: 1
2025-11-30 19:42:13,842 - app.core.tenant.routing - WARNING - [METADATA] No se encontró configuración para cliente 1002, usando Single-DB como fallback
2025-11-30 19:42:13,852 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 0, Página: 1
2025-11-30 19:42:13,852 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 17.4ms
2025-11-30 19:42:13,855 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:13,855 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:13,855 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:13,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:13,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:13,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:13,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:13,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:13,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:13,856 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:13,856 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:13,856 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:13,858 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 1002, page: 1
2025-11-30 19:42:13,859 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 1002, page: 1
2025-11-30 19:42:13,860 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 0, Página: 1
2025-11-30 19:42:13,861 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 6.8ms
2025-11-30 19:42:15,207 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/1002/usuarios/
2025-11-30 19:42:15,208 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/1002/usuarios/
2025-11-30 19:42:15,208 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/1002/usuarios/ 200 0.9ms
2025-11-30 19:42:15,208 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/1002/usuarios/ 200 0.6ms
2025-11-30 19:42:15,210 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/1002/usuarios/
2025-11-30 19:42:15,210 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:15,210 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:15,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:15,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:15,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:15,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:15,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:15,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:15,212 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:15,212 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:15,212 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/1002/usuarios/
2025-11-30 19:42:15,214 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 1002 - page: 1, limit: 10
2025-11-30 19:42:15,214 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 1002, page: 1, limit: 10
2025-11-30 19:42:15,218 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 1002 recuperados - Total: 0, Página: 1
2025-11-30 19:42:15,219 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/1002/usuarios/ 200 9.5ms
2025-11-30 19:42:15,221 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/1002/usuarios/
2025-11-30 19:42:15,221 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:15,221 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:15,222 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:15,223 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/1002/usuarios/
2025-11-30 19:42:15,225 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 1002 - page: 1, limit: 10
2025-11-30 19:42:15,225 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 1002, page: 1, limit: 10
2025-11-30 19:42:15,227 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 1002 recuperados - Total: 0, Página: 1
2025-11-30 19:42:15,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/1002/usuarios/ 200 6.2ms
2025-11-30 19:42:18,062 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/1002/
2025-11-30 19:42:18,062 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/1002/ 200 0.9ms
2025-11-30 19:42:18,064 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 19:42:18,065 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 19:42:18,065 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/1002/
2025-11-30 19:42:18,065 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.6ms
2025-11-30 19:42:18,066 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.5ms
2025-11-30 19:42:18,066 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/1002/ 200 1.3ms
2025-11-30 19:42:18,066 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/1002/
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,069 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:18,069 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:18,069 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/1002/
2025-11-30 19:42:18,070 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/1002 recibida
2025-11-30 19:42:18,071 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 1002
2025-11-30 19:42:18,073 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 1002: 0 conexiones
2025-11-30 19:42:18,074 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 19:42:18,075 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:18,075 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:18,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,076 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:18,076 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:18,076 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 19:42:18,077 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/1002/ 200 10.9ms
2025-11-30 19:42:18,078 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 19:42:18,079 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 19:42:18,081 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 19:42:18,083 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 19:42:18,084 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 9.9ms
2025-11-30 19:42:18,086 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/1002/
2025-11-30 19:42:18,087 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:18,087 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:18,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,088 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,088 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,088 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:18,088 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:18,088 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/1002/
2025-11-30 19:42:18,090 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/1002 recibida
2025-11-30 19:42:18,090 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 1002
2025-11-30 19:42:18,091 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 1002: 0 conexiones
2025-11-30 19:42:18,093 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 19:42:18,093 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:18,093 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:18,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:18,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:18,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:18,094 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:18,095 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:18,095 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 19:42:18,095 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/1002/ 200 9.5ms
2025-11-30 19:42:18,097 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 19:42:18,097 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 19:42:18,098 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 19:42:18,098 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 19:42:18,099 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.6ms
2025-11-30 19:42:19,948 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:42:19,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:19,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:19,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:19,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:19,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:19,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:19,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:19,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:19,950 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:19,950 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:19,950 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:42:19,952 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:42:19,952 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:42:19,954 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:42:19,955 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.9ms
2025-11-30 19:42:19,958 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 19:42:19,958 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:19,958 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:19,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:19,959 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 19:42:19,961 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 19:42:19,961 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 19:42:19,962 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 19:42:19,963 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.2ms
2025-11-30 19:42:22,378 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/
2025-11-30 19:42:22,378 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/ 200 0.7ms
2025-11-30 19:42:22,379 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/estadisticas/
2025-11-30 19:42:22,379 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/
2025-11-30 19:42:22,379 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/estadisticas/ 200 2.1ms
2025-11-30 19:42:22,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/5/estadisticas/
2025-11-30 19:42:22,381 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/ 200 2.1ms
2025-11-30 19:42:22,382 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/5/estadisticas/ 200 1.6ms
2025-11-30 19:42:22,382 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/
2025-11-30 19:42:22,383 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:22,383 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:22,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,384 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:22,385 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:22,385 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/
2025-11-30 19:42:22,387 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5 recibida por usuario: superadmin
2025-11-30 19:42:22,388 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/estadisticas/
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:22,390 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:22,391 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/estadisticas/
2025-11-30 19:42:22,394 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5/estadisticas recibida por usuario: superadmin
2025-11-30 19:42:22,394 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 5
2025-11-30 19:42:22,396 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 5
2025-11-30 19:42:22,396 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/ 200 13.9ms
2025-11-30 19:42:22,397 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/estadisticas/ 200 8.3ms
2025-11-30 19:42:22,398 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/
2025-11-30 19:42:22,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:22,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:22,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,400 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:22,400 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:22,400 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/
2025-11-30 19:42:22,400 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/5/estadisticas/
2025-11-30 19:42:22,403 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5 recibida por usuario: superadmin
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:22,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:22,406 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:22,406 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:22,406 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/5/estadisticas/
2025-11-30 19:42:22,407 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/5/estadisticas recibida por usuario: superadmin
2025-11-30 19:42:22,407 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 5
2025-11-30 19:42:22,410 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 5
2025-11-30 19:42:22,411 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/ 200 12.9ms
2025-11-30 19:42:22,411 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/5/estadisticas/ 200 11.2ms
2025-11-30 19:42:23,470 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/5/modulos/
2025-11-30 19:42:23,470 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/5/modulos/
2025-11-30 19:42:23,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/5/modulos/ 200 0.8ms
2025-11-30 19:42:23,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/5/modulos/ 200 0.5ms
2025-11-30 19:42:23,471 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/5/modulos/
2025-11-30 19:42:23,473 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:23,473 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:23,473 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:23,473 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:23,473 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:23,473 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:23,473 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:23,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:23,474 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:23,474 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:23,474 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/5/modulos/
2025-11-30 19:42:23,475 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/5/modulos/ recibida
2025-11-30 19:42:23,476 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 5
2025-11-30 19:42:23,479 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 5 recuperados: 5 módulos
2025-11-30 19:42:23,480 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/5/modulos/ 200 8.0ms
2025-11-30 19:42:23,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/5/modulos/
2025-11-30 19:42:23,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:23,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:23,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:23,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:23,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:23,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:23,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:23,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:23,483 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:23,484 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:23,484 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/5/modulos/
2025-11-30 19:42:23,485 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/5/modulos/ recibida
2025-11-30 19:42:23,485 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 5
2025-11-30 19:42:23,486 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 5 recuperados: 5 módulos
2025-11-30 19:42:23,487 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/5/modulos/ 200 4.6ms
2025-11-30 19:42:24,395 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/5/
2025-11-30 19:42:24,395 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/5/ 200 0.8ms
2025-11-30 19:42:24,396 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/5/
2025-11-30 19:42:24,396 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 19:42:24,397 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/5/ 200 1.4ms
2025-11-30 19:42:24,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:24,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:24,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:24,398 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 19:42:24,400 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 19:42:24,400 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 19:42:24,402 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 19:42:24,402 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 19:42:24,403 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/5/
2025-11-30 19:42:24,404 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:24,404 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:24,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,405 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:24,405 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:24,405 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/5/
2025-11-30 19:42:24,407 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/5 recibida
2025-11-30 19:42:24,407 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 5
2025-11-30 19:42:24,408 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 5: 1 conexiones
2025-11-30 19:42:24,408 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 12.2ms
2025-11-30 19:42:24,409 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/5/ 200 6.3ms
2025-11-30 19:42:24,410 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 19:42:24,412 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:24,412 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:24,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,413 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:24,413 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:24,414 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 19:42:24,414 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/5/
2025-11-30 19:42:24,416 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 19:42:24,416 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 19:42:24,417 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 19:42:24,418 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 19:42:24,418 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:24,418 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:24,419 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:24,420 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/5/
2025-11-30 19:42:24,421 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/5 recibida
2025-11-30 19:42:24,421 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 5
2025-11-30 19:42:24,422 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 5: 1 conexiones
2025-11-30 19:42:24,423 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 12.2ms
2025-11-30 19:42:24,423 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/5/ 200 9.3ms
2025-11-30 19:42:25,689 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-11-30 19:42:25,690 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-11-30 19:42:25,690 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 1.1ms
2025-11-30 19:42:25,690 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 0.6ms
2025-11-30 19:42:25,692 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-11-30 19:42:25,693 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:25,693 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:25,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:25,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:25,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:25,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:25,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:25,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:25,694 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:25,694 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:25,694 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-11-30 19:42:25,696 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 5 - page: 1, limit: 10
2025-11-30 19:42:25,697 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 5, page: 1, limit: 10
2025-11-30 19:42:25,698 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-11-30 19:42:25,712 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 5 recuperados - Total: 2, Página: 1
2025-11-30 19:42:25,712 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 20.6ms
2025-11-30 19:42:25,714 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-11-30 19:42:25,714 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:25,715 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:25,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:25,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:25,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:25,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:25,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:25,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:25,716 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:25,716 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:25,716 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/5/usuarios/
2025-11-30 19:42:25,718 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 5 - page: 1, limit: 10
2025-11-30 19:42:25,718 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 5, page: 1, limit: 10
2025-11-30 19:42:25,722 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 5 recuperados - Total: 2, Página: 1
2025-11-30 19:42:25,723 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/5/usuarios/ 200 9.4ms
2025-11-30 19:42:27,459 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:27,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:27,460 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-11-30 19:42:27,460 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.8ms
2025-11-30 19:42:27,461 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:27,461 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:27,463 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:27,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:27,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:27,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:27,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:27,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:27,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:27,464 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:27,464 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:27,464 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:27,466 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 5, page: 1
2025-11-30 19:42:27,466 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 5, page: 1
2025-11-30 19:42:27,468 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 0, Página: 1
2025-11-30 19:42:27,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 6.6ms
2025-11-30 19:42:27,470 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:27,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:27,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:27,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:27,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:27,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:27,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:27,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:27,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:27,472 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:27,472 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:27,472 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 19:42:27,474 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 5, page: 1
2025-11-30 19:42:27,475 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 5, page: 1
2025-11-30 19:42:27,476 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 0, Página: 1
2025-11-30 19:42:27,477 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 6.6ms
2025-11-30 19:42:31,227 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-11-30 19:42:31,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:31,228 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 19:42:31,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:31,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:31,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:31,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:42:31,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:31,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:42:31,229 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:42:31,229 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:42:31,229 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/logout/
2025-11-30 19:42:31,236 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 19:42:31,237 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 19:42:31,237 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 1, Usuario: 1 (superadmin)
2025-11-30 19:42:31,249 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:42:31,249 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=1, usuario_id=1, exito=True
2025-11-30 19:42:31,250 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 23.7ms
2025-11-30 19:42:42,401 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-11-30 19:42:42,402 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-11-30 19:42:42,403 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-11-30 19:42:42,404 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:42,404 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:42,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,407 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:42,407 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:42,407 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/login/
2025-11-30 19:42:42,411 - app.modules.auth.presentation.endpoints - INFO - Cliente 2 resuelto y validado para login.
2025-11-30 19:42:42,411 - app.core.auth - INFO - [AUTH] Intento de login: username='admin_acme', cliente_id_destino=2
2025-11-30 19:42:42,411 - app.core.auth - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=2
2025-11-30 19:42:42,412 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,636 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,644 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,649 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-11-30 19:42:42,649 - app.core.auth - INFO - [AUTH] Login exitoso: username='admin_acme', usuario_id=1, cliente_origen=2, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-11-30 19:42:42,649 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,653 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,653 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-11-30 19:42:42,655 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,657 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:42:42,658 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 2, Usuario 1, Tipo: web, Token ID: 2043, Rotación: False
2025-11-30 19:42:42,658 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 2043
2025-11-30 19:42:42,658 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_acme autenticado exitosamente (WEB) para cliente 2
2025-11-30 19:42:42,658 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,667 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:42:42,668 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=2, usuario_id=1, exito=True
2025-11-30 19:42:42,669 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 265.2ms
2025-11-30 19:42:42,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 19:42:42,677 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.6ms
2025-11-30 19:42:42,678 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 19:42:42,680 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:42,680 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:42,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,684 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,685 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:42,685 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:42,686 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/clientes/tenant/branding
2025-11-30 19:42:42,686 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,704 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:42,707 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 19:42:42,710 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 500 30.9ms
2025-11-30 19:42:42,710 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 2.5ms
2025-11-30 19:42:42,710 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-11-30 19:42:42,710 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-11-30 19:42:42,710 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 19:42:42,712 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.5ms
2025-11-30 19:42:42,712 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 1.4ms
2025-11-30 19:42:42,713 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.4ms
2025-11-30 19:42:42,716 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:42:42,717 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:42:42,717 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:42,717 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:42,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,719 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:42,719 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:42,719 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-11-30 19:42:42,720 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,720 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:42,722 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:42,722 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:42,722 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,723 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,724 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,724 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:42,724 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:42,724 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:42:42,725 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,726 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:42,727 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 10.9ms
2025-11-30 19:42:42,727 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 500 10.5ms
2025-11-30 19:42:42,729 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:42:42,730 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:42,730 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:42,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,732 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,733 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:42,733 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:42,733 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-11-30 19:42:42,734 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:42:42,734 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,736 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:42,737 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:42,737 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:42,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:42,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:42,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:42,740 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:42,740 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:42,740 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:42:42,741 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:42,742 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:42,743 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 13.5ms
2025-11-30 19:42:42,744 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 500 9.7ms
2025-11-30 19:42:45,925 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-11-30 19:42:45,928 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.3ms
2025-11-30 19:42:45,928 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-11-30 19:42:45,928 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-11-30 19:42:45,929 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-11-30 19:42:45,929 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.8ms
2025-11-30 19:42:45,930 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.7ms
2025-11-30 19:42:45,930 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.7ms
2025-11-30 19:42:45,932 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 19:42:45,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:45,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:45,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,934 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,935 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,935 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,938 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:45,939 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:45,939 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 19:42:45,939 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:45,940 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:45,942 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 19:42:45,943 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:45,943 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:45,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,945 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:45,945 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:45,946 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 19:42:45,946 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:45,947 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:45,948 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 500 16.4ms
2025-11-30 19:42:45,950 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 500 7.0ms
2025-11-30 19:42:45,952 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 19:42:45,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:45,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:45,953 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,953 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,953 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,955 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:45,955 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:45,955 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 19:42:45,956 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:45,957 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:45,958 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 19:42:45,958 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:42:45,958 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:42:45,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:42:45,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:42:45,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:42:45,960 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:42:45,960 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:42:45,960 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 19:42:45,962 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:42:45,963 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:42:45,964 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 500 12.7ms
2025-11-30 19:42:45,965 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 500 6.3ms
2025-11-30 19:43:35,775 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:43:35,775 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:43:35,775 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:43:35,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:35,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:35,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:35,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:35,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:35,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:35,791 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:43:35,791 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:43:35,793 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:43:35,794 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:43:35,821 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:43:35,821 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 500 47.2ms
2025-11-30 19:43:35,823 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:43:35,823 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:43:35,823 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:43:35,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:35,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:35,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:35,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:35,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:35,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:35,826 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:43:35,826 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:43:35,826 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:43:35,827 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:43:35,828 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:43:35,830 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 500 6.1ms
2025-11-30 19:43:37,270 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:43:37,271 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:43:37,271 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:43:37,271 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:43:37,271 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:43:37,271 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:43:42,964 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:43:42,965 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:43:42,965 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:43:42,966 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:43:42,966 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:43:42,966 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:43:43,239 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:43:43,239 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:43:43,310 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:43:43,310 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:43:43,310 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:43:43,513 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:43:43,514 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:43:43,635 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'cdn', 'www', 'admin', 'assets', 'backend', 'api'}
2025-11-30 19:43:45,458 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 19:43:45,458 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 19:43:45,459 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:43:45,459 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:43:45,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:45,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:45,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:45,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:45,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:45,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:45,517 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:43:49,652 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:43:49,653 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:43:49,658 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:43:49,659 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:43:49,659 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 19:43:49,659 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:43:49,659 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:43:49,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:49,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:49,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:49,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:49,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:49,661 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:49,661 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:43:49,661 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:43:49,661 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 19:43:49,664 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:43:49,686 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:43:49,686 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:43:49,687 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:43:49,689 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:43:49,690 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:43:49,691 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 500 4234.1ms
2025-11-30 19:43:49,691 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 500 4233.9ms
2025-11-30 19:43:49,695 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 19:43:49,695 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 19:43:49,695 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:43:49,696 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:43:49,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:49,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:49,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:49,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:49,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:49,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:49,698 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:43:49,698 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:43:49,698 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 19:43:49,699 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:43:49,700 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:43:49,701 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:43:49,701 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:43:49,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:49,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:49,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:49,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:43:49,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:43:49,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:43:49,703 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:43:49,703 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:43:49,703 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 19:43:49,704 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:43:49,705 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 19:43:49,706 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 500 11.8ms
2025-11-30 19:43:49,706 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 500 11.6ms
2025-11-30 19:44:59,703 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:44:59,703 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:44:59,703 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 19:44:59,705 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:44:59,705 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:44:59,705 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 19:45:00,638 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 19:45:00,640 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:45:00,640 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 19:45:00,641 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:45:00,641 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:45:00,642 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:45:00,982 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 19:45:00,983 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 19:45:01,059 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 19:45:01,059 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 19:45:01,059 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 19:45:01,333 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 19:45:01,333 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 19:45:01,490 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'assets', 'backend', 'static', 'api', 'admin', 'cdn'}
2025-11-30 19:45:48,840 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:45:48,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:48,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:48,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:48,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:48,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:48,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:48,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:48,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:48,912 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:53,064 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 19:45:53,064 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 19:45:53,071 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 19:45:53,071 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:53,071 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:45:53,073 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,098 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 19:45:53,099 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,116 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:53,117 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,119 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,123 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:45:53,123 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:45:53,123 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:45:53,123 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,128 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:45:53,128 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,131 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:45:53,131 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:53,131 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:53,131 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:53,131 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:45:53,131 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:45:53,133 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 4293.5ms
2025-11-30 19:45:53,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:45:53,134 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:53,136 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:53,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:53,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:53,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:53,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:53,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:53,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:53,138 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:53,138 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:53,138 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:45:53,139 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,139 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:53,140 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,140 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,141 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:45:53,141 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:45:53,141 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:45:53,141 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,143 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:45:53,143 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:53,144 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:45:53,145 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:53,145 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:53,145 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:53,145 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:45:53,145 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:45:53,146 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 11.4ms
2025-11-30 19:45:54,957 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 19:45:54,958 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:54,958 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:54,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:54,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:54,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:54,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:54,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:54,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:54,961 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:54,961 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:54,961 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 19:45:54,962 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,963 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:54,964 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,964 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,966 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:45:54,966 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:45:54,966 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,970 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,976 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:54,976 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:54,977 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:54,977 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios únicos de 3 filas crudas
2025-11-30 19:45:54,977 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-11-30 19:45:54,977 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, Página: 1
2025-11-30 19:45:54,979 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 19:45:54,980 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:54,980 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:54,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:54,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:54,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:54,982 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:54,982 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:54,982 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:54,982 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:54,983 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:54,983 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 19:45:54,983 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 26.0ms
2025-11-30 19:45:54,983 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,986 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:54,986 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,986 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,987 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:45:54,987 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,989 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-11-30 19:45:54,989 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-11-30 19:45:54,990 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 11.0ms
2025-11-30 19:45:54,991 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 19:45:54,992 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:54,992 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:54,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:54,993 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:54,994 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:54,994 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:54,995 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 19:45:54,995 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,997 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:54,998 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,998 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:54,999 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:45:54,999 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:45:54,999 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:55,001 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:55,003 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:55,003 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:55,003 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:55,003 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 3 usuarios únicos de 3 filas crudas
2025-11-30 19:45:55,003 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-11-30 19:45:55,003 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 2 - Total: 3, Página: 1
2025-11-30 19:45:55,006 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 19:45:55,006 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:55,006 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:55,006 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:55,006 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:55,006 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:55,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:55,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:55,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:55,008 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:55,008 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:55,008 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 19:45:55,009 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 17.0ms
2025-11-30 19:45:55,009 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:55,010 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:55,010 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:55,011 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:55,012 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:45:55,012 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:55,013 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 3 roles activos para cliente 2
2025-11-30 19:45:55,013 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 2 - Total: 3
2025-11-30 19:45:55,014 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 8.9ms
2025-11-30 19:45:56,457 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:45:56,458 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:56,458 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:56,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:56,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:56,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:56,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:56,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:56,459 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:56,459 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:56,459 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:56,459 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:45:56,461 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,463 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:56,463 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,464 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,466 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:45:56,467 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:45:56,467 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:45:56,467 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,469 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:45:56,469 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,471 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:45:56,471 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:56,471 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:56,471 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:56,471 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:45:56,471 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:45:56,472 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 15.6ms
2025-11-30 19:45:56,473 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:45:56,475 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:56,475 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:56,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:56,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:56,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:56,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:56,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:56,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:56,478 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:56,478 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:56,478 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:45:56,479 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,480 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:56,480 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,481 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,482 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:45:56,482 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:45:56,483 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:45:56,483 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,484 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:45:56,484 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:56,486 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:45:56,486 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:56,486 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:56,486 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:45:56,486 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:45:56,486 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:45:56,487 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 13.6ms
2025-11-30 19:45:57,052 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-11-30 19:45:57,053 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 0.7ms
2025-11-30 19:45:57,053 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-11-30 19:45:57,054 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 0.6ms
2025-11-30 19:45:57,055 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:45:57,055 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:57,055 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:57,055 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:57,055 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:57,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:57,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:57,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:57,058 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:57,058 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:57,059 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:57,059 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:45:57,059 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,062 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:57,062 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,063 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,064 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:45:57,064 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:45:57,064 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,069 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,071 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:45:57,072 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:45:57,072 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 17.2ms
2025-11-30 19:45:57,073 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:45:57,075 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:57,075 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:57,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:57,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:57,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:57,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:57,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:57,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:57,077 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:57,077 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:57,077 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:45:57,078 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,079 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:57,079 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,080 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,082 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:45:57,082 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:45:57,082 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,083 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:57,085 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:45:57,085 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:45:57,085 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 11.1ms
2025-11-30 19:45:58,108 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-11-30 19:45:58,110 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 200 0.8ms
2025-11-30 19:45:58,110 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/list/
2025-11-30 19:45:58,111 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/list/ 200 0.7ms
2025-11-30 19:45:58,112 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/list/
2025-11-30 19:45:58,112 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:58,112 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:58,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:58,113 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:58,113 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:58,113 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:58,113 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:58,114 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:58,115 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:58,116 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:58,116 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/list/
2025-11-30 19:45:58,117 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,118 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:58,118 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,120 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,121 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/list/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:45:58,121 - app.modules.menus.application.services.area_service - INFO - Obteniendo lista simple de áreas activas para cliente 2
2025-11-30 19:45:58,121 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,123 - app.modules.menus.application.services.area_service - INFO - Lista simple obtenida para cliente 2: 2 áreas activas
2025-11-30 19:45:58,123 - app.modules.menus.presentation.endpoints_areas - INFO - Lista simple de áreas recuperada para cliente 2 - Total: 2 áreas activas
2025-11-30 19:45:58,123 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/list/ 200 11.7ms
2025-11-30 19:45:58,125 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/list/
2025-11-30 19:45:58,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:45:58,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:45:58,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:58,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:58,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:58,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:45:58,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:45:58,127 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:45:58,128 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:45:58,128 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:45:58,128 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/list/
2025-11-30 19:45:58,129 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,129 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:45:58,130 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,130 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,131 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/list/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:45:58,132 - app.modules.menus.application.services.area_service - INFO - Obteniendo lista simple de áreas activas para cliente 2
2025-11-30 19:45:58,132 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:45:58,132 - app.modules.menus.application.services.area_service - INFO - Lista simple obtenida para cliente 2: 2 áreas activas
2025-11-30 19:45:58,133 - app.modules.menus.presentation.endpoints_areas - INFO - Lista simple de áreas recuperada para cliente 2 - Total: 2 áreas activas
2025-11-30 19:45:58,133 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/list/ 200 8.9ms
2025-11-30 19:46:00,828 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/area/2/tree/
2025-11-30 19:46:00,829 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/area/2/tree/ 200 0.5ms
2025-11-30 19:46:00,830 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/area/2/tree/
2025-11-30 19:46:00,830 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:00,830 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:00,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:00,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:00,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:00,832 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:00,832 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:00,832 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:00,833 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:00,833 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:00,833 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/area/2/tree/
2025-11-30 19:46:00,833 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:00,835 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:00,836 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:00,836 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:00,837 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/area/2/tree/ recibida por usuario 1 del cliente 2.
2025-11-30 19:46:00,837 - app.modules.menus.application.services.menu_service - INFO - Obteniendo árbol de menú para cliente 2, area_id: 2
2025-11-30 19:46:00,838 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:00,840 - app.modules.menus.application.services.menu_helper - INFO - Árbol de menú construido con 2 items raíz.
2025-11-30 19:46:00,840 - app.modules.menus.application.services.menu_service - INFO - Árbol de menú del cliente 2, área 2 construido con 2 items raíz.
2025-11-30 19:46:00,841 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/area/2/tree/ 200 11.2ms
2025-11-30 19:46:02,661 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/area/1/tree/
2025-11-30 19:46:02,662 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/area/1/tree/ 200 0.5ms
2025-11-30 19:46:02,663 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/area/1/tree/
2025-11-30 19:46:02,664 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:02,664 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:02,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:02,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:02,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:02,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:02,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:02,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:02,666 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:02,667 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:02,667 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/area/1/tree/
2025-11-30 19:46:02,667 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:02,669 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:02,669 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:02,670 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:02,671 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/area/1/tree/ recibida por usuario 1 del cliente 2.
2025-11-30 19:46:02,671 - app.modules.menus.application.services.menu_service - INFO - Obteniendo árbol de menú para cliente 2, area_id: 1
2025-11-30 19:46:02,671 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:02,672 - app.modules.menus.application.services.menu_helper - INFO - Árbol de menú construido con 3 items raíz.
2025-11-30 19:46:02,672 - app.modules.menus.application.services.menu_service - INFO - Árbol de menú del cliente 2, área 1 construido con 3 items raíz.
2025-11-30 19:46:02,672 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/area/1/tree/ 200 8.8ms
2025-11-30 19:46:06,255 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:46:06,255 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:06,255 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:06,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,259 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:06,259 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:06,260 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:46:06,260 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,261 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:06,262 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,262 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,263 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:46:06,263 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:46:06,263 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:46:06,263 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,266 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:46:06,266 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,267 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:46:06,268 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:06,268 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:06,268 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:06,268 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:46:06,268 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:46:06,269 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 12.8ms
2025-11-30 19:46:06,270 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:46:06,271 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:06,271 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:06,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,272 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,272 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,273 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:06,274 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:06,274 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:46:06,274 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,276 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:06,276 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,277 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,278 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:46:06,278 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:46:06,278 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:46:06,278 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,281 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:46:06,281 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,283 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:46:06,283 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:06,283 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:06,283 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:06,283 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:46:06,283 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:46:06,284 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 13.5ms
2025-11-30 19:46:06,735 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:46:06,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:06,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:06,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,738 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:06,738 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:06,739 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:46:06,739 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,741 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:06,741 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,743 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,744 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:46:06,744 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:46:06,744 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,746 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,748 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:46:06,748 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:46:06,749 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 13.0ms
2025-11-30 19:46:06,750 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:46:06,750 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:06,750 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:06,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:06,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:06,752 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:06,752 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:06,752 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:06,752 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:46:06,753 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,755 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:06,755 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,756 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,757 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:46:06,757 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:46:06,757 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,759 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:06,760 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:46:06,761 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:46:06,761 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 11.6ms
2025-11-30 19:46:07,799 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 19:46:07,799 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.5ms
2025-11-30 19:46:07,800 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 19:46:07,801 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:07,801 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:07,801 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,801 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,801 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,803 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:07,803 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:07,803 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/refresh/
2025-11-30 19:46:07,806 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,811 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 2, Usuario 1, Tipo: web
2025-11-30 19:46:07,811 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,814 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_acme (Cliente: 2, Level: 4, Type: tenant_admin)
2025-11-30 19:46:07,814 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,818 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-11-30 19:46:07,819 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,819 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,821 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:46:07,822 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 2, Usuario 1, Tipo: web, Token ID: 2044, Rotación: True
2025-11-30 19:46:07,822 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,827 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 19:46:07,827 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 2, Usuario 1
2025-11-30 19:46:07,827 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 19:46:07,827 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 2044
2025-11-30 19:46:07,828 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_acme
2025-11-30 19:46:07,828 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,831 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 19:46:07,831 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=2, usuario_id=1, exito=True
2025-11-30 19:46:07,832 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 32.1ms
2025-11-30 19:46:07,836 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 19:46:07,836 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.4ms
2025-11-30 19:46:07,838 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 19:46:07,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:07,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:07,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,841 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:07,841 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:07,841 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/me/
2025-11-30 19:46:07,842 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,843 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: admin_acme
2025-11-30 19:46:07,845 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 4, Super Admin: False, Type: tenant_admin
2025-11-30 19:46:07,845 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 2
2025-11-30 19:46:07,845 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,848 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,852 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,855 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 19:46:07,855 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: admin_acme, Type: tenant_admin, Level: 4, Super Admin: False, Roles: 1
2025-11-30 19:46:07,856 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 18.1ms
2025-11-30 19:46:07,861 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 19:46:07,861 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:07,861 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:07,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,863 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:07,863 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:07,863 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/clientes/tenant/branding
2025-11-30 19:46:07,863 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,864 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:07,864 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=2 por usuario: admin_acme
2025-11-30 19:46:07,865 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=2
2025-11-30 19:46:07,867 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=2
2025-11-30 19:46:07,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.7ms
2025-11-30 19:46:07,889 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:46:07,890 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:07,890 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:07,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,893 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:07,893 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:07,893 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-11-30 19:46:07,894 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,896 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:07,896 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-11-30 19:46:07,896 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:46:07,896 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,958 - app.modules.menus.application.services.menu_helper - INFO - Árbol de menú construido con 5 items raíz.
2025-11-30 19:46:07,958 - app.modules.menus.application.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 5 items raíz.
2025-11-30 19:46:07,958 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:46:07,960 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:07,960 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:07,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,962 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:07,962 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:07,962 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:46:07,962 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,963 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:07,963 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,963 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,965 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:46:07,965 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:46:07,965 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,966 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,967 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:46:07,968 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:46:07,968 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 78.8ms
2025-11-30 19:46:07,969 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 9.2ms
2025-11-30 19:46:07,970 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 19:46:07,970 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:07,970 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:07,970 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,970 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,972 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:07,973 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:07,973 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-11-30 19:46:07,973 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,976 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:07,976 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 2
2025-11-30 19:46:07,976 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 19:46:07,977 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,978 - app.modules.menus.application.services.menu_helper - INFO - Árbol de menú construido con 5 items raíz.
2025-11-30 19:46:07,978 - app.modules.menus.application.services.menu_service - INFO - Árbol de menú construido para usuario 1 con 5 items raíz.
2025-11-30 19:46:07,978 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:46:07,979 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:07,979 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:07,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:07,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:07,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:07,981 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:07,981 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:07,981 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:46:07,981 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 12.1ms
2025-11-30 19:46:07,982 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,983 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:07,983 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,984 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,986 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:46:07,986 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:46:07,986 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,987 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:07,988 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:46:07,988 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:46:07,989 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 10.7ms
2025-11-30 19:46:09,422 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/list/
2025-11-30 19:46:09,423 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:09,423 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:09,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:09,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:09,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:09,426 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:09,426 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:09,426 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/list/
2025-11-30 19:46:09,427 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,427 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:09,429 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,429 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,430 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/list/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:46:09,430 - app.modules.menus.application.services.area_service - INFO - Obteniendo lista simple de áreas activas para cliente 2
2025-11-30 19:46:09,431 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,431 - app.modules.menus.application.services.area_service - INFO - Lista simple obtenida para cliente 2: 2 áreas activas
2025-11-30 19:46:09,431 - app.modules.menus.presentation.endpoints_areas - INFO - Lista simple de áreas recuperada para cliente 2 - Total: 2 áreas activas
2025-11-30 19:46:09,432 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/list/ 200 9.7ms
2025-11-30 19:46:09,433 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/list/
2025-11-30 19:46:09,434 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:09,434 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:09,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:09,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:09,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:09,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:09,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:09,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:09,437 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:09,437 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:09,437 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/list/
2025-11-30 19:46:09,438 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,439 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:09,439 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,440 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,440 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/list/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:46:09,444 - app.modules.menus.application.services.area_service - INFO - Obteniendo lista simple de áreas activas para cliente 2
2025-11-30 19:46:09,445 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:09,446 - app.modules.menus.application.services.area_service - INFO - Lista simple obtenida para cliente 2: 2 áreas activas
2025-11-30 19:46:09,447 - app.modules.menus.presentation.endpoints_areas - INFO - Lista simple de áreas recuperada para cliente 2 - Total: 2 áreas activas
2025-11-30 19:46:09,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/list/ 200 13.5ms
2025-11-30 19:46:10,046 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:46:10,046 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:10,046 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:10,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:10,046 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:10,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:10,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:10,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:10,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:10,048 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:10,049 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:10,049 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:46:10,049 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,050 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:10,051 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,052 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,053 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:46:10,053 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:46:10,053 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:46:10,053 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,056 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:46:10,056 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,057 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:46:10,058 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:10,058 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:10,058 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:10,058 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:46:10,058 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:46:10,059 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 13.7ms
2025-11-30 19:46:10,061 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 19:46:10,061 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:10,062 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:10,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:10,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:10,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:10,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:10,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:10,064 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:10,064 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:10,064 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:10,064 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 19:46:10,066 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,067 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:10,067 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,068 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,069 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 1 del cliente 2 - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-11-30 19:46:10,069 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 2: page=1, limit=10, search='None'
2025-11-30 19:46:10,069 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=2, page=1, limit=10, search='None'
2025-11-30 19:46:10,069 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,071 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 2: 3
2025-11-30 19:46:10,071 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:10,072 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 3 roles para la página 1 de 3 totales
2025-11-30 19:46:10,072 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 1 tiene codigo_rol='ADMIN' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:10,072 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 2 tiene codigo_rol='SUPERVISOR' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:10,072 - app.modules.rbac.application.services.rol_service - WARNING - [NORMALIZAR-ROL] Rol 3 tiene codigo_rol='USER' pero cliente_id=2. Normalizando codigo_rol a None.
2025-11-30 19:46:10,073 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 2, Total: 3, Página: 1/1, Resultados: 3
2025-11-30 19:46:10,073 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 2, Total roles: 3
2025-11-30 19:46:10,073 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 12.3ms
2025-11-30 19:46:38,675 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:46:38,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:38,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:38,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:38,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:38,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:38,695 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:38,695 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:38,695 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:38,695 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:38,696 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:38,696 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:46:38,696 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,722 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:38,722 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,727 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,730 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:46:38,730 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:46:38,730 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,741 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,743 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:46:38,745 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:46:38,745 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 69.0ms
2025-11-30 19:46:38,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 19:46:38,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:38,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:38,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:38,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:38,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:38,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:38,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:38,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:38,751 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:38,752 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:38,752 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 19:46:38,752 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,753 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:38,753 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,755 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,756 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 1 del cliente 2 - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-11-30 19:46:38,756 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 2: skip=0, limit=10, search='None'
2025-11-30 19:46:38,756 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,758 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:38,759 - app.modules.menus.application.services.area_service - INFO - Paginación completada para cliente 2: 2 áreas de 2 totales
2025-11-30 19:46:38,759 - app.modules.menus.presentation.endpoints_areas - INFO - Lista paginada de áreas recuperada para cliente 2 - Total: 2, Página: 1
2025-11-30 19:46:38,759 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 200 13.4ms
2025-11-30 19:46:39,137 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/list/
2025-11-30 19:46:39,138 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:39,138 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:39,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,141 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:39,141 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:39,141 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/list/
2025-11-30 19:46:39,142 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,143 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:39,144 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,145 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,146 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/list/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:46:39,146 - app.modules.menus.application.services.area_service - INFO - Obteniendo lista simple de áreas activas para cliente 2
2025-11-30 19:46:39,146 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,148 - app.modules.menus.application.services.area_service - INFO - Lista simple obtenida para cliente 2: 2 áreas activas
2025-11-30 19:46:39,148 - app.modules.menus.presentation.endpoints_areas - INFO - Lista simple de áreas recuperada para cliente 2 - Total: 2 áreas activas
2025-11-30 19:46:39,150 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/list/ 200 11.6ms
2025-11-30 19:46:39,151 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/list/
2025-11-30 19:46:39,152 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:39,152 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:39,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,154 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:39,154 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:39,154 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/list/
2025-11-30 19:46:39,155 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,156 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:39,157 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,158 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,158 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/list/ recibida por usuario 1 del cliente 2 para lista simple
2025-11-30 19:46:39,158 - app.modules.menus.application.services.area_service - INFO - Obteniendo lista simple de áreas activas para cliente 2
2025-11-30 19:46:39,158 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,160 - app.modules.menus.application.services.area_service - INFO - Lista simple obtenida para cliente 2: 2 áreas activas
2025-11-30 19:46:39,160 - app.modules.menus.presentation.endpoints_areas - INFO - Lista simple de áreas recuperada para cliente 2 - Total: 2 áreas activas
2025-11-30 19:46:39,161 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/list/ 200 9.5ms
2025-11-30 19:46:39,803 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/sessions/admin/
2025-11-30 19:46:39,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/sessions/admin/ 200 0.8ms
2025-11-30 19:46:39,805 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/sessions/admin/
2025-11-30 19:46:39,806 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/sessions/admin/ 200 1.2ms
2025-11-30 19:46:39,806 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/sessions/admin/
2025-11-30 19:46:39,807 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:39,807 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:39,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,810 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:39,812 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:39,812 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/sessions/admin/
2025-11-30 19:46:39,813 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,814 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:39,814 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,815 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,817 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,819 - app.modules.auth.presentation.endpoints - INFO - [ADMIN] Solicitud /sessions/admin/ por usuario: admin_acme
2025-11-30 19:46:39,819 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,824 - app.modules.auth.application.services.refresh_token_service - INFO - [ADMIN-SESSIONS] 7 sesiones activas recuperadas - Cliente 2
2025-11-30 19:46:39,824 - app.modules.auth.presentation.endpoints - INFO - [ADMIN] Recuperadas 7 sesiones activas totales.
2025-11-30 19:46:39,825 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/sessions/admin/ 200 18.4ms
2025-11-30 19:46:39,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/sessions/admin/
2025-11-30 19:46:39,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:46:39,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-11-30 19:46:39,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 19:46:39,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:46:39,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 19:46:39,828 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=2
2025-11-30 19:46:39,828 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 19:46:39,831 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/sessions/admin/
2025-11-30 19:46:39,831 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,832 - app.api.deps - WARNING - [VALIDATION] Rol con codigo_rol='ADMIN' encontrado en cliente_id=2 (rol_id=1). Los roles de sistema solo pueden pertenecer al cliente SUPER ADMIN (cliente_id=1). Filtrando este rol inválido.
2025-11-30 19:46:39,832 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,833 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,834 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,834 - app.modules.auth.presentation.endpoints - INFO - [ADMIN] Solicitud /sessions/admin/ por usuario: admin_acme
2025-11-30 19:46:39,834 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 19:46:39,835 - app.modules.auth.application.services.refresh_token_service - INFO - [ADMIN-SESSIONS] 7 sesiones activas recuperadas - Cliente 2
2025-11-30 19:46:39,835 - app.modules.auth.presentation.endpoints - INFO - [ADMIN] Recuperadas 7 sesiones activas totales.
2025-11-30 19:46:39,835 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/sessions/admin/ 200 8.9ms
2025-11-30 20:10:41,734 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-11-30 20:10:41,734 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-11-30 20:10:41,735 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-11-30 20:10:41,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:41,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:41,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:41,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:41,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:41,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:41,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:41,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:41,737 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:41,737 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:41,737 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-11-30 20:10:41,775 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-11-30 20:10:41,776 - app.core.auth - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-11-30 20:10:41,776 - app.core.auth - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-11-30 20:10:42,009 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 20:10:42,009 - app.core.auth - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=1, access_level=5, user_type=super_admin
2025-11-30 20:10:42,009 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=1
2025-11-30 20:10:42,010 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 20:10:42,015 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 20:10:42,016 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14439, Rotación: False
2025-11-30 20:10:42,016 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14439
2025-11-30 20:10:42,016 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 1
2025-11-30 20:10:42,029 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 20:10:42,029 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=1, usuario_id=1, exito=True
2025-11-30 20:10:42,029 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 294.0ms
2025-11-30 20:10:42,038 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 20:10:42,039 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 20:10:42,040 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:42,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:42,043 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:42,043 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:42,043 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 20:10:42,045 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 20:10:42,045 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 20:10:42,048 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 20:10:42,049 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 8.1ms
2025-11-30 20:10:42,052 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 20:10:42,053 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.7ms
2025-11-30 20:10:42,054 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 20:10:42,054 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.8ms
2025-11-30 20:10:42,054 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 20:10:42,055 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:42,055 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:42,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:42,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:42,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:42,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:42,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:42,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:42,056 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:42,057 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:42,057 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 20:10:42,060 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 20:10:42,060 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 20:10:42,100 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 20:10:42,102 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 47.3ms
2025-11-30 20:10:42,103 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 20:10:42,103 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:42,103 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:42,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:42,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:42,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:42,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:42,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:42,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:42,105 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:42,105 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:42,105 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 20:10:42,107 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 20:10:42,107 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 20:10:42,108 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 20:10:42,108 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 5.1ms
2025-11-30 20:10:47,007 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 20:10:47,008 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.9ms
2025-11-30 20:10:47,008 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 20:10:47,009 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.0ms
2025-11-30 20:10:47,010 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:10:47,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:47,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:47,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:47,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:47,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:47,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:47,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:47,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:47,012 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:47,012 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:47,012 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:10:47,015 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:10:47,015 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:10:47,020 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:10:47,021 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 11.0ms
2025-11-30 20:10:47,023 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:10:47,023 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:47,023 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:47,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:47,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:47,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:47,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:47,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:47,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:47,025 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:47,025 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:47,025 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:10:47,028 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:10:47,028 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:10:47,029 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:10:47,030 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.3ms
2025-11-30 20:10:52,379 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/4/
2025-11-30 20:10:52,379 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/4/ 200 0.7ms
2025-11-30 20:10:52,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/4/estadisticas/
2025-11-30 20:10:52,382 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/4/estadisticas/
2025-11-30 20:10:52,382 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/4/
2025-11-30 20:10:52,382 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/4/estadisticas/ 200 1.6ms
2025-11-30 20:10:52,383 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/4/estadisticas/ 200 1.6ms
2025-11-30 20:10:52,383 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/4/ 200 1.6ms
2025-11-30 20:10:52,384 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/
2025-11-30 20:10:52,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:52,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:52,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,387 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:52,388 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:52,388 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/
2025-11-30 20:10:52,390 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4 recibida por usuario: superadmin
2025-11-30 20:10:52,392 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/estadisticas/
2025-11-30 20:10:52,392 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/ 200 8.1ms
2025-11-30 20:10:52,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,393 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:52,394 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:52,394 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/estadisticas/
2025-11-30 20:10:52,397 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4/estadisticas recibida por usuario: superadmin
2025-11-30 20:10:52,397 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 4
2025-11-30 20:10:52,404 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 4
2025-11-30 20:10:52,406 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/estadisticas/ 200 14.1ms
2025-11-30 20:10:52,407 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/
2025-11-30 20:10:52,407 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:52,408 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:52,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,409 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:52,409 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:52,409 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/
2025-11-30 20:10:52,413 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4 recibida por usuario: superadmin
2025-11-30 20:10:52,414 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/estadisticas/
2025-11-30 20:10:52,416 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/ 200 8.0ms
2025-11-30 20:10:52,416 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:52,416 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:52,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:52,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:52,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:52,417 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:52,417 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:52,417 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/estadisticas/
2025-11-30 20:10:52,419 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4/estadisticas recibida por usuario: superadmin
2025-11-30 20:10:52,419 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 4
2025-11-30 20:10:52,421 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 4
2025-11-30 20:10:52,422 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/estadisticas/ 200 7.5ms
2025-11-30 20:10:55,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/4/modulos/
2025-11-30 20:10:55,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/4/modulos/
2025-11-30 20:10:55,828 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/4/modulos/ 200 0.8ms
2025-11-30 20:10:55,828 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/4/modulos/ 200 0.5ms
2025-11-30 20:10:55,830 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/4/modulos/
2025-11-30 20:10:55,830 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:55,830 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:55,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:55,830 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:55,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:55,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:55,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:55,831 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:55,831 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:55,831 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:55,831 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/4/modulos/
2025-11-30 20:10:55,833 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/4/modulos/ recibida
2025-11-30 20:10:55,833 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 4
2025-11-30 20:10:55,838 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 4 recuperados: 5 módulos
2025-11-30 20:10:55,839 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/4/modulos/ 200 8.8ms
2025-11-30 20:10:55,840 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/4/modulos/
2025-11-30 20:10:55,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:55,840 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:55,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:55,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:55,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:55,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:55,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:55,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:55,841 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:55,841 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:55,841 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/4/modulos/
2025-11-30 20:10:55,843 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/4/modulos/ recibida
2025-11-30 20:10:55,843 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 4
2025-11-30 20:10:55,844 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 4 recuperados: 5 módulos
2025-11-30 20:10:55,845 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/4/modulos/ 200 5.1ms
2025-11-30 20:10:57,977 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/4/
2025-11-30 20:10:57,978 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/4/ 200 0.9ms
2025-11-30 20:10:57,978 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 20:10:57,980 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 20:10:57,980 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/4/
2025-11-30 20:10:57,980 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.9ms
2025-11-30 20:10:57,981 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.4ms
2025-11-30 20:10:57,981 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/4/ 200 1.3ms
2025-11-30 20:10:57,981 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/4/
2025-11-30 20:10:57,983 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:57,983 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:57,983 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:57,983 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:57,983 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:57,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:57,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:57,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:57,984 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:57,984 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:57,984 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/4/
2025-11-30 20:10:57,987 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/4 recibida
2025-11-30 20:10:57,987 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 4
2025-11-30 20:10:57,990 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 4: 2 conexiones
2025-11-30 20:10:57,991 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:10:57,991 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:57,991 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:57,992 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:57,993 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:10:57,993 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/4/ 200 11.3ms
2025-11-30 20:10:57,994 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:10:57,994 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:10:57,997 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:10:57,998 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:10:57,999 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 8.0ms
2025-11-30 20:10:58,000 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/4/
2025-11-30 20:10:58,001 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:58,001 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:58,001 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:58,001 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:58,002 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:58,002 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:58,002 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:58,002 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:58,002 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:58,002 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:58,002 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/4/
2025-11-30 20:10:58,004 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/4 recibida
2025-11-30 20:10:58,005 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 4
2025-11-30 20:10:58,005 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 4: 2 conexiones
2025-11-30 20:10:58,006 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:10:58,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:10:58,008 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:10:58,010 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:10:58,010 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:10:58,010 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/4/ 200 9.5ms
2025-11-30 20:10:58,012 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:10:58,012 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:10:58,013 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:10:58,014 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:10:58,014 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 8.4ms
2025-11-30 20:11:00,362 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:11:00,363 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:11:00,363 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/4/usuarios/ 200 0.9ms
2025-11-30 20:11:00,363 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/4/usuarios/ 200 0.6ms
2025-11-30 20:11:00,364 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:11:00,366 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:11:00,366 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:11:00,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:00,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:00,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:00,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:00,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:00,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:00,367 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:11:00,367 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:11:00,367 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:11:00,369 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 4 - page: 1, limit: 10
2025-11-30 20:11:00,369 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 4, page: 1, limit: 10
2025-11-30 20:11:00,372 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-11-30 20:11:00,388 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 4 recuperados - Total: 2, Página: 1
2025-11-30 20:11:00,388 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/4/usuarios/ 200 23.5ms
2025-11-30 20:11:00,391 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:11:00,391 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:11:00,391 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:11:00,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:00,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:00,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:00,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:00,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:00,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:00,392 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:11:00,392 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:11:00,392 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:11:00,394 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 4 - page: 1, limit: 10
2025-11-30 20:11:00,394 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 4, page: 1, limit: 10
2025-11-30 20:11:00,398 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 4 recuperados - Total: 2, Página: 1
2025-11-30 20:11:00,399 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/4/usuarios/ 200 9.1ms
2025-11-30 20:11:02,703 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:11:02,703 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:11:02,703 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-11-30 20:11:02,705 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-11-30 20:11:02,706 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:11:02,706 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:11:02,706 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:11:02,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:02,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:02,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:02,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:02,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:02,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:02,707 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:11:02,708 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:11:02,708 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:11:02,710 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:11:02,710 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:11:02,714 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 2, Página: 1
2025-11-30 20:11:02,716 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.8ms
2025-11-30 20:11:02,717 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:11:02,718 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:11:02,718 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:11:02,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:02,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:02,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:02,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:02,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:02,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:02,719 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:11:02,719 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:11:02,719 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:11:02,722 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:11:02,722 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:11:02,724 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 2, Página: 1
2025-11-30 20:11:02,725 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.9ms
2025-11-30 20:11:04,193 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/7/
2025-11-30 20:11:04,193 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/7/ 200 0.5ms
2025-11-30 20:11:04,196 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/7/
2025-11-30 20:11:04,196 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:11:04,196 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:11:04,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:04,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:04,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:04,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:04,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:04,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:04,197 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:11:04,197 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:11:04,198 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/7/
2025-11-30 20:11:04,199 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 7
2025-11-30 20:11:04,199 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 7 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:11:04,201 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 7 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:11:04,201 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:11:04,221 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 3: multi - bd_cliente_innova
2025-11-30 20:11:04,221 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-11-30 20:11:04,270 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 7 encontrado en BD del cliente 4
2025-11-30 20:11:04,273 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/7/ 200 77.9ms
2025-11-30 20:11:06,852 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/6/
2025-11-30 20:11:06,852 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/6/ 200 0.5ms
2025-11-30 20:11:06,854 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/6/
2025-11-30 20:11:06,854 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:11:06,856 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:11:06,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:06,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:06,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:06,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:11:06,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:11:06,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:11:06,858 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:11:06,859 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:11:06,859 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/6/
2025-11-30 20:11:06,861 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 6
2025-11-30 20:11:06,861 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 6 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:11:06,862 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 6 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:11:06,862 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:11:06,864 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-11-30 20:11:06,865 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 6 encontrado en BD del cliente 4
2025-11-30 20:11:06,866 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/6/ 200 12.4ms
2025-11-30 20:12:01,600 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/6/
2025-11-30 20:12:01,601 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:12:01,601 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:12:01,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:12:01,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:12:01,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:12:01,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:12:01,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:12:01,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:12:01,602 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:12:01,602 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:12:01,602 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/6/
2025-11-30 20:12:01,617 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 6
2025-11-30 20:12:01,617 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 6 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:12:01,622 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 6 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:12:01,622 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:12:01,633 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-11-30 20:12:01,645 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 6 encontrado en BD del cliente 4
2025-11-30 20:12:01,646 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/6/ 200 46.1ms
2025-11-30 20:12:05,080 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/7/
2025-11-30 20:12:05,081 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:12:05,081 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:12:05,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:12:05,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:12:05,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:12:05,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:12:05,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:12:05,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:12:05,082 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:12:05,082 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:12:05,082 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/7/
2025-11-30 20:12:05,084 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 7
2025-11-30 20:12:05,084 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 7 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:12:05,085 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 7 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:12:05,085 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:12:05,086 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-11-30 20:12:05,088 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 7 encontrado en BD del cliente 4
2025-11-30 20:12:05,089 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/7/ 200 8.1ms
2025-11-30 20:12:12,209 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/6/
2025-11-30 20:12:12,211 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:12:12,211 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:12:12,211 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:12:12,211 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:12:12,211 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:12:12,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:12:12,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:12:12,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:12:12,212 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:12:12,212 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:12:12,212 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/6/
2025-11-30 20:12:12,214 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 6
2025-11-30 20:12:12,214 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 6 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:12:12,215 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 6 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:12:12,215 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:12:12,217 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-11-30 20:12:12,218 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 6 encontrado en BD del cliente 4
2025-11-30 20:12:12,219 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/6/ 200 8.9ms
2025-11-30 20:13:18,618 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:13:18,619 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:13:18,620 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:13:18,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:18,622 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:18,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:18,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:18,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:18,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:18,624 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:13:18,624 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:13:18,624 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:13:18,654 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:13:18,654 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:13:18,672 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:13:18,672 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 55.5ms
2025-11-30 20:13:18,674 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:13:18,675 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:13:18,675 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:13:18,675 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:18,675 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:18,675 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:18,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:18,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:18,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:18,676 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:13:18,676 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:13:18,677 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:13:18,679 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:13:18,680 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:13:18,683 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:13:18,684 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.8ms
2025-11-30 20:13:25,054 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/
2025-11-30 20:13:25,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:13:25,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:13:25,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,057 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:13:25,057 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:13:25,057 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/
2025-11-30 20:13:25,059 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4 recibida por usuario: superadmin
2025-11-30 20:13:25,062 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/estadisticas/
2025-11-30 20:13:25,063 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:13:25,063 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:13:25,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,064 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,064 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,064 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:13:25,064 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:13:25,064 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/estadisticas/
2025-11-30 20:13:25,064 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/ 200 9.5ms
2025-11-30 20:13:25,067 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4/estadisticas recibida por usuario: superadmin
2025-11-30 20:13:25,067 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 4
2025-11-30 20:13:25,075 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 4
2025-11-30 20:13:25,076 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/estadisticas/ 200 15.5ms
2025-11-30 20:13:25,077 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/
2025-11-30 20:13:25,079 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:13:25,079 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:13:25,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,080 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:13:25,080 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:13:25,080 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/
2025-11-30 20:13:25,082 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4 recibida por usuario: superadmin
2025-11-30 20:13:25,085 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/estadisticas/
2025-11-30 20:13:25,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:13:25,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:13:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:13:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:13:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:13:25,086 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:13:25,087 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:13:25,087 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/estadisticas/
2025-11-30 20:13:25,087 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/ 200 8.6ms
2025-11-30 20:13:25,088 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4/estadisticas recibida por usuario: superadmin
2025-11-30 20:13:25,088 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 4
2025-11-30 20:13:25,090 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 4
2025-11-30 20:13:25,091 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/estadisticas/ 200 7.3ms
2025-11-30 20:14:27,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/4/modulos/
2025-11-30 20:14:27,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:27,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:27,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:27,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:27,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:27,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:27,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:27,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:27,840 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:27,840 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:27,841 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/4/modulos/
2025-11-30 20:14:27,858 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/4/modulos/ recibida
2025-11-30 20:14:27,858 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 4
2025-11-30 20:14:27,867 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 4 recuperados: 5 módulos
2025-11-30 20:14:27,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/4/modulos/ 200 29.9ms
2025-11-30 20:14:27,868 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/4/modulos/
2025-11-30 20:14:27,870 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:27,870 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:27,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:27,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:27,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:27,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:27,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:27,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:27,871 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:27,871 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:27,871 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/4/modulos/
2025-11-30 20:14:27,873 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/4/modulos/ recibida
2025-11-30 20:14:27,873 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 4
2025-11-30 20:14:27,874 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 4 recuperados: 5 módulos
2025-11-30 20:14:27,875 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/4/modulos/ 200 5.3ms
2025-11-30 20:14:28,360 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/4/
2025-11-30 20:14:28,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:28,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:28,360 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,361 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:28,362 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:28,362 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/4/
2025-11-30 20:14:28,362 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:14:28,364 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/4 recibida
2025-11-30 20:14:28,365 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 4
2025-11-30 20:14:28,368 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 4: 2 conexiones
2025-11-30 20:14:28,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:28,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:28,369 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:28,370 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:14:28,371 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:14:28,371 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:14:28,374 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:14:28,375 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:14:28,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/4/ 200 15.7ms
2025-11-30 20:14:28,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 13.9ms
2025-11-30 20:14:28,378 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:14:28,378 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/4/
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,380 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:28,380 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:28,380 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:14:28,380 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:28,380 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:28,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,381 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:28,382 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:28,382 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/4/
2025-11-30 20:14:28,384 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:14:28,384 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:14:28,385 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:14:28,386 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:14:28,387 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/4 recibida
2025-11-30 20:14:28,387 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 4
2025-11-30 20:14:28,389 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 4: 2 conexiones
2025-11-30 20:14:28,390 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 11.4ms
2025-11-30 20:14:28,390 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/4/ 200 11.3ms
2025-11-30 20:14:28,946 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:28,947 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:28,948 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:14:28,949 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 4 - page: 1, limit: 10
2025-11-30 20:14:28,949 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 4, page: 1, limit: 10
2025-11-30 20:14:28,969 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 4 recuperados - Total: 2, Página: 1
2025-11-30 20:14:28,969 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/4/usuarios/ 200 24.0ms
2025-11-30 20:14:28,972 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:14:28,972 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:28,972 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:28,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:28,973 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/4/usuarios/
2025-11-30 20:14:28,975 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 4 - page: 1, limit: 10
2025-11-30 20:14:28,975 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 4, page: 1, limit: 10
2025-11-30 20:14:28,979 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 4 recuperados - Total: 2, Página: 1
2025-11-30 20:14:28,980 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/4/usuarios/ 200 8.5ms
2025-11-30 20:14:30,568 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:14:30,568 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:30,568 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:30,568 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:30,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:30,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:30,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:30,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:30,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:30,569 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:30,569 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:30,570 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:14:30,572 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:14:30,572 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:14:30,577 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 2, Página: 1
2025-11-30 20:14:30,577 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.6ms
2025-11-30 20:14:30,580 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:14:30,580 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:30,580 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:30,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:30,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:30,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:30,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:30,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:30,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:30,581 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:30,581 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:30,581 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:14:30,583 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:14:30,584 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 4, page: 1
2025-11-30 20:14:30,586 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 2, Página: 1
2025-11-30 20:14:30,587 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.6ms
2025-11-30 20:14:57,084 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/7/
2025-11-30 20:14:57,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:14:57,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:14:57,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:57,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:57,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:57,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:14:57,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:14:57,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:14:57,086 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:14:57,086 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:14:57,086 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/7/
2025-11-30 20:14:57,104 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 7
2025-11-30 20:14:57,105 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 7 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:14:57,109 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 7 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:14:57,109 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:14:57,129 - app.core.tenant.routing - INFO - [ROUTING] Cliente 3 -> Multi-DB (bd_cliente_innova)
2025-11-30 20:14:57,144 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 7 encontrado en BD del cliente 4
2025-11-30 20:14:57,146 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/7/ 200 61.8ms
2025-11-30 20:19:22,239 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 20:19:22,240 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.1ms
2025-11-30 20:19:22,241 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 20:19:22,242 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:22,242 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:22,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:22,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:22,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:22,242 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:22,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:22,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:22,244 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:22,244 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:22,244 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 20:19:22,275 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 20:19:22,279 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 20:19:22,287 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 20:19:22,293 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 20:19:22,293 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14440, Rotación: True
2025-11-30 20:19:22,298 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 20:19:22,298 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 20:19:22,299 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 20:19:22,299 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14440
2025-11-30 20:19:22,299 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 20:19:22,310 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 20:19:22,310 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 20:19:22,312 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 69.9ms
2025-11-30 20:19:22,561 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 20:19:22,563 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 20:19:22,563 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 20:19:22,563 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 20:19:22,563 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 20:19:22,563 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 20:19:23,470 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 20:19:23,473 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 20:19:23,473 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 20:19:23,473 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 20:19:23,474 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 20:19:23,474 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 20:19:23,817 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 20:19:23,818 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 20:19:23,911 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 20:19:23,912 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 20:19:23,912 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 20:19:24,161 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 20:19:24,162 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 20:19:24,297 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'cdn', 'assets', 'www', 'static', 'backend', 'admin', 'api'}
2025-11-30 20:19:24,336 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 20:19:24,337 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.7ms
2025-11-30 20:19:24,339 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 20:19:24,339 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,339 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,340 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,341 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 20:19:24,394 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 20:19:24,395 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 20:19:24,395 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 20:19:24,406 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 20:19:24,406 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 20:19:24,407 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 67.9ms
2025-11-30 20:19:24,411 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 20:19:24,411 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,412 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,413 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,413 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,413 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 20:19:24,414 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 20:19:24,416 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 20:19:24,417 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 20:19:24,419 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 20:19:24,419 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 8.5ms
2025-11-30 20:19:24,432 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 20:19:24,434 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,434 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,435 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,435 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,435 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 20:19:24,438 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 20:19:24,438 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 20:19:24,476 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 20:19:24,478 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/
2025-11-30 20:19:24,478 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/estadisticas/
2025-11-30 20:19:24,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/
2025-11-30 20:19:24,479 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,480 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,481 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,481 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/estadisticas/
2025-11-30 20:19:24,481 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 48.8ms
2025-11-30 20:19:24,484 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4 recibida por usuario: superadmin
2025-11-30 20:19:24,488 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4/estadisticas recibida por usuario: superadmin
2025-11-30 20:19:24,488 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 4
2025-11-30 20:19:24,495 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 4
2025-11-30 20:19:24,496 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/ 200 18.6ms
2025-11-30 20:19:24,496 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/estadisticas/ 200 18.6ms
2025-11-30 20:19:24,497 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 20:19:24,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,501 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,501 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,501 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 20:19:24,503 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 20:19:24,503 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 20:19:24,504 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 20:19:24,506 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/
2025-11-30 20:19:24,506 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/4/estadisticas/
2025-11-30 20:19:24,506 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,507 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,508 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,508 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,508 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/
2025-11-30 20:19:24,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:24,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:24,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:24,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:24,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:24,509 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:24,509 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:24,509 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/4/estadisticas/
2025-11-30 20:19:24,510 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 11.7ms
2025-11-30 20:19:24,511 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4 recibida por usuario: superadmin
2025-11-30 20:19:24,513 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/4/estadisticas recibida por usuario: superadmin
2025-11-30 20:19:24,513 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 4
2025-11-30 20:19:24,516 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 4
2025-11-30 20:19:24,517 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/ 200 10.9ms
2025-11-30 20:19:24,517 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/4/estadisticas/ 200 10.8ms
2025-11-30 20:19:25,617 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:19:25,618 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:25,618 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:25,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:25,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:25,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:25,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:25,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:25,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:25,620 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:25,620 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:25,620 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:19:25,622 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:19:25,623 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:19:25,629 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:19:25,630 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 12.4ms
2025-11-30 20:19:25,631 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:19:25,632 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:25,632 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:25,632 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:25,632 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:25,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:25,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:25,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:25,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:25,633 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:25,633 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:25,633 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:19:25,636 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:19:25,636 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:19:25,638 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:19:25,640 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.9ms
2025-11-30 20:19:27,818 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 20:19:27,818 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 0.5ms
2025-11-30 20:19:27,820 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 20:19:27,822 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.8ms
2025-11-30 20:19:27,822 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 20:19:27,823 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 20:19:27,823 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 20:19:27,824 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:27,824 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:27,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,825 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:27,826 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:27,826 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 20:19:27,826 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 4.3ms
2025-11-30 20:19:27,829 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 20:19:27,830 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 8.0ms
2025-11-30 20:19:27,833 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 20:19:27,833 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:27,833 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:27,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,835 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,835 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:27,835 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:27,835 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 20:19:27,837 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 20:19:27,837 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 20:19:27,841 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 20:19:27,841 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 19.3ms
2025-11-30 20:19:27,843 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 10.8ms
2025-11-30 20:19:27,845 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 20:19:27,846 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:27,846 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:27,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,847 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:27,847 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:27,847 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 20:19:27,847 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 20:19:27,850 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 20:19:27,851 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:27,851 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:27,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:27,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:27,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:27,852 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:27,852 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:27,852 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 20:19:27,855 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 20:19:27,855 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 20:19:27,857 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 20:19:27,858 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 13.6ms
2025-11-30 20:19:27,859 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 11.5ms
2025-11-30 20:19:29,270 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:29,270 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:29,271 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.9ms
2025-11-30 20:19:29,271 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.7ms
2025-11-30 20:19:29,274 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:29,274 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:29,275 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:29,276 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:29,276 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:29,278 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:29,278 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:33,359 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 20:19:33,360 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 20:19:33,366 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 20:19:33,366 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:33,393 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:33,395 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:19:33,396 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 4122.6ms
2025-11-30 20:19:33,399 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:33,399 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:33,400 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:33,401 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:33,401 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:33,402 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:33,402 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:33,403 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:19:33,404 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 6.2ms
2025-11-30 20:19:38,221 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:19:38,221 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.7ms
2025-11-30 20:19:38,222 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:19:38,223 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 20:19:38,223 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:19:38,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:38,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:38,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:38,224 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:38,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:38,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:38,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:38,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:38,225 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:38,225 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:38,225 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:19:38,227 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:19:38,227 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:19:38,228 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,230 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,231 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,239 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,241 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,243 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:19:38,243 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 19.8ms
2025-11-30 20:19:38,245 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:19:38,245 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:38,246 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:38,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:38,247 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:38,247 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:38,247 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:19:38,249 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:19:38,249 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:19:38,250 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,251 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,251 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,254 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,256 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:38,257 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:19:38,258 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.0ms
2025-11-30 20:19:39,714 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:19:39,715 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:19:39,715 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 1.0ms
2025-11-30 20:19:39,716 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 0.9ms
2025-11-30 20:19:39,717 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:19:39,717 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:39,718 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:39,719 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:19:39,723 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 20:19:39,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:39,733 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:19:39,735 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 17.4ms
2025-11-30 20:19:39,737 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 20:19:39,764 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 32.4ms
2025-11-30 20:19:44,599 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:44,600 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:44,600 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:44,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:44,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:44,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:44,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:44,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:44,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:44,601 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:44,601 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:44,601 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:44,604 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:44,604 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:44,605 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:44,606 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:44,607 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:19:44,608 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.5ms
2025-11-30 20:19:44,609 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:44,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:44,611 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:44,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:44,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:44,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:44,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:44,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:44,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:44,612 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:44,612 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:44,612 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:19:44,614 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:44,614 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:19:44,615 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:44,616 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:44,617 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:19:44,618 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.7ms
2025-11-30 20:19:45,826 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 20:19:45,826 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1021/ 200 0.4ms
2025-11-30 20:19:45,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 20:19:45,828 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:45,828 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:45,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:45,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:45,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:45,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:45,828 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:45,829 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:45,829 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:45,829 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:45,829 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 20:19:45,831 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1021
2025-11-30 20:19:45,831 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, buscando log 1021 primero en BD central (Single-DB)
2025-11-30 20:19:45,835 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1021 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:19:45,837 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1021 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:19:45,837 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:19:45,841 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1021 encontrado en BD del cliente 2
2025-11-30 20:19:45,843 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1021/ 200 15.3ms
2025-11-30 20:19:57,818 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 20:19:57,819 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/ 200 0.5ms
2025-11-30 20:19:57,820 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 20:19:57,821 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:19:57,821 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:19:57,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:57,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:57,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:57,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:19:57,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:19:57,822 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:19:57,822 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:19:57,822 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:19:57,822 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 20:19:57,824 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1004
2025-11-30 20:19:57,824 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, buscando log 1004 primero en BD central (Single-DB)
2025-11-30 20:19:57,825 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1004 encontrado en BD central (cliente_id=1)
2025-11-30 20:19:57,826 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1004/ 200 5.7ms
2025-11-30 20:20:01,098 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 20:20:01,098 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/ 200 0.5ms
2025-11-30 20:20:01,100 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 20:20:01,100 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:20:01,100 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:20:01,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:20:01,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:20:01,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:20:01,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:20:01,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:20:01,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:20:01,104 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:20:01,104 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:20:01,105 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 20:20:01,107 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1005
2025-11-30 20:20:01,107 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, buscando log 1005 primero en BD central (Single-DB)
2025-11-30 20:20:01,109 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 encontrado en BD central (cliente_id=1)
2025-11-30 20:20:01,110 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 10.7ms
2025-11-30 20:20:03,770 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 20:20:03,770 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.5ms
2025-11-30 20:20:03,772 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 20:20:03,772 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:20:03,772 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:20:03,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:20:03,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:20:03,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:20:03,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:20:03,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:20:03,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:20:03,774 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:20:03,774 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:20:03,774 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 20:20:03,776 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 20:20:03,776 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, buscando log 1006 primero en BD central (Single-DB)
2025-11-30 20:20:03,777 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD central (cliente_id=1)
2025-11-30 20:20:03,778 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 6.4ms
2025-11-30 20:21:34,512 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 20:21:34,512 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.9ms
2025-11-30 20:21:34,514 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 20:21:34,514 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-11-30 20:21:34,516 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:21:34,517 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:21:34,517 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:21:34,518 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:21:34,584 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:21:34,585 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:21:34,593 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:21:34,594 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 78.5ms
2025-11-30 20:21:34,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:21:34,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:21:34,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:21:34,597 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:21:34,598 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:21:34,600 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:21:34,600 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:21:34,603 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:21:34,603 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.9ms
2025-11-30 20:21:36,825 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /docs
2025-11-30 20:21:36,825 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:21:36,825 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 20:21:36,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-11-30 20:21:36,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:21:36,826 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detectó subdominio válido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-11-30 20:21:36,826 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 20:21:36,826 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:21:36,826 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/docs
2025-11-30 20:21:36,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /docs 200 2.3ms
2025-11-30 20:21:36,893 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /openapi.json
2025-11-30 20:21:36,893 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:21:36,894 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 20:21:36,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-11-30 20:21:36,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:21:36,894 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detectó subdominio válido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-11-30 20:21:36,894 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 20:21:36,894 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:21:36,894 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/openapi.json
2025-11-30 20:21:37,068 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /openapi.json 200 174.7ms
2025-11-30 20:26:58,781 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 20:26:58,781 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:26:58,783 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:26:58,784 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:26:58,784 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 20:26:58,810 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 20:26:58,814 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 20:26:58,821 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 20:26:58,829 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 20:26:58,829 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14441, Rotación: True
2025-11-30 20:26:58,837 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 20:26:58,838 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 20:26:58,838 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 20:26:58,839 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14441
2025-11-30 20:26:58,839 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 20:26:58,847 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 20:26:58,847 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 20:26:58,849 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 67.8ms
2025-11-30 20:26:59,059 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 20:26:59,059 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 20:26:59,060 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 20:26:59,060 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 20:26:59,060 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 20:26:59,060 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 20:27:00,115 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 20:27:00,118 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 20:27:00,118 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 20:27:00,119 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 20:27:00,119 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 20:27:00,119 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 20:27:00,491 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 20:27:00,492 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 20:27:00,580 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 20:27:00,580 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 20:27:00,580 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 20:27:00,849 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 20:27:00,849 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 20:27:01,001 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'cdn', 'api', 'static', 'admin', 'www', 'backend'}
2025-11-30 20:27:01,049 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 20:27:01,049 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:01,049 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:01,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,049 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,051 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,051 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:01,051 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:01,051 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 20:27:01,113 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 20:27:01,113 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 20:27:01,113 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 20:27:01,123 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 20:27:01,123 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 20:27:01,124 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 75.5ms
2025-11-30 20:27:01,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 20:27:01,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 20:27:01,130 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 20:27:01,131 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:01,131 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:01,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,132 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:01,132 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:01,132 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 20:27:01,134 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 20:27:01,137 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 20:27:01,138 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 20:27:01,139 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 20:27:01,139 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 8.5ms
2025-11-30 20:27:01,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 20:27:01,157 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.0ms
2025-11-30 20:27:01,159 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:27:01,159 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:01,160 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:01,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,161 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:01,161 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:01,161 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:27:01,161 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 20:27:01,164 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:27:01,164 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:27:01,168 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:27:01,169 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 8.5ms
2025-11-30 20:27:01,170 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 20:27:01,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 12.9ms
2025-11-30 20:27:01,172 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:01,172 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:01,172 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,172 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,172 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,172 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,173 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:01,173 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:01,173 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 20:27:01,175 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 20:27:01,175 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 20:27:01,235 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 20:27:01,237 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 65.9ms
2025-11-30 20:27:01,237 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:27:01,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:01,239 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:01,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,240 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,240 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:01,240 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:01,240 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:27:01,243 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:27:01,243 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:27:01,245 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:27:01,246 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 20:27:01,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:01,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:01,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:01,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:01,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:01,249 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:01,249 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:01,249 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 20:27:01,252 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 20:27:01,252 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 20:27:01,254 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 20:27:01,255 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 17.4ms
2025-11-30 20:27:01,256 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 10.1ms
2025-11-30 20:27:03,890 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:27:03,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:03,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:03,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:03,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:03,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:03,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:03,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:03,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:03,893 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:03,893 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:03,893 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:27:03,895 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:27:03,895 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:27:03,897 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:27:03,898 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.0ms
2025-11-30 20:27:03,899 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:27:03,900 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:03,900 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:03,900 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:03,900 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:03,900 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:03,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:03,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:03,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:03,902 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:03,902 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:03,902 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:27:03,904 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:27:03,905 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:27:03,908 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:27:03,908 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.5ms
2025-11-30 20:27:04,441 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 20:27:04,441 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 0.6ms
2025-11-30 20:27:04,444 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 20:27:04,445 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.2ms
2025-11-30 20:27:04,445 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:27:04,445 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:04,445 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:04,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:04,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:04,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:04,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:04,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:04,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:04,446 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:04,447 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:04,447 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:27:04,450 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 20:27:04,450 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 20
2025-11-30 20:27:04,454 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:27:04,458 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:27:04,459 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 13.7ms
2025-11-30 20:27:04,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:27:04,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:04,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:04,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:04,462 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:27:04,464 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 20:27:04,464 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 20
2025-11-30 20:27:04,465 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:27:04,466 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:27:04,466 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.6ms
2025-11-30 20:27:05,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:27:05,244 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:05,244 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:05,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:05,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:05,245 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:05,245 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:05,245 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:05,245 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:05,245 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:05,245 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:05,246 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:27:05,248 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:27:05,248 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:27:05,250 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:27:05,250 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.7ms
2025-11-30 20:27:05,252 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 20:27:05,253 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:05,253 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:05,253 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:05,253 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:05,253 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:05,253 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:05,254 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:05,254 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:05,254 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:05,254 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:05,254 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 20:27:05,257 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 20:27:05,257 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 20:27:05,260 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 20:27:05,261 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.2ms
2025-11-30 20:27:07,511 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 20:27:07,512 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:07,512 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:07,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,513 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:07,513 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:07,513 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 20:27:07,515 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 20:27:07,519 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 20:27:07,519 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 7.7ms
2025-11-30 20:27:07,520 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:07,520 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:07,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,521 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:07,521 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:07,521 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 20:27:07,523 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 20:27:07,524 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 20:27:07,533 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 20:27:07,534 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 15.4ms
2025-11-30 20:27:07,534 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 20:27:07,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:07,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:07,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,536 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:07,536 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:07,537 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 20:27:07,538 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 20:27:07,539 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 20:27:07,540 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:07,540 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:07,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,540 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,541 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:07,541 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:07,541 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:07,541 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:07,541 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:07,541 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 20:27:07,543 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 20:27:07,543 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 20:27:07,545 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 20:27:07,546 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 11.6ms
2025-11-30 20:27:07,547 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 7.7ms
2025-11-30 20:27:14,166 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 20:27:14,167 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.7ms
2025-11-30 20:27:14,167 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 20:27:14,168 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.8ms
2025-11-30 20:27:14,170 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 20:27:14,170 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:14,170 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:14,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:14,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:14,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:14,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:14,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:14,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:14,171 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:14,171 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:14,171 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 20:27:14,173 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 20:27:14,173 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 20:27:14,177 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 20:27:14,178 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 8.4ms
2025-11-30 20:27:14,179 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 20:27:14,181 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:14,181 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:14,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:14,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:14,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:14,181 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:14,182 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:14,182 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:14,182 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:14,182 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:14,182 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 20:27:14,184 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 20:27:14,184 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 20:27:14,186 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 20:27:14,186 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 7.0ms
2025-11-30 20:27:18,009 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 20:27:18,009 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 0.9ms
2025-11-30 20:27:18,011 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 20:27:18,012 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 20:27:18,012 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 20:27:18,012 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.8ms
2025-11-30 20:27:18,013 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.3ms
2025-11-30 20:27:18,013 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.3ms
2025-11-30 20:27:18,013 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 20:27:18,014 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:18,014 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:18,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,015 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,015 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:18,016 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:18,016 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 20:27:18,017 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 20:27:18,018 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 20:27:18,021 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 20:27:18,022 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:27:18,023 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:18,023 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:18,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,024 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:18,024 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:18,024 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:27:18,024 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 10.9ms
2025-11-30 20:27:18,025 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:27:18,026 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:27:18,026 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:27:18,027 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:27:18,028 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 5.5ms
2025-11-30 20:27:18,029 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 20:27:18,029 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,030 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:18,031 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:18,031 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 20:27:18,032 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 20:27:18,032 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 20:27:18,033 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 20:27:18,034 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:27:18,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:18,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:18,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:18,036 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:18,036 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:18,036 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:27:18,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 7.7ms
2025-11-30 20:27:18,038 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:27:18,038 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:27:18,039 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:27:18,039 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:27:18,041 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 6.7ms
2025-11-30 20:27:32,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:27:32,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:32,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:32,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:32,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:32,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:32,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:32,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:32,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:32,483 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:32,483 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:32,483 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:27:32,485 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:27:32,485 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:27:36,592 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 20:27:36,592 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 20:27:36,596 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 20:27:36,596 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,638 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,639 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,646 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,648 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,649 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:27:36,650 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4167.9ms
2025-11-30 20:27:36,651 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:27:36,652 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:36,652 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:36,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:36,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:36,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:36,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:36,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:36,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:36,653 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:36,653 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:36,653 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:27:36,656 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:27:36,656 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:27:36,657 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,658 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,659 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,661 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,663 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:36,665 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:27:36,665 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.4ms
2025-11-30 20:27:51,298 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:27:51,298 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:51,299 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:51,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:51,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:51,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:51,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:51,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:51,300 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:51,300 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:51,300 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:51,300 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:27:51,300 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:27:51,302 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 20:27:51,311 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:51,311 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:51,312 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:51,313 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:27:51,315 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 20:27:51,324 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 27.0ms
2025-11-30 20:27:51,325 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 25.1ms
2025-11-30 20:27:54,779 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:27:54,779 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:54,779 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:54,781 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:54,782 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:27:54,784 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:27:54,784 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:27:54,785 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:54,788 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:54,791 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:27:54,792 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.9ms
2025-11-30 20:27:54,794 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:27:54,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:54,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:54,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:54,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:54,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:54,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:54,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:54,795 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:54,795 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:54,795 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:54,795 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:27:54,797 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:27:54,797 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:27:54,798 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:54,799 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:54,800 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:27:54,801 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.9ms
2025-11-30 20:27:59,115 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 20:27:59,116 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:27:59,116 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:27:59,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:59,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:59,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:59,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:27:59,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:27:59,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:27:59,117 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:27:59,117 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:27:59,117 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 20:27:59,119 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1021
2025-11-30 20:27:59,119 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, obteniendo cliente_id del log 1021 desde BD central/ADMIN
2025-11-30 20:27:59,122 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1021 no encontrado en contexto del tenant, buscando en todas las BDs de clientes activos
2025-11-30 20:27:59,124 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1021 en 6 clientes activos: [1, 2, 3, 4, 5, 1002]
2025-11-30 20:27:59,124 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:27:59,125 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1021 encontrado en BD del cliente 2
2025-11-30 20:27:59,128 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1021/ 200 13.3ms
2025-11-30 20:28:02,397 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 20:28:02,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:02,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:02,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:02,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:02,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:02,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:02,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:02,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:02,398 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:02,399 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:02,399 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 20:28:02,405 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1004
2025-11-30 20:28:02,406 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, obteniendo cliente_id del log 1004 desde BD central/ADMIN
2025-11-30 20:28:02,410 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1004 obtenido desde BD central: 1
2025-11-30 20:28:02,410 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1004 directamente en BD del cliente 1
2025-11-30 20:28:02,413 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1004 encontrado en BD del cliente 1
2025-11-30 20:28:02,417 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1004/ 200 20.9ms
2025-11-30 20:28:05,310 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 20:28:05,311 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:05,311 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:05,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:05,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:05,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:05,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:05,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:05,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:05,312 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:05,312 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:05,312 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 20:28:05,326 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1005
2025-11-30 20:28:05,326 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, obteniendo cliente_id del log 1005 desde BD central/ADMIN
2025-11-30 20:28:05,331 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1005 obtenido desde BD central: 1
2025-11-30 20:28:05,331 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1005 directamente en BD del cliente 1
2025-11-30 20:28:05,333 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 encontrado en BD del cliente 1
2025-11-30 20:28:05,340 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 28.9ms
2025-11-30 20:28:07,544 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 20:28:07,544 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:07,544 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:07,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:07,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:07,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:07,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:07,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:07,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:07,545 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:07,545 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:07,545 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 20:28:07,546 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 20:28:07,547 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, obteniendo cliente_id del log 1006 desde BD central/ADMIN
2025-11-30 20:28:07,547 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 obtenido desde BD central: 1
2025-11-30 20:28:07,547 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1006 directamente en BD del cliente 1
2025-11-30 20:28:07,548 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del cliente 1
2025-11-30 20:28:07,550 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 6.2ms
2025-11-30 20:28:45,654 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:28:45,655 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:45,655 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:45,655 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:45,655 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:45,655 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:45,655 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:45,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:45,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:45,656 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:45,656 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:45,656 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:28:45,658 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:28:45,659 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:28:45,661 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,669 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,670 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,684 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,686 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,687 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:28:45,688 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 33.2ms
2025-11-30 20:28:45,689 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:28:45,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:45,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:45,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:45,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:45,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:45,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:45,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:45,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:45,691 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:45,691 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:45,691 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:28:45,694 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:28:45,694 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:28:45,695 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,696 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,697 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,699 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,701 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:28:45,703 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:28:45,703 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.4ms
2025-11-30 20:28:46,835 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:28:46,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:46,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:46,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:46,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:46,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:46,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:46,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:46,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:46,837 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:46,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:46,837 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:28:46,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:28:46,839 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 20:28:46,846 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:46,846 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:46,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:46,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:46,846 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:46,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:46,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:46,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:46,847 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:46,847 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:46,847 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:28:46,849 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 20:28:46,855 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 19.1ms
2025-11-30 20:28:46,855 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 17.6ms
2025-11-30 20:28:54,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 20:28:54,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,599 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:54,599 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:54,599 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 20:28:54,599 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:54,599 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:54,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,600 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:54,600 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:54,600 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:28:54,602 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 20:28:54,602 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 20:28:54,606 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 20:28:54,608 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:28:54,608 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:28:54,611 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:28:54,612 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:28:54,613 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 16.5ms
2025-11-30 20:28:54,613 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 16.3ms
2025-11-30 20:28:54,615 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 20:28:54,616 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:28:54,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:54,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:54,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,617 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:54,617 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:54,617 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 20:28:54,619 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 20:28:54,619 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 20:28:54,620 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 20:28:54,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:54,623 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:54,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:54,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:54,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:54,624 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:54,624 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:54,624 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:28:54,627 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:28:54,627 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:28:54,628 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:28:54,628 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:28:54,629 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 14.4ms
2025-11-30 20:28:54,630 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 14.2ms
2025-11-30 20:28:57,199 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 20:28:57,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:57,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:57,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:57,200 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 20:28:57,201 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 20:28:57,201 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 20:28:57,206 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 20:28:57,207 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 8.4ms
2025-11-30 20:28:57,208 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:28:57,209 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:28:57,211 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:28:57,211 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 20:28:57,212 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 20:28:57,212 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 20:28:57,213 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 20:28:57,214 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.3ms
2025-11-30 20:29:08,492 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 20:29:08,493 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:08,493 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:08,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,494 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,494 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,494 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:08,494 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:08,494 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 20:29:08,494 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:29:08,499 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 20:29:08,499 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 20:29:08,507 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 20:29:08,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:08,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:08,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,509 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:08,509 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:08,509 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:29:08,511 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:29:08,511 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:29:08,514 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:29:08,515 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:29:08,516 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 23.3ms
2025-11-30 20:29:08,516 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 21.7ms
2025-11-30 20:29:08,518 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 20:29:08,519 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:08,519 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:08,519 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,521 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:08,521 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:08,521 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 20:29:08,521 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 20:29:08,523 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 20:29:08,523 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 20:29:08,524 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 20:29:08,524 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:08,525 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:08,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:08,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:08,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:08,526 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:08,526 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:08,526 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 20:29:08,527 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 20:29:08,528 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 20:29:08,528 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 20:29:08,529 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 20:29:08,529 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 11.3ms
2025-11-30 20:29:08,531 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 9.4ms
2025-11-30 20:29:22,714 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:29:22,714 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:22,715 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:22,716 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:22,716 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:29:22,728 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:29:22,728 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:29:22,734 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,739 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,742 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,755 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,757 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,758 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:29:22,759 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 44.9ms
2025-11-30 20:29:22,759 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:29:22,761 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:22,761 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:22,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:22,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:22,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:22,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:22,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:22,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:22,762 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:22,762 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:22,763 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:29:22,765 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:29:22,765 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:29:22,766 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,767 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,768 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,769 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,771 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:29:22,772 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:29:22,773 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.3ms
2025-11-30 20:29:32,245 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:29:32,245 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:29:32,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:32,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:32,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:32,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:32,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:32,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:32,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:32,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:32,248 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:32,248 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:32,248 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:29:32,248 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:32,249 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:32,250 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:29:32,253 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 20:29:32,263 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 20:29:32,269 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 23.9ms
2025-11-30 20:29:32,269 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 23.8ms
2025-11-30 20:29:56,400 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 20:29:56,400 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 20:29:56,400 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/2/actividad/ 200 0.7ms
2025-11-30 20:29:56,401 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/2/sesiones/ 200 0.6ms
2025-11-30 20:29:56,404 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 20:29:56,404 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:56,405 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/actividad/
2025-11-30 20:29:56,406 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 20:29:56,408 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 2
2025-11-30 20:29:56,413 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-11-30 20:29:56,416 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:29:56,416 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:29:56,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:56,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:56,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:56,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:29:56,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:29:56,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:29:56,417 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:29:56,417 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:29:56,417 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 20:29:56,419 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 2
2025-11-30 20:29:56,421 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/actividad/ 200 18.2ms
2025-11-30 20:29:56,422 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/sesiones/ 200 16.7ms
2025-11-30 20:30:36,672 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:30:36,673 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.7ms
2025-11-30 20:30:36,674 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:30:36,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 0.6ms
2025-11-30 20:30:36,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:30:36,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:30:36,678 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:30:36,679 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:30:36,679 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 20:30:36,694 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 20:30:36,703 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:30:36,703 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:30:36,703 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:30:36,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:30:36,704 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 20:30:36,707 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 20:30:36,714 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 37.7ms
2025-11-30 20:30:36,715 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 12.7ms
2025-11-30 20:31:10,728 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 20:31:10,728 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 20:31:10,729 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:31:10,729 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:31:10,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:10,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:10,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:10,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:10,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:10,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:10,730 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:31:10,730 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:31:10,730 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/actividad/
2025-11-30 20:31:10,732 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 2
2025-11-30 20:31:10,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:31:10,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:31:10,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:10,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:10,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:10,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:10,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:10,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:10,737 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:31:10,737 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:31:10,737 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 20:31:10,739 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 2
2025-11-30 20:31:10,741 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/actividad/ 200 13.1ms
2025-11-30 20:31:10,741 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/sesiones/ 200 12.9ms
2025-11-30 20:31:14,868 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/3/actividad/
2025-11-30 20:31:14,868 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/3/actividad/ 200 0.8ms
2025-11-30 20:31:14,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 20:31:14,869 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/3/sesiones/ 200 0.9ms
2025-11-30 20:31:14,870 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/3/actividad/
2025-11-30 20:31:14,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:31:14,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:31:14,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:14,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:14,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:14,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:14,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:14,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:14,873 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:31:14,873 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:31:14,873 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/3/actividad/
2025-11-30 20:31:14,875 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 3
2025-11-30 20:31:14,877 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 20:31:14,878 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:31:14,878 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:31:14,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:14,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:14,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:14,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:14,878 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:14,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:14,879 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:31:14,879 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:31:14,879 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 20:31:14,881 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 3
2025-11-30 20:31:14,883 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/3/actividad/ 200 12.5ms
2025-11-30 20:31:14,883 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/3/sesiones/ 200 6.9ms
2025-11-30 20:31:59,569 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 20:31:59,570 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:31:59,570 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:31:59,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:59,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:59,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:59,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:59,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:59,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:59,571 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:31:59,571 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:31:59,571 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/actividad/
2025-11-30 20:31:59,571 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 20:31:59,579 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 2
2025-11-30 20:31:59,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:31:59,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:31:59,588 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:31:59,589 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 20:31:59,592 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 2
2025-11-30 20:31:59,597 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/actividad/ 200 28.4ms
2025-11-30 20:31:59,598 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/sesiones/ 200 26.7ms
2025-11-30 20:32:50,666 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:50,666 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:50,666 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.8ms
2025-11-30 20:32:50,667 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-11-30 20:32:50,669 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:50,669 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:32:50,669 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:32:50,670 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:32:50,671 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:50,684 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:50,684 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:50,692 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:50,704 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:50,708 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:32:50,709 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 40.1ms
2025-11-30 20:32:50,711 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:50,711 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:32:50,711 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:32:50,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:50,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:50,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:50,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:50,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:50,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:50,713 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:32:50,713 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:32:50,713 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:50,715 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:50,715 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:50,716 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:50,717 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:50,718 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:32:50,719 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.8ms
2025-11-30 20:32:52,880 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:32:52,881 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:32:52,881 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 20:32:52,881 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.6ms
2025-11-30 20:32:52,883 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:32:52,883 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:32:52,883 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:32:52,884 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:32:52,885 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:32:52,886 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:32:52,887 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:32:52,887 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,889 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,890 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,902 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,903 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,905 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:32:52,905 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 22.3ms
2025-11-30 20:32:52,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:32:52,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:32:52,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:32:52,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:52,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:52,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:52,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:52,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:52,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:52,908 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:32:52,908 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:32:52,908 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:32:52,910 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:32:52,911 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:32:52,912 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,912 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,914 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,916 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,917 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:52,919 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:32:52,920 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.3ms
2025-11-30 20:32:56,735 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:56,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:32:56,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:32:56,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:56,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:56,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:56,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:56,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:56,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:56,737 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:32:56,737 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:32:56,737 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:56,739 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:56,739 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:56,740 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:56,740 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:56,742 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:32:56,743 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.6ms
2025-11-30 20:32:56,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:56,746 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:32:56,746 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:32:56,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:56,746 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:56,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:56,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:32:56,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:32:56,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:32:56,748 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:32:56,749 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:32:56,751 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 20:32:56,754 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:56,755 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 20:32:56,756 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:56,757 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:32:56,759 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 20:32:56,760 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 13.6ms
2025-11-30 20:33:02,120 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:33:02,121 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:33:02,121 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:33:02,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:33:02,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:33:02,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:33:02,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:33:02,122 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:33:02,122 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:33:02,122 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:33:02,122 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:33:02,122 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:33:02,125 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:33:02,125 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:33:02,126 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,126 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,127 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,129 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,130 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,132 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:33:02,132 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 11.6ms
2025-11-30 20:33:02,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:33:02,134 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 20:33:02,134 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 20:33:02,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 20:33:02,135 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 20:33:02,137 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 20:33:02,138 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 20:33:02,138 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,142 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,144 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,146 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,148 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 20:33:02,149 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 20:33:02,149 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 16.3ms
2025-11-30 21:22:12,462 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 21:22:12,464 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.3ms
2025-11-30 21:22:12,466 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 21:22:12,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:12,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:12,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:12,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:12,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:12,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:12,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:12,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:12,467 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:12,467 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:12,467 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 21:22:12,510 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 21:22:12,514 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 21:22:12,522 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 21:22:12,532 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 21:22:12,533 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14442, Rotación: True
2025-11-30 21:22:12,545 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 21:22:12,546 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 21:22:12,546 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 21:22:12,546 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14442
2025-11-30 21:22:12,546 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 21:22:12,556 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 21:22:12,556 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 21:22:12,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 91.4ms
2025-11-30 21:22:12,841 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 21:22:12,841 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 21:22:12,841 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 21:22:12,841 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 21:22:12,842 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 21:22:12,842 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 21:22:13,816 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 21:22:13,819 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 21:22:13,819 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 21:22:13,819 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 21:22:13,820 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 21:22:13,820 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 21:22:14,187 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 21:22:14,187 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 21:22:14,272 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 21:22:14,272 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 21:22:14,272 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 21:22:14,563 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 21:22:14,563 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 21:22:14,704 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'assets', 'backend', 'api', 'cdn', 'admin', 'www'}
2025-11-30 21:22:14,756 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 21:22:14,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.9ms
2025-11-30 21:22:14,759 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 21:22:14,761 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,762 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,764 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,764 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,764 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 21:22:14,829 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 21:22:14,830 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 21:22:14,830 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 21:22:14,841 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 21:22:14,841 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 21:22:14,842 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 82.4ms
2025-11-30 21:22:14,848 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 21:22:14,848 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 21:22:14,850 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 21:22:14,850 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,850 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,851 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,851 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,851 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,852 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 21:22:14,853 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 21:22:14,854 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 21:22:14,854 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 21:22:14,855 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 21:22:14,856 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.8ms
2025-11-30 21:22:14,868 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 21:22:14,869 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 0.8ms
2025-11-30 21:22:14,870 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 21:22:14,870 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 21:22:14,871 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.9ms
2025-11-30 21:22:14,872 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 21:22:14,872 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 21:22:14,872 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.2ms
2025-11-30 21:22:14,873 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 21:22:14,874 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 2.2ms
2025-11-30 21:22:14,874 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 2.1ms
2025-11-30 21:22:14,874 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,874 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,875 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 21:22:14,876 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 21:22:14,878 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 21:22:14,879 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 21:22:14,918 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 21:22:14,920 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 43.4ms
2025-11-30 21:22:14,921 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:22:14,921 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:22:14,922 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 48.1ms
2025-11-30 21:22:14,922 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,922 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,923 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,923 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,923 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:22:14,924 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,924 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,925 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,925 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,925 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:22:14,927 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:22:14,930 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:22:14,930 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:22:14,938 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:22:14,939 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 18.6ms
2025-11-30 21:22:14,939 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 18.7ms
2025-11-30 21:22:14,940 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 21:22:14,941 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,941 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,942 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,942 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,942 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,942 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 21:22:14,944 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 21:22:14,944 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 21:22:14,945 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 21:22:14,948 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,949 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:22:14,951 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:22:14,952 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:22:14,953 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 12.9ms
2025-11-30 21:22:14,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:14,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:14,954 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:22:14,956 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:22:14,956 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:22:14,958 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:22:14,958 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 11.6ms
2025-11-30 21:22:14,960 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 7.5ms
2025-11-30 21:22:18,418 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 21:22:18,418 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 21:22:18,418 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 21:22:18,418 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 21:22:18,418 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 21:22:18,419 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 21:22:20,022 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 21:22:20,023 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 21:22:20,023 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 21:22:20,024 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 21:22:20,024 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 21:22:20,024 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 21:22:20,315 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 21:22:20,315 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 21:22:20,388 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 21:22:20,388 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 21:22:20,388 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 21:22:20,568 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 21:22:20,570 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 21:22:20,674 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'admin', 'api', 'backend', 'static', 'assets', 'cdn'}
2025-11-30 21:22:22,484 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 21:22:22,484 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.0ms
2025-11-30 21:22:22,485 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 21:22:22,486 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.2ms
2025-11-30 21:22:22,488 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:22:22,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:22,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:22,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:22,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:22,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:22,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:22,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:22,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:22,489 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:22,490 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:22,490 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:22:22,517 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 21:22:22,519 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:22:22,519 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:22:22,526 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:22:22,526 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 38.6ms
2025-11-30 21:22:22,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:22:22,528 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:22,528 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:22,528 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:22,529 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:22:22,531 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:22:22,531 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:22:22,534 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:22:22,534 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.3ms
2025-11-30 21:22:24,485 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:24,486 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:24,487 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:24,487 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:22:24,489 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:22:24,489 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:22:24,493 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:22:24,494 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 9.2ms
2025-11-30 21:22:24,496 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:22:24,496 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:24,496 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:24,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:24,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:24,496 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:24,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:24,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:24,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:24,497 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:24,497 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:24,497 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:22:24,500 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:22:24,500 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:22:24,501 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:22:24,502 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.7ms
2025-11-30 21:22:26,068 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:22:26,068 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:26,068 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:26,069 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:26,071 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:22:26,073 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:22:26,075 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:22:26,076 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 7.7ms
2025-11-30 21:22:26,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:26,076 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:26,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,077 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:26,078 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:26,078 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:22:26,080 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:22:26,080 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:22:26,083 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:22:26,085 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 9.1ms
2025-11-30 21:22:26,085 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:22:26,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:26,086 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:26,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,087 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,087 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:26,087 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:26,087 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:22:26,089 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:22:26,092 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:22:26,092 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:26,093 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:26,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:26,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:26,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:26,094 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:26,094 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:26,094 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:22:26,096 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:22:26,096 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:22:26,099 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:22:26,099 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.0ms
2025-11-30 21:22:26,100 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.3ms
2025-11-30 21:22:27,464 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:22:27,464 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:22:27,464 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.8ms
2025-11-30 21:22:27,466 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.5ms
2025-11-30 21:22:27,467 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:22:27,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:27,468 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:27,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:27,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:27,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:27,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:27,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:27,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:27,469 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:27,469 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:27,469 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 21:22:27,470 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 21:22:27,470 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 21:22:27,478 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 21:22:27,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 11.1ms
2025-11-30 21:22:27,480 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:22:27,480 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:27,481 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:27,482 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:27,482 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 21:22:27,483 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 21:22:27,484 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 21:22:27,485 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 21:22:27,485 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.2ms
2025-11-30 21:22:30,634 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 21:22:30,636 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 0.9ms
2025-11-30 21:22:30,636 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 21:22:30,638 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 21:22:30,638 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 21:22:30,638 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.8ms
2025-11-30 21:22:30,639 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.4ms
2025-11-30 21:22:30,639 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.3ms
2025-11-30 21:22:30,639 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 21:22:30,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:30,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:30,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,641 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:30,641 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:30,641 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 21:22:30,643 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 21:22:30,644 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 21:22:30,649 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 21:22:30,649 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 21:22:30,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:30,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:30,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,652 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:30,652 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:30,652 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 21:22:30,654 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 21:22:30,654 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 21:22:30,656 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 21:22:30,656 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 21:22:30,657 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 17.7ms
2025-11-30 21:22:30,658 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.8ms
2025-11-30 21:22:30,659 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 21:22:30,660 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:30,660 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:30,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,661 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,661 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,661 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:30,661 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:30,661 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 21:22:30,661 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 21:22:30,664 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 21:22:30,664 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 21:22:30,664 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 21:22:30,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:30,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:30,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:30,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:30,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:30,667 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:30,667 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:30,667 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 21:22:30,669 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 21:22:30,669 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 21:22:30,669 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 21:22:30,669 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 21:22:30,671 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 11.5ms
2025-11-30 21:22:30,671 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 9.8ms
2025-11-30 21:22:33,578 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:22:33,578 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:22:33,580 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 21:22:33,580 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.6ms
2025-11-30 21:22:33,582 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:22:33,582 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:33,582 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:33,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:33,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:33,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:33,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:33,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:33,583 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:33,583 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:33,584 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:33,584 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:22:33,585 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 21:22:33,586 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 21:22:37,721 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 21:22:37,721 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 21:22:37,725 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 21:22:37,725 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,770 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,772 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,778 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,779 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,781 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 21:22:37,781 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4200.1ms
2025-11-30 21:22:37,783 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:22:37,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:37,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:37,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:37,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:37,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:37,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:37,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:37,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:37,786 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:37,786 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:37,786 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:22:37,788 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 21:22:37,788 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 21:22:37,789 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,789 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,790 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,792 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,794 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:37,796 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 21:22:37,797 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.5ms
2025-11-30 21:22:39,422 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 21:22:39,423 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.7ms
2025-11-30 21:22:39,423 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 21:22:39,424 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 0.8ms
2025-11-30 21:22:39,426 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 21:22:39,426 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:39,427 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:39,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:39,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:39,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:39,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:39,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:39,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:39,428 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:39,428 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:39,428 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 21:22:39,429 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 21:22:39,438 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:39,439 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 21:22:39,440 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 14.1ms
2025-11-30 21:22:39,443 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 21:22:39,449 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 11.1ms
2025-11-30 21:22:47,566 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:22:47,566 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.8ms
2025-11-30 21:22:47,567 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:22:47,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.8ms
2025-11-30 21:22:47,569 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:22:47,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:47,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:47,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:47,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:47,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:47,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:47,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:47,570 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:47,570 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:47,570 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:47,570 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:22:47,572 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:22:47,572 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:22:47,573 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:47,579 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:47,581 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 21:22:47,582 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 13.1ms
2025-11-30 21:22:47,583 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:22:47,584 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:47,584 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:47,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:47,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:47,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:47,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:47,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:47,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:47,585 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:47,585 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:47,585 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:22:47,586 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:22:47,588 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:22:47,589 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:47,589 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:47,589 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 21:22:47,591 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.5ms
2025-11-30 21:22:50,431 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 21:22:50,432 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1021/ 200 0.5ms
2025-11-30 21:22:50,433 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 21:22:50,434 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:22:50,434 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:22:50,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:50,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:50,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:50,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:22:50,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:22:50,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:22:50,435 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:22:50,435 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:22:50,435 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1021/
2025-11-30 21:22:50,439 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1021
2025-11-30 21:22:50,439 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, identificando tenant del log 1021
2025-11-30 21:22:50,441 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1021 no encontrado en BD central, buscando en BDs Multi-DB
2025-11-30 21:22:50,444 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:50,445 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1021 obtenido desde BD del cliente 2: 2
2025-11-30 21:22:50,446 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1021 completo en BD del cliente 2 (execute_query determinará BD automáticamente)
2025-11-30 21:22:50,446 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:22:50,448 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1021 encontrado en BD del cliente 2
2025-11-30 21:22:50,450 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1021/ 200 17.6ms
2025-11-30 21:23:00,306 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 21:23:00,307 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/ 200 0.4ms
2025-11-30 21:23:00,309 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 21:23:00,309 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:23:00,309 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:23:00,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:23:00,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:23:00,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:23:00,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:23:00,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:23:00,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:23:00,310 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:23:00,310 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:23:00,311 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 21:23:00,329 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1005
2025-11-30 21:23:00,329 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, identificando tenant del log 1005
2025-11-30 21:23:00,332 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1005 obtenido desde BD central: 1
2025-11-30 21:23:00,332 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1005 completo en BD del cliente 1 (execute_query determinará BD automáticamente)
2025-11-30 21:23:00,335 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 encontrado en BD del cliente 1
2025-11-30 21:23:00,337 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 28.8ms
2025-11-30 21:23:03,748 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 21:23:03,748 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.6ms
2025-11-30 21:23:03,750 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 21:23:03,750 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:23:03,750 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:23:03,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:23:03,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:23:03,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:23:03,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:23:03,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:23:03,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:23:03,751 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:23:03,751 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:23:03,751 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 21:23:03,753 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006
2025-11-30 21:23:03,753 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, identificando tenant del log 1006
2025-11-30 21:23:03,754 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 obtenido desde BD central: 1
2025-11-30 21:23:03,754 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1006 completo en BD del cliente 1 (execute_query determinará BD automáticamente)
2025-11-30 21:23:03,755 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del cliente 1
2025-11-30 21:23:03,756 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 6.6ms
2025-11-30 21:25:21,284 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/sincronizacion/
2025-11-30 21:25:21,284 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:25:21,285 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 21:25:21,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-11-30 21:25:21,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:25:21,285 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detectó subdominio válido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-11-30 21:25:21,285 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 21:25:21,286 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:25:21,286 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/sincronizacion/
2025-11-30 21:25:21,287 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/sincronizacion/ 401 3.0ms
2025-11-30 21:35:06,121 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 21:35:06,121 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 21:35:06,121 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 21:35:06,122 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 21:35:06,122 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 21:35:06,122 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 21:35:07,012 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 21:35:07,015 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 21:35:07,015 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 21:35:07,015 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 21:35:07,015 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 21:35:07,015 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 21:35:07,357 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 21:35:07,357 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 21:35:07,438 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 21:35:07,438 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 21:35:07,438 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 21:35:07,698 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 21:35:07,698 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 21:35:07,857 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'api', 'cdn', 'www', 'backend', 'assets', 'static'}
2025-11-30 21:36:43,204 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /docs
2025-11-30 21:36:43,205 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:36:43,205 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 21:36:43,205 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-11-30 21:36:43,206 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:36:43,206 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detectó subdominio válido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-11-30 21:36:43,206 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 21:36:43,206 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:36:43,206 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/docs
2025-11-30 21:36:43,207 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /docs 200 2.5ms
2025-11-30 21:36:43,467 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 21:36:43,467 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 21:36:43,467 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 21:36:43,467 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 21:36:43,468 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 21:36:43,468 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 21:36:44,408 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 21:36:44,409 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 21:36:44,409 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 21:36:44,410 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 21:36:44,410 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 21:36:44,410 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 21:36:44,729 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 21:36:44,729 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 21:36:44,805 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 21:36:44,805 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 21:36:44,805 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 21:36:45,034 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 21:36:45,034 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 21:36:45,143 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'admin', 'backend', 'www', 'assets', 'api', 'cdn'}
2025-11-30 21:36:45,182 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /openapi.json
2025-11-30 21:36:45,183 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host '127.0.0.1:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:36:45,183 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 21:36:45,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: '127.0.0.1'
2025-11-30 21:36:45,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:36:45,183 - app.core.tenant.middleware - WARNING - [SUBDOMAIN] No se detectó subdominio válido en: '127.0.0.1'. Verifica BASE_DOMAIN='app.local'
2025-11-30 21:36:45,184 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: 127.0.0.1:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 21:36:45,184 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:36:45,184 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/openapi.json
2025-11-30 21:36:45,312 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /openapi.json 200 131.1ms
2025-11-30 21:37:05,008 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 21:37:05,008 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.7ms
2025-11-30 21:37:05,011 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 21:37:05,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,012 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,013 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,013 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 21:37:05,094 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 21:37:05,097 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 21:37:05,104 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 21:37:05,112 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 21:37:05,112 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14443, Rotación: True
2025-11-30 21:37:05,118 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 21:37:05,118 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 21:37:05,118 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 21:37:05,118 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14443
2025-11-30 21:37:05,119 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 21:37:05,128 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 21:37:05,129 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 21:37:05,129 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 119.2ms
2025-11-30 21:37:05,134 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 21:37:05,134 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.4ms
2025-11-30 21:37:05,136 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 21:37:05,136 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,136 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,137 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,137 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,137 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 21:37:05,140 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 21:37:05,140 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 21:37:05,140 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 21:37:05,152 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 21:37:05,153 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 21:37:05,153 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 17.9ms
2025-11-30 21:37:05,159 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 21:37:05,159 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 21:37:05,161 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 21:37:05,162 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,162 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,163 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,163 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,163 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,163 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 21:37:05,164 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 21:37:05,166 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 21:37:05,166 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 21:37:05,167 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 21:37:05,169 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 7.0ms
2025-11-30 21:37:05,181 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 21:37:05,181 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.0ms
2025-11-30 21:37:05,182 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 21:37:05,184 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 21:37:05,185 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.1ms
2025-11-30 21:37:05,185 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.4ms
2025-11-30 21:37:05,185 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 21:37:05,186 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 21:37:05,186 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 21:37:05,187 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 21:37:05,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,188 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,188 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,188 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 21:37:05,192 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 21:37:05,192 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 21:37:05,232 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 21:37:05,232 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 46.2ms
2025-11-30 21:37:05,233 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 46.2ms
2025-11-30 21:37:05,233 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 46.1ms
2025-11-30 21:37:05,235 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:37:05,235 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:37:05,235 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 49.8ms
2025-11-30 21:37:05,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,238 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,238 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,238 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:37:05,241 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:37:05,245 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:37:05,245 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:37:05,251 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:37:05,253 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 18.7ms
2025-11-30 21:37:05,253 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 18.7ms
2025-11-30 21:37:05,253 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 21:37:05,254 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,254 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,256 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,256 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,256 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 21:37:05,259 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 21:37:05,259 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 21:37:05,260 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 21:37:05,261 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:37:05,262 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,262 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,262 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,263 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,263 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,264 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,264 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:37:05,266 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:37:05,268 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:37:05,268 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 14.2ms
2025-11-30 21:37:05,268 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:05,269 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:05,270 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:37:05,272 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:37:05,272 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:37:05,276 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:37:05,277 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.7ms
2025-11-30 21:37:05,278 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 10.2ms
2025-11-30 21:37:06,488 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 21:37:06,488 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 21:37:06,488 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.1ms
2025-11-30 21:37:06,488 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-11-30 21:37:06,491 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:06,492 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:06,493 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:06,493 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:06,493 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:37:06,495 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:37:06,495 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:37:06,501 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:37:06,501 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 9.7ms
2025-11-30 21:37:06,503 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:37:06,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:06,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:06,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:06,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:06,505 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:06,505 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:06,505 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:37:06,507 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:37:06,507 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:37:06,509 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:37:06,509 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.8ms
2025-11-30 21:37:13,103 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 21:37:13,103 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuración de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 21:37:13,103 - app.infrastructure.database.connection_pool - INFO - ✅ Módulo de connection pooling cargado y activo
2025-11-30 21:37:13,103 - app.infrastructure.database.connection_pool - INFO -    Configuración: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 21:37:13,103 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 21:37:13,103 - app.main - INFO - ✅ Pools de conexión cerrados correctamente
2025-11-30 21:37:14,477 - app.core.tenant.context - INFO - Módulo tenant_context cargado (versión híbrida)
2025-11-30 21:37:14,479 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 21:37:14,479 - app.core.security.encryption - INFO - Módulo de encriptación cargado correctamente
2025-11-30 21:37:14,479 - app.core.tenant.cache - INFO - ✅ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 21:37:14,480 - app.core.tenant.cache - INFO - Módulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 21:37:14,480 - app.core.tenant.routing - INFO - Módulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 21:37:14,783 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. Límites: Login=10/minute, API=200/minute
2025-11-30 21:37:14,783 - app.core.security.rate_limiting - INFO - ✅ Módulo de rate limiting cargado y activo
2025-11-30 21:37:14,859 - app.core.authorization.rbac - INFO - 🔐 Inicializando sistema de autorización...
2025-11-30 21:37:14,859 - app.core.authorization.rbac - INFO - ✅ Sistema de autorización inicializado correctamente
2025-11-30 21:37:14,859 - app.core.authorization.rbac - INFO - 📊 Permisos del sistema: 6 módulos configurados
2025-11-30 21:37:15,050 - app.core.tenant.middleware - INFO - Módulo tenant_middleware cargado (versión híbrida con soporte para proxies)
2025-11-30 21:37:15,050 - app.main - INFO - ✅ Rate limiting configurado y activo
2025-11-30 21:37:15,164 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'api', 'assets', 'backend', 'cdn', 'www', 'static'}
2025-11-30 21:37:16,696 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:37:16,696 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:16,696 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:16,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:16,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:16,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:16,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:16,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:16,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:16,697 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:16,697 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:16,698 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:37:16,772 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versión: SQL Server 2022 (internal: 16)
2025-11-30 21:37:16,780 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:37:16,780 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:37:16,789 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:37:16,789 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 93.8ms
2025-11-30 21:37:16,791 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 21:37:16,791 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:16,792 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:16,793 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:16,793 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 21:37:16,794 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 21:37:16,794 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 21:37:16,796 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 21:37:16,797 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 5.6ms
2025-11-30 21:37:18,189 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:37:18,190 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:18,190 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:18,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,190 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,191 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:18,191 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:18,191 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:37:18,193 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:37:18,197 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:37:18,197 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 7.9ms
2025-11-30 21:37:18,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:18,198 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:18,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,199 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:18,199 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:18,200 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:37:18,202 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:37:18,202 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:37:18,211 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:37:18,213 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 15.6ms
2025-11-30 21:37:18,213 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,215 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:18,215 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:18,215 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:37:18,216 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:37:18,217 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:37:18,218 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:18,218 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:18,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:18,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:18,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:18,220 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:18,220 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:18,220 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:37:18,222 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:37:18,222 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:37:18,224 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:37:18,225 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 12.0ms
2025-11-30 21:37:18,226 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.2ms
2025-11-30 21:37:19,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:37:19,626 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.7ms
2025-11-30 21:37:19,626 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:37:19,627 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.8ms
2025-11-30 21:37:19,627 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:37:19,628 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:19,628 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:19,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:19,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:19,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:19,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:19,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:19,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:19,629 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:19,629 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:19,629 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 21:37:19,632 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 21:37:19,632 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 21:37:19,636 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 21:37:19,637 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 8.7ms
2025-11-30 21:37:19,638 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:19,639 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:19,640 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:19,640 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 21:37:19,642 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 21:37:19,642 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo módulos para cliente ID: 2
2025-11-30 21:37:19,643 - app.modules.tenant.presentation.endpoints_modulos - INFO - Módulos para cliente 2 recuperados: 5 módulos
2025-11-30 21:37:19,644 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 5.2ms
2025-11-30 21:37:22,784 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 21:37:22,784 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.0ms
2025-11-30 21:37:22,785 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 21:37:22,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 21:37:22,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 21:37:22,786 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.7ms
2025-11-30 21:37:22,787 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.4ms
2025-11-30 21:37:22,787 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.3ms
2025-11-30 21:37:22,788 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:22,789 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 21:37:22,791 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 21:37:22,793 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 21:37:22,793 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 21:37:22,796 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,797 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:22,798 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:22,798 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 21:37:22,799 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 21:37:22,799 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 21:37:22,801 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 21:37:22,802 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 21:37:22,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 16.0ms
2025-11-30 21:37:22,803 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 13.4ms
2025-11-30 21:37:22,805 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 21:37:22,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:22,806 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:22,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,808 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:22,808 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:22,808 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 21:37:22,808 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 21:37:22,810 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 21:37:22,810 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 21:37:22,811 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 21:37:22,812 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:22,812 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:22,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:22,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:22,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:22,813 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:22,813 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:22,813 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 21:37:22,815 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 21:37:22,815 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo catálogo de módulos - skip: 0, limit: 100
2025-11-30 21:37:22,816 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de módulos en el sistema
2025-11-30 21:37:22,817 - app.modules.tenant.presentation.endpoints_modulos - INFO - Catálogo de módulos recuperado: 5 módulos de 5 totales
2025-11-30 21:37:22,817 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 12.4ms
2025-11-30 21:37:22,819 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.4ms
2025-11-30 21:37:27,401 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:37:27,402 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 21:37:27,402 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:37:27,403 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.8ms
2025-11-30 21:37:27,404 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:37:27,405 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:27,405 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:27,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:27,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:27,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:27,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:27,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:27,406 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:27,406 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:27,406 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:27,406 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:37:27,409 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 21:37:27,409 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 21:37:31,538 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.. Cache desactivado automáticamente (usando fallback en memoria).
2025-11-30 21:37:31,538 - app.infrastructure.cache.redis_cache - INFO - ℹ️ Módulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 21:37:31,543 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 21:37:31,543 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,589 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,593 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,605 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,607 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,608 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 21:37:31,610 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4204.6ms
2025-11-30 21:37:31,611 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:37:31,612 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:31,612 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:31,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:31,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:31,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:31,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:31,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:31,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:31,613 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:31,613 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:31,613 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 21:37:31,615 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 21:37:31,615 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 21:37:31,616 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,617 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,618 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,619 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,622 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:31,623 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, Página: 1
2025-11-30 21:37:31,624 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.5ms
2025-11-30 21:37:38,551 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 21:37:38,553 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.8ms
2025-11-30 21:37:38,554 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 21:37:38,555 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 1.3ms
2025-11-30 21:37:38,559 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 21:37:38,560 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:38,561 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:38,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:38,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:38,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:38,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:38,563 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:38,564 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:38,564 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:38,565 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:38,565 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 21:37:38,568 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1, cliente_id: None
2025-11-30 21:37:38,573 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [ACTIVIDAD] Cliente_id del usuario 1 obtenido desde BD ADMIN: 1
2025-11-30 21:37:38,584 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 21:37:38,585 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 26.3ms
2025-11-30 21:37:38,585 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:38,585 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:38,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:38,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:38,585 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:38,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:38,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:38,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:38,586 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:38,586 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:38,586 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 21:37:38,591 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1, cliente_id: None
2025-11-30 21:37:38,595 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - [SESIONES] Cliente_id del usuario 1 obtenido desde BD ADMIN: 1
2025-11-30 21:37:38,607 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 23.6ms
2025-11-30 21:37:45,731 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:37:45,731 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-11-30 21:37:45,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:37:45,734 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.5ms
2025-11-30 21:37:45,735 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:37:45,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:45,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:45,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:45,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:45,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:45,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:45,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:45,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:45,736 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:45,736 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:45,736 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:37:45,738 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:37:45,738 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:37:45,739 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:45,743 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:45,745 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 21:37:45,746 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.5ms
2025-11-30 21:37:45,747 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:37:45,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:45,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:45,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:45,747 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:45,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:45,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:45,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:45,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:45,749 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:45,749 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:45,749 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 21:37:45,751 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:37:45,751 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticación - cliente_id: 2, page: 1
2025-11-30 21:37:45,752 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:45,753 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 21:37:45,754 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticación recuperados - Total: 18, Página: 1
2025-11-30 21:37:45,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.1ms
2025-11-30 21:37:48,363 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 21:37:48,363 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/ 200 0.5ms
2025-11-30 21:37:48,365 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 21:37:48,366 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:48,366 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:48,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:48,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:48,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:48,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:48,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:48,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:48,367 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:48,367 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:48,367 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 21:37:48,369 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1005, cliente_id: None
2025-11-30 21:37:48,370 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, identificando tenant del log 1005
2025-11-30 21:37:48,372 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1005 obtenido desde BD central: 1
2025-11-30 21:37:48,372 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1005 completo en BD del cliente 1 (execute_query determinará BD automáticamente)
2025-11-30 21:37:48,374 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1005 encontrado en BD del cliente 1
2025-11-30 21:37:48,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 11.4ms
2025-11-30 21:37:50,589 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 21:37:50,589 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.5ms
2025-11-30 21:37:50,591 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 21:37:50,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:37:50,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:37:50,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:50,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:50,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:50,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:37:50,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:37:50,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:37:50,592 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:37:50,593 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:37:50,594 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 21:37:50,596 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticación ID 1006, cliente_id: None
2025-11-30 21:37:50,596 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Contexto de SuperAdmin detectado, identificando tenant del log 1006
2025-11-30 21:37:50,597 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 obtenido desde BD central: 1
2025-11-30 21:37:50,597 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Consultando log 1006 completo en BD del cliente 1 (execute_query determinará BD automáticamente)
2025-11-30 21:37:50,599 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Log 1006 encontrado en BD del cliente 1
2025-11-30 21:37:50,600 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 8.9ms
2025-11-30 21:38:09,619 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 21:38:09,619 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:38:09,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:38:09,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,626 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:38:09,626 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:38:09,626 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 21:38:09,638 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 21:38:09,644 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 21:38:09,655 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 21:38:09,670 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 21:38:09,674 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14444, Rotación: True
2025-11-30 21:38:09,686 - app.infrastructure.database.queries - INFO - Actualización exitosa, filas afectadas: -1
2025-11-30 21:38:09,687 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 21:38:09,687 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-11-30 21:38:09,688 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14444
2025-11-30 21:38:09,688 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 21:38:09,712 - app.infrastructure.database.queries - INFO - Inserción exitosa, filas afectadas: -1
2025-11-30 21:38:09,715 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 21:38:09,716 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 96.4ms
2025-11-30 21:38:09,766 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 21:38:09,766 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:38:09,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:38:09,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,776 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:38:09,777 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:38:09,777 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 21:38:09,790 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 21:38:09,791 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 21:38:09,791 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 21:38:09,811 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 21:38:09,812 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 21:38:09,814 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 47.4ms
2025-11-30 21:38:09,839 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 21:38:09,845 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:38:09,846 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:38:09,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,848 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,854 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:38:09,854 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:38:09,854 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 21:38:09,859 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 21:38:09,860 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 21:38:09,862 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 21:38:09,865 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 25.8ms
2025-11-30 21:38:09,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:38:09,867 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 21:38:09,867 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 21:38:09,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:38:09,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:38:09,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,883 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:38:09,883 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:38:09,883 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 21:38:09,883 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:38:09,883 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:38:09,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,884 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,886 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,888 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,888 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,894 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:38:09,894 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:38:09,896 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 21:38:09,897 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:38:09,897 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:38:09,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:09,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:09,900 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:09,903 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 21:38:09,904 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 21:38:09,904 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 21:38:09,912 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 21:38:09,917 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 21:38:09,917 - app.modules.menus.application.services.menu_service - INFO - Obteniendo menú filtrado para usuario_id: 1
2025-11-30 21:38:09,988 - app.modules.menus.application.services.menu_service - INFO - No se encontraron menús permitidos para el usuario ID: 1.
2025-11-30 21:38:09,996 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 21:38:09,996 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estadísticas para cliente ID: 2
2025-11-30 21:38:10,001 - app.modules.tenant.application.services.cliente_service - INFO - Estadísticas obtenidas para cliente 2
2025-11-30 21:38:10,002 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 136.1ms
2025-11-30 21:38:10,002 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 135.7ms
2025-11-30 21:38:10,003 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 135.2ms
2025-11-30 21:38:10,016 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 21:38:10,017 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 21:38:10,018 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 21:38:10,021 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-11-30 21:38:10,025 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:10,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 21:38:10,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 21:38:10,034 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 21:38:10,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'

2025-12-10 21:58:53,271 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,276 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,276 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,413 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:58:53,417 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:58:53,427 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:58:53,428 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:58:53,429 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 174.3ms
2025-12-10 21:58:53,429 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 172.1ms
2025-12-10 21:58:53,435 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,442 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,455 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,456 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,456 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,465 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,491 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,499 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,506 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,528 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,529 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,529 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,578 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 143.1ms
2025-12-10 21:58:53,579 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 124.8ms
2025-12-10 21:58:53,583 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,584 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,585 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,594 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,595 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,597 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,599 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,601 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,607 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,611 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,611 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,612 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,615 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,616 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,618 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,618 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,621 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,637 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,637 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,637 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,649 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,649 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,649 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,652 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,652 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,652 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,655 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,655 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,655 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,656 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,656 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,657 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,658 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,658 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,660 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,661 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,661 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,661 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:58:53,725 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:53,726 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:53,728 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:53,729 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:53,731 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:53,732 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:53,740 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:53,740 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:53,744 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:53,744 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:53,749 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:53,749 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:53,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:53,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:53,758 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:58:53,759 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:58:53,764 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:53,765 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:53,776 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:53,776 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:58:53,776 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,778 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:53,778 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:58:53,778 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,779 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:53,779 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:58:53,779 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,779 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:53,780 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:58:53,780 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,780 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:58:53,780 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:58:53,781 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,782 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:53,782 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:58:53,782 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,791 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:53,792 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:53,792 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 184.4ms
2025-12-10 21:58:53,794 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 210.6ms
2025-12-10 21:58:53,796 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:53,796 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,796 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:53,798 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:58:53,798 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,798 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,799 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,800 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:53,800 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,801 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 186.0ms
2025-12-10 21:58:53,801 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:58:53,801 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:58:53,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,805 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 207.8ms
2025-12-10 21:58:53,805 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 220.9ms
2025-12-10 21:58:53,806 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 190.9ms
2025-12-10 21:58:53,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:58:53,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:58:53,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:58:53,818 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,819 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,819 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,820 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:58:53,820 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:58:53,820 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:58:53,845 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:53,846 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:53,849 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:53,849 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:53,857 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:58:53,857 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:58:53,866 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:53,866 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:58:53,866 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,868 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:58:53,868 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:58:53,868 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:58:53,873 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:53,874 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 73.3ms
2025-12-10 21:58:53,875 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:58:53,876 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 80.0ms
2025-12-10 21:59:21,406 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:21,407 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,407 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,408 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,423 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,423 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,423 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:21,447 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,462 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 54.8ms
2025-12-10 21:59:21,466 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,467 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,467 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,469 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,471 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,471 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,476 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,477 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,485 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,485 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,486 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,487 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,487 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,487 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,513 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:59:21,516 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:59:21,524 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:59:21,524 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:59:21,525 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 58.7ms
2025-12-10 21:59:21,525 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 55.4ms
2025-12-10 21:59:21,528 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,529 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,529 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,529 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,530 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,531 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,531 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,531 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,532 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,532 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,537 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,537 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,537 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,543 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,543 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,543 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,545 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,545 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,545 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,584 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 53.3ms
2025-12-10 21:59:21,585 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 56.3ms
2025-12-10 21:59:21,589 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,589 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,591 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,593 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,593 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,595 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,599 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,599 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,604 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,604 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,605 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,637 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,637 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,637 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,639 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,639 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,639 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,641 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,641 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,641 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,642 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,643 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,643 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:21,645 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,645 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,646 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,648 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,649 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,649 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,713 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:21,715 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:21,719 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:21,722 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:21,724 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:21,725 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:21,730 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:21,730 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:21,735 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:21,736 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:21,741 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:21,742 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:21,746 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:21,746 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:21,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:21,753 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:21,758 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:21,758 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:21,765 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:21,765 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:21,765 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,767 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:21,768 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:21,768 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,770 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:21,770 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:21,771 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,772 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:21,772 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:21,772 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,775 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:21,775 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:21,776 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,776 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:21,776 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:21,776 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,778 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:21,779 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 190.1ms
2025-12-10 21:59:21,783 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,787 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:21,788 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:21,789 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 189.9ms
2025-12-10 21:59:21,789 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:21,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 196.1ms
2025-12-10 21:59:21,793 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 203.3ms
2025-12-10 21:59:21,795 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,795 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:21,796 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:21,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,797 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:21,798 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:21,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,800 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,802 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 203.5ms
2025-12-10 21:59:21,802 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 197.8ms
2025-12-10 21:59:21,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:21,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:21,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:21,810 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,810 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,810 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,814 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:21,814 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:21,814 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:21,835 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:21,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:21,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:21,841 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:21,852 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:21,852 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:21,852 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,853 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:21,853 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:21,859 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:21,862 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 78.1ms
2025-12-10 21:59:21,862 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:21,862 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:21,863 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:21,867 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:21,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 73.5ms
2025-12-10 21:59:40,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:40,730 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 0.5ms
2025-12-10 21:59:40,733 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:40,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,741 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,741 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,741 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:40,759 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,759 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 34.5ms
2025-12-10 21:59:40,771 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,772 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.8ms
2025-12-10 21:59:40,773 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,773 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.5ms
2025-12-10 21:59:40,774 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,775 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,775 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,777 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,777 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,778 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,789 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,791 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,791 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,791 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,791 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,791 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,811 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:59:40,811 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:59:40,820 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:59:40,820 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:59:40,820 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 50.0ms
2025-12-10 21:59:40,820 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 48.0ms
2025-12-10 21:59:40,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.5ms
2025-12-10 21:59:40,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,827 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.6ms
2025-12-10 21:59:40,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,827 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,827 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,838 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,877 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 51.4ms
2025-12-10 21:59:40,877 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 49.8ms
2025-12-10 21:59:40,877 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,886 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.9ms
2025-12-10 21:59:40,886 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.7ms
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.0ms
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.9ms
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,887 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,887 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,887 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.2ms
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.9ms
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.6ms
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,897 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,897 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,897 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 3.9ms
2025-12-10 21:59:40,901 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,901 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,911 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:40,911 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:40,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,920 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:40,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:40,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:40,927 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,927 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,927 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,937 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,937 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,937 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,937 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,937 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,937 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:40,941 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:41,008 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:41,008 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:41,008 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:41,018 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:41,020 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:41,022 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:41,027 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:41,027 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:41,032 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:41,032 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:41,041 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:41,041 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:41,041 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:41,041 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:41,049 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:41,049 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:41,056 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:41,056 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:41,062 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:41,062 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:41,062 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,065 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:41,065 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:41,065 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,067 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:41,067 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:41,067 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,072 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:41,072 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:41,072 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,073 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:41,073 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:41,074 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,075 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:41,075 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:41,075 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,076 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:41,078 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 176.6ms
2025-12-10 21:59:41,079 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:41,081 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:41,081 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 179.2ms
2025-12-10 21:59:41,082 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:41,082 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:41,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:41,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:41,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:41,088 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:41,088 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:41,088 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:41,088 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:41,088 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:41,088 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:41,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:41,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:41,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:41,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:41,088 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 186.0ms
2025-12-10 21:59:41,088 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 186.8ms
2025-12-10 21:59:41,088 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 203.9ms
2025-12-10 21:59:41,088 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 200.0ms
2025-12-10 21:59:41,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:41,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:41,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:41,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:41,102 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:41,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:41,107 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:41,107 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:41,107 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:41,109 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:41,109 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:41,109 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:41,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:41,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:41,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:41,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:41,147 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:41,147 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:41,156 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:41,156 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:41,156 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,157 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:41,157 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:41,157 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:41,161 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:41,163 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:41,163 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 82.3ms
2025-12-10 21:59:41,163 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 76.1ms
2025-12-10 21:59:46,908 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 21:59:46,909 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.6ms
2025-12-10 21:59:46,911 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 21:59:46,911 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 21:59:46,911 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 0.9ms
2025-12-10 21:59:46,911 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:46,911 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:46,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:46,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:46,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:46,915 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:46,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:46,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:46,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:46,929 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:46,929 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:46,929 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 21:59:46,929 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:46,929 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:46,929 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 21:59:46,929 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 21:59:46,929 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 21:59:46,937 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 21:59:46,937 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 21:59:46,937 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 22.3ms
2025-12-10 21:59:46,943 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 21:59:46,943 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 21:59:46,947 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 82A6CF78-A494-45BE-9C63-1DFE896154B7, Rotación: True
2025-12-10 21:59:46,963 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 21:59:46,963 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 21:59:46,963 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 82A6CF78-A494-45BE-9C63-1DFE896154B7
2025-12-10 21:59:46,963 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 21:59:46,969 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:59:46,971 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 59.3ms
2025-12-10 21:59:46,975 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-12-10 21:59:46,976 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.6ms
2025-12-10 21:59:46,978 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:46,978 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:46,987 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/me/
2025-12-10 21:59:46,991 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: admin_tech
2025-12-10 21:59:46,992 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 4, Super Admin: False, Type: tenant_admin
2025-12-10 21:59:46,992 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 para cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A
2025-12-10 21:59:46,992 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:46,997 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 3DC35436-5316-436A-B5BC-E348DC7DF3A2 con 1 roles activos
2025-12-10 21:59:46,997 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: admin_tech, Type: tenant_admin, Level: 4, Super Admin: False, Roles: 1
2025-12-10 21:59:46,997 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 23.3ms
2025-12-10 21:59:47,017 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:47,017 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,017 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,017 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/all-structured/
2025-12-10 21:59:47,017 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/all-structured/ 200 0.6ms
2025-12-10 21:59:47,027 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 21:59:47,027 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,028 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,031 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:59:47,031 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,031 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,037 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,037 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,047 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,047 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,047 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:47,053 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,055 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,055 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 21:59:47,055 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,055 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,057 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:59:47,059 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,060 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,060 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:59:47,092 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,109 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,110 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,110 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,110 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 93.9ms
2025-12-10 21:59:47,117 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,117 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,117 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,127 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 21:59:47,127 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,127 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 21:59:47,127 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 21:59:47,127 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 103.3ms
2025-12-10 21:59:47,127 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:59:47,127 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:59:47,127 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,127 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:59:47,127 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,127 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Administrador/permisos/
2025-12-10 21:59:47,127 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Administrador/permisos/ 200 0.7ms
2025-12-10 21:59:47,137 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 21:59:47,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,137 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,142 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,142 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,151 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,153 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,153 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:59:47,153 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 122.7ms
2025-12-10 21:59:47,153 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,153 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,153 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 21:59:47,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,161 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 21:59:47,161 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,164 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,164 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,164 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,164 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,164 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,164 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,164 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,167 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,167 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,167 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,167 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:59:47,167 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:59:47,167 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:59:47,167 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 140.5ms
2025-12-10 21:59:47,176 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 21:59:47,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,217 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,217 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,217 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 21:59:47,234 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,234 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,234 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 21:59:47,268 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:59:47,268 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,281 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:59:47,293 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:59:47,295 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 177.8ms
2025-12-10 21:59:47,295 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 174.7ms
2025-12-10 21:59:47,297 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,297 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:59:47,297 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,297 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,297 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,297 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,311 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 189.6ms
2025-12-10 21:59:47,316 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,317 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,317 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,317 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 21:59:47,317 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 21:59:47,317 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,327 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 189.2ms
2025-12-10 21:59:47,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,331 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,331 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,344 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,344 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,344 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,347 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,347 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,347 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,347 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,347 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 21:59:47,349 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,349 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,349 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,349 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 21:59:47,349 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 21:59:47,349 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,349 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 189.2ms
2025-12-10 21:59:47,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,349 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,361 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,361 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,361 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,377 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 21:59:47,417 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 21:59:47,417 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 21:59:47,417 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 21:59:47,417 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 245.4ms
2025-12-10 21:59:47,431 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 21:59:47,437 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 21:59:47,447 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 21:59:47,447 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 21:59:47,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 148.8ms
2025-12-10 21:59:47,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 136.0ms
2025-12-10 21:59:47,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 151.5ms
2025-12-10 21:59:47,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,457 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,467 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 138.4ms
2025-12-10 21:59:47,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,497 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,499 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,499 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,499 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,501 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,501 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,501 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,501 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,501 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,501 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,505 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,505 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,505 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,507 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,508 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,508 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,511 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,511 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,511 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,578 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:47,580 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:47,583 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:47,585 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:47,592 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 135.9ms
2025-12-10 21:59:47,592 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,599 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,599 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,603 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,603 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,611 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,611 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,611 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,611 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,617 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 144.9ms
2025-12-10 21:59:47,627 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,629 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,629 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,630 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,635 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,635 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:47,635 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:47,637 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,647 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,648 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,648 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,654 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:47,655 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:47,656 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,656 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,656 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,656 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 194.2ms
2025-12-10 21:59:47,657 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:47,659 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 197.1ms
2025-12-10 21:59:47,660 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 199.7ms
2025-12-10 21:59:47,660 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:47,660 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,660 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,660 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,660 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,667 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 206.3ms
2025-12-10 21:59:47,667 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,667 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,697 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,707 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,708 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,708 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,717 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:47,717 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:47,743 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:47,743 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:47,747 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:47,747 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:47,767 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:47,767 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:47,767 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,767 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:47,767 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:47,767 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,777 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:47,777 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:47,777 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:47,777 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:47,777 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:47,777 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:47,787 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 160.2ms
2025-12-10 21:59:47,787 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 192.3ms
2025-12-10 21:59:47,787 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,792 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,797 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,797 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,801 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:47,801 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:47,808 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,808 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,813 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:47,813 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:47,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 21:59:47,827 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,827 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,827 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,837 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,837 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,837 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 21:59:47,843 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:47,843 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 171.8ms
2025-12-10 21:59:47,843 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,843 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,843 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,847 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:47,851 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 184.1ms
2025-12-10 21:59:47,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:47,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:47,860 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,861 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 186.2ms
2025-12-10 21:59:47,861 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 201.5ms
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,867 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,867 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:47,876 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:47,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,887 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,887 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,887 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:47,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:47,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:47,897 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,897 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,897 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,909 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,909 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,909 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,912 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:47,912 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:47,913 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 21:59:47,916 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:47,920 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:47,936 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,937 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,944 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 21:59:47,944 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 21:59:47,964 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,965 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 21:59:47,965 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,966 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 21:59:47,966 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 21:59:47,967 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:47,969 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:47,971 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:47,982 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 21:59:47,983 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 190.6ms
2025-12-10 21:59:47,984 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:47,986 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:47,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:47,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:47,995 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:47,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:47,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:48,001 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 210.0ms
2025-12-10 21:59:48,005 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:48,006 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:48,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:48,014 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 21:59:48,015 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:48,015 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 21:59:48,015 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 21:59:48,019 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:48,020 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 21:59:48,020 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:48,024 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:48,024 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 21:59:48,025 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:48,026 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 21:59:48,027 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 21:59:48,027 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 21:59:48,028 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:48,030 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 169.3ms
2025-12-10 21:59:48,031 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:48,032 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 186.2ms
2025-12-10 21:59:48,034 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:48,035 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 165.7ms
2025-12-10 21:59:48,037 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 21:59:48,037 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 163.5ms
2025-12-10 21:59:54,071 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-10 21:59:54,071 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-12-10 21:59:54,073 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 21:59:54,073 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:54,074 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:54,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:54,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:54,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:54,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:54,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:54,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:54,082 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:54,082 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:54,082 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 21:59:54,089 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 21:59:54,089 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 3DC35436-5316-436A-B5BC-E348DC7DF3A2 (admin_tech)
2025-12-10 21:59:54,095 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 21:59:54,096 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 22.1ms
2025-12-10 21:59:54,124 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 21:59:54,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 21:59:54,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 21:59:54,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:54,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:54,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:54,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 21:59:54,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 21:59:54,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 21:59:54,138 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 21:59:54,138 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 21:59:54,138 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 21:59:54,138 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 21:59:54,138 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 21:59:54,138 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 21:59:54,138 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 18.4ms
2025-12-10 22:00:03,267 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:00:03,268 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,268 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:03,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:03,272 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:03,278 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:00:03,279 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:03,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:03,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:03,298 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:03,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:03,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:03,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:03,313 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:03,313 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:03,314 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:00:03,314 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 22:00:03,314 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 22:00:03,315 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:03,315 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:03,316 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 22:00:03,319 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:00:03,320 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 53.4ms
2025-12-10 22:00:03,325 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 22:00:03,326 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 47.5ms
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.9ms
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.0ms
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 22:00:03,447 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 2.0ms
2025-12-10 22:00:03,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-12-10 22:00:03,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:00:03,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:00:03,458 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 5.0ms
2025-12-10 22:00:03,461 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:00:03,461 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 22:00:03,461 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,461 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': global.app.local:5173
2025-12-10 22:00:03,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:00:03,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:00:03,468 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:00:03,468 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 22:00:03,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 6.7ms
2025-12-10 22:00:03,471 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,471 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': innova.app.local:5173
2025-12-10 22:00:03,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:00:03,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:00:03,474 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:00:03,475 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 22:00:03,477 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 8.4ms
2025-12-10 22:00:03,479 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:00:03,480 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 89ccc8cf-4bce-4c2f-b834-25de204b9cf6
2025-12-10 22:00:03,482 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:03,482 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 22:00:03,482 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 8.3ms
2025-12-10 22:00:03,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 22:00:03,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:00:03,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:00:03,487 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 3.3ms
2025-12-10 22:00:03,487 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,487 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': innova.app.local:5173
2025-12-10 22:00:03,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:00:03,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,489 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:00:03,492 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,493 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-12-10 22:00:03,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:00:03,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,494 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:00:03,495 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:00:03,497 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,497 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': global.app.local:5173
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:00:03,498 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:00:03,498 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:00:03,498 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 89ccc8cf-4bce-4c2f-b834-25de204b9cf6
2025-12-10 22:00:03,504 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:03,504 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:00:03,504 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=platform
2025-12-10 22:00:03,504 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=platform
2025-12-10 22:00:03,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:00:03,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:00:03,509 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 34.3ms
2025-12-10 22:00:03,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:00:03,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:00:03,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:00:03,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:00:03,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:00:03,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:00:03,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:00:03,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:00:03,526 - app.modules.tenant.presentation.endpoints_clientes - WARNING - Subdominio no encontrado: platform
2025-12-10 22:00:03,527 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:00:03,527 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:03,527 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:00:03,530 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=c090bcb2-1175-407b-8d9b-60709aaa7dfe
2025-12-10 22:00:03,530 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 404 29.7ms
2025-12-10 22:00:03,533 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', Código='INNOVA002', ID=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35
2025-12-10 22:00:03,535 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', Código='GLOBAL004', ID=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b
2025-12-10 22:00:03,539 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', Código='INNOVA002', ID=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35
2025-12-10 22:00:03,541 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=c090bcb2-1175-407b-8d9b-60709aaa7dfe
2025-12-10 22:00:03,543 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', Código='GLOBAL004', ID=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b
2025-12-10 22:00:03,550 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC
2025-12-10 22:00:03,550 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=c090bcb2-1175-407b-8d9b-60709aaa7dfe, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC, path=/api/v1/auth/refresh/
2025-12-10 22:00:03,551 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC
2025-12-10 22:00:03,551 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC, path=/api/v1/auth/refresh/
2025-12-10 22:00:03,555 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:00:03,556 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:00:03,556 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC
2025-12-10 22:00:03,556 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=c090bcb2-1175-407b-8d9b-60709aaa7dfe, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC, path=/api/v1/clientes/branding
2025-12-10 22:00:03,556 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC
2025-12-10 22:00:03,556 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC, path=/api/v1/clientes/branding
2025-12-10 22:00:03,557 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=acme
2025-12-10 22:00:03,557 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=acme
2025-12-10 22:00:03,558 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=innova
2025-12-10 22:00:03,558 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=innova
2025-12-10 22:00:03,560 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 107.3ms
2025-12-10 22:00:03,561 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 92.5ms
2025-12-10 22:00:03,563 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3fb51816-0a6d-497b-b6eb-66e1f1c84a2b. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 22:00:03,563 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:03,563 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 22:00:03,567 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:00:03,568 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 105.7ms
2025-12-10 22:00:03,570 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3fb51816-0a6d-497b-b6eb-66e1f1c84a2b. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 22:00:03,571 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:03,571 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:00:03,571 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=global
2025-12-10 22:00:03,572 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=global
2025-12-10 22:00:03,572 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=acme
2025-12-10 22:00:03,573 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=innova
2025-12-10 22:00:03,573 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 86.5ms
2025-12-10 22:00:03,574 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 88.1ms
2025-12-10 22:00:03,579 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=global
2025-12-10 22:00:03,580 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 83.3ms
2025-12-10 22:00:09,042 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-10 22:00:09,042 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-12-10 22:00:09,042 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,055 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,056 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,056 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 22:00:09,059 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 22:00:09,059 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,059 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,268 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 22:00:09,268 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 22:00:09,268 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,283 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 22:00:09,286 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: D23930EF-3F7C-42DE-BFB7-E2A67DABA55A, Rotación: False
2025-12-10 22:00:09,286 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: D23930EF-3F7C-42DE-BFB7-E2A67DABA55A
2025-12-10 22:00:09,286 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,288 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 22:00:09,288 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 246.6ms
2025-12-10 22:00:09,316 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:00:09,317 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,317 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,319 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,319 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,323 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 22:00:09,325 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,325 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,335 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,339 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,339 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,339 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:00:09,345 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,345 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,345 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 22:00:09,376 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,380 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,383 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 22:00:09,383 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 22:00:09,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,388 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,388 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,388 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,388 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,388 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,394 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 22:00:09,394 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,394 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 22:00:09,394 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 22:00:09,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,398 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 74.1ms
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,400 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,406 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 90.8ms
2025-12-10 22:00:09,409 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:00:09,411 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,412 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,414 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,415 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,415 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,418 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,418 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,418 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 22:00:09,418 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,419 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 22:00:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,425 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,432 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,434 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,441 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,441 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,441 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 22:00:09,450 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,450 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,450 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:00:09,453 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,453 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,454 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,458 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,458 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,458 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,489 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,498 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,509 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:00:09,509 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:00:09,509 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,511 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,512 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 22:00:09,512 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,518 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,526 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:00:09,528 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 22:00:09,529 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 126.7ms
2025-12-10 22:00:09,530 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,534 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,534 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 22:00:09,536 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:00:09,538 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 155.6ms
2025-12-10 22:00:09,539 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 22:00:09,539 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 131.8ms
2025-12-10 22:00:09,539 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,539 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,539 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,547 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:00:09,550 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 136.1ms
2025-12-10 22:00:09,552 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,552 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,552 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,552 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,555 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,556 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,556 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,557 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,557 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,558 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:00:09,559 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 22:00:09,559 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 22:00:09,559 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 22:00:09,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 148.2ms
2025-12-10 22:00:09,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 185.2ms
2025-12-10 22:00:09,573 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,577 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,577 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,577 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,583 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 22:00:09,584 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,584 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,586 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,586 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,599 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,599 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,599 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 22:00:09,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,609 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,613 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,613 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,613 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,616 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,616 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,616 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,617 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,617 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,617 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,625 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,625 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,626 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,626 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,626 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,626 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 22:00:09,682 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,697 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 22:00:09,697 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,704 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:00:09,711 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:00:09,715 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,721 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,722 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 22:00:09,723 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 181.5ms
2025-12-10 22:00:09,723 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 171.0ms
2025-12-10 22:00:09,727 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:00:09,728 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:00:09,729 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:00:09,729 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:00:09,729 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,729 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 178.0ms
2025-12-10 22:00:09,731 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 156.8ms
2025-12-10 22:00:09,733 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,733 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,737 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,737 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,740 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,741 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,741 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,742 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,744 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,744 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 162.2ms
2025-12-10 22:00:09,750 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,752 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,752 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,752 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,752 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,752 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,754 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:00:09,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,773 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,773 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,774 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,774 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,774 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,774 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,774 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,774 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,777 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,777 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,777 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,777 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,781 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 22:00:09,781 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 22:00:09,782 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 22:00:09,784 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 201.6ms
2025-12-10 22:00:09,784 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,785 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,785 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,788 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,818 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,819 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,819 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,840 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:00:09,850 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:00:09,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:00:09,861 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:00:09,868 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:09,868 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:09,868 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:09,868 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:09,883 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:09,883 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:09,889 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:09,889 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:09,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 152.0ms
2025-12-10 22:00:09,905 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:09,905 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:00:09,905 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:09,906 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:09,906 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:00:09,906 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:09,907 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:09,907 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:00:09,907 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:09,908 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,909 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,909 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,919 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:09,919 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:00:09,919 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:09,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,928 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:09,930 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:00:09,931 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 191.3ms
2025-12-10 22:00:09,933 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:00:09,934 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 199.9ms
2025-12-10 22:00:09,936 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,936 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,936 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,937 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 202.6ms
2025-12-10 22:00:09,940 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,941 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:00:09,941 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,941 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,943 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,943 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 155.2ms
2025-12-10 22:00:09,944 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,944 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,947 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,949 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 207.4ms
2025-12-10 22:00:09,950 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,950 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,950 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,950 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,950 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,956 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,959 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,959 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:09,960 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:09,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,966 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,970 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,971 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,976 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,976 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,976 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:09,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:09,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:09,984 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,984 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,985 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,989 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,989 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,989 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,991 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,992 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,992 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:09,992 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,992 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,992 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:09,995 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:09,995 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:09,995 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:10,022 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:00:10,037 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,037 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,055 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:00:10,060 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,060 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:00:10,060 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,061 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:00:10,062 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:00:10,063 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:00:10,066 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:00:10,070 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,070 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,077 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,077 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,077 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,085 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:10,085 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:10,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,092 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 184.6ms
2025-12-10 22:00:10,095 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:10,095 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:10,102 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:10,103 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,103 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:00:10,103 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,104 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:10,104 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:10,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:10,109 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:00:10,109 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,110 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,110 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:00:10,110 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,111 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,111 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:00:10,111 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,114 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:10,114 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:00:10,114 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,117 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,121 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,121 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 181.9ms
2025-12-10 22:00:10,123 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 168.3ms
2025-12-10 22:00:10,124 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:10,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:10,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:10,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,128 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,128 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:10,128 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:10,128 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,128 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,131 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:10,132 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:10,132 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:10,135 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,135 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,136 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 192.7ms
2025-12-10 22:00:10,136 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 188.6ms
2025-12-10 22:00:10,138 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:00:10,139 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,139 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 182.1ms
2025-12-10 22:00:10,139 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,139 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:10,139 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:10,139 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,139 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,139 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,145 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:10,145 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:10,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,152 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,155 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:00:10,155 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:00:10,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,169 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:10,169 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:10,170 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:00:10,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:00:10,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:00:10,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:00:10,174 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:10,174 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:10,174 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,178 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:10,178 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:10,178 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,181 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:10,181 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:10,182 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,187 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:00:10,187 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:00:10,187 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:00:10,208 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:00:10,218 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:10,218 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:10,232 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:00:10,239 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:00:10,239 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:10,239 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:00:10,239 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,247 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:00:10,253 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:00:10,255 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,255 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,261 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:00:10,261 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:00:10,271 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:00:10,272 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:00:10,273 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 171.4ms
2025-12-10 22:00:10,273 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,273 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:00:10,273 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,277 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,277 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,286 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,286 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,291 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:00:10,291 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:00:10,291 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,294 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:00:10,295 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:00:10,301 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,301 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:00:10,301 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,304 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,305 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,305 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:00:10,305 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,305 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 178.4ms
2025-12-10 22:00:10,308 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:00:10,308 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:00:10,308 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:00:10,308 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,308 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:00:10,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 172.3ms
2025-12-10 22:00:10,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 189.5ms
2025-12-10 22:00:10,317 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,318 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 177.6ms
2025-12-10 22:00:10,320 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:00:10,320 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 168.7ms
2025-12-10 22:01:18,948 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:01:18,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:18,949 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:18,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:18,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:18,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:18,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:18,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:18,958 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:18,962 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:18,970 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 22:01:18,970 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:18,970 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:01:18,988 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:18,997 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 48.7ms
2025-12-10 22:01:19,002 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,003 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,003 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,003 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,003 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,004 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,005 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,006 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,006 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,006 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,012 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,017 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,018 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,018 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,021 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,021 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,021 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,046 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:01:19,048 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:01:19,056 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:01:19,056 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:01:19,057 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 51.6ms
2025-12-10 22:01:19,057 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 55.8ms
2025-12-10 22:01:19,061 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,062 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,062 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,062 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,064 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,064 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,064 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,065 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,065 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,070 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,071 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,078 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,078 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,078 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,080 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,080 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,080 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,119 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 58.9ms
2025-12-10 22:01:19,121 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 60.6ms
2025-12-10 22:01:19,125 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,126 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,126 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,128 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,130 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,131 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,131 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,135 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,135 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,138 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,138 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,140 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,141 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,141 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,167 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,188 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,188 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,188 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,257 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:01:19,257 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:01:19,257 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:01:19,271 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:01:19,271 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:01:19,271 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:01:19,277 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:19,277 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:19,288 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:19,288 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:19,288 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:19,288 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:19,301 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:19,303 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:19,378 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:19,378 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:19,390 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:19,392 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:19,397 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:19,397 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:01:19,397 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,405 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:19,405 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:01:19,405 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,405 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:19,405 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:01:19,405 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,408 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:19,408 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:01:19,408 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,410 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:19,410 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:01:19,410 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,410 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:19,410 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:01:19,410 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,410 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:01:19,410 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 287.9ms
2025-12-10 22:01:19,419 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,421 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,421 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,423 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:19,423 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:19,427 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:19,427 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 289.5ms
2025-12-10 22:01:19,427 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 297.2ms
2025-12-10 22:01:19,427 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 291.7ms
2025-12-10 22:01:19,427 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:01:19,427 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:01:19,427 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,427 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:19,427 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:19,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,438 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 314.3ms
2025-12-10 22:01:19,438 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 308.2ms
2025-12-10 22:01:19,438 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,438 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,438 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:19,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:19,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:19,447 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,447 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,447 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,454 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:19,457 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:19,457 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:19,477 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:01:19,481 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:19,481 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:19,489 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:01:19,489 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:19,489 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:01:19,489 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,489 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:19,489 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:19,503 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:19,505 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:19,505 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:01:19,505 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:19,505 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 87.4ms
2025-12-10 22:01:19,510 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:19,510 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 78.2ms
2025-12-10 22:01:58,538 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:01:58,538 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,538 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,538 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,547 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,547 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,547 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:01:58,571 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,580 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 44.9ms
2025-12-10 22:01:58,580 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,587 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,587 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,598 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,634 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:01:58,636 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:01:58,643 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:01:58,644 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:01:58,644 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 55.4ms
2025-12-10 22:01:58,645 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 59.2ms
2025-12-10 22:01:58,648 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,649 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,649 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,650 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,651 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,651 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,683 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,683 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,683 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,685 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,685 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,685 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,721 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 74.0ms
2025-12-10 22:01:58,722 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 71.6ms
2025-12-10 22:01:58,726 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,727 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,727 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,727 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,729 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,731 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,731 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,733 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,734 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,737 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,739 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,739 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,739 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,740 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,740 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,742 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,742 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,753 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,755 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,755 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,755 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,769 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,770 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,770 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,772 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,772 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,773 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,774 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,774 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,774 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,776 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,777 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,777 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:01:58,777 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,777 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,778 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,783 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,783 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,783 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,849 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:01:58,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:01:58,856 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:01:58,857 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:01:58,859 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:01:58,863 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:01:58,865 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:58,865 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:58,873 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:58,873 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:58,882 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:58,883 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:58,888 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:01:58,888 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:01:58,900 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:58,900 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:58,908 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:58,911 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:58,919 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:58,920 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:01:58,920 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:58,921 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:58,922 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:01:58,922 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:58,928 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:58,929 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:01:58,930 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:58,931 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:01:58,932 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:01:58,932 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:58,935 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:58,935 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:01:58,936 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:58,936 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:58,936 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:01:58,936 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:58,938 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:58,940 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 206.7ms
2025-12-10 22:01:58,945 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:01:58,945 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:01:58,946 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,946 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,947 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,948 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,953 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 229.3ms
2025-12-10 22:01:58,953 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 226.1ms
2025-12-10 22:01:58,958 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:01:58,963 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:58,963 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:58,963 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,963 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 227.6ms
2025-12-10 22:01:58,963 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:01:58,963 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:01:58,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,967 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 231.9ms
2025-12-10 22:01:58,967 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 231.6ms
2025-12-10 22:01:58,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:01:58,978 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:01:58,987 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:01:59,056 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:01:59,058 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:01:59,069 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:59,069 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:59,078 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:01:59,081 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:01:59,103 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:59,103 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:01:59,103 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:59,103 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:01:59,103 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:01:59,106 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:01:59,115 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:59,117 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:01:59,117 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 153.7ms
2025-12-10 22:01:59,117 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 172.6ms
2025-12-10 22:02:17,524 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:02:17,524 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,524 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,530 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,531 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,536 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,537 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,537 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:02:17,557 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,564 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 41.7ms
2025-12-10 22:02:17,569 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,569 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,569 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,581 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,587 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,587 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,587 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,587 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,587 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,617 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:02:17,617 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:02:17,617 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:02:17,617 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:02:17,627 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 54.5ms
2025-12-10 22:02:17,627 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 58.3ms
2025-12-10 22:02:17,633 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,633 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,634 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,636 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,636 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,638 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,654 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,654 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,654 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,654 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,654 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,654 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,687 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 61.3ms
2025-12-10 22:02:17,697 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 60.3ms
2025-12-10 22:02:17,698 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,698 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,707 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,707 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,707 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,707 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,707 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,713 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,713 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,714 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,714 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,714 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,714 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,717 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:17,717 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:17,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,731 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:17,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:17,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,748 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,757 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,757 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,757 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:02:17,757 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:17,757 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:17,757 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:17,810 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:02:17,836 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:02:17,836 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:02:17,837 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:02:17,837 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:02:17,837 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:02:17,837 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:02:17,837 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:02:17,851 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:02:17,851 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:02:17,851 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:17,857 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:02:17,857 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:02:17,863 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:02:17,864 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:02:17,870 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:02:17,870 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:02:17,891 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:02:17,915 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:02:17,927 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:02:17,933 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:02:17,953 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:02:17,953 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:02:17,955 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:17,960 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:02:17,967 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:02:17,968 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:02:17,970 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:17,973 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 272.6ms
2025-12-10 22:02:17,986 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:02:17,987 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:02:17,987 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:17,989 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:02:18,001 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:02:18,003 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:18,005 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:02:18,005 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:02:18,005 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:18,007 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:18,011 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:18,012 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:18,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:18,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:18,017 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:18,025 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:02:18,027 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 311.5ms
2025-12-10 22:02:18,033 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:18,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:18,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:18,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:18,038 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:02:18,038 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:02:18,041 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:02:18,041 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:02:18,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:18,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:18,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:18,048 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 339.6ms
2025-12-10 22:02:18,049 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 340.8ms
2025-12-10 22:02:18,050 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 345.3ms
2025-12-10 22:02:18,050 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 335.4ms
2025-12-10 22:02:18,065 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:18,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:18,071 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:18,071 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:18,071 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:18,078 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:18,078 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:18,079 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:02:18,121 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:02:18,121 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:02:18,128 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:02:18,128 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:02:18,131 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:02:18,131 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:02:18,137 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:18,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:02:18,137 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:02:18,146 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:02:18,146 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 137.6ms
2025-12-10 22:02:18,147 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:02:18,147 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:02:18,147 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:02:18,147 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:02:18,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 118.7ms
2025-12-10 22:02:56,315 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 22:02:56,316 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:56,316 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:56,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:56,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:56,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:56,323 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:56,323 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:56,323 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:56,328 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:56,328 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:56,328 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 22:02:56,337 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 22:02:56,337 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 3DC35436-5316-436A-B5BC-E348DC7DF3A2 (admin_tech)
2025-12-10 22:02:56,347 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 22:02:56,347 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 32.7ms
2025-12-10 22:02:56,389 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:02:56,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:02:56,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:02:56,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:56,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:56,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:56,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:02:56,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:02:56,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:02:56,404 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:02:56,404 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:02:56,404 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:02:56,404 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 22:02:56,404 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 22:02:56,408 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 22:02:56,408 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 21.1ms
2025-12-10 22:03:06,200 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:03:06,202 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,202 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:06,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:06,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,203 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:06,206 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:03:06,207 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,208 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:06,208 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:06,208 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,208 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:06,219 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:06,219 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,220 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:06,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:06,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,222 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:06,229 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:03:06,232 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,232 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-12-10 22:03:06,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:03:06,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,232 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:03:06,234 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:06,234 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:06,234 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 22:03:06,236 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:06,236 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:06,236 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:03:06,236 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 22:03:06,236 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 22:03:06,238 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:03:06,239 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,240 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': acme.app.local:5173
2025-12-10 22:03:06,240 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:03:06,240 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,240 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:03:06,243 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:03:06,244 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 43.6ms
2025-12-10 22:03:06,250 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:03:06,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:03:06,255 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 22:03:06,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-12-10 22:03:06,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-12-10 22:03:06,257 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 52.6ms
2025-12-10 22:03:06,265 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=c090bcb2-1175-407b-8d9b-60709aaa7dfe
2025-12-10 22:03:06,265 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC
2025-12-10 22:03:06,265 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=c090bcb2-1175-407b-8d9b-60709aaa7dfe, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC, path=/api/v1/auth/refresh/
2025-12-10 22:03:06,268 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', Código='ACME001', ID=c090bcb2-1175-407b-8d9b-60709aaa7dfe
2025-12-10 22:03:06,268 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC
2025-12-10 22:03:06,268 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=c090bcb2-1175-407b-8d9b-60709aaa7dfe, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_acme, servidor=CARLOSPC, path=/api/v1/clientes/branding
2025-12-10 22:03:06,269 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=acme
2025-12-10 22:03:06,269 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=acme
2025-12-10 22:03:06,270 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:03:06,270 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 41.0ms
2025-12-10 22:03:06,276 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=acme
2025-12-10 22:03:06,276 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 38.7ms
2025-12-10 22:03:06,286 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:03:06,286 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,286 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': innova.app.local:5173
2025-12-10 22:03:06,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:03:06,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:03:06,290 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:03:06,292 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,292 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-12-10 22:03:06,292 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:03:06,292 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,292 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:03:06,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:03:06,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:03:06,293 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 89ccc8cf-4bce-4c2f-b834-25de204b9cf6
2025-12-10 22:03:06,293 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:06,293 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 22:03:06,296 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:03:06,298 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,300 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': global.app.local:5173
2025-12-10 22:03:06,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:03:06,301 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:03:06,306 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:03:06,307 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 16.2ms
2025-12-10 22:03:06,308 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:03:06,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,309 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:03:06,315 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:03:06,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:03:06,321 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', Código='INNOVA002', ID=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35
2025-12-10 22:03:06,321 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC
2025-12-10 22:03:06,321 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC, path=/api/v1/auth/refresh/
2025-12-10 22:03:06,322 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:03:06,322 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 39.2ms
2025-12-10 22:03:06,322 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', Código='GLOBAL004', ID=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b
2025-12-10 22:03:06,322 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:06,322 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 22:03:06,327 - app.modules.auth.application.services.auth_service - WARNING - [REFRESH] No se proporcionó refresh token. Cliente: web
2025-12-10 22:03:06,328 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 31.1ms
2025-12-10 22:03:06,332 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:03:06,333 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,333 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': innova.app.local:5173
2025-12-10 22:03:06,333 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:03:06,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:03:06,336 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': platform.app.local:5173
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-12-10 22:03:06,340 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 89ccc8cf-4bce-4c2f-b834-25de204b9cf6
2025-12-10 22:03:06,340 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:06,340 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=89ccc8cf-4bce-4c2f-b834-25de204b9cf6, tipo_instalacion=cloud, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:03:06,341 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=platform
2025-12-10 22:03:06,341 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=platform
2025-12-10 22:03:06,341 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:03:06,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:06,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': global.app.local:5173
2025-12-10 22:03:06,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:03:06,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:03:06,348 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'innova.app.local'
2025-12-10 22:03:06,348 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'innova'
2025-12-10 22:03:06,352 - app.modules.tenant.presentation.endpoints_clientes - WARNING - Subdominio no encontrado: platform
2025-12-10 22:03:06,353 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 404 16.6ms
2025-12-10 22:03:06,354 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-12-10 22:03:06,354 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:06,355 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-12-10 22:03:06,357 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='innova', Código='INNOVA002', ID=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35
2025-12-10 22:03:06,357 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC
2025-12-10 22:03:06,357 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=d6d00fdc-7b09-4feb-abf8-3eced2f5ae35, tipo_instalacion=dedicated, db_type=multi, bd=bd_cliente_innova, servidor=CARLOSPC, path=/api/v1/clientes/branding
2025-12-10 22:03:06,361 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=innova
2025-12-10 22:03:06,361 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=innova
2025-12-10 22:03:06,366 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', Código='GLOBAL004', ID=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b
2025-12-10 22:03:06,366 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:06,366 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3fb51816-0a6d-497b-b6eb-66e1f1c84a2b, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:03:06,368 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=global
2025-12-10 22:03:06,368 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=global
2025-12-10 22:03:06,368 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=innova
2025-12-10 22:03:06,368 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 38.9ms
2025-12-10 22:03:06,375 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=global
2025-12-10 22:03:06,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 34.2ms
2025-12-10 22:03:12,414 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 22:03:12,414 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,414 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,426 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,426 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,426 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 22:03:12,431 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 22:03:12,431 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,431 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,641 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 22:03:12,641 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 22:03:12,641 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,653 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 22:03:12,658 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 51ED13FD-B909-4DB9-9F34-2369D2F60842, Rotación: False
2025-12-10 22:03:12,658 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 51ED13FD-B909-4DB9-9F34-2369D2F60842
2025-12-10 22:03:12,658 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,664 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 22:03:12,664 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 248.6ms
2025-12-10 22:03:12,687 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:03:12,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,688 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,692 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 22:03:12,693 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,693 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,697 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,706 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,707 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,707 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:03:12,709 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,709 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,709 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 22:03:12,736 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,743 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 22:03:12,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,749 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 22:03:12,750 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,750 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,756 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 22:03:12,756 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,756 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 22:03:12,756 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 22:03:12,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 70.3ms
2025-12-10 22:03:12,758 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 66.5ms
2025-12-10 22:03:12,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,765 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:12,765 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:12,766 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,766 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,769 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,769 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,773 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 22:03:12,774 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,774 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,783 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,784 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,784 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 22:03:12,786 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,786 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,786 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 22:03:12,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,798 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,799 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,799 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:03:12,802 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,802 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,802 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:12,805 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,805 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,805 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:12,807 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,807 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,807 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 22:03:12,861 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,861 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,875 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 22:03:12,875 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,877 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,882 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:03:12,883 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:03:12,883 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,885 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,886 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:03:12,889 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:03:12,896 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,896 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 22:03:12,897 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 147.6ms
2025-12-10 22:03:12,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 22:03:12,900 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:12,901 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,902 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,907 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 22:03:12,908 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:03:12,908 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 134.4ms
2025-12-10 22:03:12,909 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:03:12,910 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 144.7ms
2025-12-10 22:03:12,910 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 149.4ms
2025-12-10 22:03:12,910 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 146.9ms
2025-12-10 22:03:12,915 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:12,916 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,919 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:12,919 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:12,920 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:12,921 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,921 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,925 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,925 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,931 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 22:03:12,932 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 22:03:12,932 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 22:03:12,934 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 187.1ms
2025-12-10 22:03:12,938 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 22:03:12,938 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:12,938 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:12,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,941 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,949 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,950 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,950 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 22:03:12,973 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,973 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,973 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:12,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:12,975 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:12,975 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:12,976 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,976 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,976 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:12,977 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,977 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,977 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:12,979 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,979 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,981 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:12,989 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:12,989 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:12,989 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 22:03:13,026 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:13,039 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 22:03:13,039 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:13,058 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,059 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 22:03:13,060 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 160.0ms
2025-12-10 22:03:13,061 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:03:13,065 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:03:13,070 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:13,072 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 152.2ms
2025-12-10 22:03:13,077 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,077 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,077 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 163.9ms
2025-12-10 22:03:13,079 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,079 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,082 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,082 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,082 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,083 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,083 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,086 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:03:13,087 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:03:13,087 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,087 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:03:13,087 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:03:13,090 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:13,090 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,090 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,093 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 173.7ms
2025-12-10 22:03:13,093 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 174.5ms
2025-12-10 22:03:13,096 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,096 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,098 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,098 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,100 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,100 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,101 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,114 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:03:13,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,116 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,117 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,123 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,123 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,123 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,127 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,129 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,131 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,133 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,133 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,133 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,138 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 22:03:13,139 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 22:03:13,139 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 22:03:13,141 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 203.6ms
2025-12-10 22:03:13,141 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,141 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,141 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,144 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,146 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,146 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,150 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,151 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,153 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,205 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,205 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,205 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,228 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:03:13,232 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:03:13,234 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:03:13,241 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:03:13,248 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,248 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,252 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,252 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,259 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:03:13,260 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,260 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,273 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,273 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,278 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,278 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:03:13,278 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,283 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,283 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:03:13,283 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,287 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:03:13,287 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,287 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,292 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,292 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:03:13,293 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,293 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,293 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:03:13,293 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,297 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,297 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:03:13,297 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,302 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,303 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,303 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,303 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,308 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 231.0ms
2025-12-10 22:03:13,308 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 231.7ms
2025-12-10 22:03:13,311 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,312 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,313 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,314 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,315 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,315 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,315 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,315 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,315 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,316 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,316 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,316 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,319 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 229.2ms
2025-12-10 22:03:13,319 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 222.1ms
2025-12-10 22:03:13,321 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:03:13,324 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,324 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,325 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,325 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:03:13,325 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,326 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,326 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,328 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,328 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,328 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,328 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,328 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,328 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 233.2ms
2025-12-10 22:03:13,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,343 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:03:13,348 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 197.7ms
2025-12-10 22:03:13,350 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,350 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,351 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,352 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,353 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,353 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,357 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,357 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,357 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,357 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,357 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,357 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,397 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:03:13,404 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:03:13,418 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,418 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,421 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,421 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,430 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 105.6ms
2025-12-10 22:03:13,431 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,431 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,435 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,435 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,436 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,438 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,438 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,438 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,438 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,438 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,443 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,443 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:03:13,443 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,444 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 120.0ms
2025-12-10 22:03:13,444 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,444 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:03:13,444 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,449 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,455 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,456 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,467 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,468 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:03:13,468 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,468 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,469 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 157.6ms
2025-12-10 22:03:13,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 157.6ms
2025-12-10 22:03:13,470 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,470 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,473 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,474 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,475 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,475 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,478 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,480 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,480 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,484 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,484 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,485 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:03:13,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,515 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,528 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,528 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,528 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,531 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,531 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,531 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,551 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:03:13,559 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:03:13,571 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:03:13,571 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:03:13,576 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,576 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,586 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,586 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,602 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,602 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,610 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:03:13,610 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:03:13,615 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,615 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:03:13,615 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,618 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,618 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:03:13,618 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,619 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:03:13,621 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:03:13,626 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,626 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:03:13,627 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,627 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:03:13,628 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:03:13,628 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,631 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,631 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,638 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,638 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,644 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 210.1ms
2025-12-10 22:03:13,646 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,648 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 214.2ms
2025-12-10 22:03:13,648 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,648 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,648 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,655 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,656 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:03:13,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:03:13,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,658 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 210.8ms
2025-12-10 22:03:13,658 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,661 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,661 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:03:13,661 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,662 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:03:13,662 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,663 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 228.4ms
2025-12-10 22:03:13,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,669 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:03:13,669 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:03:13,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:03:13,674 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:03:13,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 197.0ms
2025-12-10 22:03:13,678 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,678 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,679 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,680 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:03:13,680 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:03:13,680 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:03:13,680 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:03:13,682 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 203.8ms
2025-12-10 22:03:13,709 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:03:13,709 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:03:13,711 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,711 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,717 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:03:13,717 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:03:13,726 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,726 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:03:13,727 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,728 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:03:13,728 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:03:13,728 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:03:13,732 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:03:13,733 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:03:13,734 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 84.9ms
2025-12-10 22:03:13,734 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 79.0ms
2025-12-10 22:04:05,833 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 22:04:05,834 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:05,834 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:05,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:05,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:05,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:05,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:05,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:05,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:05,845 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:05,845 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:05,846 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 22:04:05,856 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 22:04:05,856 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 3DC35436-5316-436A-B5BC-E348DC7DF3A2 (admin_tech)
2025-12-10 22:04:05,863 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 22:04:05,863 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 32.4ms
2025-12-10 22:04:05,903 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:04:05,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:05,904 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:05,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:05,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:05,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:05,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:05,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:05,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:05,918 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:05,919 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:05,919 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:04:05,921 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 22:04:05,921 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 22:04:05,929 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 22:04:05,930 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 27.2ms
2025-12-10 22:04:12,756 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 22:04:12,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:12,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:12,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:12,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:12,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:12,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:12,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:12,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:12,766 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:12,766 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:12,767 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 22:04:12,769 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 22:04:12,769 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='user_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:12,769 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:12,988 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1C6DA055-9333-49A1-A726-1A358368CC55: level=1, super_admin=False, type=user
2025-12-10 22:04:12,988 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='user_tech', usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=1, user_type=user
2025-12-10 22:04:12,988 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:12,998 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 1C6DA055-9333-49A1-A726-1A358368CC55: level=1, super_admin=False, type=user
2025-12-10 22:04:13,007 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55, Tipo: web, Token ID: DB8B1F5C-798D-428D-95E4-9E3951D80CC8, Rotación: False
2025-12-10 22:04:13,008 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: DB8B1F5C-798D-428D-95E4-9E3951D80CC8
2025-12-10 22:04:13,008 - app.modules.auth.presentation.endpoints - INFO - Usuario user_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:13,014 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, exito=True
2025-12-10 22:04:13,015 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 258.2ms
2025-12-10 22:04:13,039 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 22:04:13,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:13,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:13,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:13,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:13,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:13,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:13,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:13,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:13,053 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:13,053 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:13,053 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 22:04:13,073 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:13,076 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 22:04:13,076 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 403 38.2ms
2025-12-10 22:04:13,081 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Usuario/permisos/
2025-12-10 22:04:13,082 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Usuario/permisos/ 200 1.1ms
2025-12-10 22:04:13,082 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Supervisor/permisos/
2025-12-10 22:04:13,084 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Supervisor/permisos/ 200 1.3ms
2025-12-10 22:04:13,085 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Usuario/permisos/
2025-12-10 22:04:13,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:13,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:13,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:13,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:13,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:13,089 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Supervisor/permisos/
2025-12-10 22:04:13,089 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:13,090 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:13,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:13,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:13,090 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:13,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:13,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:13,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:13,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:13,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:13,096 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:13,102 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:13,102 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:13,102 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Usuario/permisos/
2025-12-10 22:04:13,104 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:13,105 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:13,105 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Supervisor/permisos/
2025-12-10 22:04:13,127 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:13,128 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:13,132 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 22:04:13,132 - app.api.deps - WARNING - Acceso denegado para usuario 'user_tech'. Roles: ['Usuario', 'Supervisor']. Nivel: 1. Requerido: 4
2025-12-10 22:04:13,133 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Usuario/permisos/ 403 48.2ms
2025-12-10 22:04:13,133 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Supervisor/permisos/ 403 45.2ms
2025-12-10 22:04:14,097 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 22:04:14,099 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 22:04:14,099 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 1.1ms
2025-12-10 22:04:14,099 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 0.8ms
2025-12-10 22:04:14,102 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 22:04:14,102 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:14,103 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:14,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:14,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:14,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:14,109 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:14,110 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:14,110 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:14,115 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:14,115 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:14,115 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 22:04:14,135 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 22:04:14,135 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:14,154 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:14,155 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 22:04:14,155 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:14,168 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 22:04:14,168 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 22:04:14,168 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 22:04:14,169 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 22:04:14,175 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 22:04:14,175 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú a6942632-d39b-4660-8207-0aedfb42d17d INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,175 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 59753cb5-5480-4034-baed-117f8531be02 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,175 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú edf3437b-83ef-427c-97e0-299415d50a38 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,175 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,177 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 4 menús incluidos, 25 menús excluidos de 29 menús disponibles
2025-12-10 22:04:14,177 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 2 secciones
2025-12-10 22:04:14,177 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 22:04:14,177 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 22:04:14,178 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 75.8ms
2025-12-10 22:04:14,179 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 22:04:14,180 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:14,180 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:14,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:14,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:14,180 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:14,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:14,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:14,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:14,189 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:14,189 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:14,189 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/
2025-12-10 22:04:14,208 - app.modules.modulos.presentation.endpoints_menus - INFO - Solicitud GET /menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ recibida
2025-12-10 22:04:14,208 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menú para usuario 1c6da055-9333-49a1-a726-1a358368cc55 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:14,223 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Ejecutando query de permisos para usuario 1c6da055-9333-49a1-a726-1a358368cc55 en cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:14,223 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL generada con 29 menu_ids en IN clause
2025-12-10 22:04:14,223 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:14,226 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query RAW SQL retornó 4 registros
2025-12-10 22:04:14,226 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Menu IDs con permisos: ['A6942632-D39B-4660-8207-0AEDFB42D17D', '59753CB5-5480-4034-BAED-117F8531BE02', '1BC07807-3CD2-42F4-8EF0-20DC48B2C329', 'EDF3437B-83EF-427C-97E0-299415D50A38']
2025-12-10 22:04:14,227 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Query de permisos retornó 4 registros
2025-12-10 22:04:14,227 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Permisos procesados: 4 menús con permisos de 29 menús disponibles
2025-12-10 22:04:14,232 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Usuario 1c6da055-9333-49a1-a726-1a358368cc55 tiene 2 roles activos: [UUID('c7fe892a-d8a4-4d46-9600-d800f1347c6e'), UUID('dc3fa438-f6fa-493c-8907-180624379cd3')]
2025-12-10 22:04:14,233 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú a6942632-d39b-4660-8207-0aedfb42d17d INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,233 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 59753cb5-5480-4034-baed-117f8531be02 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,233 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú edf3437b-83ef-427c-97e0-299415d50a38 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,233 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] ✅ Menú 1bc07807-3cd2-42f4-8ef0-20dc48b2c329 INCLUIDO: tiene permiso puede_ver=True
2025-12-10 22:04:14,233 - app.modules.modulos.application.services.modulo_menu_service - INFO - [MENU_USUARIO] Resumen: 4 menús incluidos, 25 menús excluidos de 29 menús disponibles
2025-12-10 22:04:14,233 - app.modules.modulos.application.helpers.menu_transformer - INFO - Transformación completada: 2 módulos, 2 secciones
2025-12-10 22:04:14,233 - app.modules.modulos.application.services.modulo_menu_service - INFO - Menú obtenido: 2 módulos con permisos
2025-12-10 22:04:14,233 - app.modules.modulos.presentation.endpoints_menus - INFO - Menú del usuario 1c6da055-9333-49a1-a726-1a358368cc55 obtenido exitosamente
2025-12-10 22:04:14,235 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/usuario/1c6da055-9333-49a1-a726-1a358368cc55/ 200 55.7ms
2025-12-10 22:04:22,275 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 22:04:22,275 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:22,275 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:22,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:22,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:22,275 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:22,279 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:22,279 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:22,279 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:22,283 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:22,283 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:22,283 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 22:04:22,291 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 1C6DA055-9333-49A1-A726-1A358368CC55
2025-12-10 22:04:22,291 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 1C6DA055-9333-49A1-A726-1A358368CC55 (user_tech)
2025-12-10 22:04:22,296 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=1C6DA055-9333-49A1-A726-1A358368CC55, exito=True
2025-12-10 22:04:22,298 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 22.7ms
2025-12-10 22:04:22,311 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 22:04:22,311 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:22,311 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:22,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:22,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:22,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:22,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:22,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:22,322 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:22,327 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:22,328 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:22,328 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 22:04:22,329 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 22:04:22,329 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 22:04:22,332 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 22:04:22,332 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 17.8ms
2025-12-10 22:04:29,243 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 22:04:29,243 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,243 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,243 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,254 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,254 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,254 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 22:04:29,257 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 22:04:29,257 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,257 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,471 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 22:04:29,471 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 22:04:29,471 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:29,471 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 22:04:29,479 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: D91D1E6C-50D3-4542-A1E8-03C9321E8D7E, Rotación: False
2025-12-10 22:04:29,480 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: D91D1E6C-50D3-4542-A1E8-03C9321E8D7E
2025-12-10 22:04:29,480 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,482 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 22:04:29,487 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 242.7ms
2025-12-10 22:04:29,503 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:04:29,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,504 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,506 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 22:04:29,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,511 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,513 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,520 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,520 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,520 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:04:29,523 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,523 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,523 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 22:04:29,547 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,551 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:29,555 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 22:04:29,555 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,555 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 22:04:29,556 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 22:04:29,556 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 49.8ms
2025-12-10 22:04:29,558 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 54.6ms
2025-12-10 22:04:29,560 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:04:29,561 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,561 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,562 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 22:04:29,563 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,563 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,563 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,564 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,564 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,566 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,566 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,568 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,571 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,576 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,576 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,576 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,586 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,587 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,587 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:04:29,588 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,588 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,588 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,588 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,588 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,588 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 22:04:29,591 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,591 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,591 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,631 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,637 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:04:29,640 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:29,641 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:04:29,648 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 22:04:29,650 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 87.6ms
2025-12-10 22:04:29,650 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 90.7ms
2025-12-10 22:04:29,652 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:04:29,652 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:04:29,653 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 86.4ms
2025-12-10 22:04:29,653 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 87.0ms
2025-12-10 22:04:29,653 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,653 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,653 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,662 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,662 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,675 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,682 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,682 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,682 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,682 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,687 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,687 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,689 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,690 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,690 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,690 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,690 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,690 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,733 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:04:29,738 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:04:29,748 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:04:29,748 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 96.8ms
2025-12-10 22:04:29,754 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:04:29,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 99.6ms
2025-12-10 22:04:29,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 95.9ms
2025-12-10 22:04:29,759 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 96.7ms
2025-12-10 22:04:29,761 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,761 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,762 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,762 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,764 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,764 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,767 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,767 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,769 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,769 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,769 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,770 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,771 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,771 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,774 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,774 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,775 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,776 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,776 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,800 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,800 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,800 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,802 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,802 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,802 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,804 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,804 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,804 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,806 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,806 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,806 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,807 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,807 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,807 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,808 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,808 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,809 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,886 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:04:29,888 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:04:29,889 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:04:29,892 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:04:29,899 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:29,899 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:29,905 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:29,905 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:29,907 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 149.4ms
2025-12-10 22:04:29,912 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:29,912 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:29,917 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 156.5ms
2025-12-10 22:04:29,918 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:29,918 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:29,923 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,924 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,926 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,929 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,933 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:29,933 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:04:29,933 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:29,934 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:29,934 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:04:29,934 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:29,935 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:29,935 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:04:29,935 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:29,937 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:29,937 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:04:29,937 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:29,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,940 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,949 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,949 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,950 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,952 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:29,953 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:29,953 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,953 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:04:29,955 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 187.4ms
2025-12-10 22:04:29,955 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:29,956 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:04:29,957 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:04:29,958 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 185.6ms
2025-12-10 22:04:29,959 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 191.9ms
2025-12-10 22:04:29,959 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 187.3ms
2025-12-10 22:04:29,959 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,962 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,962 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,967 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:29,968 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,969 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,969 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,971 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:29,972 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,972 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,972 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,974 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:29,974 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:29,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,974 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,988 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,989 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:29,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:29,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:29,994 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,001 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,001 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,001 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,006 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,006 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,006 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,006 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,006 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,007 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:30,009 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,009 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,010 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:30,022 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:04:30,028 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:04:30,050 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,050 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,054 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,054 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,078 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,078 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:04:30,078 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,084 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,085 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:04:30,085 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,086 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:04:30,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:04:30,091 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:04:30,093 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:04:30,099 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:30,100 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:30,105 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,107 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,108 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,109 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,113 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 190.4ms
2025-12-10 22:04:30,114 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 186.4ms
2025-12-10 22:04:30,117 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:30,117 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:30,122 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,122 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,128 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:30,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:30,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:30,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:30,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:30,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:30,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,133 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:30,138 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:04:30,138 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,139 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,139 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:04:30,139 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,143 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:30,143 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:04:30,143 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,144 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,144 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:04:30,144 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,153 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,154 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 183.3ms
2025-12-10 22:04:30,155 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,158 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 190.0ms
2025-12-10 22:04:30,159 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,160 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:30,160 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:30,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,164 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:04:30,165 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,165 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,165 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:30,166 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,167 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:30,168 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:30,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,168 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,168 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,168 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:04:30,168 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 202.4ms
2025-12-10 22:04:30,173 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,174 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 214.2ms
2025-12-10 22:04:30,175 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:30,178 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:30,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,182 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,183 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:30,183 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:30,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,183 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,192 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,193 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,204 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:30,204 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:30,204 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:30,206 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,207 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,207 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,209 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,209 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,209 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,215 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,215 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,215 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,218 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:30,219 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:30,219 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:04:30,241 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:04:30,252 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:04:30,262 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:30,262 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:30,277 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:04:30,282 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:04:30,282 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:04:30,287 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:30,287 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:04:30,287 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,292 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:04:30,295 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:04:30,300 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:04:30,300 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:04:30,300 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,302 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:04:30,302 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,302 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,309 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:04:30,310 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,310 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,313 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 185.3ms
2025-12-10 22:04:30,318 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,318 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,322 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:04:30,322 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,325 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:04:30,325 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,326 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 197.4ms
2025-12-10 22:04:30,327 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:04:30,327 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:04:30,333 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,334 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:04:30,334 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,335 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,335 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:04:30,335 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:04:30,339 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:04:30,339 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:04:30,341 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,342 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 175.9ms
2025-12-10 22:04:30,344 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,345 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 185.7ms
2025-12-10 22:04:30,347 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,348 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 171.9ms
2025-12-10 22:04:30,350 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:04:30,351 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 169.2ms
2025-12-10 22:04:41,403 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-10 22:04:41,403 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:41,403 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:41,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:41,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:41,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:41,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:41,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:41,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:41,419 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:41,419 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:41,420 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/areas/
2025-12-10 22:04:41,439 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:41,442 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-12-10 22:04:41,442 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: skip=0, limit=10, search='None'
2025-12-10 22:04:41,443 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:41,449 - app.infrastructure.database.queries_async - ERROR - Error en execute_query async (string): (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,449 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] Error en sesión async: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection_async.py", line 326, in get_db_connection
    yield session
  File "D:\base_multi_tenant_fastapi\app\core\tenant\routing.py", line 877, in get_connection_for_tenant
    yield session
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,453 - app.core.application.base_service - ERROR - DatabaseError en obtener_areas_paginadas: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\area_service.py", line 218, in obtener_areas_paginadas
    count_result_list = await execute_query(COUNT_AREAS_QUERY, where_params)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,457 - app.modules.menus.presentation.endpoints_areas - ERROR - Error de servicio al obtener áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,457 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 54.4ms
2025-12-10 22:04:41,460 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-12-10 22:04:41,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:41,460 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:41,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:41,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:41,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:41,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:41,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:41,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:41,477 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:41,477 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:41,477 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/areas/
2025-12-10 22:04:41,496 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:41,500 - app.modules.menus.presentation.endpoints_areas - INFO - Solicitud GET /areas/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: skip=0, limit=10, Búsqueda: 'None'
2025-12-10 22:04:41,500 - app.modules.menus.application.services.area_service - INFO - Obteniendo áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: skip=0, limit=10, search='None'
2025-12-10 22:04:41,500 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:41,501 - app.infrastructure.database.queries_async - ERROR - Error en execute_query async (string): (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,501 - app.infrastructure.database.connection_async - ERROR - [ASYNC_CONNECTION] Error en sesión async: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection_async.py", line 326, in get_db_connection
    yield session
  File "D:\base_multi_tenant_fastapi\app\core\tenant\routing.py", line 877, in get_connection_for_tenant
    yield session
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,508 - app.core.application.base_service - ERROR - DatabaseError en obtener_areas_paginadas: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pyodbc.ProgrammingError: ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 185, in execute_query
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 230, in execute
    self._adapt_connection._handle_exception(error)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 368, in _handle_exception
    raise error.with_traceback(exc_info[2])
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 228, in execute
    return self.await_(self._execute_async(operation, parameters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\sqlalchemy\connectors\asyncio.py", line 251, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 132, in execute
    await self._run_operation(self._impl.execute, sql, *params)
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\aioodbc\cursor.py", line 30, in _run_operation
    result = await self._conn._execute(func, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Carlos\AppData\Local\Programs\Python\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\core\application\base_service.py", line 52, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\area_service.py", line 218, in obtener_areas_paginadas
    count_result_list = await execute_query(COUNT_AREAS_QUERY, where_params)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries_async.py", line 192, in execute_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,513 - app.modules.menus.presentation.endpoints_areas - ERROR - Error de servicio al obtener áreas paginadas para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: Error en la consulta: (pyodbc.ProgrammingError) ('42S02', "[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'area_menu'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
[SQL: 
    SELECT
        COUNT(*) as total_count
    FROM
        area_menu 
    WHERE
        (cliente_id IS NULL OR cliente_id = ?)
        AND (? IS NULL OR LOWER(nombre) LIKE LOWER(?) OR LOWER(descripcion) LIKE LOWER(?));
]
[parameters: (UUID('3d34486f-05a9-4acb-8590-f76cde7a748a'), None, None, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-12-10 22:04:41,514 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 53.0ms
2025-12-10 22:04:42,932 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 22:04:42,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:42,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:42,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:42,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:42,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:42,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:42,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:42,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:42,944 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:42,945 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:42,945 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 22:04:42,960 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:42,965 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:04:42,966 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:04:42,966 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 22:04:42,966 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:42,969 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 22:04:42,969 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:42,975 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 22:04:42,975 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 22:04:42,975 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 22:04:42,976 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 43.7ms
2025-12-10 22:04:42,978 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-12-10 22:04:42,979 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:42,979 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:42,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:42,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:42,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:42,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:42,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:42,984 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:42,988 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:42,988 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:42,988 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/
2025-12-10 22:04:43,007 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:43,011 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:04:43,011 - app.modules.rbac.application.services.rol_service - INFO - Obteniendo roles paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:04:43,011 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Iniciando consulta para cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, page=1, limit=10, search='None'
2025-12-10 22:04:43,011 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:43,014 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Total de roles encontrados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 1
2025-12-10 22:04:43,014 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:43,017 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Obtenidos 1 roles para la página 1 de 1 totales
2025-12-10 22:04:43,017 - app.modules.rbac.application.services.rol_service - INFO - [ROLES-PAGINADOS] Consulta completada exitosamente - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total: 1, Página: 1/1, Resultados: 1
2025-12-10 22:04:43,017 - app.modules.rbac.presentation.endpoints - INFO - Respuesta exitosa para GET /roles/ - Cliente: 3d34486f-05a9-4acb-8590-f76cde7a748a, Total roles: 1
2025-12-10 22:04:43,020 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 200 41.5ms
2025-12-10 22:04:44,329 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 22:04:44,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:44,330 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:44,330 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,330 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,330 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,331 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 22:04:44,332 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:44,332 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:44,333 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,333 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,333 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,347 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:44,347 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:44,347 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 22:04:44,348 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:44,348 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:44,349 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 22:04:44,372 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,373 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,376 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 22:04:44,376 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,378 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:04:44,378 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:04:44,378 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,382 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,382 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:44,385 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 22:04:44,385 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 53.7ms
2025-12-10 22:04:44,386 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 22:04:44,388 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:44,388 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:44,388 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,388 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,391 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 22:04:44,391 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 22:04:44,391 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 22:04:44,394 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 65.2ms
2025-12-10 22:04:44,394 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,394 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,394 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,397 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 22:04:44,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:04:44,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:04:44,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,403 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:44,403 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:44,403 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 22:04:44,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:04:44,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:04:44,405 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:04:44,412 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:44,413 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:04:44,413 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 22:04:44,430 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,436 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 22:04:44,436 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,439 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,441 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:04:44,441 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 22:04:44,442 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 54.8ms
2025-12-10 22:04:44,443 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 22:04:44,443 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 22:04:44,443 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,449 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 22:04:44,453 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 22:04:44,453 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 22:04:44,453 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 22:04:44,456 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 57.5ms
2025-12-10 22:50:47,780 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:47,788 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 8.2ms
2025-12-10 22:50:47,795 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:47,798 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 2.6ms
2025-12-10 22:50:47,799 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:47,803 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:47,804 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:47,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:47,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:47,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:47,869 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:47,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:47,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:47,876 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:47,891 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 22:50:47,893 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:47,894 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:47,901 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 22:50:47,903 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 401 104.1ms
2025-12-10 22:50:47,906 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:47,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:47,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:47,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:47,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:47,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:47,911 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-10 22:50:47,913 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.3ms
2025-12-10 22:50:47,916 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-10 22:50:47,917 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:47,918 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:47,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:47,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:47,918 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:47,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:47,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:47,924 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:47,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:47,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:47,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:47,934 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:47,935 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:47,935 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:47,937 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-10 22:50:47,937 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 401 31.1ms
2025-12-10 22:50:47,940 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:47,942 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:47,942 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-10 22:50:47,958 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-10 22:50:47,968 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-10 22:50:47,976 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 22:50:48,001 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 9517BAE8-CE95-4ACA-A29C-9FC882C179CF, Rotación: True
2025-12-10 22:50:48,212 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 22:50:48,213 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-10 22:50:48,213 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 9517BAE8-CE95-4ACA-A29C-9FC882C179CF
2025-12-10 22:50:48,215 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-10 22:50:48,238 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 22:50:48,239 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 323.3ms
2025-12-10 22:50:48,248 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:48,249 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,249 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,249 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,250 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,264 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,266 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,266 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:48,314 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,331 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 83.9ms
2025-12-10 22:50:48,334 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:48,336 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,336 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,340 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,340 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,341 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.9ms
2025-12-10 22:50:48,342 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 1.4ms
2025-12-10 22:50:48,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,358 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,358 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,359 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:48,398 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,414 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 78.0ms
2025-12-10 22:50:48,416 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,418 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,418 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,418 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,418 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,418 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,419 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,423 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,423 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,450 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,450 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,450 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,453 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,453 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,453 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,544 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:50:48,572 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:50:48,582 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:50:48,583 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 166.2ms
2025-12-10 22:50:48,586 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:50:48,588 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,589 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,592 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 175.6ms
2025-12-10 22:50:48,593 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,595 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.3ms
2025-12-10 22:50:48,602 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,603 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,604 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,608 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,609 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,613 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,615 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.4ms
2025-12-10 22:50:48,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,623 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,627 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,653 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,653 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,653 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,666 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,668 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,668 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,671 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,671 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,671 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,679 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,680 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,681 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,777 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:50:48,801 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:50:48,806 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:50:48,812 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 224.6ms
2025-12-10 22:50:48,825 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:50:48,828 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 224.2ms
2025-12-10 22:50:48,829 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 225.6ms
2025-12-10 22:50:48,835 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 210.2ms
2025-12-10 22:50:48,837 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,838 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,838 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,843 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,846 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,850 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,851 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 8.5ms
2025-12-10 22:50:48,852 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 5.4ms
2025-12-10 22:50:48,852 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,853 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,853 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,853 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,853 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,860 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 7.6ms
2025-12-10 22:50:48,860 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 7.2ms
2025-12-10 22:50:48,861 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,862 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,868 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,868 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 6.5ms
2025-12-10 22:50:48,869 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 6.0ms
2025-12-10 22:50:48,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,873 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,883 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 15.4ms
2025-12-10 22:50:48,884 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 14.9ms
2025-12-10 22:50:48,888 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,888 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,890 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,890 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,894 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:48,895 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:48,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,916 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,916 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,922 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:48,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:48,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:48,938 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,938 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,939 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,942 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,942 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,943 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:48,948 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,949 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,949 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,950 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,950 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,950 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,956 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,956 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,956 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:48,961 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:48,961 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:48,962 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,071 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:50:49,073 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:50:49,084 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:50:49,090 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:50:49,091 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 254.0ms
2025-12-10 22:50:49,093 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,098 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,100 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,100 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,101 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,101 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,106 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,107 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,114 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,114 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,123 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,123 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,131 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 280.9ms
2025-12-10 22:50:49,138 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,138 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,146 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,148 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,149 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,151 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,159 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,159 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:50:49,159 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,160 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,160 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:50:49,160 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,165 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,165 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:50:49,165 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,170 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,170 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:50:49,170 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,173 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,176 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,176 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,182 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,186 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 298.2ms
2025-12-10 22:50:49,187 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,191 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 321.9ms
2025-12-10 22:50:49,192 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,196 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,201 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,204 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 334.6ms
2025-12-10 22:50:49,207 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,208 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,212 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,212 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,213 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,214 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,218 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,218 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,218 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,220 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 332.7ms
2025-12-10 22:50:49,221 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,224 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,225 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,236 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,245 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,246 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,253 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,261 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,269 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,270 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,270 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,275 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,276 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,276 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,283 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,284 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,284 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,290 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,291 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,291 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,300 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,301 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,301 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,314 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:50:49,549 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:49,549 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:49,561 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:50:49,576 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:49,576 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:50:49,578 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,592 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:50:49,593 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:49,593 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:49,618 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:50:49,619 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:50:49,620 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:49,620 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:49,627 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:49,631 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:49,631 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:50:49,631 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,633 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 539.3ms
2025-12-10 22:50:49,637 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:50:49,639 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,655 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:49,655 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:49,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,664 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,671 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:49,671 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:50:49,673 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,674 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:49,676 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,676 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,684 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 538.9ms
2025-12-10 22:50:49,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,693 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,703 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,703 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:50:49,703 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,705 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:49,705 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:50:49,705 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,708 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,710 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 513.1ms
2025-12-10 22:50:49,714 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,714 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:50:49,715 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,717 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,718 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,718 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,721 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,722 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,722 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,725 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,735 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,738 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 515.1ms
2025-12-10 22:50:49,738 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:49,741 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 533.8ms
2025-12-10 22:50:49,744 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,749 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,753 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,755 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,755 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,758 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,758 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,759 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,764 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,764 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,764 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:49,769 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,774 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 538.1ms
2025-12-10 22:50:49,784 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,786 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:49,788 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:49,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,802 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,804 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,804 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,807 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,812 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:49,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:49,825 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:49,832 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,832 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,832 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,836 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,838 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,853 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:49,853 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:49,853 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:49,878 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:50:49,898 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:50:49,904 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,904 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,938 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:50:49,953 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,954 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:50:49,954 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:49,955 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:49,955 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:49,969 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:50:49,971 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:50:49,975 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:49,976 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:49,986 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:49,989 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 349.3ms
2025-12-10 22:50:49,992 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:49,993 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:50:49,993 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:50,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:50,000 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:50,009 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:50:50,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:50,014 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:50,020 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:50,020 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:50:50,020 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:50,035 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:50,035 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:50:50,035 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:50,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:50,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:50,036 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:50,044 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:50,045 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:50,045 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:50:50,046 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:50,048 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 331.5ms
2025-12-10 22:50:50,048 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 355.6ms
2025-12-10 22:50:50,059 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:50,060 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:50,060 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:50:50,061 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:50,064 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 306.6ms
2025-12-10 22:50:50,065 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:50,068 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 324.0ms
2025-12-10 22:50:50,073 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:50,075 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 290.4ms
2025-12-10 22:50:57,504 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:57,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,536 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,538 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,538 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:50:57,592 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,609 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 105.1ms
2025-12-10 22:50:57,618 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,619 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,620 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,620 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,621 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,626 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,628 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,645 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,645 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,660 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,660 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,660 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,663 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,663 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,663 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,715 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:50:57,719 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:50:57,731 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:50:57,731 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 105.3ms
2025-12-10 22:50:57,734 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:50:57,735 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 117.2ms
2025-12-10 22:50:57,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,738 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,742 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,747 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,763 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,771 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,772 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,773 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,779 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,779 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,780 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,856 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 119.8ms
2025-12-10 22:50:57,858 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 112.1ms
2025-12-10 22:50:57,864 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,866 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,866 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,873 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,874 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,879 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,881 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,883 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,885 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,886 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,889 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,892 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,892 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,896 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,896 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,898 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:57,898 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:57,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,912 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,916 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,916 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,917 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,929 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,936 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:57,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:57,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:57,947 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,947 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,948 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,952 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,952 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,954 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,960 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,960 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,962 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,962 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,962 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,962 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:57,968 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,968 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,968 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:57,968 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:57,969 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:57,969 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:50:58,140 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:50:58,160 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:50:58,166 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:50:58,169 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:50:58,179 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:58,180 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:58,191 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:50:58,193 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:50:58,198 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:58,198 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:58,208 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:58,210 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:58,223 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:58,224 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:58,231 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:58,231 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:50:58,232 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,238 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:50:58,239 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:50:58,248 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:58,248 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:50:58,248 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,252 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:58,252 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:58,261 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:58,262 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:50:58,262 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,268 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:58,268 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:50:58,269 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,275 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:50:58,276 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:50:58,276 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,279 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:58,280 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:58,280 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:58,280 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:50:58,280 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,282 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 413.4ms
2025-12-10 22:50:58,284 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 418.6ms
2025-12-10 22:50:58,292 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:58,296 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:58,297 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:58,298 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:58,298 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:58,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:58,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:58,299 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:58,301 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:50:58,302 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:50:58,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:58,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:58,303 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:58,309 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 423.6ms
2025-12-10 22:50:58,311 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:58,315 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:58,316 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 437.8ms
2025-12-10 22:50:58,321 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:58,323 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 434.7ms
2025-12-10 22:50:58,326 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 441.1ms
2025-12-10 22:50:58,332 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:58,332 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:58,332 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:58,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:50:58,334 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:50:58,335 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:50:58,348 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:58,348 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:58,348 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:58,348 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:50:58,348 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:50:58,349 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:50:58,423 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:50:58,424 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:50:58,430 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:58,430 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:58,441 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:50:58,441 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:50:58,454 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:58,455 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:50:58,455 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,457 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:50:58,458 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:50:58,459 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:50:58,467 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:50:58,467 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:50:58,468 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 173.2ms
2025-12-10 22:50:58,470 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 173.0ms
2025-12-10 22:51:16,276 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:51:16,278 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,278 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,279 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,279 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,295 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,308 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,309 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,310 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 22:51:16,349 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,367 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 89.9ms
2025-12-10 22:51:16,374 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,375 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,376 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,380 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:16,381 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,381 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,406 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,407 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,408 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,412 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,413 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,413 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:16,455 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 22:51:16,462 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 22:51:16,475 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 22:51:16,476 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 22:51:16,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 98.1ms
2025-12-10 22:51:16,479 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 104.6ms
2025-12-10 22:51:16,483 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:16,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,486 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,488 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,490 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,491 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,491 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,502 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,525 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,525 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,525 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:16,528 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,528 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,528 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,620 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 132.7ms
2025-12-10 22:51:16,621 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.9ms
2025-12-10 22:51:16,631 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,631 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,633 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,634 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,635 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,636 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,641 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,641 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,658 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,668 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,680 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,681 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,681 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,685 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:16,686 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:16,690 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,700 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:16,701 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:16,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,742 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,752 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,753 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,754 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,758 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,761 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:16,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:16,770 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:16,805 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,808 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,810 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,814 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,815 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,815 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,821 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,821 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,821 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,828 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,830 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,831 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 22:51:16,834 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,835 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,835 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:16,842 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:16,843 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:16,844 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:17,320 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:51:17,352 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:51:17,363 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:51:17,374 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:51:17,386 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:51:17,396 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:51:17,403 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:51:17,403 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:51:17,412 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:51:17,413 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:51:17,430 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:51:17,430 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:51:17,447 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:51:17,447 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:51:17,463 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:51:17,463 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:51:17,476 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 22:51:17,477 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 22:51:17,493 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:51:17,496 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 22:51:17,496 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:17,503 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:51:17,504 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 22:51:17,506 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:17,516 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:51:17,516 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 22:51:17,518 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:17,522 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:51:17,523 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 22:51:17,524 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:17,532 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:51:17,534 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 22:51:17,534 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:17,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 22:51:17,540 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 22:51:17,541 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:17,553 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:51:17,558 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:51:17,561 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 904.0ms
2025-12-10 22:51:17,562 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:51:17,566 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 934.5ms
2025-12-10 22:51:17,568 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 882.8ms
2025-12-10 22:51:17,576 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:17,581 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:51:17,583 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:17,583 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:17,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:17,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:17,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:17,590 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:51:17,598 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:17,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 22:51:17,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 22:51:17,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:17,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:17,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:17,613 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 926.6ms
2025-12-10 22:51:17,613 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 982.9ms
2025-12-10 22:51:17,614 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 22:51:17,621 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 990.5ms
2025-12-10 22:51:17,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:17,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:17,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:17,882 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 22:51:17,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 22:51:17,921 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 22:51:17,955 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:17,956 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:17,956 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:17,982 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 22:51:17,986 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 22:51:17,995 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 22:51:18,179 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:51:18,184 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:51:18,196 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:51:18,197 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:51:18,209 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 22:51:18,209 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 22:51:18,328 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:51:18,329 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 22:51:18,329 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:18,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 22:51:18,339 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 22:51:18,340 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 22:51:18,353 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:51:18,355 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 777.7ms
2025-12-10 22:51:18,372 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 22:51:18,375 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 777.0ms
2025-12-10 23:00:50,240 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 23:00:50,241 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-12-10 23:00:50,243 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 23:00:50,244 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-12-10 23:00:50,245 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 4.0ms
2025-12-10 23:00:50,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 3.5ms
2025-12-10 23:00:50,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 3.4ms
2025-12-10 23:00:50,246 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.2ms
2025-12-10 23:00:50,253 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 23:00:50,254 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:00:50,254 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:00:50,254 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,255 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,258 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 23:00:50,258 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:00:50,259 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:00:50,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,270 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,270 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,270 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,271 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,273 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,280 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:50,283 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:50,314 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 23:00:50,315 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:00:50,315 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 23:00:50,315 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-10 23:00:50,315 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:00:50,315 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 23:00:50,354 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,354 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,359 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 23:00:50,360 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,361 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 23:00:50,361 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 23:00:50,361 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,370 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,371 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:50,371 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 23:00:50,372 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 113.5ms
2025-12-10 23:00:50,374 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 23:00:50,374 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:00:50,375 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:00:50,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,375 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,384 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 23:00:50,384 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 23:00:50,385 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 23:00:50,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,388 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 135.7ms
2025-12-10 23:00:50,391 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 23:00:50,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:00:50,392 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:00:50,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,398 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:50,398 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:00:50,399 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 23:00:50,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:50,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:50,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:50,414 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:50,415 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:00:50,415 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 23:00:50,457 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,462 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 23:00:50,463 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,470 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,470 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:50,471 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 23:00:50,471 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 97.9ms
2025-12-10 23:00:50,475 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 23:00:50,476 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 23:00:50,476 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,483 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:00:50,489 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 23:00:50,490 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 23:00:50,490 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 23:00:50,490 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 99.8ms
2025-12-10 23:00:51,256 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-12-10 23:00:51,256 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-12-10 23:00:51,258 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-12-10 23:00:51,258 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:00:51,258 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:00:51,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:51,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:51,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:51,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:51,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:51,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:51,277 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:51,278 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:00:51,280 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/logout/
2025-12-10 23:00:51,300 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 23:00:51,300 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario: 3DC35436-5316-436A-B5BC-E348DC7DF3A2 (admin_tech)
2025-12-10 23:00:51,309 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 23:00:51,309 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 51.4ms
2025-12-10 23:00:51,350 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/branding
2025-12-10 23:00:51,352 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/branding 200 2.2ms
2025-12-10 23:00:51,355 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/branding
2025-12-10 23:00:51,356 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:00:51,356 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:00:51,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:51,356 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:51,357 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:51,363 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:51,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:51,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:51,369 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:51,369 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:00:51,369 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/clientes/branding
2025-12-10 23:00:51,369 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /branding recibida para subdominio=techcorp
2025-12-10 23:00:51,369 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para subdominio=techcorp
2025-12-10 23:00:51,376 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para subdominio=techcorp
2025-12-10 23:00:51,376 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/branding 200 21.0ms
2025-12-10 23:00:57,380 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-12-10 23:00:57,382 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.8ms
2025-12-10 23:00:57,386 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 23:00:57,386 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:00:57,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:00:57,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:57,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:57,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:57,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:00:57,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:00:57,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:00:57,396 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:57,396 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:00:57,396 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 23:00:57,403 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 23:00:57,403 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:57,403 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:00:57,611 - app.modules.auth.application.services.auth_service - WARNING - [AUTH] Contraseña incorrecta para: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-10 23:00:57,621 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_failed, cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, usuario_id=None, exito=False
2025-12-10 23:00:57,622 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 401 236.4ms
2025-12-10 23:01:03,978 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-12-10 23:01:03,978 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:03,978 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:03,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:03,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:03,979 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:03,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:03,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:03,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:03,993 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:03,993 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:03,993 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/login/
2025-12-10 23:01:04,001 - app.modules.auth.presentation.endpoints - INFO - Cliente 3d34486f-05a9-4acb-8590-f76cde7a748a resuelto y validado para login.
2025-12-10 23:01:04,001 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Intento de login: username='admin_tech', cliente_id_destino=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,002 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,227 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 23:01:04,227 - app.modules.auth.application.services.auth_service - INFO - [AUTH] Login exitoso: username='admin_tech', usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, cliente_origen=3D34486F-05A9-4ACB-8590-F76CDE7A748A, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-12-10 23:01:04,228 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,236 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-10 23:01:04,244 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 5C1FB637-B028-48BE-A005-C5BB4014420D, Rotación: False
2025-12-10 23:01:04,244 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 5C1FB637-B028-48BE-A005-C5BB4014420D
2025-12-10 23:01:04,244 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_tech autenticado exitosamente (WEB) para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,252 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-10 23:01:04,253 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 275.2ms
2025-12-10 23:01:04,271 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 23:01:04,273 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 23:01:04,274 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 23:01:04,275 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 3.5ms
2025-12-10 23:01:04,276 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 3.5ms
2025-12-10 23:01:04,277 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,278 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,278 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,281 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 23:01:04,284 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,284 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,288 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/all-structured/
2025-12-10 23:01:04,289 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/all-structured/ 200 1.9ms
2025-12-10 23:01:04,291 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 23:01:04,294 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,294 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,294 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,298 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/all-structured/
2025-12-10 23:01:04,299 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,299 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,300 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,300 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,300 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,305 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,312 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,319 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,319 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,319 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 23:01:04,320 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,321 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,321 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 23:01:04,325 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,325 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,325 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 23:01:04,327 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,327 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,328 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/menus/all-structured/
2025-12-10 23:01:04,396 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,398 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,400 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,400 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,409 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 23:01:04,409 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,412 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 23:01:04,413 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 23:01:04,413 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,415 - app.modules.menus.presentation.endpoints - INFO - Solicitud recibida en GET /menus/all-structured/ por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a (Admin)
2025-12-10 23:01:04,415 - app.modules.menus.application.services.menu_service - INFO - Obteniendo estructura completa de menús para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,415 - app.modules.menus.application.services.menu_service - ERROR - Error inesperado al obtener menús admin para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: 'coroutine' object is not iterable
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_service.py", line 137, in obtener_todos_menus_estructurados_admin
    menu_tree: List[MenuItem] = build_menu_tree(resultado_sp)
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\menus\application\services\menu_helper.py", line 29, in build_menu_tree
    for item_data in menu_items_from_db:
                     ^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-12-10 23:01:04,416 - app.modules.menus.presentation.endpoints - ERROR - Error de servicio en GET /menus/all-structured/: Error interno al procesar estructura de menús
2025-12-10 23:01:04,418 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/all-structured/ 500 120.5ms
2025-12-10 23:01:04,421 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,423 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 23:01:04,423 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 131.3ms
2025-12-10 23:01:04,425 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 144.5ms
2025-12-10 23:01:04,426 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/Administrador/permisos/
2025-12-10 23:01:04,428 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 23:01:04,429 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/Administrador/permisos/ 200 2.9ms
2025-12-10 23:01:04,429 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,429 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,430 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,433 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,434 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,434 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-12-10 23:01:04,436 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,436 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,438 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.6ms
2025-12-10 23:01:04,438 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.5ms
2025-12-10 23:01:04,439 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,440 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/Administrador/permisos/
2025-12-10 23:01:04,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,441 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,447 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,450 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,450 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,452 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,452 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,458 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,461 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,468 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,469 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,470 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 23:01:04,470 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 23:01:04,471 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 23:01:04,472 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 198.9ms
2025-12-10 23:01:04,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,479 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,479 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,480 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-10 23:01:04,480 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-12-10 23:01:04,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,486 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,486 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,486 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/all-active/
2025-12-10 23:01:04,491 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,491 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,491 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/roles/Administrador/permisos/
2025-12-10 23:01:04,493 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,494 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,494 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,497 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,497 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,497 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,522 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,522 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,522 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/usuarios/
2025-12-10 23:01:04,567 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,581 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,584 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,585 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 23:01:04,595 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 23:01:04,598 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 170.5ms
2025-12-10 23:01:04,599 - app.modules.rbac.presentation.endpoints - INFO - Solicitud GET /roles/all-active/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a para lista simple
2025-12-10 23:01:04,600 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,603 - app.core.exceptions - WARNING - RequestValidationError en /api/v1/roles/Administrador/permisos/: ["El parámetro 'path.rol_id' no es un UUID válido. Formato esperado: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]
2025-12-10 23:01:04,604 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/Administrador/permisos/ 422 164.4ms
2025-12-10 23:01:04,606 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 23:01:04,607 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,610 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 161.6ms
2025-12-10 23:01:04,613 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 23:01:04,614 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,615 - app.modules.rbac.application.services.rol_service - INFO - Se encontraron 1 roles activos para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,616 - app.modules.rbac.presentation.endpoints - INFO - Lista simple de roles activos recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 1
2025-12-10 23:01:04,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,617 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,619 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 172.1ms
2025-12-10 23:01:04,620 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,621 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 1.4ms
2025-12-10 23:01:04,622 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 200 188.4ms
2025-12-10 23:01:04,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,626 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,628 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,628 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,629 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,631 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,632 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,632 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,633 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,633 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,634 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 3.2ms
2025-12-10 23:01:04,635 - app.modules.users.presentation.endpoints - INFO - Solicitud GET /usuarios/ recibida por usuario 3dc35436-5316-436a-b5bc-e348dc7df3a2 del cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Paginación: page=1, limit=10, Búsqueda: 'None'
2025-12-10 23:01:04,635 - app.modules.users.application.services.user_service - INFO - Obteniendo usuarios paginados para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a: page=1, limit=10, search='None'
2025-12-10 23:01:04,635 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,638 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,639 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,639 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,639 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,642 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,644 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,656 - app.infrastructure.database.queries_async - WARNING - [QUERY] DEPRECATED: execute_query() recibió string SQL. Migrar a SQLAlchemy Core.
2025-12-10 23:01:04,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,659 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,662 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,663 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,663 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,666 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,666 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,667 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,669 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,669 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,669 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,672 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,672 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,672 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,678 - app.modules.users.application.services.user_service - INFO - [USUARIOS-PAGINADOS] Procesados 2 usuarios únicos de 3 filas crudas
2025-12-10 23:01:04,678 - app.modules.users.application.services.user_service - INFO - Obtención paginada de usuarios completada exitosamente
2025-12-10 23:01:04,678 - app.modules.users.presentation.endpoints - INFO - Lista paginada de usuarios recuperada para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a - Total: 2, Página: 1
2025-12-10 23:01:04,684 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 200 202.9ms
2025-12-10 23:01:04,730 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-10 23:01:04,736 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-10 23:01:04,750 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-10 23:01:04,751 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-10 23:01:04,751 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 126.3ms
2025-12-10 23:01:04,752 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 137.8ms
2025-12-10 23:01:04,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 125.8ms
2025-12-10 23:01:04,757 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 118.4ms
2025-12-10 23:01:04,759 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,760 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,762 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,764 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,766 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,767 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,767 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,771 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.7ms
2025-12-10 23:01:04,771 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.5ms
2025-12-10 23:01:04,771 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.5ms
2025-12-10 23:01:04,771 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,771 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,771 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,774 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.4ms
2025-12-10 23:01:04,774 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.3ms
2025-12-10 23:01:04,774 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 2.3ms
2025-12-10 23:01:04,777 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,779 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,779 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,780 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,780 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,781 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,781 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,786 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 7.2ms
2025-12-10 23:01:04,786 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 6.9ms
2025-12-10 23:01:04,786 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,787 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,789 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,789 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,789 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,792 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,798 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,801 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,801 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,801 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,805 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,810 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,817 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,817 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,817 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,821 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,821 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,821 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,825 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,825 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,825 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,830 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,831 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,831 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,832 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,833 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,833 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,833 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,833 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,834 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,904 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 23:01:04,913 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 23:01:04,914 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 149.8ms
2025-12-10 23:01:04,915 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 23:01:04,916 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 23:01:04,920 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:04,920 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:04,925 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,925 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 166.1ms
2025-12-10 23:01:04,926 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,926 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,927 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,932 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,932 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,933 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,937 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:04,937 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:04,942 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:04,943 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:04,951 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,951 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,951 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,954 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:04,955 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:04,958 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:04,958 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 23:01:04,958 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:04,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,965 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:04,965 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 23:01:04,965 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:04,966 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:04,966 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 23:01:04,967 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:04,970 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,970 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,970 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:04,972 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:04,973 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 23:01:04,973 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:04,974 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:04,974 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:04,974 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,976 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:04,979 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 198.6ms
2025-12-10 23:01:04,980 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 23:01:04,983 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:04,984 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,986 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 195.1ms
2025-12-10 23:01:04,986 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,987 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,987 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,989 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 208.6ms
2025-12-10 23:01:04,995 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:04,996 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:04,997 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:04,997 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:04,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:04,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:04,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:04,999 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,000 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,000 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,000 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,000 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,000 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 226.0ms
2025-12-10 23:01:05,008 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,009 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,009 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,010 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,013 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,018 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,019 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,019 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,031 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,033 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,033 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,036 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,036 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,036 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,037 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,038 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,038 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,049 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,049 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,049 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,065 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 23:01:05,066 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 23:01:05,087 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:05,088 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:05,097 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:05,097 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:05,113 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:05,113 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 23:01:05,113 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,115 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:05,115 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 23:01:05,115 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,127 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 23:01:05,136 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 23:01:05,138 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 23:01:05,139 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 23:01:05,142 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 23:01:05,144 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:05,144 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:05,151 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 219.9ms
2025-12-10 23:01:05,152 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:05,155 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 230.3ms
2025-12-10 23:01:05,157 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,158 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,159 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,159 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,163 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:05,163 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:05,169 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:05,169 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:05,173 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,174 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,175 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,179 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:05,179 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:05,186 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:05,186 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 23:01:05,186 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,191 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,199 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:05,199 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-10 23:01:05,200 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,201 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:05,201 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 23:01:05,202 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,202 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:05,203 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-10 23:01:05,203 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,204 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:05,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 221.7ms
2025-12-10 23:01:05,208 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,208 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,208 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,213 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,214 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,214 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,215 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,215 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,215 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,217 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,217 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,218 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,222 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:05,223 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 23:01:05,224 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 23:01:05,225 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 226.2ms
2025-12-10 23:01:05,226 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 230.3ms
2025-12-10 23:01:05,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 220.1ms
2025-12-10 23:01:05,234 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,234 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,240 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,241 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-10 23:01:05,241 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-10 23:01:05,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,241 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,244 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,264 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-10 23:01:05,266 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-10 23:01:05,267 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-10 23:01:05,268 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,268 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,269 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,275 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,276 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,276 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,280 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,280 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,281 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-10 23:01:05,281 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-10 23:01:05,282 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-10 23:01:05,282 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-10 23:01:05,306 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 23:01:05,311 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 23:01:05,333 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:05,333 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:05,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:05,339 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:05,362 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 23:01:05,365 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:05,366 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-10 23:01:05,366 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,367 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:05,367 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-10 23:01:05,367 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,368 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 23:01:05,370 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 23:01:05,371 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 23:01:05,377 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:05,377 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:05,402 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:05,402 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:05,409 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-10 23:01:05,409 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-10 23:01:05,414 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-10 23:01:05,415 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-10 23:01:05,420 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:05,421 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:05,423 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 265.9ms
2025-12-10 23:01:05,425 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 251.3ms
2025-12-10 23:01:05,428 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:05,428 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-10 23:01:05,429 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,433 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:05,433 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-10 23:01:05,433 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,434 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-10 23:01:05,435 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-10 23:01:05,435 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,435 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-10 23:01:05,435 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-10 23:01:05,436 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-10 23:01:05,439 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 23:01:05,440 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 227.3ms
2025-12-10 23:01:05,445 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:05,446 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-10 23:01:05,448 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-10 23:01:05,448 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 214.2ms
2025-12-10 23:01:05,449 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 215.7ms
2025-12-10 23:01:05,450 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 209.7ms
2025-12-11 00:04:34,036 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-11 00:04:34,038 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 2.9ms
2025-12-11 00:04:34,041 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-11 00:04:34,042 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,042 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,067 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,067 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,068 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,072 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,081 - app.core.tenant.routing - WARNING - [METADATA] No se encontró metadata para cliente 3d34486f-05a9-4acb-8590-f76cde7a748a. Usando SINGLE-DB como fallback. tipo_instalacion=shared
2025-12-11 00:04:34,081 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,081 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-11 00:04:34,085 - app.api.deps - WARNING - Error de validación JWT: Signature has expired.
2025-12-11 00:04:34,086 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 401 44.8ms
2025-12-11 00:04:34,089 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-12-11 00:04:34,090 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.4ms
2025-12-11 00:04:34,091 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-12-11 00:04:34,092 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,092 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,098 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,102 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,102 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,102 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/auth/refresh/
2025-12-11 00:04:34,110 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token válido - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web
2025-12-11 00:04:34,116 - app.modules.auth.application.services.auth_service - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: admin_tech (Cliente: 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Level: 4, Type: tenant_admin)
2025-12-11 00:04:34,120 - app.modules.auth.application.services.auth_service - INFO - Niveles calculados - Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2: level=4, super_admin=False, type=tenant_admin
2025-12-11 00:04:34,131 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2, Tipo: web, Token ID: 1F4143CF-67A3-463D-B40B-C37C0617A9CA, Rotación: True
2025-12-11 00:04:34,139 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 3D34486F-05A9-4ACB-8590-F76CDE7A748A, Usuario 3DC35436-5316-436A-B5BC-E348DC7DF3A2
2025-12-11 00:04:34,139 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no crítico)
2025-12-11 00:04:34,139 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 1F4143CF-67A3-463D-B40B-C37C0617A9CA
2025-12-11 00:04:34,140 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: admin_tech
2025-12-11 00:04:34,149 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=3D34486F-05A9-4ACB-8590-F76CDE7A748A, usuario_id=3DC35436-5316-436A-B5BC-E348DC7DF3A2, exito=True
2025-12-11 00:04:34,150 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 58.8ms
2025-12-11 00:04:34,154 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-11 00:04:34,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,160 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,164 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,164 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,164 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-11 00:04:34,185 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,198 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 43.9ms
2025-12-11 00:04:34,201 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,201 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-11 00:04:34,202 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,203 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.5ms
2025-12-11 00:04:34,203 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,204 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,204 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,204 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,204 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,204 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,208 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,215 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,215 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,215 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,223 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,223 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,223 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,224 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,224 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,225 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,254 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-11 00:04:34,258 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-11 00:04:34,266 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-11 00:04:34,267 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-11 00:04:34,268 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 60.3ms
2025-12-11 00:04:34,269 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 65.0ms
2025-12-11 00:04:34,272 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,272 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 0.8ms
2025-12-11 00:04:34,274 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,275 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 0.7ms
2025-12-11 00:04:34,275 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,277 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,277 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,277 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,279 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,284 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,284 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,284 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,286 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,293 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,301 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,301 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,301 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,303 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,303 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,303 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,345 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 74.3ms
2025-12-11 00:04:34,345 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 68.2ms
2025-12-11 00:04:34,345 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,345 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,357 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.4ms
2025-12-11 00:04:34,358 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 2.6ms
2025-12-11 00:04:34,359 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,360 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,361 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,362 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,362 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,362 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.0ms
2025-12-11 00:04:34,362 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,365 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.3ms
2025-12-11 00:04:34,365 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.1ms
2025-12-11 00:04:34,365 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 4.0ms
2025-12-11 00:04:34,365 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,365 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,368 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,368 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 6.3ms
2025-12-11 00:04:34,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,368 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 4.7ms
2025-12-11 00:04:34,375 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,376 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,378 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,410 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,411 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,411 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,416 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,416 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,417 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,419 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,419 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,419 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,419 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,419 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,420 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,420 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,420 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,420 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,426 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,426 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,427 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:34,481 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-11 00:04:34,500 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-11 00:04:34,500 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-11 00:04:34,500 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-11 00:04:34,500 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-11 00:04:34,500 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-11 00:04:34,512 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-11 00:04:34,514 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825, seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-11 00:04:34,519 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-11 00:04:34,519 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-11 00:04:34,524 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-11 00:04:34,524 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-11 00:04:34,528 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-11 00:04:34,528 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=36c06d70-c51c-4037-b558-3c423e123be2, solo_activos=False
2025-12-11 00:04:34,528 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,535 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-11 00:04:34,535 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-11 00:04:34,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-11 00:04:34,538 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-11 00:04:34,544 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 16 resultados
2025-12-11 00:04:34,545 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Reportes', 'Nuevo Conductor', 'Optimizar Rutas']
2025-12-11 00:04:34,553 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-11 00:04:34,553 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=c6f42733-be05-4729-a3cf-5a47e3bb6ec4, solo_activos=False
2025-12-11 00:04:34,553 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,556 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-11 00:04:34,556 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=93fa2bce-08b1-4a4d-98d3-a90b7fd1611d, solo_activos=False
2025-12-11 00:04:34,557 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,562 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-11 00:04:34,562 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=760fedad-d96d-4a82-bfa1-e5471268c33d, solo_activos=False
2025-12-11 00:04:34,562 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,566 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-11 00:04:34,566 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=8a9c540f-8ce2-40c3-bd2e-e88f79815a3d, solo_activos=False
2025-12-11 00:04:34,566 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,567 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 973e0f91-364b-4957-997c-9f024cbbd825
2025-12-11 00:04:34,568 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 973e0f91-364b-4957-997c-9f024cbbd825 con filtros: seccion_id=7b00b5d9-331a-4da2-991e-56b5e06279a2, solo_activos=False
2025-12-11 00:04:34,568 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 16 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,569 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-11 00:04:34,571 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-11 00:04:34,571 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-11 00:04:34,571 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 208.6ms
2025-12-11 00:04:34,571 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 206.0ms
2025-12-11 00:04:34,571 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 193.1ms
2025-12-11 00:04:34,577 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,580 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,580 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,582 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,583 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:34,584 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:34,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,584 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,587 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-11 00:04:34,587 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-11 00:04:34,589 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-11 00:04:34,589 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 208.8ms
2025-12-11 00:04:34,590 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 209.9ms
2025-12-11 00:04:34,592 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 216.9ms
2025-12-11 00:04:34,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:34,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:34,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:34,605 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,605 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,607 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,607 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:34,607 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:34,607 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:34,637 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-11 00:04:34,637 - app.modules.modulos.application.services.modulo_menu_service - INFO - Obteniendo menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72, seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-11 00:04:34,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-11 00:04:34,644 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-11 00:04:34,651 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query RAW SQL retornó 13 resultados
2025-12-11 00:04:34,652 - app.modules.modulos.application.services.modulo_menu_service - INFO - Primeros resultados RAW: ['Conceptos', 'Periodos', 'Asistencias']
2025-12-11 00:04:34,656 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-11 00:04:34,656 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=f8e0e136-35c6-4180-b4df-e586fe37ab3f, solo_activos=False
2025-12-11 00:04:34,656 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,662 - app.modules.modulos.application.services.modulo_menu_service - INFO - Query SQLAlchemy retornó 0 resultados para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72
2025-12-11 00:04:34,662 - app.modules.modulos.application.services.modulo_menu_service - WARNING - No se encontraron menús para módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 con filtros: seccion_id=aa5e2fcb-dad1-4751-b5c8-88bc8a79e298, solo_activos=False
2025-12-11 00:04:34,662 - app.modules.modulos.application.services.modulo_menu_service - ERROR - INCONSISTENCIA: Query RAW retornó 13 resultados pero SQLAlchemy retornó 0
2025-12-11 00:04:34,667 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 4 menús de fallback RAW
2025-12-11 00:04:34,667 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 90.5ms
2025-12-11 00:04:34,668 - app.modules.modulos.application.services.modulo_menu_service - INFO - Usando 3 menús de fallback RAW
2025-12-11 00:04:34,670 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 86.8ms
2025-12-11 00:04:43,767 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-11 00:04:43,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,767 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,768 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,777 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:43,778 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:43,778 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/
2025-12-11 00:04:43,794 - app.modules.modulos.application.services.cliente_modulo_service - INFO - Obteniendo módulos activos para cliente ID: 3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:43,801 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/cliente-modulo/cliente/3d34486f-05a9-4acb-8590-f76cde7a748a/ 200 33.7ms
2025-12-11 00:04:43,805 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,805 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,806 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,806 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,808 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:43,808 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,808 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,815 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:43,815 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:43,815 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,821 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:43,822 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:43,822 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:43,845 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/6736bbf8-aea9-41ca-bb58-f711f2322c72/ recibida
2025-12-11 00:04:43,845 - app.modules.modulos.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/973e0f91-364b-4957-997c-9f024cbbd825/ recibida
2025-12-11 00:04:43,854 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 6736bbf8-aea9-41ca-bb58-f711f2322c72 recuperado exitosamente
2025-12-11 00:04:43,854 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 50.3ms
2025-12-11 00:04:43,856 - app.modules.modulos.presentation.endpoints_modulos - INFO - Módulo 973e0f91-364b-4957-997c-9f024cbbd825 recuperado exitosamente
2025-12-11 00:04:43,857 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos-v2/973e0f91-364b-4957-997c-9f024cbbd825/ 200 49.1ms
2025-12-11 00:04:43,859 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,860 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,860 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,862 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:43,862 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,862 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,873 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:43,874 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:43,874 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,876 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', Código='TECH003', ID=3d34486f-05a9-4acb-8590-f76cde7a748a
2025-12-11 00:04:43,876 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A
2025-12-11 00:04:43,876 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=3d34486f-05a9-4acb-8590-f76cde7a748a, tipo_instalacion=shared, db_type=single, bd=bd_sistema, servidor=N/A, path=/api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:43,912 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/ 200 54.4ms
2025-12-11 00:04:43,914 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/secciones/modulo/973e0f91-364b-4957-997c-9f024cbbd825/ 200 53.0ms
2025-12-11 00:04:43,915 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,915 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,915 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,915 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,921 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,924 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,925 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,926 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:43,927 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,927 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/973e0f91-364b-4957-997c-9f024cbbd825/
2025-12-11 00:04:43,927 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos-menus/modulo/6736bbf8-aea9-41ca-bb58-f711f2322c72/
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,928 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-12-11 00:04:43,933 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extraído de 'origin': techcorp.app.local:5173
2025-12-11 00:04:43,934 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,934 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,934 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-12-11 00:04:43,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-12-11 00:04:43,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-12-11 00:04:43,949 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'

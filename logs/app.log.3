2025-11-30 18:03:59,173 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:03:59,175 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:03:59,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:03:59,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:03:59,176 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:03:59,176 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:03:59,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:03:59,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:03:59,177 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:03:59,177 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:03:59,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:03:59,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:03:59,178 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:03:59,178 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:03:59,178 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:03:59,180 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,180 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,181 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,182 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 19.2ms
2025-11-30 18:03:59,183 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 500 14.7ms
2025-11-30 18:03:59,185 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:03:59,185 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:03:59,186 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:03:59,186 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:03:59,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:03:59,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:03:59,187 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:03:59,187 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:03:59,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:03:59,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:03:59,188 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:03:59,188 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:03:59,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:03:59,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:03:59,188 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:03:59,190 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:03:59,190 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:03:59,192 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,192 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,192 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,193 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:03:59,193 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:03:59,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:03:59,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,194 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:03:59,195 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:03:59,195 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:03:59,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:03:59,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:03:59,196 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:03:59,196 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:03:59,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:03:59,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:03:59,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:03:59,196 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:03:59,196 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:03:59,197 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:03:59,198 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,198 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,199 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:03:59,201 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 15.6ms
2025-11-30 18:03:59,201 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 500 15.4ms
2025-11-30 18:04:05,183 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:04:05,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:04:05,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:04:05,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:05,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:05,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:05,185 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:04:05,186 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:04:05,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:05,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:05,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:05,188 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:04:05,188 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:04:05,188 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:04:05,189 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:05,189 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:04:05,189 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:04:05,189 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:04:05,189 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:04:05,191 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:05,191 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:05,192 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:05,193 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 500 10.0ms
2025-11-30 18:04:05,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:04:05,195 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:04:05,195 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:04:05,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:05,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:05,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:05,197 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:04:05,197 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:04:05,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:05,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:05,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:05,198 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:04:05,199 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:04:05,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:04:05,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:05,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:04:05,199 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:04:05,199 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:04:05,199 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:04:05,202 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:05,202 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:05,203 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:05,204 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 500 9.0ms
2025-11-30 18:04:08,390 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:04:08,391 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:04:08,391 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:04:08,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:08,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:08,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:08,398 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:04:08,398 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:04:08,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:08,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:08,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:08,400 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:04:08,400 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:04:08,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:04:08,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:08,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:04:08,401 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:04:08,401 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:04:08,401 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:04:08,405 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:08,405 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:08,406 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:08,407 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 500 16.6ms
2025-11-30 18:04:08,408 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:04:08,410 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:04:08,410 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:04:08,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:08,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:08,411 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:08,412 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:04:08,412 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:04:08,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:08,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:08,412 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:08,413 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:04:08,413 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:04:08,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:04:08,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:08,414 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:04:08,414 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:04:08,414 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:04:08,414 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:04:08,416 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:08,416 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:08,417 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:08,418 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 500 9.3ms
2025-11-30 18:04:20,995 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:04:20,995 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:04:20,995 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:04:20,995 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:04:20,996 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:04:20,996 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:04:23,300 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:04:23,302 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:04:23,302 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:04:23,302 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:04:23,303 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:04:23,303 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:04:23,572 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:04:23,572 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:04:23,640 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:04:23,640 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:04:23,640 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:04:23,833 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:04:23,833 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:04:23,933 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'api', 'cdn', 'assets', 'backend', 'admin', 'static', 'www'}
2025-11-30 18:04:25,756 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:04:25,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:04:25,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:04:25,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:25,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:25,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:25,818 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:04:25,819 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:04:25,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:25,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:25,819 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:25,820 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:04:25,820 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:04:25,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:04:25,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:25,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:04:25,820 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:04:25,820 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:04:25,822 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:04:25,825 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:04:25,827 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:25,829 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:25,830 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:25,832 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 500 76.5ms
2025-11-30 18:04:25,834 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:04:25,834 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:04:25,834 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:04:25,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:25,834 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:25,835 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:25,835 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:04:25,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:04:25,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:04:25,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:25,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:04:25,837 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:04:25,837 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:04:25,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:04:25,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:04:25,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:04:25,837 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:04:25,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:04:25,838 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:04:25,839 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:25,839 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:25,840 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:04:25,841 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 500 8.3ms
2025-11-30 18:07:30,366 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:30,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:30,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:30,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:30,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:30,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:30,381 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:30,383 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:30,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:30,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:30,383 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:30,384 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:30,384 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:30,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:30,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:30,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:30,385 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:30,385 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:30,385 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:30,388 - app.infrastructure.database.queries - ERROR - Error en execute_auth_query: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:07:30,388 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:07:30,389 - app.api.deps - ERROR - Error inesperado obteniendo usuario activo 'superadmin': Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 157, in execute_auth_query
    cursor.execute(query, params)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 196, in get_current_active_user
    user_dict = execute_auth_query(
                ^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 171, in execute_auth_query
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la autenticaci√≥n: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'es_eliminado'. (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-11-30 18:07:30,390 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 500 23.5ms
2025-11-30 18:07:30,590 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:07:30,590 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:07:30,590 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:07:30,591 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:07:30,591 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:07:30,591 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:07:31,482 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:07:31,484 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:07:31,484 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:07:31,485 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:07:31,485 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:07:31,485 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:07:31,813 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:07:31,813 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:07:31,883 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:07:31,885 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:07:31,885 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:07:32,097 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:07:32,097 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:07:32,236 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'api', 'www', 'admin', 'static', 'backend', 'assets', 'cdn'}
2025-11-30 18:07:32,279 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:07:32,279 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:32,279 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:32,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:32,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:32,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:32,336 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:32,336 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:32,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:32,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,336 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:32,337 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:32,337 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:32,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:32,337 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:32,338 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:32,338 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:32,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:32,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,340 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:32,340 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:32,340 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:32,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:32,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:32,341 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:32,341 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:32,341 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:32,346 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:07:32,364 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 18:07:32,364 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-11-30 18:07:32,369 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:07:32,371 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:07:32,373 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:32,373 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:32,378 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:32,379 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 100.4ms
2025-11-30 18:07:32,379 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 100.2ms
2025-11-30 18:07:32,381 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:07:32,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:32,382 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:32,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:32,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:32,384 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:32,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:32,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:32,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:32,386 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:32,386 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:32,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:32,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:32,386 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:32,386 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:32,386 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:32,386 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:07:32,388 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 18:07:32,388 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-11-30 18:07:32,389 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:07:32,389 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:07:32,390 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 8.8ms
2025-11-30 18:07:33,144 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:33,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:33,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:33,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:33,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:33,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:33,145 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:33,146 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:33,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:33,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:33,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:33,146 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:33,147 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:33,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:33,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:33,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:33,147 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:33,147 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:33,147 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:33,149 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:33,150 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:33,152 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:33,152 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 9.4ms
2025-11-30 18:07:33,155 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:33,155 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:33,155 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:33,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:33,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:33,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:33,157 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:33,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:33,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:33,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:33,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:33,158 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:33,158 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:33,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:33,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:33,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:33,159 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:33,159 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:33,159 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:33,160 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:33,160 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:33,163 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:33,163 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.6ms
2025-11-30 18:07:35,366 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:07:35,366 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:35,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:35,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,368 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:35,368 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:35,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,370 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:35,370 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:35,370 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:35,370 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,370 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:35,371 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:35,371 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:35,371 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 18:07:35,380 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 18:07:35,382 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 18:07:35,388 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:07:35,393 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:07:35,393 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14427, Rotaci√≥n: True
2025-11-30 18:07:35,400 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:07:35,400 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:07:35,401 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-11-30 18:07:35,401 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14427
2025-11-30 18:07:35,401 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 18:07:35,408 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:07:35,409 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:07:35,410 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 43.3ms
2025-11-30 18:07:35,413 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 18:07:35,413 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:35,413 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:35,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,413 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,415 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:35,415 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:35,415 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,416 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,416 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:35,416 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:35,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:35,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,417 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:35,417 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:35,417 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:35,417 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 18:07:35,420 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 18:07:35,420 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 18:07:35,420 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 18:07:35,432 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 18:07:35,433 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 18:07:35,433 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 20.9ms
2025-11-30 18:07:35,438 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:07:35,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:35,439 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:35,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,440 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:35,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:35,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,441 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:35,441 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:35,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:35,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:35,441 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:35,442 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:35,442 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:07:35,443 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:07:35,443 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:07:35,446 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:07:35,446 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 7.8ms
2025-11-30 18:07:35,450 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:07:35,450 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:35,450 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:35,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:35,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,452 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:35,452 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:35,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,453 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,455 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:35,455 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:35,455 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:35,455 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,455 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:35,455 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:35,456 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:35,456 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:07:35,458 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:07:35,458 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:07:35,498 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:07:35,498 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:35,498 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:35,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,498 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,499 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:35,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:35,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,500 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:35,500 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:35,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:35,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,501 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:35,501 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:35,501 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:35,501 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:35,503 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:35,504 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:35,506 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:35,506 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 57.0ms
2025-11-30 18:07:35,507 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 56.7ms
2025-11-30 18:07:35,508 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:07:35,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:35,510 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:35,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,510 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:35,510 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:35,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,511 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,511 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,511 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:35,511 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:35,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:35,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:35,512 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:35,512 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:35,512 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:07:35,514 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:07:35,514 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:07:35,515 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:07:35,515 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:35,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:35,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:35,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,516 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,517 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:35,517 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:35,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:35,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:35,518 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:35,518 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:35,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:35,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:35,518 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:35,518 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:35,518 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:35,518 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:35,521 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:35,522 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:35,523 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:35,524 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 15.5ms
2025-11-30 18:07:35,524 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 9.2ms
2025-11-30 18:07:43,770 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:43,771 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:43,771 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:43,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:43,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:43,771 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:43,772 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:43,772 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:43,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:43,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:43,772 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:43,773 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:43,773 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:43,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:43,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:43,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:43,774 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:43,774 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:43,774 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:43,777 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:43,777 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:43,779 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:43,780 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 10.3ms
2025-11-30 18:07:43,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:43,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:43,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:43,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:43,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:43,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:43,784 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:43,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:43,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:43,785 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:43,785 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:43,785 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:43,786 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:43,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:43,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:43,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:43,786 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:43,786 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:43,786 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:43,788 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:43,788 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:43,790 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:43,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 9.1ms
2025-11-30 18:07:45,699 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:07:45,700 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:45,700 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:45,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:45,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:45,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:45,702 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:45,702 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:45,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:45,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:45,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:45,703 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:45,703 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:45,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:45,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:45,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:45,704 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:45,704 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:45,704 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:07:45,705 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 18:07:45,706 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-11-30 18:07:45,707 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:07:45,707 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:07:45,708 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 8.6ms
2025-11-30 18:07:45,709 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:07:45,710 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:45,710 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:45,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:45,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:45,710 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:45,711 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:45,711 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:45,711 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:45,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:45,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:45,714 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:45,714 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:45,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:45,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:45,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:45,715 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:45,715 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:45,715 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:07:45,717 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 20, solo_activos: True
2025-11-30 18:07:45,717 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 20
2025-11-30 18:07:45,718 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:07:45,719 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:07:45,720 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.4ms
2025-11-30 18:07:49,058 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:49,060 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:49,060 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:49,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:49,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:49,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:49,061 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:49,062 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:49,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:49,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:49,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:49,063 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:49,063 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:49,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:49,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:49,063 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:49,064 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:49,064 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:49,064 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:49,066 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:49,066 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:49,068 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:49,070 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 11.0ms
2025-11-30 18:07:49,072 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:07:49,072 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:49,072 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:49,072 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:49,072 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:49,072 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:49,073 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:49,073 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:49,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:49,073 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:49,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:49,074 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:49,074 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:49,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:49,074 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:49,076 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:49,076 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:49,076 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:49,076 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:07:49,078 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:07:49,078 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:07:49,079 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:07:49,080 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.5ms
2025-11-30 18:07:50,552 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:07:50,553 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 0.5ms
2025-11-30 18:07:50,554 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:07:50,555 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 0.9ms
2025-11-30 18:07:50,555 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:07:50,556 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:07:50,556 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:07:50,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.8ms
2025-11-30 18:07:50,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.7ms
2025-11-30 18:07:50,559 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:50,559 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:50,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,560 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:50,561 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:50,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,561 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,562 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:50,562 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:50,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:50,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,562 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:50,562 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:50,562 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:50,564 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:07:50,566 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:07:50,570 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:07:50,571 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.2ms
2025-11-30 18:07:50,571 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:50,572 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:50,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,572 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,573 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:50,573 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:50,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,574 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:50,575 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:50,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:50,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:50,575 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:50,575 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:50,576 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:07:50,578 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:07:50,578 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:07:50,592 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:07:50,594 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 23.3ms
2025-11-30 18:07:50,594 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:07:50,595 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:50,595 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:50,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,596 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:50,596 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:50,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,596 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,597 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:50,597 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:50,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:50,597 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,598 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:50,598 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:50,598 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:50,598 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:07:50,600 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:07:50,601 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:07:50,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:50,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:50,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,605 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:50,605 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:50,605 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:50,605 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,605 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:50,606 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:50,606 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:50,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:50,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:50,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:50,607 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:50,607 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:50,607 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:07:50,609 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:07:50,609 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:07:50,611 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:07:50,611 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 17.3ms
2025-11-30 18:07:50,612 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 11.0ms
2025-11-30 18:07:52,683 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:07:52,684 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:07:52,684 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.9ms
2025-11-30 18:07:52,684 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.6ms
2025-11-30 18:07:52,687 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:07:52,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:52,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:52,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:52,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:52,688 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:52,688 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:52,689 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:52,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:52,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:52,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:52,690 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:52,690 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:52,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:52,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:52,690 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:52,690 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:52,690 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:52,691 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:07:52,692 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:07:52,692 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:07:52,696 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:07:52,697 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 10.6ms
2025-11-30 18:07:52,698 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:07:52,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:52,698 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:52,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:52,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:52,700 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:52,701 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:52,701 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:52,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:52,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:52,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:52,702 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:52,702 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:52,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:52,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:52,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:52,702 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:52,702 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:52,702 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:07:52,704 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:07:52,705 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:07:52,706 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:07:52,706 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 8.0ms
2025-11-30 18:07:54,721 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 18:07:54,722 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.2ms
2025-11-30 18:07:54,722 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 18:07:54,722 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 18:07:54,723 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 18:07:54,724 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.5ms
2025-11-30 18:07:54,724 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.4ms
2025-11-30 18:07:54,724 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.3ms
2025-11-30 18:07:54,725 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:07:54,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:54,726 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:54,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,726 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,727 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,727 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:54,727 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:54,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,728 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:54,728 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:54,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:54,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,730 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:54,730 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:54,730 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:54,730 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:07:54,732 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:07:54,732 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:07:54,735 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:07:54,736 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:07:54,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:54,736 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:54,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,737 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:54,738 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:54,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,738 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,738 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:54,740 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:54,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:54,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:54,740 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:54,740 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:54,741 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:07:54,742 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:07:54,742 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:07:54,743 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:07:54,744 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:07:54,744 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 18.8ms
2025-11-30 18:07:54,745 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 9.1ms
2025-11-30 18:07:54,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:07:54,746 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:07:54,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:54,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:54,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,749 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:54,749 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:54,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,750 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:54,751 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:54,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:54,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:54,751 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:54,751 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:54,751 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:07:54,753 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:07:54,754 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:07:54,754 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:07:54,755 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:54,755 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:54,755 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,755 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,756 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:54,757 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:54,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:54,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:54,758 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:54,759 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:54,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:54,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:54,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:54,762 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:54,762 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:54,762 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:07:54,763 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:07:54,763 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:07:54,765 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:07:54,765 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:07:54,766 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 19.7ms
2025-11-30 18:07:54,766 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 19.5ms
2025-11-30 18:07:56,956 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:07:56,956 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:07:56,957 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 18:07:56,957 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.6ms
2025-11-30 18:07:56,958 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:07:56,960 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:07:56,960 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:07:56,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:56,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:56,960 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:56,961 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:07:56,961 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:07:56,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:07:56,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:56,961 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:07:56,962 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:07:56,962 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:07:56,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:07:56,962 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:07:56,963 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:07:56,963 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:07:56,963 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:07:56,963 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:07:56,965 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:07:56,965 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:01,270 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:08:01,270 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:08:01,274 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:08:01,274 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,304 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,308 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,316 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,319 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,320 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:01,322 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4362.4ms
2025-11-30 18:08:01,324 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:01,324 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:01,324 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:01,324 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:01,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:01,325 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:01,326 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:01,326 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:01,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:01,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:01,326 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:01,327 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:01,327 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:01,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:01,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:01,327 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:01,328 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:01,328 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:01,328 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:01,332 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:08:01,332 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:01,333 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,334 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,334 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,338 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,344 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:01,363 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:01,364 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 40.2ms
2025-11-30 18:08:03,433 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:03,433 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-11-30 18:08:03,434 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:03,434 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.5ms
2025-11-30 18:08:03,435 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:03,435 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:03,436 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:03,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:03,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:03,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:03,437 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:03,437 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:03,437 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:03,437 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:03,437 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:03,438 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:03,438 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:03,438 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:03,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:03,439 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:03,439 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:03,439 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:03,439 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:03,441 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:03,441 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:03,441 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:03,443 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:03,447 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:08:03,448 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 13.6ms
2025-11-30 18:08:03,450 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:03,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:03,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:03,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:03,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:03,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:03,453 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:03,453 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:03,453 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:03,453 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:03,453 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:03,454 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:03,454 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:03,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:03,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:03,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:03,454 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:03,455 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:03,455 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:03,458 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:03,458 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:03,459 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:03,460 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:03,461 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:08:03,462 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.6ms
2025-11-30 18:08:04,572 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:04,573 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:04,573 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:04,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:04,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:04,573 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:04,574 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:04,574 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:04,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:04,574 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:04,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:04,575 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:04,575 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:04,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:04,575 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:04,576 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:04,576 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:04,576 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:04,576 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:04,577 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:08:04,577 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:04,578 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,579 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,580 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,582 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,584 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,585 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:04,586 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 14.0ms
2025-11-30 18:08:04,588 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:04,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:04,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:04,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:04,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:04,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:04,589 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:04,589 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:04,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:04,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:04,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:04,590 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:04,590 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:04,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:04,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:04,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:04,591 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:04,591 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:04,591 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:04,592 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:08:04,593 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:04,593 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,594 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,594 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,597 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,598 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:04,599 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:04,600 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.7ms
2025-11-30 18:08:05,764 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:08:05,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:05,765 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:05,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,766 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:05,766 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:05,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,767 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:05,767 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:05,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:05,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:05,768 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:05,768 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:05,768 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:08:05,768 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:08:05,770 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:08:05,770 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:08:05,772 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:08:05,772 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:05,773 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:05,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,773 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,774 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:05,774 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:05,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,774 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,775 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:05,775 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:05,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:05,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,775 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:05,775 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:05,776 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:05,776 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:08:05,777 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:08:05,777 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:08:05,778 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:08:05,779 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:08:05,779 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 15.0ms
2025-11-30 18:08:05,780 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 11.0ms
2025-11-30 18:08:05,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:08:05,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:08:05,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:05,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:05,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,784 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:05,784 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:05,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,784 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,785 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:05,785 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:05,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:05,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:05,786 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:05,786 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:05,786 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:08:05,788 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:08:05,788 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:08:05,789 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:08:05,790 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:05,790 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:05,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,792 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:05,792 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:05,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:05,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,792 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:05,793 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:05,793 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:05,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:05,793 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:05,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:05,794 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:05,794 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:05,794 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:08:05,796 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:08:05,796 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:08:05,797 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:08:05,797 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:08:05,798 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 16.5ms
2025-11-30 18:08:05,798 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 16.2ms
2025-11-30 18:08:07,700 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:07,700 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:07,701 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:07,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:07,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:07,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:07,702 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:07,702 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:07,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:07,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:07,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:07,703 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:07,703 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:07,703 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:07,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:07,704 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:07,704 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:07,704 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:07,704 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:07,706 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:08:07,706 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:07,707 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,708 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,708 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,710 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,712 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,714 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:07,714 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 14.3ms
2025-11-30 18:08:07,716 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:07,716 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:07,716 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:07,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:07,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:07,717 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:07,717 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:07,717 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:07,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:07,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:07,718 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:07,719 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:07,719 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:07,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:07,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:07,719 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:07,719 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:07,719 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:07,720 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:07,722 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:08:07,722 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:07,723 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,724 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,725 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,726 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,728 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:07,729 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:07,730 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 14.9ms
2025-11-30 18:08:09,018 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:08:09,019 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.8ms
2025-11-30 18:08:09,019 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:08:09,020 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 1.0ms
2025-11-30 18:08:09,022 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:08:09,022 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:09,022 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:09,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:09,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:09,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:09,024 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:09,024 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:09,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:09,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:09,024 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:09,025 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:09,025 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:09,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:09,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:09,026 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:09,026 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:09,027 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:09,027 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:08:09,030 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:08:09,036 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:08:09,036 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:09,037 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:09,037 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:09,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:09,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:09,038 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:09,039 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:09,039 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:09,039 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:09,039 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:09,040 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:09,040 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:09,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:09,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:09,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:09,041 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:09,041 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:09,042 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:08:09,044 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:08:09,052 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 30.1ms
2025-11-30 18:08:09,052 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 16.7ms
2025-11-30 18:08:12,471 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:12,472 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:12,472 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:12,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:12,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:12,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:12,473 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:12,473 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:12,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:12,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:12,474 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:12,475 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:12,475 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:12,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:12,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:12,475 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:12,475 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:12,475 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:12,476 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:12,477 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:12,478 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:12,478 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:12,479 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:12,480 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:08:12,481 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.0ms
2025-11-30 18:08:12,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:12,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:12,483 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:12,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:12,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:12,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:12,484 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:12,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:12,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:12,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:12,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:12,485 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:12,485 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:12,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:12,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:12,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:12,486 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:12,486 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:12,486 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:08:12,488 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:12,488 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:08:12,490 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:12,490 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:12,492 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:08:12,492 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.2ms
2025-11-30 18:08:14,278 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:08:14,279 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1016/ 200 0.5ms
2025-11-30 18:08:14,280 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:08:14,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:14,281 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:14,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:14,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:14,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:14,282 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:14,282 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:14,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:14,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:14,282 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:14,283 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:14,283 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:14,283 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:14,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:14,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:14,284 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:14,284 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:14,284 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:08:14,286 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1016
2025-11-30 18:08:14,287 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticaci√≥n con ID 1016 no encontrado.
2025-11-30 18:08:14,288 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 8.5ms
2025-11-30 18:08:19,194 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:19,195 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:19,195 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:19,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:19,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:19,195 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:19,196 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:19,196 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:19,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:19,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:19,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:19,197 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:19,197 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:19,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:19,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:19,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:19,198 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:19,198 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:19,198 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:19,198 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:08:19,200 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:19,200 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,202 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,202 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,204 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,206 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,207 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:19,208 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.2ms
2025-11-30 18:08:19,209 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:19,209 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:19,210 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:19,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:19,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:19,210 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:19,211 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:19,211 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:19,211 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:19,211 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:19,211 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:19,212 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:19,212 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:19,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:19,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:19,212 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:19,212 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:19,213 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:19,213 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:08:19,214 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:08:19,215 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:08:19,216 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,217 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,219 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,220 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,221 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:08:19,222 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:08:19,223 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 14.4ms
2025-11-30 18:08:21,939 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:08:21,939 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-11-30 18:08:21,941 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:08:21,942 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:08:21,942 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.1ms
2025-11-30 18:08:21,943 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:21,943 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:21,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:21,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:21,943 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:21,944 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:21,945 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:21,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:21,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:21,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:21,946 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:21,946 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:21,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:21,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:21,946 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:21,947 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:21,947 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:21,947 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:08:21,949 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:08:21,950 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:08:21,952 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:08:21,953 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 11.2ms
2025-11-30 18:08:21,955 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:08:21,955 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:21,955 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:21,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:21,955 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:21,956 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:21,957 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:21,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:21,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:21,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:21,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:21,958 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:21,958 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:21,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:21,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:21,959 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:21,959 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:21,959 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:21,959 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:08:21,960 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:08:21,962 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:08:21,963 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:08:21,964 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 9.7ms
2025-11-30 18:08:30,034 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/clientes/2/
2025-11-30 18:08:30,036 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:30,036 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:30,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:30,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:30,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:30,037 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:30,037 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:30,037 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:30,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:30,038 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:30,038 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:30,039 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:30,039 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:30,039 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:30,039 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:30,039 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:30,039 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:30,040 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:08:30,167 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud PUT /clientes/2 recibida para actualizar por usuario: superadmin
2025-11-30 18:08:30,167 - app.modules.tenant.application.services.cliente_service - INFO - Actualizando cliente ID: 2
2025-11-30 18:08:30,178 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:08:30,178 - app.modules.tenant.application.services.cliente_service - INFO - Cliente ID 2 actualizado exitosamente.
2025-11-30 18:08:30,180 - app.modules.tenant.presentation.endpoints_clientes - INFO - Cliente 2 actualizado exitosamente
2025-11-30 18:08:30,180 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/clientes/2/ 200 145.6ms
2025-11-30 18:08:30,183 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:08:30,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:30,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:30,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:30,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:30,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:30,185 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:30,185 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:30,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:30,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:30,186 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:30,186 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:30,186 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:30,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:30,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:30,187 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:30,187 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:30,187 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:30,187 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:08:30,188 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:08:30,190 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:08:30,191 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:08:30,191 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.0ms
2025-11-30 18:08:36,931 - app.main - INFO - [SYSTEM] 127.0.0.1 -> PUT /api/v1/clientes/2/
2025-11-30 18:08:36,931 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:36,932 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:36,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:36,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:36,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:36,942 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:36,944 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:36,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:36,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:36,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:36,945 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:36,945 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:36,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:36,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:36,945 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:36,946 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:36,946 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:36,946 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:08:36,971 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud PUT /clientes/2 recibida para actualizar por usuario: superadmin
2025-11-30 18:08:36,971 - app.modules.tenant.application.services.cliente_service - INFO - Actualizando cliente ID: 2
2025-11-30 18:08:37,039 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:08:37,039 - app.modules.tenant.application.services.cliente_service - INFO - Cliente ID 2 actualizado exitosamente.
2025-11-30 18:08:37,040 - app.modules.tenant.presentation.endpoints_clientes - INFO - Cliente 2 actualizado exitosamente
2025-11-30 18:08:37,040 - app.main - INFO - [SYSTEM] 127.0.0.1 <- PUT /api/v1/clientes/2/ 200 109.5ms
2025-11-30 18:08:37,043 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:08:37,044 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:37,044 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:37,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:37,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:37,044 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:37,046 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:37,046 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:37,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:37,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:37,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:37,047 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:37,048 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:37,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:37,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:37,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:37,048 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:37,048 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:37,048 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:08:37,052 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:08:37,053 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:08:37,057 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:08:37,058 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 14.8ms
2025-11-30 18:08:41,825 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:08:41,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:41,826 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:41,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,826 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,838 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:41,839 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:41,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,840 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:41,840 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:41,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:41,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,841 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:41,841 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:41,841 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:41,841 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:08:41,849 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:08:41,852 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:08:41,853 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 28.0ms
2025-11-30 18:08:41,853 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:41,853 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:41,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,854 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,856 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:41,856 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:41,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,858 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:41,858 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:41,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:41,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:41,858 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:41,858 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:41,859 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:08:41,861 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:08:41,861 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:08:41,868 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:08:41,871 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 17.8ms
2025-11-30 18:08:41,871 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:08:41,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:41,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:41,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,873 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:41,874 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:41,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,875 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:41,875 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:41,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:41,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:41,876 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:41,876 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:41,876 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:08:41,878 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:08:41,880 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:08:41,880 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:41,880 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:41,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,881 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:41,881 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:41,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:41,881 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,882 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:41,882 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:41,882 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:41,882 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:41,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:41,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:41,883 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:41,883 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:41,883 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:08:41,885 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:08:41,885 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:08:41,888 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:08:41,888 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 17.7ms
2025-11-30 18:08:41,891 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 11.3ms
2025-11-30 18:08:43,077 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:08:43,078 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:43,078 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:43,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:43,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:43,078 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:43,079 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:43,079 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:43,079 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:43,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:43,080 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:43,080 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:43,081 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:43,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:43,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:43,081 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:43,081 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:43,081 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:43,081 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:08:43,082 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:08:43,082 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:08:43,087 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:08:43,088 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 11.8ms
2025-11-30 18:08:43,090 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:08:43,091 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:08:43,091 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:08:43,091 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:43,091 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:43,092 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:43,093 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:08:43,093 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:08:43,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:08:43,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:43,093 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:08:43,094 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:08:43,094 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:08:43,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:08:43,094 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:08:43,095 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:08:43,095 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:08:43,095 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:08:43,095 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:08:43,097 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:08:43,097 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:08:43,098 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:08:43,098 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 7.4ms
2025-11-30 18:09:01,608 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/4/activar/
2025-11-30 18:09:01,609 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/4/activar/ 200 0.5ms
2025-11-30 18:09:01,610 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/modulos/clientes/2/modulos/4/activar/
2025-11-30 18:09:01,610 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:01,611 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:01,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:01,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:01,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:01,611 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:01,611 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:01,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:01,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:01,613 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:01,613 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:01,614 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:01,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:01,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:01,614 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:01,614 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:01,615 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:01,615 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/4/activar/
2025-11-30 18:09:01,619 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud POST /clientes/2/modulos/4/activar/ recibida
2025-11-30 18:09:01,626 - app.modules.tenant.application.services.modulo_activo_service - INFO - Activando m√≥dulo 4 para cliente 2
2025-11-30 18:09:01,634 - app.infrastructure.database.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:09:01,634 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 193, in execute_insert
    cursor.execute(query, params)
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 214, in execute_insert
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:09:01,636 - app.infrastructure.database.repositories.base_service - ERROR - DatabaseError en activar_modulo: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 193, in execute_insert
    cursor.execute(query, params)
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\repositories\base_service.py", line 43, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\tenant\application\services\modulo_activo_service.py", line 260, in activar_modulo
    resultado = execute_insert(query, tuple(params), connection_type=DatabaseConnection.ADMIN)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 214, in execute_insert
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:09:01,637 - app.core.exceptions - ERROR - CustomException: DB_INSERT_ERROR - Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)") | Path: /api/v1/modulos/clientes/2/modulos/4/activar/ | Method: POST
2025-11-30 18:09:01,637 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/modulos/clientes/2/modulos/4/activar/ 500 27.0ms
2025-11-30 18:09:13,420 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/modulos/clientes/2/modulos/4/activar/
2025-11-30 18:09:13,421 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:13,421 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:13,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:13,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:13,421 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:13,422 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:13,422 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:13,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:13,422 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:13,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:13,423 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:13,423 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:13,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:13,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:13,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:13,424 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:13,424 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:13,424 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/4/activar/
2025-11-30 18:09:13,425 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud POST /clientes/2/modulos/4/activar/ recibida
2025-11-30 18:09:13,426 - app.modules.tenant.application.services.modulo_activo_service - INFO - Activando m√≥dulo 4 para cliente 2
2025-11-30 18:09:13,430 - app.infrastructure.database.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:09:13,430 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 193, in execute_insert
    cursor.execute(query, params)
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 214, in execute_insert
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:09:13,431 - app.infrastructure.database.repositories.base_service - ERROR - DatabaseError en activar_modulo: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 193, in execute_insert
    cursor.execute(query, params)
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\repositories\base_service.py", line 43, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\tenant\application\services\modulo_activo_service.py", line 260, in activar_modulo
    resultado = execute_insert(query, tuple(params), connection_type=DatabaseConnection.ADMIN)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 214, in execute_insert
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:09:13,432 - app.core.exceptions - ERROR - CustomException: DB_INSERT_ERROR - Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)") | Path: /api/v1/modulos/clientes/2/modulos/4/activar/ | Method: POST
2025-11-30 18:09:13,432 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/modulos/clientes/2/modulos/4/activar/ 500 12.1ms
2025-11-30 18:09:22,102 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:09:22,103 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:22,103 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:22,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,103 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,104 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:22,104 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:22,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,104 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,105 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:22,105 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:22,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:22,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:22,106 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:22,106 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:22,106 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:09:22,106 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:09:22,107 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:09:22,108 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:09:22,120 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:09:22,121 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:22,121 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:22,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,123 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:22,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:22,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,124 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:22,124 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:22,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:22,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:22,125 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:22,125 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:22,125 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:09:22,126 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:09:22,126 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:09:22,128 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:09:22,129 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:09:22,130 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 28.4ms
2025-11-30 18:09:22,131 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 24.4ms
2025-11-30 18:09:22,133 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:09:22,133 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:09:22,134 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:22,134 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:22,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,135 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:22,135 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:22,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,136 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:22,136 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:22,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:22,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:22,137 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:22,137 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:22,137 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:09:22,138 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:09:22,138 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:09:22,138 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:09:22,138 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:22,141 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:22,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,141 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,142 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:22,142 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:22,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:22,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:22,143 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:22,143 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:22,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:22,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:22,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:22,143 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:22,143 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:22,144 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:09:22,145 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:09:22,145 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:09:22,146 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:09:22,147 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:09:22,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 14.2ms
2025-11-30 18:09:22,148 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 14.0ms
2025-11-30 18:09:25,020 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:25,020 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:25,021 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:25,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:25,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:25,021 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:25,022 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:25,022 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:25,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:25,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:25,022 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:25,023 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:25,023 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:25,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:25,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:25,023 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:25,023 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:25,024 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:25,024 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:25,025 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:09:25,025 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:09:25,026 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,058 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,063 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,076 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,077 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,080 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:09:25,081 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 60.6ms
2025-11-30 18:09:25,082 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:25,083 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:25,084 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:25,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:25,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:25,084 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:25,085 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:25,085 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:25,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:25,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:25,085 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:25,086 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:25,086 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:25,086 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:25,087 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:25,087 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:25,087 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:25,088 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:09:25,089 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:09:25,089 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,090 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,091 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,092 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,093 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:25,095 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:09:25,096 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.4ms
2025-11-30 18:09:28,887 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:28,889 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:28,889 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:28,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:28,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:28,889 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:28,892 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:28,892 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:28,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:28,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:28,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:28,893 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:28,893 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:28,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:28,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:28,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:28,894 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:28,894 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:28,894 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:28,896 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:28,896 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:28,897 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:28,902 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:28,905 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:09:28,906 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 17.9ms
2025-11-30 18:09:28,907 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:28,907 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:28,908 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:28,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:28,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:28,908 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:28,908 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:28,908 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:28,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:28,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:28,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:28,910 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:28,910 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:28,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:28,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:28,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:28,911 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:28,911 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:28,911 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:28,913 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:28,914 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:28,914 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:28,915 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:28,916 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:09:28,917 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.3ms
2025-11-30 18:09:33,668 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:09:33,668 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:33,668 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:33,669 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:33,669 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:33,669 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:33,670 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:33,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:33,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:33,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:33,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:33,671 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:33,671 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:33,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:33,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:33,672 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:33,672 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:33,672 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:33,672 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:09:33,673 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1016
2025-11-30 18:09:33,677 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticaci√≥n con ID 1016 no encontrado.
2025-11-30 18:09:33,678 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 9.5ms
2025-11-30 18:09:52,851 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:52,852 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:52,852 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:52,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:52,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:52,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:52,854 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:52,854 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:52,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:52,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:52,855 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:52,855 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:52,856 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:52,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:52,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:52,856 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:52,856 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:52,856 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:52,856 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:52,860 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:09:52,860 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:09:52,862 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,872 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,875 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,888 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,890 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,892 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:09:52,892 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 41.0ms
2025-11-30 18:09:52,894 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:52,894 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:52,894 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:52,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:52,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:52,896 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:52,897 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:52,897 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:52,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:52,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:52,897 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:52,898 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:52,898 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:52,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:52,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:52,898 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:52,899 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:52,899 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:52,899 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:09:52,901 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:09:52,901 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:09:52,902 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,902 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,903 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,904 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,905 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:52,907 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:09:52,909 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 14.2ms
2025-11-30 18:09:55,141 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:55,141 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:55,142 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:55,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:55,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:55,142 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:55,143 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:55,143 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:55,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:55,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:55,143 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:55,145 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:55,145 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:55,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:55,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:55,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:55,145 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:55,145 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:55,146 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:55,147 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:55,148 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:55,148 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:55,149 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:55,152 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:09:55,154 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.7ms
2025-11-30 18:09:55,155 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:55,156 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:55,156 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:55,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:55,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:55,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:55,157 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:55,157 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:55,157 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:55,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:55,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:55,158 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:55,158 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:55,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:55,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:55,158 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:55,160 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:55,160 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:55,160 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:09:55,162 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:55,162 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:09:55,163 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:55,164 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:09:55,166 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:09:55,166 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.2ms
2025-11-30 18:09:59,135 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:09:59,136 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:09:59,136 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:09:59,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:59,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:59,136 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:59,138 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:09:59,138 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:09:59,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:09:59,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:59,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:09:59,139 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:09:59,139 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:09:59,139 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:09:59,139 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:09:59,139 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:09:59,140 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:09:59,140 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:09:59,140 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:09:59,144 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1016
2025-11-30 18:09:59,146 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticaci√≥n con ID 1016 no encontrado.
2025-11-30 18:09:59,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 11.2ms
2025-11-30 18:10:32,743 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:10:32,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:10:32,743 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:10:32,743 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:32,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:32,744 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:32,748 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:10:32,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:10:32,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:32,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:32,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:32,750 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:10:32,750 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:10:32,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:10:32,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:32,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:10:32,751 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:10:32,751 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:10:32,751 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:10:32,753 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:10:32,753 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:10:32,754 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,756 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,757 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,758 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,760 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,761 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:10:32,762 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 19.3ms
2025-11-30 18:10:32,764 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:10:32,764 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:10:32,764 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:10:32,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:32,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:32,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:32,766 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:10:32,766 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:10:32,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:32,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:32,766 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:32,767 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:10:32,767 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:10:32,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:10:32,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:32,767 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:10:32,768 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:10:32,768 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:10:32,768 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:10:32,770 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:10:32,770 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:10:32,772 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,774 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,775 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,778 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,779 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:10:32,781 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:10:32,782 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 19.0ms
2025-11-30 18:10:34,858 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:10:34,858 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:10:34,858 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:10:34,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:34,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:34,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:34,860 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:10:34,861 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:10:34,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:34,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:34,861 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:34,862 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:10:34,862 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:10:34,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:10:34,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:34,862 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:10:34,862 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:10:34,862 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:10:34,863 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:10:34,863 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:10:34,866 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:10:34,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:10:34,872 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:10:34,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:34,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:34,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:34,874 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:10:34,874 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:10:34,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:34,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:34,874 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:34,875 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:10:34,875 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:10:34,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:10:34,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:34,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:10:34,876 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:10:34,876 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:10:34,876 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:10:34,877 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:10:34,883 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 24.5ms
2025-11-30 18:10:34,884 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 20.6ms
2025-11-30 18:10:41,104 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:10:41,105 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:10:41,105 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:10:41,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:41,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:41,105 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:41,106 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:10:41,106 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:10:41,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:41,106 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:41,107 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:41,107 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:10:41,107 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:10:41,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:10:41,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:41,108 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:10:41,108 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:10:41,108 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:10:41,108 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:10:41,111 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:10:41,111 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:10:41,119 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:10:41,120 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 15.1ms
2025-11-30 18:10:41,121 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:10:41,121 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:10:41,121 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:10:41,122 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:41,122 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:41,122 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:41,123 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:10:41,123 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:10:41,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:10:41,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:41,123 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:10:41,124 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:10:41,124 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:10:41,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:10:41,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:10:41,124 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:10:41,124 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:10:41,124 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:10:41,124 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:10:41,126 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:10:41,126 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:10:41,127 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:10:41,128 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 7.6ms
2025-11-30 18:11:00,396 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/modulos/clientes/2/modulos/4/activar/
2025-11-30 18:11:00,396 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:11:00,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:11:00,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:11:00,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:11:00,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:11:00,403 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:11:00,403 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:11:00,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:11:00,403 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:11:00,404 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:11:00,406 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:11:00,406 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:11:00,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:11:00,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:11:00,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:11:00,407 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:11:00,408 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:11:00,408 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/4/activar/
2025-11-30 18:11:00,410 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud POST /clientes/2/modulos/4/activar/ recibida
2025-11-30 18:11:00,420 - app.modules.tenant.application.services.modulo_activo_service - INFO - Activando m√≥dulo 4 para cliente 2
2025-11-30 18:11:00,431 - app.infrastructure.database.queries - ERROR - Error en execute_insert: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:11:00,431 - app.infrastructure.database.connection - ERROR - Error general en la gesti√≥n de conexi√≥n: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 193, in execute_insert
    cursor.execute(query, params)
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\connection.py", line 142, in get_db_connection
    yield conn
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 214, in execute_insert
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:11:00,433 - app.infrastructure.database.repositories.base_service - ERROR - DatabaseError en activar_modulo: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 193, in execute_insert
    cursor.execute(query, params)
pyodbc.IntegrityError: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\repositories\base_service.py", line 43, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\modules\tenant\application\services\modulo_activo_service.py", line 260, in activar_modulo
    resultado = execute_insert(query, tuple(params), connection_type=DatabaseConnection.ADMIN)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\app\infrastructure\database\queries.py", line 214, in execute_insert
    raise DatabaseError(
app.core.exceptions.DatabaseError: Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)")
2025-11-30 18:11:00,434 - app.core.exceptions - ERROR - CustomException: DB_INSERT_ERROR - Error en la inserci√≥n: ('23000', "[23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Violation of UNIQUE KEY constraint 'UQ_cliente_modulo'. Cannot insert duplicate key in object 'dbo.cliente_modulo_activo'. The duplicate key value is (2, 4). (2627) (SQLExecDirectW); [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]The statement has been terminated. (3621)") | Path: /api/v1/modulos/clientes/2/modulos/4/activar/ | Method: POST
2025-11-30 18:11:00,435 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/modulos/clientes/2/modulos/4/activar/ 500 39.6ms
2025-11-30 18:12:31,015 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:12:31,015 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:12:31,017 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:12:31,017 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:12:31,017 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:12:31,017 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:12:31,943 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:12:31,945 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:12:31,945 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:12:31,946 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:12:31,946 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:12:31,946 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:12:32,282 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:12:32,282 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:12:32,366 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:12:32,366 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:12:32,366 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:12:32,647 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:12:32,648 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:12:32,769 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'assets', 'api', 'cdn', 'backend', 'static', 'www'}
2025-11-30 18:13:20,110 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:13:20,111 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 1.7ms
2025-11-30 18:13:20,372 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:13:20,372 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:13:20,373 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:13:20,373 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:13:20,373 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:13:20,373 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:13:21,420 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:13:21,423 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:13:21,423 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:13:21,424 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:13:21,424 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:13:21,425 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:13:21,772 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:13:21,773 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:13:21,874 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:13:21,874 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:13:21,874 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:13:22,153 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:13:22,154 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:13:22,326 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'static', 'cdn', 'backend', 'api', 'admin', 'assets'}
2025-11-30 18:13:22,367 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:13:22,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,435 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,435 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,435 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,436 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,436 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,436 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,437 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,437 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,437 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 18:13:22,446 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 18:13:22,448 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 18:13:22,455 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:13:22,461 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:13:22,462 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14428, Rotaci√≥n: True
2025-11-30 18:13:22,468 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:13:22,469 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:13:22,469 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-11-30 18:13:22,469 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14428
2025-11-30 18:13:22,469 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 18:13:22,476 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:13:22,476 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:13:22,476 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 110.8ms
2025-11-30 18:13:22,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 18:13:22,482 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.5ms
2025-11-30 18:13:22,484 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 18:13:22,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,485 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,485 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,486 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,486 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,486 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,487 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,487 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 18:13:22,488 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 18:13:22,488 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 18:13:22,490 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 18:13:22,501 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 18:13:22,501 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 18:13:22,502 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 18.4ms
2025-11-30 18:13:22,505 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 18:13:22,505 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 18:13:22,507 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:13:22,507 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,508 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,508 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,508 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,510 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,510 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,511 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,511 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,511 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,512 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,512 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,512 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,512 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:13:22,513 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:13:22,516 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:13:22,516 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:13:22,518 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:13:22,519 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:13:22,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 12.5ms
2025-11-30 18:13:22,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.1ms
2025-11-30 18:13:22,520 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:13:22,520 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:13:22,521 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:13:22,522 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,522 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,522 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,523 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,523 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,523 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,524 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,524 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,525 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,525 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,525 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:13:22,525 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,525 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,525 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,526 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,526 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,527 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,528 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,528 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,528 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,528 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,528 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,528 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,528 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,528 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:13:22,531 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:13:22,532 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:13:22,540 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:13:22,541 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:13:22,543 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 22.1ms
2025-11-30 18:13:22,545 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:13:22,545 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 25.1ms
2025-11-30 18:13:22,545 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 25.0ms
2025-11-30 18:13:22,545 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,545 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,547 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,547 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,547 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,548 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,548 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,548 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,549 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,549 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,549 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,549 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:13:22,551 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:13:22,551 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:13:22,588 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:13:22,591 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:13:22,592 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,592 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,593 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,593 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,593 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,594 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,594 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,594 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,595 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,595 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,595 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,595 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:13:22,595 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 50.8ms
2025-11-30 18:13:22,597 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:13:22,597 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:13:22,599 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:13:22,600 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:13:22,600 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,601 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,601 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,602 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,603 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,603 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,603 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,603 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:13:22,605 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:13:22,605 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:13:22,606 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 15.7ms
2025-11-30 18:13:22,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:22,606 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:22,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,607 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,608 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:22,608 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:22,608 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:22,608 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,608 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:22,610 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:22,610 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:22,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:22,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:22,611 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:22,611 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:22,611 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:22,611 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:13:22,613 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:13:22,613 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:13:22,614 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:13:22,614 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 14.8ms
2025-11-30 18:13:22,615 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 9.5ms
2025-11-30 18:13:26,675 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:13:26,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:26,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:26,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:26,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:26,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:26,678 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:26,678 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:26,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:26,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:26,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:26,679 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:26,679 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:26,679 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:26,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:26,680 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:26,680 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:26,680 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:26,680 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:13:26,682 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:13:26,682 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:13:26,688 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:13:26,688 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 12.9ms
2025-11-30 18:13:26,690 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:13:26,690 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:26,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:26,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:26,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:26,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:26,692 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:26,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:26,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:26,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:26,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:26,693 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:26,693 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:26,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:26,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:26,694 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:26,694 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:26,694 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:26,694 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:13:26,695 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:13:26,697 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:13:26,698 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:13:26,699 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.8ms
2025-11-30 18:13:29,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:13:29,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:29,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:29,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,868 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:29,868 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:29,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,870 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:29,870 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:29,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:29,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,870 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:29,871 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:29,871 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:29,871 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:13:29,872 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:13:29,874 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:13:29,875 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 8.8ms
2025-11-30 18:13:29,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:29,876 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:29,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,877 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:29,877 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:29,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,879 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:29,879 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:29,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:29,879 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,880 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:29,880 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:29,880 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:29,880 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:13:29,882 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:13:29,883 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:13:29,886 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:13:29,889 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 13.6ms
2025-11-30 18:13:29,889 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:13:29,890 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:29,890 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:29,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,891 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:29,892 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:29,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,893 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:29,893 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:29,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:29,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,893 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:29,893 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:29,893 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:29,894 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:13:29,895 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:13:29,898 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:13:29,899 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:29,899 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:29,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,899 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,900 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:29,900 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:29,900 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:29,900 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,900 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:29,901 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:29,901 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:29,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:29,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:29,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:29,902 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:29,902 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:29,902 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:13:29,905 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:13:29,905 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:13:29,907 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:13:29,907 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 18.8ms
2025-11-30 18:13:29,909 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 10.8ms
2025-11-30 18:13:31,148 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:13:31,148 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:31,148 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:31,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:31,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:31,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:31,149 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:31,149 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:31,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:31,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:31,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:31,152 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:31,152 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:31,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:31,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:31,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:31,152 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:31,152 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:31,152 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:13:31,154 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:13:31,154 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:13:35,297 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:13:35,297 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:13:35,305 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:13:35,305 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:13:35,331 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:13:35,336 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:13:35,337 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 4189.9ms
2025-11-30 18:13:35,340 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:13:35,340 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:35,340 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:35,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:35,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:35,341 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:35,342 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:35,342 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:35,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:35,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:35,342 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:35,343 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:35,343 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:35,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:35,343 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:35,344 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:35,344 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:35,344 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:35,344 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:13:35,347 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:13:35,347 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:13:35,347 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:13:35,348 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:13:35,349 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:13:35,350 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.0ms
2025-11-30 18:13:39,032 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:13:39,033 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:39,033 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:39,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:39,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:39,033 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:39,034 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:39,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:39,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:39,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:39,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:39,035 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:39,036 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:39,036 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:39,037 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:39,037 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:39,037 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:39,037 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:39,037 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:13:39,042 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1016
2025-11-30 18:13:39,044 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticaci√≥n con ID 1016 no encontrado.
2025-11-30 18:13:39,045 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 12.3ms
2025-11-30 18:13:48,574 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/logout/
2025-11-30 18:13:48,575 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/logout/ 200 0.5ms
2025-11-30 18:13:48,577 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-11-30 18:13:48,578 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:13:48,578 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:13:48,578 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:48,578 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:48,578 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:48,579 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:13:48,579 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:13:48,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:13:48,579 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:48,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:13:48,580 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:13:48,580 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:13:48,580 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:13:48,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:13:48,581 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:13:48,581 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:13:48,581 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:13:48,581 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/logout/
2025-11-30 18:13:48,583 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:13:48,583 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:13:48,584 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 1, Usuario: 1 (superadmin)
2025-11-30 18:13:48,588 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:13:48,588 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:13:48,589 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 11.3ms
2025-11-30 18:13:55,511 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:13:55,511 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:13:55,511 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:13:55,511 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:13:55,511 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:13:55,512 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:13:57,617 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:13:57,619 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:13:57,619 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:13:57,619 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:13:57,619 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:13:57,619 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:13:57,888 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:13:57,888 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:13:57,959 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:13:57,959 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:13:57,959 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:13:58,151 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:13:58,152 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:13:58,259 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'backend', 'static', 'cdn', 'assets', 'api', 'www', 'admin'}
2025-11-30 18:14:04,956 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:14:04,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:04,957 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:04,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:04,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:04,957 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:05,027 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:05,027 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:05,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:05,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:05,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:05,030 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:05,030 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:05,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:05,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:05,030 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:05,030 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:05,030 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:05,031 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 18:14:05,033 - app.core.auth - WARNING - [REFRESH] No se proporcion√≥ refresh token. Cliente: web
2025-11-30 18:14:05,033 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 77.4ms
2025-11-30 18:14:05,111 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:14:05,111 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.7ms
2025-11-30 18:14:05,112 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:14:05,113 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.7ms
2025-11-30 18:14:05,114 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:14:05,114 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:05,115 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-11-30 18:14:05,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-11-30 18:14:05,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:05,115 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-11-30 18:14:05,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-11-30 18:14:05,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:05,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-11-30 18:14:05,150 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-11-30 18:14:09,298 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:14:09,298 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:14:09,326 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-11-30 18:14:09,326 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-11-30 18:14:09,326 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-11-30 18:14:09,328 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:14:09,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:09,329 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-11-30 18:14:09,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-11-30 18:14:09,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:09,329 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-11-30 18:14:09,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-11-30 18:14:09,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:09,331 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-11-30 18:14:09,332 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-11-30 18:14:09,333 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-11-30 18:14:09,333 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-11-30 18:14:09,333 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-11-30 18:14:09,334 - app.core.auth - WARNING - [REFRESH] No se proporcion√≥ refresh token. Cliente: web
2025-11-30 18:14:09,335 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 4220.0ms
2025-11-30 18:14:09,335 - app.core.auth - WARNING - [REFRESH] No se proporcion√≥ refresh token. Cliente: web
2025-11-30 18:14:09,336 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 7.8ms
2025-11-30 18:14:11,992 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-11-30 18:14:11,993 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-11-30 18:14:11,994 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-11-30 18:14:11,994 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:11,995 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:11,995 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:11,995 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:11,995 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:11,997 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:11,997 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:11,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:11,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:11,997 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:11,998 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:11,998 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:11,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:11,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:11,998 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:11,998 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:11,998 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:11,998 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-11-30 18:14:12,010 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-11-30 18:14:12,011 - app.core.auth - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-11-30 18:14:12,011 - app.core.auth - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-11-30 18:14:12,256 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:14:12,256 - app.core.auth - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=1, access_level=5, user_type=super_admin
2025-11-30 18:14:12,257 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=1
2025-11-30 18:14:12,257 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:14:12,266 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:14:12,266 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14429, Rotaci√≥n: False
2025-11-30 18:14:12,266 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14429
2025-11-30 18:14:12,266 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 1
2025-11-30 18:14:12,277 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:14:12,278 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:14:12,278 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 284.3ms
2025-11-30 18:14:12,287 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:14:12,287 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:12,287 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:12,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:12,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,288 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:12,288 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:12,290 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:12,290 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:12,290 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,290 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:12,291 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:12,291 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:12,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:12,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:12,292 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:12,292 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:12,292 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:14:12,295 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:14:12,299 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:14:12,299 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:14:12,302 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:14:12,303 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 16.0ms
2025-11-30 18:14:12,305 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:14:12,306 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:12,306 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:12,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:12,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:12,307 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:12,307 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:12,308 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:12,308 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,308 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:12,310 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:12,310 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:12,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:12,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:12,311 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:12,311 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:12,311 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:14:12,315 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:14:12,316 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:14:12,363 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:14:12,364 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 58.4ms
2025-11-30 18:14:12,365 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:14:12,365 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:12,365 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:12,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:12,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:12,367 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:12,367 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:12,367 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:12,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:12,368 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:12,369 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:12,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:12,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:12,369 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:12,369 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:12,369 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:12,369 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:14:12,371 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:14:12,371 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:14:12,372 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:14:12,373 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 7.3ms
2025-11-30 18:14:26,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:14:26,734 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:26,734 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:26,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:26,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:26,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:26,735 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:26,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:26,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:26,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:26,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:26,736 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:26,736 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:26,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:26,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:26,737 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:26,737 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:26,737 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:26,737 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:14:26,740 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:14:26,740 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:14:26,744 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:14:26,746 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 13.4ms
2025-11-30 18:14:26,747 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:14:26,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:26,748 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:26,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:26,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:26,748 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:26,748 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:26,750 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:26,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:26,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:26,750 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:26,750 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:26,751 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:26,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:26,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:26,751 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:26,751 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:26,751 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:26,751 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:14:26,753 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:14:26,754 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:14:26,755 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:14:26,756 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 8.0ms
2025-11-30 18:14:29,588 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:14:29,589 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:29,589 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:29,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,590 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:29,590 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:29,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,590 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,591 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,591 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:29,591 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:29,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:29,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,592 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:29,592 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:29,592 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:29,592 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:14:29,596 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:14:29,598 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:14:29,599 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 11.3ms
2025-11-30 18:14:29,599 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:29,599 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:29,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,602 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:29,602 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:29,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,603 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:29,603 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:29,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:29,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,603 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:29,603 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:29,603 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:29,604 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:14:29,606 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:14:29,606 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:14:29,614 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:14:29,615 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 16.7ms
2025-11-30 18:14:29,615 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:14:29,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:29,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:29,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,617 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:29,617 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:29,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,618 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:29,618 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:29,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:29,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:29,618 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:29,618 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:29,620 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:14:29,621 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:14:29,622 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:14:29,623 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:29,623 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:29,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,623 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,624 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:29,624 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:29,624 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:29,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:29,625 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:29,625 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:29,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:29,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:29,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:29,626 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:29,626 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:29,626 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:14:29,629 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:14:29,629 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:14:29,631 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:14:29,632 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 15.8ms
2025-11-30 18:14:29,632 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 10.0ms
2025-11-30 18:14:31,128 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:14:31,130 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:31,130 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:31,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:31,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:31,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:31,132 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:31,132 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:31,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:31,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:31,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:31,133 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:31,133 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:31,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:31,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:31,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:31,134 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:31,134 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:31,134 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:14:31,135 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:14:31,136 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:14:31,136 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:14:31,137 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,180 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,182 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,192 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,193 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,195 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:14:31,196 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 66.9ms
2025-11-30 18:14:31,199 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:14:31,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:31,199 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:31,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:31,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:31,199 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:31,200 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:31,200 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:31,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:31,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:31,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:31,201 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:31,201 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:31,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:31,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:31,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:31,202 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:31,202 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:31,202 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:14:31,204 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:14:31,204 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:14:31,204 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,205 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,206 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,208 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,209 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:31,210 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:14:31,211 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.7ms
2025-11-30 18:14:33,888 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:14:33,888 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:14:33,888 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:33,888 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:33,888 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:33,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:33,890 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:33,891 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:33,891 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:33,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:33,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:33,891 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:33,892 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:33,892 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:33,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:33,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:33,892 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:33,892 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:33,893 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:33,893 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:14:33,895 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:14:33,902 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:33,902 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:33,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:33,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:33,902 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:33,903 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:33,903 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:33,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:33,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:33,903 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:33,904 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:33,904 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:33,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:33,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:33,904 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:33,905 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:33,905 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:33,905 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:14:33,906 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:14:33,916 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 28.5ms
2025-11-30 18:14:33,917 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 28.4ms
2025-11-30 18:14:36,378 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:14:36,379 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:36,379 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:36,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:36,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:36,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:36,380 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:36,380 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:36,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:36,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:36,381 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:36,381 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:36,382 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:36,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:36,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:36,382 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:36,382 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:36,382 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:36,382 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:14:36,384 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:14:36,384 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:14:36,386 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:36,388 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:36,392 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:14:36,393 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 13.9ms
2025-11-30 18:14:36,394 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:14:36,395 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:36,395 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:36,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:36,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:36,395 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:36,396 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:36,396 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:36,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:36,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:36,396 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:36,397 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:36,397 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:36,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:36,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:36,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:36,398 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:36,398 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:36,398 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:14:36,400 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:14:36,400 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:14:36,401 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:36,402 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:14:36,405 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 15, P√°gina: 1
2025-11-30 18:14:36,405 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.9ms
2025-11-30 18:14:37,648 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:14:37,648 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:14:37,648 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:14:37,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:37,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:37,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:37,650 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:14:37,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:14:37,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:14:37,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:37,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:14:37,652 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:14:37,652 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:14:37,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:14:37,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:14:37,652 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:14:37,652 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:14:37,652 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:14:37,652 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:14:37,654 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1016
2025-11-30 18:14:37,656 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticaci√≥n con ID 1016 no encontrado.
2025-11-30 18:14:37,656 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 8.2ms
2025-11-30 18:15:53,345 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:15:53,346 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:15:53,346 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:15:53,346 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:15:53,346 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:15:53,346 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:15:53,375 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:15:53,375 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:15:53,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:15:53,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:15:53,376 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:15:53,377 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:15:53,377 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:15:53,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:15:53,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:15:53,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:15:53,377 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:15:53,377 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:15:53,377 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:15:53,393 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1016
2025-11-30 18:15:53,398 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticaci√≥n con ID 1016 no encontrado.
2025-11-30 18:15:53,401 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 55.2ms
2025-11-30 18:16:03,437 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:16:03,438 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/ 200 0.5ms
2025-11-30 18:16:03,440 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:16:03,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:03,440 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:03,440 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:03,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:03,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:03,442 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:03,442 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:03,442 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:03,442 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:03,442 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:03,443 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:03,443 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:03,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:03,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:03,444 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:03,444 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:03,444 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:03,444 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:16:03,446 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1004
2025-11-30 18:16:03,451 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1004/ 200 11.1ms
2025-11-30 18:16:13,064 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1003/
2025-11-30 18:16:13,065 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1003/ 200 0.5ms
2025-11-30 18:16:13,067 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1003/
2025-11-30 18:16:13,067 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:13,067 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:13,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:13,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:13,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:13,075 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:13,075 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:13,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:13,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:13,075 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:13,076 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:13,076 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:13,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:13,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:13,077 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:13,077 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:13,077 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:13,077 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1003/
2025-11-30 18:16:13,079 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1003
2025-11-30 18:16:13,080 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1003/ 200 13.5ms
2025-11-30 18:16:16,034 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:16:16,034 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:16,035 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:16,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:16,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:16,035 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:16,040 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:16,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:16,040 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:16,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:16,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:16,042 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:16,042 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:16,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:16,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:16,042 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:16,042 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:16,042 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:16,043 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:16:16,046 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1004
2025-11-30 18:16:16,053 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1004/ 200 19.0ms
2025-11-30 18:16:20,496 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1015/
2025-11-30 18:16:20,498 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1015/ 200 0.5ms
2025-11-30 18:16:20,499 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1015/
2025-11-30 18:16:20,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:20,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:20,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:20,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:20,499 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:20,503 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:20,503 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:20,503 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:20,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:20,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:20,505 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:20,505 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:20,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:20,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:20,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:20,505 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:20,506 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:20,506 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1015/
2025-11-30 18:16:20,509 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1015
2025-11-30 18:16:20,510 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1015: Log de autenticaci√≥n con ID 1015 no encontrado.
2025-11-30 18:16:20,511 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1015/ 404 12.0ms
2025-11-30 18:16:24,659 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1012/
2025-11-30 18:16:24,659 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1012/ 200 0.5ms
2025-11-30 18:16:24,661 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1012/
2025-11-30 18:16:24,662 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:24,662 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:24,662 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:24,662 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:24,662 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:24,663 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:24,663 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:24,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:24,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:24,664 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:24,664 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:24,664 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:24,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:24,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:24,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:24,665 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:24,665 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:24,665 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1012/
2025-11-30 18:16:24,667 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1012
2025-11-30 18:16:24,667 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1012: Log de autenticaci√≥n con ID 1012 no encontrado.
2025-11-30 18:16:24,669 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1012/ 404 7.7ms
2025-11-30 18:16:30,445 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:16:30,446 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1008/ 200 0.5ms
2025-11-30 18:16:30,448 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:16:30,448 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:30,449 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:30,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:30,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:30,449 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:30,450 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:30,451 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:30,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:30,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:30,451 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:30,452 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:30,452 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:30,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:30,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:30,452 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:30,452 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:30,453 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:30,453 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:16:30,454 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1008
2025-11-30 18:16:30,459 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1008/ 200 10.9ms
2025-11-30 18:16:38,869 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1011/
2025-11-30 18:16:38,869 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1011/ 200 0.4ms
2025-11-30 18:16:38,871 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1011/
2025-11-30 18:16:38,871 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:38,871 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:38,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:38,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:38,873 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:38,874 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:38,874 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:38,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:38,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:38,875 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:38,877 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:38,877 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:38,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:38,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:38,877 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:38,877 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:38,878 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:38,878 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1011/
2025-11-30 18:16:38,880 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1011
2025-11-30 18:16:38,881 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1011: Log de autenticaci√≥n con ID 1011 no encontrado.
2025-11-30 18:16:38,881 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1011/ 404 10.3ms
2025-11-30 18:16:42,007 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1011/
2025-11-30 18:16:42,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:42,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:42,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:42,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:42,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:42,009 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:42,009 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:42,009 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:42,010 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:42,010 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:42,010 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:42,011 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:42,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:42,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:42,011 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:42,011 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:42,011 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:42,012 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1011/
2025-11-30 18:16:42,013 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1011
2025-11-30 18:16:42,014 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1011: Log de autenticaci√≥n con ID 1011 no encontrado.
2025-11-30 18:16:42,015 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1011/ 404 7.8ms
2025-11-30 18:16:45,805 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:16:45,805 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1010/ 200 0.5ms
2025-11-30 18:16:45,807 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:16:45,807 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:45,807 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:45,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:45,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:45,807 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:45,808 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:45,808 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:45,808 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:45,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:45,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:45,809 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:45,809 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:45,809 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:45,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:45,811 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:45,811 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:45,811 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:45,811 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:16:45,813 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1010
2025-11-30 18:16:45,814 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1010: Log de autenticaci√≥n con ID 1010 no encontrado.
2025-11-30 18:16:45,814 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1010/ 404 7.3ms
2025-11-30 18:16:49,364 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:16:49,364 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:49,364 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:49,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:49,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:49,365 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:49,365 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:49,365 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:49,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:49,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:49,366 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:49,368 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:49,368 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:49,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:49,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:49,368 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:49,368 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:49,368 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:49,368 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:16:49,370 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1008
2025-11-30 18:16:49,372 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1008/ 200 7.9ms
2025-11-30 18:16:51,664 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1007/
2025-11-30 18:16:51,664 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1007/ 200 0.4ms
2025-11-30 18:16:51,665 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1007/
2025-11-30 18:16:51,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:16:51,666 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:16:51,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:51,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:51,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:51,667 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:16:51,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:16:51,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:16:51,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:51,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:16:51,668 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:16:51,668 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:16:51,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:16:51,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:16:51,669 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:16:51,669 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:16:51,669 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:16:51,669 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1007/
2025-11-30 18:16:51,671 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1007
2025-11-30 18:16:51,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1007/ 200 8.3ms
2025-11-30 18:18:23,147 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:18:23,147 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1016/ 200 0.5ms
2025-11-30 18:18:23,150 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:18:23,150 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:18:23,150 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:18:23,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:18:23,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:18:23,150 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:18:23,162 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:18:23,162 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:18:23,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:18:23,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:18:23,162 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:18:23,163 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:18:23,163 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:18:23,163 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:18:23,164 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:18:23,164 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:18:23,164 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:18:23,164 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:18:23,164 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1016/
2025-11-30 18:18:23,167 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1016
2025-11-30 18:18:23,169 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1016: Log de autenticaci√≥n con ID 1016 no encontrado.
2025-11-30 18:18:23,169 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1016/ 404 19.1ms
2025-11-30 18:18:48,794 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/logout/
2025-11-30 18:18:48,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:18:48,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:18:48,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:18:48,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:18:48,796 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:18:48,813 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:18:48,813 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:18:48,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:18:48,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:18:48,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:18:48,815 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:18:48,815 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:18:48,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:18:48,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:18:48,815 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:18:48,815 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:18:48,815 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:18:48,816 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/logout/
2025-11-30 18:18:48,829 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:18:48,829 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:18:48,829 - app.modules.auth.presentation.endpoints - INFO - [LOGOUT-WEB] Token no encontrado en BD (ya expirado/revocado) - Cliente: 1, Usuario: 1 (superadmin)
2025-11-30 18:18:48,839 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:18:48,840 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=logout, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:18:48,840 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/logout/ 200 45.3ms
2025-11-30 18:19:08,502 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:19:08,503 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.4ms
2025-11-30 18:19:08,505 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:19:08,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:08,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:08,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:08,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:08,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:08,507 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:08,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:08,509 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:08,510 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:08,510 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:08,510 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/refresh/
2025-11-30 18:19:08,511 - app.core.auth - WARNING - [REFRESH] No se proporcion√≥ refresh token. Cliente: web
2025-11-30 18:19:08,513 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 8.0ms
2025-11-30 18:19:14,738 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/login/
2025-11-30 18:19:14,738 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/login/ 200 0.5ms
2025-11-30 18:19:14,740 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-11-30 18:19:14,740 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:14,740 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:14,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:14,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:14,740 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:14,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:14,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:14,741 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:14,742 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:14,742 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:14,742 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/login/
2025-11-30 18:19:14,745 - app.modules.auth.presentation.endpoints - INFO - Cliente 2 resuelto y validado para login.
2025-11-30 18:19:14,747 - app.core.auth - INFO - [AUTH] Intento de login: username='admin_acme', cliente_id_destino=2
2025-11-30 18:19:14,747 - app.core.auth - INFO - [AUTH] Usuario regular. Buscando en BD del cliente_id=2
2025-11-30 18:19:14,747 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:14,963 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:14,969 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:14,977 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-11-30 18:19:14,977 - app.core.auth - INFO - [AUTH] Login exitoso: username='admin_acme', usuario_id=1, cliente_origen=2, cliente_destino=N/A, access_level=4, user_type=tenant_admin
2025-11-30 18:19:14,977 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:14,980 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:14,980 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=4, super_admin=False, type=tenant_admin
2025-11-30 18:19:14,982 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:14,988 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:19:14,988 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 2, Usuario 1, Tipo: web, Token ID: 2042, Rotaci√≥n: False
2025-11-30 18:19:14,990 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 2042
2025-11-30 18:19:14,990 - app.modules.auth.presentation.endpoints - INFO - Usuario admin_acme autenticado exitosamente (WEB) para cliente 2
2025-11-30 18:19:14,990 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:14,994 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:19:14,995 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=2, usuario_id=1, exito=True
2025-11-30 18:19:14,995 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 255.7ms
2025-11-30 18:19:15,003 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 18:19:15,004 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 18:19:15,006 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:19:15,006 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:15,007 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:15,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,007 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,008 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,010 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:15,010 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:15,010 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/clientes/tenant/branding
2025-11-30 18:19:15,011 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:15,028 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:15,031 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:19:15,032 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 500 26.0ms
2025-11-30 18:19:15,032 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.2ms
2025-11-30 18:19:15,033 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-11-30 18:19:15,033 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/areas/
2025-11-30 18:19:15,033 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:19:15,034 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.8ms
2025-11-30 18:19:15,034 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/areas/ 200 1.7ms
2025-11-30 18:19:15,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.7ms
2025-11-30 18:19:15,040 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 18:19:15,040 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:19:15,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:15,040 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:15,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,041 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,042 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:15,042 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:15,042 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 18:19:15,043 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:15,043 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:15,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,043 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,045 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,046 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:15,046 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:15,046 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-11-30 18:19:15,047 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:15,048 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:15,049 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:15,050 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:15,051 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 12.2ms
2025-11-30 18:19:15,051 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 12.1ms
2025-11-30 18:19:15,054 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/areas/
2025-11-30 18:19:15,055 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:15,055 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:15,055 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,055 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,055 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,057 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:15,057 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:15,058 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/areas/
2025-11-30 18:19:15,058 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:19:15,058 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:15,060 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:15,061 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:15,061 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:15,061 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,061 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,061 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:15,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:15,062 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:15,063 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:15,063 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:15,063 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/menus/getmenu/
2025-11-30 18:19:15,064 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:15,065 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:15,066 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/areas/ 500 12.1ms
2025-11-30 18:19:15,067 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 500 8.9ms
2025-11-30 18:19:18,456 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-11-30 18:19:18,457 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-11-30 18:19:18,458 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 1.9ms
2025-11-30 18:19:18,458 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/usuarios/
2025-11-30 18:19:18,459 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/all-active/
2025-11-30 18:19:18,460 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 2.9ms
2025-11-30 18:19:18,460 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/usuarios/ 200 2.3ms
2025-11-30 18:19:18,460 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/all-active/ 200 1.6ms
2025-11-30 18:19:18,463 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 18:19:18,464 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 18:19:18,464 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:18,464 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:18,464 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,464 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,465 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,465 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,466 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,466 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:18,467 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:18,467 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 18:19:18,467 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:18,469 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:18,469 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:18,470 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:18,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,470 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,472 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:18,472 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:18,472 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 18:19:18,473 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:18,475 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:18,476 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 500 13.7ms
2025-11-30 18:19:18,476 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 500 13.5ms
2025-11-30 18:19:18,478 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/usuarios/
2025-11-30 18:19:18,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:18,478 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:18,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,478 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,481 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:18,481 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:18,482 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/usuarios/
2025-11-30 18:19:18,482 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/all-active/
2025-11-30 18:19:18,482 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:18,485 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:18,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:18,486 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:18,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,486 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:18,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:18,487 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:18,488 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:18,488 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:18,488 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/all-active/
2025-11-30 18:19:18,488 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:18,489 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:18,490 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/usuarios/ 500 11.8ms
2025-11-30 18:19:18,491 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/all-active/ 500 8.8ms
2025-11-30 18:19:20,141 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-11-30 18:19:20,142 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.9ms
2025-11-30 18:19:20,142 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/roles/
2025-11-30 18:19:20,144 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/roles/ 200 0.8ms
2025-11-30 18:19:20,145 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 18:19:20,145 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:20,146 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:20,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:20,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:20,146 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:20,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:20,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:20,148 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:20,148 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:20,149 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:20,149 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 18:19:20,149 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:20,150 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:20,151 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 500 7.2ms
2025-11-30 18:19:20,154 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/roles/
2025-11-30 18:19:20,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:20,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:19:20,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:20,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:20,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:20,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:19:20,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:20,156 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:19:20,156 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:19:20,157 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:19:20,157 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/roles/
2025-11-30 18:19:20,158 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:20,159 - app.api.deps - ERROR - Error parseando diccionario de rol a RolRead: {'rol_id': 1, 'nombre': 'Administrador', 'descripcion': 'Administrador con acceso completo', 'nivel_acceso': 4, 'codigo_rol': 'ADMIN', 'es_activo': True, 'fecha_creacion': datetime.datetime(2025, 11, 16, 10, 28, 49, 500000, tzinfo=datetime.timezone.utc), 'cliente_id': 2, 'es_eliminado': False}. Error: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\base_multi_tenant_fastapi\app\api\deps.py", line 399, in get_current_active_user
    roles_list.append(RolRead(**rol_dict_clean))
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\base_multi_tenant_fastapi\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for RolRead
  Value error, Un rol con codigo_rol (rol de sistema) solo puede pertenecer al cliente SUPER ADMIN (cliente_id=1). Para otros clientes, cree un rol de cliente (codigo_rol=NULL). [type=value_error, input_value={'rol_id': 1, 'nombre': '..., 'es_eliminado': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
2025-11-30 18:19:20,160 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/roles/ 500 7.2ms
2025-11-30 18:19:37,831 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-11-30 18:19:37,833 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:37,833 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:37,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:37,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:37,833 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:37,850 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:37,850 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:37,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:37,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:37,850 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:37,850 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:37,852 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:37,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:37,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:37,852 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:37,852 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:37,852 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:37,852 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-11-30 18:19:37,855 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-11-30 18:19:37,856 - app.core.auth - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-11-30 18:19:37,856 - app.core.auth - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-11-30 18:19:38,065 - app.core.auth - WARNING - [AUTH] Contrase√±a incorrecta para: username='superadmin', usuario_id=1
2025-11-30 18:19:38,075 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:19:38,075 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_failed, cliente_id=1, usuario_id=None, exito=False
2025-11-30 18:19:38,076 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 401 243.7ms
2025-11-30 18:19:43,130 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/login/
2025-11-30 18:19:43,131 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:43,131 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:43,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,132 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,133 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:43,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:43,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,134 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:43,135 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:43,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:43,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,135 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:43,135 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:43,135 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:43,136 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/login/
2025-11-30 18:19:43,138 - app.modules.auth.presentation.endpoints - INFO - Cliente 1 resuelto y validado para login.
2025-11-30 18:19:43,138 - app.core.auth - INFO - [AUTH] Intento de login: username='superadmin', cliente_id_destino=1
2025-11-30 18:19:43,138 - app.core.auth - INFO - [AUTH] SUPERADMIN detectado. Buscando en BD ADMIN (cliente_id=1), accediendo a cliente_id=1
2025-11-30 18:19:43,354 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:19:43,354 - app.core.auth - INFO - [AUTH] Login exitoso: username='superadmin', usuario_id=1, cliente_origen=1, cliente_destino=1, access_level=5, user_type=super_admin
2025-11-30 18:19:43,354 - app.modules.auth.presentation.endpoints - INFO - [LOGIN] Superadmin accediendo a cliente_id=1
2025-11-30 18:19:43,355 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:19:43,362 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:19:43,362 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14430, Rotaci√≥n: False
2025-11-30 18:19:43,363 - app.modules.auth.presentation.endpoints - INFO - [LOGIN-WEB] Token almacenado - ID: 14430
2025-11-30 18:19:43,363 - app.modules.auth.presentation.endpoints - INFO - Usuario superadmin autenticado exitosamente (WEB) para cliente 1
2025-11-30 18:19:43,367 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:19:43,367 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=login_success, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:19:43,368 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/login/ 200 238.1ms
2025-11-30 18:19:43,376 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:19:43,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:43,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:43,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,378 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:43,378 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:43,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,379 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:43,379 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:43,379 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:43,380 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,380 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:43,380 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:43,380 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:43,380 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:19:43,384 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:19:43,384 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:19:43,386 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:19:43,387 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 10.4ms
2025-11-30 18:19:43,388 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:19:43,389 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:43,389 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:43,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,389 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,391 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:43,391 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:43,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,392 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,392 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:43,393 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:43,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:43,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,393 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:43,393 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:43,393 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:43,394 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:19:43,396 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:19:43,396 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:19:43,438 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:19:43,439 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 51.7ms
2025-11-30 18:19:43,441 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:19:43,441 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:43,441 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:43,441 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,443 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,444 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:43,444 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:43,444 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:43,444 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,444 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:43,445 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:43,445 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:43,445 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:43,445 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:43,446 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:43,446 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:43,446 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:43,446 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:19:43,448 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:19:43,448 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:19:43,449 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:19:43,450 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 8.7ms
2025-11-30 18:19:44,900 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:19:44,902 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.8ms
2025-11-30 18:19:44,903 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:19:44,904 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.3ms
2025-11-30 18:19:44,904 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:19:44,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:44,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:44,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:44,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:44,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:44,907 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:44,909 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:44,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:44,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:44,909 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:44,910 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:44,910 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:44,910 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:44,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:44,911 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:44,911 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:44,911 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:44,911 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:19:44,913 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:19:44,913 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:19:44,919 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:19:44,920 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 16.2ms
2025-11-30 18:19:44,922 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:19:44,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:44,923 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:44,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:44,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:44,923 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:44,924 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:44,924 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:44,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:44,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:44,925 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:44,925 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:44,926 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:44,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:44,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:44,926 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:44,926 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:44,926 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:44,928 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:19:44,929 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:19:44,930 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:19:44,932 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:19:44,933 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 10.2ms
2025-11-30 18:19:46,633 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:19:46,634 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 0.8ms
2025-11-30 18:19:46,635 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:19:46,636 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.1ms
2025-11-30 18:19:46,636 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:19:46,637 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:19:46,638 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:19:46,638 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 2.1ms
2025-11-30 18:19:46,638 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.1ms
2025-11-30 18:19:46,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:46,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:46,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,641 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:46,641 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:46,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,642 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:46,642 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:46,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:46,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,643 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:46,643 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:46,643 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:46,643 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:19:46,647 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:19:46,648 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:19:46,649 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:46,649 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:46,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,650 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:46,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:46,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,651 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:46,651 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:46,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:46,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,651 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:46,652 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:46,652 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:46,652 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:19:46,654 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:19:46,654 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:19:46,662 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:19:46,662 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 24.7ms
2025-11-30 18:19:46,663 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 15.9ms
2025-11-30 18:19:46,665 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:19:46,665 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:46,665 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:46,665 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,666 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,666 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:46,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:46,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,667 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,668 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:46,668 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:46,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:46,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:46,668 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:46,668 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:46,668 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:19:46,671 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:19:46,672 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:19:46,673 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:46,673 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:46,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,673 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,674 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:46,674 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:46,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:46,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,674 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:46,675 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:46,675 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:46,675 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:46,675 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:46,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:46,676 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:46,676 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:46,676 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:19:46,678 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:19:46,678 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:19:46,682 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:19:46,682 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 16.9ms
2025-11-30 18:19:46,683 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 10.1ms
2025-11-30 18:19:48,148 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:19:48,149 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:19:48,149 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.8ms
2025-11-30 18:19:48,149 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-11-30 18:19:48,150 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:19:48,150 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:48,152 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:48,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:48,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:48,152 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:48,153 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:48,153 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:48,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:48,153 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:48,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:48,154 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:48,154 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:48,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:48,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:48,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:48,155 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:48,155 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:48,155 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:19:48,157 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:19:48,157 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:19:48,158 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:48,166 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:48,170 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:19:48,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 20.6ms
2025-11-30 18:19:48,173 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:19:48,173 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:48,173 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:48,174 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:48,174 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:48,174 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:48,175 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:48,175 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:48,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:48,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:48,175 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:48,176 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:48,176 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:48,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:48,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:48,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:48,177 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:48,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:48,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:19:48,180 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:19:48,180 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:19:48,181 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:48,182 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:19:48,183 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:19:48,185 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.2ms
2025-11-30 18:19:55,596 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:19:55,597 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/ 200 0.5ms
2025-11-30 18:19:55,598 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:19:55,599 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:19:55,599 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:19:55,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:55,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:55,599 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:55,600 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando origin
2025-11-30 18:19:55,600 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'referer': platform.app.local:5173
2025-11-30 18:19:55,600 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:19:55,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:55,601 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:19:55,601 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] Subdominio 'platform' no existe en BD, rechazando referer
2025-11-30 18:19:55,602 - app.core.tenant.middleware - WARNING - [HOST_DETECTION] No se pudo extraer tenant real de origin/referer, usando cliente por defecto (SYSTEM)
2025-11-30 18:19:55,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'backend.app.local'
2025-11-30 18:19:55,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:19:55,602 - app.core.tenant.middleware - INFO - [SUBDOMAIN] 'backend' es infraestructura, ignorando (usando SYSTEM)
2025-11-30 18:19:55,602 - app.core.tenant.middleware - WARNING - [TENANT] Sin subdominio en Host: backend.app.local:8000. Usando Cliente ID por defecto: 1 (SYSTEM)
2025-11-30 18:19:55,602 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:19:55,602 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:19:55,604 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:19:55,605 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:19:55,606 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 8.0ms
2025-11-30 18:23:57,201 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:23:57,201 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:23:57,201 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:23:57,202 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:23:57,202 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:23:57,202 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:23:58,179 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:23:58,181 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:23:58,181 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:23:58,182 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:23:58,182 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:23:58,182 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:23:58,506 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:23:58,506 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:23:58,576 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:23:58,576 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:23:58,576 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:23:58,839 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:23:58,839 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:23:58,976 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'assets', 'backend', 'api', 'static', 'www', 'cdn'}
2025-11-30 18:24:43,698 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:24:43,698 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:24:43,698 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:24:43,698 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:24:43,699 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:24:43,699 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:24:44,495 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:24:44,496 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:24:44,496 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:24:44,496 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:24:44,497 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:24:44,497 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:24:44,772 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:24:44,772 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:24:44,839 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:24:44,839 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:24:44,839 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:24:45,022 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:24:45,023 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:24:45,130 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'backend', 'api', 'static', 'cdn', 'www', 'assets'}
2025-11-30 18:24:49,132 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:24:49,132 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:24:49,133 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:24:49,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:49,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:49,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:49,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:49,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:49,134 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:49,134 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:24:49,134 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:24:49,134 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:24:49,200 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:24:49,206 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:24:49,206 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:24:49,215 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:24:49,215 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 83.4ms
2025-11-30 18:24:49,217 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:24:49,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:24:49,217 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:24:49,217 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:49,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:49,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:49,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:49,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:49,218 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:49,218 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:24:49,218 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:24:49,219 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:24:49,220 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:24:49,221 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:24:49,223 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:24:49,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.6ms
2025-11-30 18:24:54,667 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:24:54,667 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:24:54,668 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:24:54,672 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:24:54,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 8.0ms
2025-11-30 18:24:54,675 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:24:54,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:24:54,676 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:24:54,676 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,678 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:24:54,678 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:24:54,678 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:24:54,681 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:24:54,681 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:24:54,690 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:24:54,691 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:24:54,691 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 16.1ms
2025-11-30 18:24:54,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:24:54,692 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:24:54,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,693 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,693 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:24:54,693 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:24:54,693 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:24:54,696 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:24:54,697 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:24:54,699 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:24:54,700 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:24:54,700 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:24:54,700 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:24:54,701 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 8.8ms
2025-11-30 18:24:54,703 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:24:54,703 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:24:54,706 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:24:54,708 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 9.8ms
2025-11-30 18:25:03,600 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:25:03,601 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.7ms
2025-11-30 18:25:03,601 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:25:03,602 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.5ms
2025-11-30 18:25:03,603 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:25:03,603 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:03,603 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:03,604 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:03,605 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:25:03,613 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:25:03,613 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:25:03,623 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:25:03,624 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 20.4ms
2025-11-30 18:25:03,625 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:25:03,625 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:03,625 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:03,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:03,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:03,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:03,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:03,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:03,626 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:03,626 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:03,628 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:03,628 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:25:03,631 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:25:03,631 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:25:03,632 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:25:03,633 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 7.7ms
2025-11-30 18:25:07,751 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 18:25:07,752 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 0.9ms
2025-11-30 18:25:07,752 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 18:25:07,753 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 18:25:07,754 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 18:25:07,754 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.6ms
2025-11-30 18:25:07,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.3ms
2025-11-30 18:25:07,755 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.2ms
2025-11-30 18:25:07,755 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:25:07,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:07,756 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:07,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,756 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,757 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,757 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:07,757 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:07,757 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:25:07,770 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:25:07,770 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:25:07,775 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:25:07,777 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:25:07,777 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 22.0ms
2025-11-30 18:25:07,777 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:07,777 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:07,777 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:07,778 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:25:07,781 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:25:07,781 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:25:07,784 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:25:07,785 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:25:07,785 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 8.9ms
2025-11-30 18:25:07,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:25:07,787 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:07,787 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:07,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,787 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,788 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:07,788 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:07,788 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:25:07,791 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:25:07,791 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:25:07,792 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:25:07,793 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:25:07,793 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 6.0ms
2025-11-30 18:25:07,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:07,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:07,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:07,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:07,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:07,794 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:07,795 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:07,795 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:25:07,796 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:25:07,796 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:25:07,797 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:25:07,798 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:25:07,801 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.8ms
2025-11-30 18:25:31,760 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:25:31,761 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.8ms
2025-11-30 18:25:31,761 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:25:31,761 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.8ms
2025-11-30 18:25:31,764 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:25:31,764 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:31,764 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:31,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:31,764 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:31,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:31,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:31,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:31,765 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:31,765 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:31,765 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:31,765 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:25:31,767 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:25:31,767 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:25:35,877 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:25:35,878 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:25:35,882 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:25:35,882 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,930 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,933 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,947 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,948 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,949 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:25:35,950 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4187.0ms
2025-11-30 18:25:35,953 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:25:35,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:35,953 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:35,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:35,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:35,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:35,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:35,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:35,954 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:35,954 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:35,955 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:35,955 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:25:35,957 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:25:35,957 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:25:35,957 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,958 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,960 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,962 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,964 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:35,966 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:25:35,966 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.9ms
2025-11-30 18:25:40,345 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:25:40,346 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.8ms
2025-11-30 18:25:40,347 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:25:40,347 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 0.8ms
2025-11-30 18:25:40,349 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:25:40,350 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:40,350 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:40,350 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:40,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:40,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:40,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:40,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:40,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:40,352 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:40,352 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:40,352 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:25:40,355 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:25:40,363 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:25:40,363 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 14.6ms
2025-11-30 18:25:40,364 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:40,364 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:40,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:40,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:40,364 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:40,365 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:40,365 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:40,365 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:40,365 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:40,365 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:40,365 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:25:40,369 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:25:40,378 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 14.2ms
2025-11-30 18:25:55,544 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:25:55,545 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:55,545 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:55,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:55,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:55,545 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:55,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:55,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:55,546 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:55,546 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:55,546 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:55,546 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:25:55,548 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:25:55,548 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:25:55,548 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:55,551 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:55,555 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:25:55,557 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.7ms
2025-11-30 18:25:55,558 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:25:55,559 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:55,559 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:55,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:55,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:55,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:55,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:55,559 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:55,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:55,560 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:55,560 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:55,560 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:25:55,562 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:25:55,562 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:25:55,563 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:55,564 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:25:55,566 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:25:55,567 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.2ms
2025-11-30 18:25:58,028 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:25:58,028 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:25:58,028 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:25:58,029 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:25:58,030 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:25:58,032 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:25:58,037 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:25:58,038 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 9.6ms
2025-11-30 18:26:15,982 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:26:15,982 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:26:15,984 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:26:15,984 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:26:15,984 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:26:15,984 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:27:14,555 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:27:14,557 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:27:14,557 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:27:14,558 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:27:14,558 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:27:14,558 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:27:14,916 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:27:14,916 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:27:14,987 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:27:14,987 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:27:14,987 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:27:15,172 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:27:15,173 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:27:15,282 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'cdn', 'admin', 'www', 'api', 'backend', 'assets'}
2025-11-30 18:27:22,346 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:27:22,347 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.9ms
2025-11-30 18:27:22,350 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:27:22,350 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:22,351 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:22,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:22,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:22,351 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:22,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:22,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:22,352 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:22,352 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:22,352 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:22,353 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 18:27:22,439 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 18:27:22,443 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 18:27:22,449 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:27:22,458 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:27:22,458 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14431, Rotaci√≥n: True
2025-11-30 18:27:22,464 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:27:22,465 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:27:22,465 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-11-30 18:27:22,465 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14431
2025-11-30 18:27:22,465 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 18:27:22,475 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:27:22,475 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:27:22,476 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 126.7ms
2025-11-30 18:27:22,481 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 18:27:22,482 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.5ms
2025-11-30 18:27:22,483 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 18:27:22,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:22,484 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:22,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:22,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:22,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:22,484 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:22,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:22,485 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:22,485 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:22,485 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:22,485 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 18:27:22,488 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 18:27:22,488 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 18:27:22,488 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 18:27:22,510 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 18:27:22,511 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 18:27:22,511 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 27.5ms
2025-11-30 18:27:22,515 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 18:27:22,515 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.8ms
2025-11-30 18:27:22,517 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:27:22,519 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:27:22,520 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 2.6ms
2025-11-30 18:27:22,521 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:22,521 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': acme.app.local:5173
2025-11-30 18:27:22,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:27:22,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:22,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:27:22,524 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'acme.app.local'
2025-11-30 18:27:22,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:22,526 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'acme'
2025-11-30 18:27:22,526 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='acme', C√≥digo='ACME001', ID=2
2025-11-30 18:27:26,625 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:27:26,625 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:27:26,633 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:27:26,633 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=multi, bd=bd_cliente_acme, servidor=localhost
2025-11-30 18:27:26,634 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=2, db_type=multi, bd=bd_cliente_acme, path=/api/v1/auth/refresh/
2025-11-30 18:27:26,634 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:27:26,637 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 2.8ms
2025-11-30 18:27:26,637 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,638 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:26,640 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:26,640 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:27:26,641 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:27:26,643 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:27:26,644 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:27:26,645 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:27:26,645 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:27:26,645 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:27:26,646 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:27:26,646 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:27:26,646 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:27:26,647 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,647 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:26,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,647 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,648 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:26,649 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:27:26,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,650 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': techcorp.app.local:5173
2025-11-30 18:27:26,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-11-30 18:27:26,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,650 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-11-30 18:27:26,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'techcorp.app.local'
2025-11-30 18:27:26,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,653 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'techcorp'
2025-11-30 18:27:26,653 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='techcorp', C√≥digo='TECH003', ID=4
2025-11-30 18:27:26,654 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 4: single - bd_sistema
2025-11-30 18:27:26,654 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-11-30 18:27:26,654 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=4, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-11-30 18:27:26,656 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:27:26,660 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:27:26,660 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:27:26,667 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:27:26,668 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 21.3ms
2025-11-30 18:27:26,668 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 21.3ms
2025-11-30 18:27:26,668 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:26,704 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 2
2025-11-30 18:27:26,704 - app.core.auth - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-11-30 18:27:26,704 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:26,710 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:27:26,710 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-11-30 18:27:26,711 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:27:26,712 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 74.5ms
2025-11-30 18:27:26,712 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,712 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': global.app.local:5173
2025-11-30 18:27:26,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-11-30 18:27:26,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,713 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-11-30 18:27:26,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'global.app.local'
2025-11-30 18:27:26,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,714 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'global'
2025-11-30 18:27:26,715 - app.core.tenant.middleware - INFO - [TENANT] Cliente resuelto: Subdominio='global', C√≥digo='GLOBAL004', ID=5
2025-11-30 18:27:26,716 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 5: single - bd_sistema
2025-11-30 18:27:26,716 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_sistema, servidor=localhost
2025-11-30 18:27:26,716 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=5, db_type=single, bd=bd_sistema, path=/api/v1/auth/refresh/
2025-11-30 18:27:26,717 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 71.3ms
2025-11-30 18:27:26,717 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 71.2ms
2025-11-30 18:27:26,717 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 4198.8ms
2025-11-30 18:27:26,721 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 4
2025-11-30 18:27:26,721 - app.core.auth - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-11-30 18:27:26,725 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:27:26,726 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-11-30 18:27:26,727 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:27:26,728 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,728 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:26,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,728 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,729 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,729 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:26,729 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:26,729 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:27:26,731 - app.modules.auth.application.services.refresh_token_service - WARNING - [VALIDATE-TOKEN] Token no encontrado, revocado o expirado - Cliente 5
2025-11-30 18:27:26,731 - app.core.auth - WARNING - [REFRESH] Token JWT v√°lido, pero inactivo/revocado en BD. Usuario: superadmin
2025-11-30 18:27:26,732 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:27:26,732 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_invalid_or_revoked, cliente_id=1, usuario_id=None, exito=False
2025-11-30 18:27:26,735 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:27:26,735 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:27:26,778 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:27:26,780 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:27:26,780 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:27:26,780 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 133.7ms
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:26,781 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:26,782 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:26,783 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:27:26,784 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:27:26,786 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:27:26,786 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:27:26,787 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:27:26,788 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 401 77.2ms
2025-11-30 18:27:26,788 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 61.5ms
2025-11-30 18:27:26,790 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 10.9ms
2025-11-30 18:27:26,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 10.9ms
2025-11-30 18:27:26,793 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:27:26,793 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:26,794 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:26,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:26,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:26,794 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:26,795 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:26,795 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:26,795 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:27:26,797 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:27:26,797 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:27:26,798 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:27:26,799 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 6.3ms
2025-11-30 18:27:28,376 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:27:28,376 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:28,377 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:28,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:28,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:28,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:28,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:28,377 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:28,378 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:28,378 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:28,378 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:28,378 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:27:28,381 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:27:28,381 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:27:28,382 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:28,384 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:28,393 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:27:28,394 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 17.9ms
2025-11-30 18:27:28,396 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:27:28,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:28,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:28,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:28,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:28,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:28,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:28,397 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:28,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:28,398 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:28,398 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:28,398 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:27:28,401 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:27:28,401 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:27:28,403 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:28,404 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:28,406 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:27:28,407 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.7ms
2025-11-30 18:27:34,400 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:27:34,400 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:34,400 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:34,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:34,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:34,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:34,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:34,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:34,401 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:34,401 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:34,401 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:34,402 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:27:34,403 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:27:34,408 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:27:34,408 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 8.9ms
2025-11-30 18:27:58,870 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:27:58,871 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:58,871 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:58,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:58,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:58,871 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:58,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:58,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:58,872 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:58,872 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:58,872 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:58,872 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:27:58,874 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:27:58,874 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:27:58,875 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,879 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,881 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,887 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,889 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,891 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:27:58,892 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 21.3ms
2025-11-30 18:27:58,893 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:27:58,894 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:27:58,894 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:27:58,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:58,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:58,894 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:58,895 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:27:58,895 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:27:58,895 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:27:58,895 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:27:58,895 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:27:58,895 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:27:58,897 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:27:58,897 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:27:58,899 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,899 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,900 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,902 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,903 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:27:58,905 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:27:58,906 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.3ms
2025-11-30 18:28:05,687 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:28:05,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:05,687 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:05,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:05,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:05,687 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:05,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:05,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:05,689 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:05,689 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:05,689 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:05,689 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:28:05,690 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:28:05,691 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:28:05,691 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:05,692 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:05,693 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:28:05,694 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 6.9ms
2025-11-30 18:28:05,696 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:28:05,696 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:05,696 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:05,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:05,696 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:05,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:05,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:05,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:05,698 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:05,698 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:05,699 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:05,699 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:28:05,699 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:28:05,699 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:28:05,701 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:05,702 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:05,703 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:28:05,703 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.5ms
2025-11-30 18:28:09,735 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:28:09,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:09,735 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:09,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:09,735 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:09,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:09,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:09,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:09,736 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:09,736 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:09,736 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:09,736 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:28:09,739 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:28:09,739 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:28:09,740 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,740 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,741 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,742 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,744 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,745 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:28:09,746 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 11.3ms
2025-11-30 18:28:09,747 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:28:09,747 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:09,749 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:09,750 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:09,750 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:28:09,752 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:28:09,752 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:28:09,753 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,754 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,755 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,756 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,757 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:28:09,760 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:28:09,760 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.5ms
2025-11-30 18:28:12,153 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:28:12,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:12,154 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:12,154 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:12,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:12,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:12,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:12,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:12,155 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:12,155 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:12,155 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:12,156 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:28:12,156 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:28:12,160 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:28:12,168 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:12,168 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:12,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:12,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:12,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:12,168 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:12,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:12,169 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:12,169 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:12,169 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:12,169 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:28:12,172 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:28:12,179 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 24.8ms
2025-11-30 18:28:12,179 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 23.0ms
2025-11-30 18:28:38,306 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 18:28:38,306 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 18:28:38,306 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/2/sesiones/ 200 0.8ms
2025-11-30 18:28:38,307 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/2/actividad/ 200 0.6ms
2025-11-30 18:28:38,309 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 18:28:38,310 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:38,310 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:38,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:38,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:38,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:38,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:38,310 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:38,311 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:38,311 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:38,311 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:38,311 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/sesiones/
2025-11-30 18:28:38,311 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/2/actividad/
2025-11-30 18:28:38,328 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 2
2025-11-30 18:28:38,338 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:38,338 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:38,338 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:38,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:38,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:38,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:38,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:38,339 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:38,339 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:38,339 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:38,340 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/2/actividad/
2025-11-30 18:28:38,341 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 2
2025-11-30 18:28:38,348 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/sesiones/ 200 39.1ms
2025-11-30 18:28:38,349 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/2/actividad/ 200 37.9ms
2025-11-30 18:28:51,658 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/3/actividad/
2025-11-30 18:28:51,658 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/3/actividad/ 200 0.7ms
2025-11-30 18:28:51,658 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 18:28:51,660 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/3/sesiones/ 200 1.0ms
2025-11-30 18:28:51,662 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/3/actividad/
2025-11-30 18:28:51,662 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:51,662 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:51,662 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:51,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:51,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:51,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:51,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:51,663 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:51,663 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:51,663 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:51,664 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/3/actividad/
2025-11-30 18:28:51,665 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 3
2025-11-30 18:28:51,668 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 18:28:51,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:28:51,670 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:28:51,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:51,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:51,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:51,670 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:28:51,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:28:51,671 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:28:51,671 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:28:51,671 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:28:51,671 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/3/sesiones/
2025-11-30 18:28:51,673 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 3
2025-11-30 18:28:51,674 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/3/actividad/ 200 12.8ms
2025-11-30 18:28:51,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/3/sesiones/ 200 6.4ms
2025-11-30 18:29:54,820 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:29:54,820 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:29:54,820 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:29:54,820 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:29:54,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:29:54,820 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:29:54,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:29:54,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:29:54,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:29:54,821 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:29:54,822 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:29:54,822 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:29:54,822 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:29:54,822 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:29:54,823 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:29:54,823 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:29:54,823 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:29:54,823 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:29:54,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:29:54,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:29:54,824 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:29:54,824 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:29:54,824 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:29:54,824 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:29:54,839 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:29:54,849 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:29:54,857 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 37.9ms
2025-11-30 18:29:54,858 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 37.8ms
2025-11-30 18:30:08,531 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:30:08,532 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.7ms
2025-11-30 18:30:08,533 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:30:08,533 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.5ms
2025-11-30 18:30:08,535 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:30:08,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:30:08,535 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:30:08,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:30:08,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:30:08,535 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:30:08,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:30:08,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:30:08,536 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:30:08,536 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:30:08,536 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:30:08,536 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:30:08,538 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:30:08,538 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:30:08,542 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:30:08,548 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:30:08,551 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:30:08,552 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 17.4ms
2025-11-30 18:30:08,554 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:30:08,554 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:30:08,554 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:30:08,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:30:08,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:30:08,554 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:30:08,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:30:08,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:30:08,555 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:30:08,555 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:30:08,555 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:30:08,555 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:30:08,558 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:30:08,558 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:30:08,559 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:30:08,559 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:30:08,560 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:30:08,561 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.0ms
2025-11-30 18:31:19,633 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:19,634 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:19,634 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:19,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:19,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:19,634 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:19,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:19,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:19,635 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:19,635 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:19,635 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:19,635 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:19,658 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:31:19,658 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:31:19,663 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,678 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,682 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,695 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,697 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,698 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:31:19,699 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 65.8ms
2025-11-30 18:31:19,700 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:19,701 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:19,701 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:19,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:19,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:19,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:19,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:19,701 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:19,702 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:19,702 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:19,702 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:19,702 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:19,704 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:31:19,704 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:31:19,706 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,707 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,707 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,709 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,710 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:19,711 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:31:19,713 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 11.6ms
2025-11-30 18:31:21,118 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:31:21,118 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:21,118 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:21,118 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:21,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:21,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:21,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:21,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:21,119 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:21,119 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:21,119 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:21,120 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:31:21,120 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:31:21,121 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:31:21,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:21,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:21,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:21,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:21,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:21,129 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:21,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:21,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:21,130 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:21,130 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:21,130 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:31:21,133 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:31:21,142 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 24.2ms
2025-11-30 18:31:21,142 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 22.7ms
2025-11-30 18:31:32,371 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:31:32,371 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:32,371 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:32,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:32,371 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:32,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:32,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:32,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:32,372 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:32,372 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:32,372 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:32,373 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:31:32,375 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:31:32,375 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:31:32,376 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:32,381 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:32,384 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:31:32,385 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 14.6ms
2025-11-30 18:31:32,387 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:32,387 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:32,389 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:32,389 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:32,389 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:31:32,391 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:31:32,391 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:31:32,392 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:32,393 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:32,394 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:31:32,395 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.5ms
2025-11-30 18:31:33,654 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:31:33,655 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/ 200 0.6ms
2025-11-30 18:31:33,656 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:31:33,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:33,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:33,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:33,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:33,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:33,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:33,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:33,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:33,658 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:33,658 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:33,658 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:31:33,660 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:31:33,666 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:31:33,666 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 9.9ms
2025-11-30 18:31:42,559 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:42,560 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:42,561 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:42,577 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:31:42,578 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:31:42,582 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,594 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,596 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,610 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,612 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,614 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:31:42,614 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 55.2ms
2025-11-30 18:31:42,616 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:42,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:42,616 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:42,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:42,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:42,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:42,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:42,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:42,617 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:42,617 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:42,618 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:42,618 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:31:42,620 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:31:42,620 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:31:42,621 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,622 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,623 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,624 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,626 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:31:42,627 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:31:42,628 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.8ms
2025-11-30 18:31:45,111 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:31:45,111 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:45,111 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:45,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:45,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:45,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:45,111 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:45,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:45,112 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:45,112 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:45,112 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:45,112 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:31:45,113 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:31:45,115 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:31:45,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:31:45,125 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:31:45,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:45,125 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:45,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:45,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:31:45,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:31:45,126 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:31:45,126 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:31:45,126 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:31:45,127 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:31:45,128 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:31:45,134 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 24.2ms
2025-11-30 18:31:45,135 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 22.5ms
2025-11-30 18:32:36,605 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:32:36,605 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:32:36,605 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:32:36,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:32:36,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:32:36,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:32:36,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:32:36,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:32:36,606 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:32:36,607 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:32:36,607 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:32:36,607 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:32:36,608 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:32:36,608 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:32:36,608 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:32:36,612 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:32:36,616 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:32:36,616 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 11.3ms
2025-11-30 18:32:36,618 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:32:36,618 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:32:36,618 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:32:36,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:32:36,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:32:36,618 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:32:36,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:32:36,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:32:36,619 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:32:36,619 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:32:36,619 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:32:36,619 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:32:36,622 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:32:36,622 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:32:36,623 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:32:36,625 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:32:36,626 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:32:36,627 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.5ms
2025-11-30 18:32:37,858 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:32:37,858 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:32:37,858 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:32:37,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:32:37,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:32:37,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:32:37,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:32:37,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:32:37,860 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:32:37,860 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:32:37,860 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:32:37,861 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:32:37,862 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:32:37,866 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:32:37,867 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 8.9ms
2025-11-30 18:34:55,115 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:34:55,115 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:34:55,115 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:34:55,115 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:34:55,115 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:34:55,115 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:34:56,065 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:34:56,065 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:34:56,065 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:34:56,065 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:34:56,065 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:34:56,065 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:34:56,417 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:34:56,417 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:34:56,485 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:34:56,487 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:34:56,487 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:34:56,758 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:34:56,758 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:34:56,925 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'api', 'admin', 'backend', 'static', 'cdn', 'www'}
2025-11-30 18:37:37,037 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:37:37,037 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:37:37,037 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:37:37,037 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:37:37,037 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:37:37,037 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:37:38,637 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:37:38,637 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:37:38,637 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:37:38,637 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:37:38,637 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:37:38,637 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:37:38,908 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:37:38,908 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:37:38,977 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:37:38,977 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:37:38,977 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:37:39,167 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:37:39,167 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:37:39,297 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'www', 'backend', 'api', 'admin', 'cdn', 'assets'}
2025-11-30 18:37:46,170 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:37:46,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.2ms
2025-11-30 18:37:46,172 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:37:46,173 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.1ms
2025-11-30 18:37:46,175 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:46,176 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:46,176 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:46,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:46,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:46,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:46,176 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:46,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:46,177 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:46,177 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:46,177 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:46,177 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:46,238 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:37:46,244 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:46,244 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:46,253 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:46,253 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 78.7ms
2025-11-30 18:37:46,255 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:46,255 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:46,256 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:46,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:46,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:46,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:46,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:46,256 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:46,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:46,257 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:46,257 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:46,257 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:46,259 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:46,259 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:46,261 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:46,262 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.1ms
2025-11-30 18:37:48,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:48,129 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:48,130 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:48,131 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:48,131 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:48,132 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:48,133 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:48,134 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:48,136 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.6ms
2025-11-30 18:37:48,137 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:48,138 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:48,138 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:48,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:48,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:48,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:48,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:48,138 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:48,140 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:48,140 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:48,140 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:48,140 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:48,141 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:48,142 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:48,144 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:48,144 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.4ms
2025-11-30 18:37:49,128 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:37:49,128 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.5ms
2025-11-30 18:37:49,130 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:37:49,131 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:49,131 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:49,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,131 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,133 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,133 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:49,133 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:49,133 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 18:37:49,141 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 18:37:49,145 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 18:37:49,151 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:37:49,156 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:37:49,156 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14432, Rotaci√≥n: True
2025-11-30 18:37:49,160 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:37:49,161 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:37:49,161 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-11-30 18:37:49,161 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14432
2025-11-30 18:37:49,162 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 18:37:49,170 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:37:49,170 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:37:49,171 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 40.0ms
2025-11-30 18:37:49,175 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 18:37:49,175 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.4ms
2025-11-30 18:37:49,177 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 18:37:49,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:49,177 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:49,178 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:49,179 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 18:37:49,181 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 18:37:49,181 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 18:37:49,181 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 18:37:49,193 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 18:37:49,193 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 18:37:49,194 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 17.6ms
2025-11-30 18:37:49,197 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 18:37:49,198 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 18:37:49,200 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:37:49,201 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:49,201 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:49,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,201 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,202 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,202 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:49,202 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:49,202 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:37:49,204 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:37:49,204 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:37:49,206 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:37:49,206 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.2ms
2025-11-30 18:37:49,224 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:37:49,225 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:37:49,226 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.3ms
2025-11-30 18:37:49,226 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:49,227 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.9ms
2025-11-30 18:37:49,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:49,227 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:49,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,228 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,228 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:49,230 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:49,230 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:49,232 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:49,232 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:49,234 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:49,235 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:37:49,235 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 9.0ms
2025-11-30 18:37:49,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:49,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:49,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,237 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:49,237 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:49,237 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:37:49,238 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:37:49,240 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:37:49,281 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:37:49,283 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 47.9ms
2025-11-30 18:37:49,283 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:49,284 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:49,284 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:49,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,284 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,285 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,285 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:49,285 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:49,285 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:49,288 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:49,288 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:49,289 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:49,290 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:37:49,291 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:49,291 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:49,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:49,291 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:49,292 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:49,292 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:49,292 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:49,292 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:37:49,295 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:37:49,295 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:37:49,297 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:37:49,297 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 14.1ms
2025-11-30 18:37:49,298 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 8.3ms
2025-11-30 18:37:51,285 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:51,286 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:51,286 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:51,286 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:51,286 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:51,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:51,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:51,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:51,287 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:51,287 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:51,287 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:51,287 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:51,290 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:51,291 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:51,300 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:51,301 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 15.6ms
2025-11-30 18:37:51,304 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:37:51,304 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:51,306 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:51,306 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:51,307 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:37:51,310 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:37:51,310 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:37:51,312 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:37:51,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 10.1ms
2025-11-30 18:37:53,343 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:37:53,344 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.0ms
2025-11-30 18:37:53,344 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:37:53,346 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.8ms
2025-11-30 18:37:53,348 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:37:53,349 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:37:53,350 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:37:53,352 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 3.1ms
2025-11-30 18:37:53,352 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 2.9ms
2025-11-30 18:37:53,352 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:53,353 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:53,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,353 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,354 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,354 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:53,354 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:53,354 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:37:53,354 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:37:53,357 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:37:53,360 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:53,361 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:53,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,361 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,362 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,362 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:53,362 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:53,362 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:37:53,365 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:37:53,365 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:37:53,379 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:37:53,380 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 30.0ms
2025-11-30 18:37:53,381 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 27.3ms
2025-11-30 18:37:53,383 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:37:53,383 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:53,384 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:53,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,384 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,385 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,385 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:53,385 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:53,385 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:37:53,388 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:37:53,389 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:37:53,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:53,390 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:53,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,390 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:53,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:53,391 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:53,391 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:53,391 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:53,391 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:37:53,393 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:37:53,393 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:37:53,396 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:37:53,396 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 13.5ms
2025-11-30 18:37:53,398 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 8.9ms
2025-11-30 18:37:57,116 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:37:57,117 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:37:57,117 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 1.2ms
2025-11-30 18:37:57,118 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 1.0ms
2025-11-30 18:37:57,120 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:37:57,120 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:37:57,120 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:37:57,121 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:37:57,122 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:37:57,123 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:37:57,124 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:38:01,256 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:38:01,256 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:38:01,266 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:38:01,266 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,287 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,291 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,295 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,296 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,298 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:38:01,298 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4179.1ms
2025-11-30 18:38:01,301 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:38:01,301 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:38:01,301 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:38:01,302 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:38:01,303 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:38:01,304 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:38:01,305 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:38:01,306 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,307 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,308 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,310 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,311 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:01,314 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:38:01,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.4ms
2025-11-30 18:38:02,803 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:02,804 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:02,805 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:38:02,805 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:38:02,805 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:38:02,807 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:38:02,807 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:38:02,808 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:02,810 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:02,814 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:38:02,815 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.3ms
2025-11-30 18:38:02,816 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:38:02,817 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:38:02,817 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:38:02,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:02,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:02,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:02,817 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:02,818 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:02,818 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:02,818 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:38:02,818 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:38:02,818 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:38:02,821 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:38:02,821 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:38:02,822 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:02,823 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:38:02,824 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:38:02,825 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 7.8ms
2025-11-30 18:38:06,991 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:38:06,991 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:38:06,992 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:38:06,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:06,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:06,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:06,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:38:06,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:38:06,992 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:38:06,993 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:38:06,993 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:38:06,993 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:38:06,995 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:38:06,995 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD ADMIN (centralizada)
2025-11-30 18:38:07,000 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - Log de autenticaci√≥n 1017 no encontrado en ninguna BD
2025-11-30 18:38:07,000 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:38:07,001 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 9.2ms
2025-11-30 18:39:55,728 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:39:55,729 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:39:55,729 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:39:55,729 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:39:55,729 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:39:55,729 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:39:56,575 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:39:56,577 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:39:56,577 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:39:56,578 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:39:56,578 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:39:56,578 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:39:56,893 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:39:56,893 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:39:56,980 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:39:56,980 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:39:56,980 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:39:57,203 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:39:57,204 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:39:57,317 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'assets', 'admin', 'backend', 'www', 'api', 'static', 'cdn'}
2025-11-30 18:41:12,236 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:41:12,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:12,237 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:12,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:12,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:12,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:12,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:12,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:12,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:12,238 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:12,238 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:12,238 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:41:12,326 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:41:12,334 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:41:12,334 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:41:12,341 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:41:12,343 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 107.2ms
2025-11-30 18:41:12,558 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:41:12,558 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:41:12,558 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:41:12,558 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:41:12,559 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:41:12,560 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:41:13,558 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:41:13,560 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:41:13,560 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:41:13,562 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:41:13,562 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:41:13,562 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:41:13,908 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:41:13,908 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:41:14,006 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:41:14,007 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:41:14,007 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:41:14,266 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:41:14,266 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:41:14,410 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'cdn', 'www', 'api', 'assets', 'static', 'backend', 'admin'}
2025-11-30 18:41:14,446 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:41:14,446 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:41:14,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,447 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,447 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,448 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,450 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,450 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,450 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,450 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 18:41:14,476 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:41:14,478 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:41:14,478 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:41:14,480 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:41:14,480 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 34.4ms
2025-11-30 18:41:14,487 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 18:41:14,488 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 18:41:14,494 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:41:14,498 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:41:14,498 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14433, Rotaci√≥n: True
2025-11-30 18:41:14,503 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:41:14,503 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:41:14,504 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-11-30 18:41:14,504 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14433
2025-11-30 18:41:14,504 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 18:41:14,512 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:41:14,512 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:41:14,513 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 67.2ms
2025-11-30 18:41:14,518 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 18:41:14,518 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,520 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,520 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,521 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,521 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,521 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 18:41:14,524 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 18:41:14,524 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 18:41:14,524 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 18:41:14,536 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 18:41:14,536 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 18:41:14,537 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 18.1ms
2025-11-30 18:41:14,543 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:41:14,543 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,543 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,544 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,545 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:41:14,546 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:41:14,547 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:41:14,548 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:41:14,549 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 6.4ms
2025-11-30 18:41:14,555 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:41:14,556 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,556 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,556 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,557 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,557 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,557 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,557 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:41:14,560 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:41:14,560 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:41:14,562 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:41:14,563 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:41:14,564 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,564 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,564 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,564 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,564 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,564 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,565 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,565 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,565 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,565 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:41:14,567 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:41:14,568 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:41:14,606 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:41:14,607 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 52.2ms
2025-11-30 18:41:14,608 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 44.7ms
2025-11-30 18:41:14,608 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,610 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,611 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:41:14,612 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:41:14,612 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:41:14,614 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:41:14,615 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:41:14,615 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:14,615 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:14,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,615 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:14,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:14,616 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:14,616 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:14,616 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:14,616 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:41:14,616 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.9ms
2025-11-30 18:41:14,618 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:41:14,618 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:41:14,618 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:41:14,621 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 5.9ms
2025-11-30 18:41:16,397 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:41:16,397 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:16,398 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:16,399 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:41:16,401 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:41:16,405 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:41:16,406 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:16,406 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:16,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,407 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,408 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:16,408 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:16,408 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:41:16,410 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:41:16,410 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:41:16,417 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:41:16,419 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 21.8ms
2025-11-30 18:41:16,420 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 14.7ms
2025-11-30 18:41:16,421 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:41:16,422 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:41:16,423 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:16,423 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:16,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,423 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,424 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,424 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:16,424 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:16,424 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:41:16,426 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:16,428 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:16,430 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:41:16,431 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:41:16,431 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:41:16,433 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:41:16,434 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 12.5ms
2025-11-30 18:41:16,434 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 11.9ms
2025-11-30 18:41:20,687 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:41:20,688 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.9ms
2025-11-30 18:41:20,688 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:41:20,690 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/clientes/2/modulos/ 200 0.9ms
2025-11-30 18:41:20,691 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:41:20,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:20,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:20,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:20,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:20,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:20,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:20,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:20,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:20,692 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:20,693 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:20,693 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:41:20,695 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:41:20,695 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:41:20,702 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:41:20,702 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 11.7ms
2025-11-30 18:41:20,704 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/clientes/2/modulos/
2025-11-30 18:41:20,705 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:20,705 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:20,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:20,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:20,705 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:20,706 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:20,706 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:20,706 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:20,706 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:20,706 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:20,706 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/clientes/2/modulos/
2025-11-30 18:41:20,709 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /clientes/2/modulos/ recibida
2025-11-30 18:41:20,710 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo m√≥dulos para cliente ID: 2
2025-11-30 18:41:20,713 - app.modules.tenant.presentation.endpoints_modulos - INFO - M√≥dulos para cliente 2 recuperados: 5 m√≥dulos
2025-11-30 18:41:20,714 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/clientes/2/modulos/ 200 9.9ms
2025-11-30 18:41:21,461 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 18:41:21,462 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 0.9ms
2025-11-30 18:41:21,462 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 18:41:21,463 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/modulos/
2025-11-30 18:41:21,464 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/conexiones/clientes/2/
2025-11-30 18:41:21,464 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.5ms
2025-11-30 18:41:21,465 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/modulos/ 200 1.3ms
2025-11-30 18:41:21,465 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/conexiones/clientes/2/ 200 1.3ms
2025-11-30 18:41:21,465 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:41:21,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:21,466 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,467 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,467 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:21,468 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:21,468 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:41:21,470 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:41:21,470 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:41:21,481 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:41:21,481 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,484 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:21,484 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:21,484 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:41:21,484 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 18.6ms
2025-11-30 18:41:21,486 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:41:21,486 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:41:21,488 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:41:21,489 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:41:21,490 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 8.6ms
2025-11-30 18:41:21,491 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:41:21,491 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,493 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:21,494 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:21,494 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:41:21,496 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:41:21,496 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:41:21,497 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:41:21,499 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:41:21,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:21,499 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:21,500 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:21,501 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:41:21,501 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 9.3ms
2025-11-30 18:41:21,503 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:41:21,503 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:41:21,504 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:41:21,504 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:41:21,505 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 7.0ms
2025-11-30 18:41:22,588 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:22,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:22,588 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:22,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:22,588 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:22,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:22,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:22,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:22,589 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:22,589 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:22,589 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:22,589 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:22,591 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:41:22,591 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:41:26,701 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:41:26,701 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:41:26,704 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:41:26,705 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,746 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,749 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,753 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,754 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,755 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:41:26,756 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4169.1ms
2025-11-30 18:41:26,758 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:26,759 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:26,759 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:26,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:26,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:26,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:26,759 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:26,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:26,760 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:26,760 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:26,760 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:26,760 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:26,762 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:41:26,762 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:41:26,762 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,763 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,764 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,767 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,768 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:26,770 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:41:26,771 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.7ms
2025-11-30 18:41:27,640 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:41:27,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:27,640 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:27,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,640 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,641 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,641 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:27,641 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:27,641 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:41:27,642 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:41:27,643 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:41:27,643 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:41:27,644 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:41:27,645 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:27,645 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:27,645 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,645 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,645 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,645 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,646 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,646 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:27,646 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:27,646 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:41:27,648 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:41:27,648 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:41:27,650 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:41:27,650 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:41:27,651 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 11.4ms
2025-11-30 18:41:27,652 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 9.9ms
2025-11-30 18:41:27,654 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/modulos/
2025-11-30 18:41:27,654 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/conexiones/clientes/2/
2025-11-30 18:41:27,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:27,656 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:27,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,657 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,657 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:27,657 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:27,657 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/modulos/
2025-11-30 18:41:27,657 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:27,658 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:27,659 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:27,659 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/conexiones/clientes/2/
2025-11-30 18:41:27,660 - app.modules.tenant.presentation.endpoints_modulos - INFO - Solicitud GET /modulos/ recibida - skip: 0, limit: 100, solo_activos: True
2025-11-30 18:41:27,660 - app.modules.tenant.application.services.modulo_service - INFO - Obteniendo cat√°logo de m√≥dulos - skip: 0, limit: 100
2025-11-30 18:41:27,661 - app.modules.tenant.application.services.modulo_service - INFO - Contando total de m√≥dulos en el sistema
2025-11-30 18:41:27,662 - app.modules.tenant.presentation.endpoints_modulos - INFO - Cat√°logo de m√≥dulos recuperado: 5 m√≥dulos de 5 totales
2025-11-30 18:41:27,663 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Solicitud GET /conexiones/clientes/2 recibida
2025-11-30 18:41:27,663 - app.modules.tenant.application.services.conexion_service - INFO - Obteniendo conexiones para cliente ID: 2
2025-11-30 18:41:27,664 - app.modules.tenant.presentation.endpoints_conexiones - INFO - Conexiones recuperadas para cliente 2: 2 conexiones
2025-11-30 18:41:27,665 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/modulos/ 200 10.3ms
2025-11-30 18:41:27,665 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/conexiones/clientes/2/ 200 10.1ms
2025-11-30 18:41:28,146 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:28,147 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:28,147 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:28,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:28,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:28,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:28,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:28,147 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:28,149 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:28,149 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:28,149 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:28,149 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:28,150 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:41:28,151 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:41:28,151 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,152 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,153 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,156 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,157 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,158 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:41:28,159 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 11.7ms
2025-11-30 18:41:28,160 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:28,160 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:28,160 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:28,161 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:28,162 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:28,163 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:41:28,163 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:41:28,164 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,165 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,165 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,167 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,169 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:28,171 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:41:28,172 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.2ms
2025-11-30 18:41:29,166 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:41:29,167 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/actividad/ 200 0.7ms
2025-11-30 18:41:29,167 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:41:29,169 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/1/sesiones/ 200 1.1ms
2025-11-30 18:41:29,169 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:41:29,170 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:29,170 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:29,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:29,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:29,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:29,170 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:29,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:29,171 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:29,171 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:29,171 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:29,171 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:41:29,188 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:41:29,198 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:41:29,198 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:29,198 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:29,198 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:29,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:29,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:29,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:29,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:29,200 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:29,200 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:29,200 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:29,201 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:41:29,203 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:41:29,212 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 42.4ms
2025-11-30 18:41:29,213 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 14.4ms
2025-11-30 18:41:31,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:41:31,477 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:41:31,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.0ms
2025-11-30 18:41:31,478 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.9ms
2025-11-30 18:41:31,480 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:41:31,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:31,481 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:31,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:31,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:31,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:31,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:31,481 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:31,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:31,482 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:31,482 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:31,482 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:41:31,498 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:41:31,498 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:41:31,502 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:31,508 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:31,518 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:41:31,519 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 38.1ms
2025-11-30 18:41:31,520 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:41:31,520 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:31,520 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:31,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:31,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:31,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:31,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:31,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:31,521 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:31,521 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:31,522 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:31,522 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:41:31,535 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:41:31,535 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:41:31,536 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:31,538 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:31,539 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:41:31,542 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 21.5ms
2025-11-30 18:41:34,688 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:41:34,688 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/ 200 0.4ms
2025-11-30 18:41:34,690 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:41:34,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:34,691 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:34,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:34,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:34,691 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:34,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:34,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:34,692 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:34,692 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:34,692 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:34,692 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:41:34,710 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:41:34,710 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD del contexto actual (cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central)
2025-11-30 18:41:34,718 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] ‚ùå Log 1017 NO encontrado en BD del contexto (bd=bd_hybrid_sistema_central)
2025-11-30 18:41:34,719 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD ADMIN (centralizada)
2025-11-30 18:41:34,720 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - Log de autenticaci√≥n 1017 no encontrado en ninguna BD
2025-11-30 18:41:34,720 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:41:34,721 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 30.8ms
2025-11-30 18:41:51,782 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:51,782 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:51,783 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:51,785 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:51,786 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:41:51,787 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:41:51,789 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,802 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,807 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,830 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,832 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,833 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:41:51,834 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 51.1ms
2025-11-30 18:41:51,835 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:51,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:51,836 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:51,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:51,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:51,836 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:51,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:51,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:51,837 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:51,837 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:51,837 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:51,837 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:41:51,839 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:41:51,839 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:41:51,839 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,840 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,841 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,844 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,846 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:41:51,847 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:41:51,848 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 12.7ms
2025-11-30 18:41:53,469 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:41:53,471 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:53,471 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:53,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:53,471 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:53,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:53,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:53,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:53,472 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:53,472 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:53,472 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:53,472 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:41:53,473 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:41:53,475 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:41:53,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:41:53,482 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:41:53,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:53,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:53,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:53,482 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:41:53,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:41:53,483 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:41:53,483 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:41:53,483 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:41:53,483 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:41:53,485 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:41:53,492 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 22.2ms
2025-11-30 18:41:53,493 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 20.6ms
2025-11-30 18:42:26,183 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:42:26,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:42:26,184 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:42:26,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:42:26,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:42:26,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:42:26,184 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:42:26,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:42:26,185 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:42:26,185 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:42:26,185 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:42:26,185 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:42:26,188 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:42:26,188 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:42:26,188 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:42:26,190 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:42:26,193 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:42:26,194 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 10.5ms
2025-11-30 18:42:26,196 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:42:26,196 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:42:26,196 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:42:26,196 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:42:26,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:42:26,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:42:26,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:42:26,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:42:26,197 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:42:26,197 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:42:26,198 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:42:26,198 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:42:26,201 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:42:26,201 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:42:26,202 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:42:26,202 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:42:26,204 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:42:26,205 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.0ms
2025-11-30 18:42:27,028 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:42:27,028 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:42:27,032 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:42:27,032 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD del contexto actual (cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central)
2025-11-30 18:42:27,033 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] ‚ùå Log 1017 NO encontrado en BD del contexto (bd=bd_hybrid_sistema_central)
2025-11-30 18:42:27,033 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1017 en BD ADMIN (centralizada)
2025-11-30 18:42:27,035 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - Log de autenticaci√≥n 1017 no encontrado en ninguna BD
2025-11-30 18:42:27,035 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:42:27,036 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 7.7ms
2025-11-30 18:43:13,409 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:43:13,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:43:13,409 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:43:13,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:13,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:13,409 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:13,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:13,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:13,410 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:13,410 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:43:13,410 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:43:13,410 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:43:13,423 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:43:13,423 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:43:13,429 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,438 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,441 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,455 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,457 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,459 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:43:13,459 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 50.9ms
2025-11-30 18:43:13,462 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:43:13,462 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:43:13,462 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:43:13,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:13,462 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:13,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:13,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:13,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:13,463 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:13,463 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:43:13,463 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:43:13,463 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:43:13,465 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:43:13,466 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:43:13,467 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,468 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,469 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,472 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,474 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:43:13,476 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:43:13,477 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 16.1ms
2025-11-30 18:43:14,046 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:43:14,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:43:14,047 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:43:14,047 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:43:14,048 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:43:14,050 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:43:14,052 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:43:14,058 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:43:14,059 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:43:14,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:14,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:14,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:14,059 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:43:14,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:43:14,060 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:43:14,060 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:43:14,060 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:43:14,060 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:43:14,062 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:43:14,076 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 29.3ms
2025-11-30 18:43:14,077 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 27.7ms
2025-11-30 18:44:55,870 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:44:55,870 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:44:55,870 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:44:55,870 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:44:55,870 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:44:55,870 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:44:56,748 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:44:56,753 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:44:56,753 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:44:56,753 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:44:56,753 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:44:56,753 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:44:57,103 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:44:57,103 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:44:57,173 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:44:57,173 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:44:57,173 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:44:57,398 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:44:57,398 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:44:57,543 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'static', 'api', 'cdn', 'admin', 'backend', 'assets'}
2025-11-30 18:49:22,353 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:49:22,354 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 1.1ms
2025-11-30 18:49:22,355 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/
2025-11-30 18:49:22,355 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/ 200 0.7ms
2025-11-30 18:49:22,357 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:49:22,357 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:22,358 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:22,359 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:49:22,435 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:49:22,441 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:49:22,441 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:49:22,451 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:49:22,451 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 94.3ms
2025-11-30 18:49:22,453 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:49:22,453 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:22,454 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:22,456 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:49:22,457 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:49:22,458 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:49:22,459 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:49:22,459 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 6.3ms
2025-11-30 18:49:26,238 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:49:26,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:26,238 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:26,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:26,238 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:26,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:26,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:26,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:26,239 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:26,239 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:26,239 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:26,240 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:49:26,242 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:49:26,242 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:49:26,244 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:49:26,245 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.5ms
2025-11-30 18:49:26,247 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/
2025-11-30 18:49:26,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:26,247 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:26,247 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:26,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:26,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:26,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:26,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:26,248 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:26,248 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:26,248 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:26,249 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/
2025-11-30 18:49:26,251 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/ recibida - skip: 0, limit: 10, solo_activos: True, buscar: None por usuario: superadmin
2025-11-30 18:49:26,251 - app.modules.tenant.application.services.cliente_service - INFO - Listando clientes - skip: 0, limit: 10, solo_activos: True, buscar: None
2025-11-30 18:49:26,253 - app.modules.tenant.application.services.cliente_service - INFO - Listados 6 clientes de 6 totales
2025-11-30 18:49:26,253 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/ 200 7.0ms
2025-11-30 18:49:28,220 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:49:28,220 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 0.7ms
2025-11-30 18:49:28,222 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/
2025-11-30 18:49:28,222 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:49:28,223 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/2/estadisticas/
2025-11-30 18:49:28,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/ 200 1.6ms
2025-11-30 18:49:28,224 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 1.5ms
2025-11-30 18:49:28,224 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:49:28,225 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/2/estadisticas/ 200 2.5ms
2025-11-30 18:49:28,226 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:28,226 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:28,226 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,227 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,227 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:28,228 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:28,228 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:49:28,230 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:49:28,235 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:49:28,235 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 11.1ms
2025-11-30 18:49:28,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:28,236 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:28,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,236 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,237 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,237 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:28,237 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:28,237 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:49:28,238 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:49:28,238 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:49:28,248 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:49:28,250 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 14.9ms
2025-11-30 18:49:28,250 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:49:28,251 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:28,251 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:28,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,251 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,252 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,252 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:28,252 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:28,252 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:49:28,254 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:49:28,255 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:49:28,257 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:28,257 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:28,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:28,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:28,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:28,258 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:28,258 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:28,258 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:49:28,260 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:49:28,261 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:49:28,263 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:49:28,264 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 13.9ms
2025-11-30 18:49:28,265 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 9.4ms
2025-11-30 18:49:29,313 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:49:29,313 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:49:29,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.9ms
2025-11-30 18:49:29,314 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 0.6ms
2025-11-30 18:49:29,315 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:49:29,315 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:29,315 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:29,315 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:29,317 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:49:29,319 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:49:29,319 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:49:33,449 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:49:33,449 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:49:33,455 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:49:33,455 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,492 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,494 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,509 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,510 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,512 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:49:33,514 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 4197.4ms
2025-11-30 18:49:33,516 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:49:33,516 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:33,517 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:33,518 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/clientes/2/usuarios/
2025-11-30 18:49:33,520 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Superadmin 1 solicitando usuarios del cliente 2 - page: 1, limit: 10
2025-11-30 18:49:33,521 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo usuarios globales - cliente_id: 2, page: 1, limit: 10
2025-11-30 18:49:33,522 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,522 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,523 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,525 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,527 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:33,529 - app.modules.superadmin.presentation.endpoints_usuarios - INFO - Usuarios del cliente 2 recuperados - Total: 3, P√°gina: 1
2025-11-30 18:49:33,529 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/clientes/2/usuarios/ 200 13.5ms
2025-11-30 18:49:34,864 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:49:34,864 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:34,864 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:34,864 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:34,864 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:34,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:34,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:34,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:34,865 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:34,865 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:34,865 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:34,865 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/actividad/
2025-11-30 18:49:34,866 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:49:34,868 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo actividad para usuario 1
2025-11-30 18:49:34,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:34,875 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:34,876 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:34,877 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/usuarios/1/sesiones/
2025-11-30 18:49:34,878 - app.modules.superadmin.application.services.superadmin_usuario_service - INFO - Obteniendo sesiones para usuario 1
2025-11-30 18:49:34,887 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/actividad/ 200 23.7ms
2025-11-30 18:49:34,888 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/usuarios/1/sesiones/ 200 22.0ms
2025-11-30 18:49:37,129 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:37,130 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:37,131 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:37,131 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:37,131 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:49:37,134 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:49:37,134 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:49:37,135 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:37,137 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:37,141 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:49:37,142 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 12.4ms
2025-11-30 18:49:37,143 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:49:37,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:37,144 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:37,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:37,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:37,144 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:37,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:37,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:37,145 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:37,145 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:37,145 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:37,145 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:49:37,147 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:49:37,147 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:49:37,148 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:37,149 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:49:37,150 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:49:37,151 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 8.2ms
2025-11-30 18:49:38,258 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:49:38,258 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:49:38,259 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:49:38,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:38,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:38,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:38,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:49:38,259 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:49:38,260 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:49:38,260 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:49:38,260 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:49:38,260 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:49:38,262 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:49:38,262 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1017 desde BD ADMIN (centralizada)
2025-11-30 18:49:38,264 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1017 no encontrado en BD ADMIN
2025-11-30 18:49:38,264 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:49:38,265 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 6.9ms
2025-11-30 18:53:10,473 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:53:10,473 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:53:10,473 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:53:10,473 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:53:10,474 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:53:10,474 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:53:11,936 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:53:11,938 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:53:11,938 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:53:11,938 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:53:11,938 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:53:11,938 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:53:12,227 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:53:12,227 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:53:12,298 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:53:12,300 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:53:12,300 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:53:12,494 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:53:12,495 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:53:12,604 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'static', 'www', 'assets', 'backend', 'api', 'admin', 'cdn'}
2025-11-30 18:53:15,711 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 18:53:15,711 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.8ms
2025-11-30 18:53:15,714 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 18:53:15,715 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,715 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,715 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,716 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,716 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,716 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,716 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 18:53:15,771 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 18:53:15,774 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 18:53:15,780 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 18:53:15,786 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:53:15,786 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14434, Rotaci√≥n: True
2025-11-30 18:53:15,792 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 18:53:15,792 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 18:53:15,792 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-11-30 18:53:15,792 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14434
2025-11-30 18:53:15,792 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 18:53:15,803 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 18:53:15,804 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 18:53:15,804 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 90.0ms
2025-11-30 18:53:15,809 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 18:53:15,809 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.7ms
2025-11-30 18:53:15,812 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 18:53:15,812 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,813 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,813 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,814 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,814 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,814 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,814 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 18:53:15,816 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 18:53:15,818 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 18:53:15,818 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 18:53:15,831 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 18:53:15,832 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 18:53:15,832 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 20.4ms
2025-11-30 18:53:15,836 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 18:53:15,836 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.5ms
2025-11-30 18:53:15,839 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
2025-11-30 18:53:15,839 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,839 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,839 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,840 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,840 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,840 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,840 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/tenant/branding
2025-11-30 18:53:15,842 - app.infrastructure.database.queries - INFO - [SQL_VERSION] Detectada versi√≥n: SQL Server 2022 (internal: 16)
2025-11-30 18:53:15,847 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /tenant/branding recibida para cliente_id=1 por usuario: superadmin
2025-11-30 18:53:15,847 - app.modules.tenant.application.services.cliente_service - INFO - Solicitando branding para cliente_id=1
2025-11-30 18:53:15,848 - app.modules.tenant.application.services.cliente_service - INFO - Branding obtenido exitosamente para cliente_id=1
2025-11-30 18:53:15,849 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/tenant/branding 200 10.6ms
2025-11-30 18:53:15,854 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:53:15,855 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 1.0ms
2025-11-30 18:53:15,856 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:53:15,857 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,857 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,857 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,858 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,858 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,858 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,858 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:53:15,860 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/menus/getmenu/
2025-11-30 18:53:15,860 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:53:15,863 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:53:15,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,867 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,867 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,868 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,868 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,868 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,868 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:53:15,869 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/menus/getmenu/ 200 9.2ms
2025-11-30 18:53:15,870 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:53:15,871 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:53:15,880 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:53:15,881 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:53:15,882 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 25.7ms
2025-11-30 18:53:15,882 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,882 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,882 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,883 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,883 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,883 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,884 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:53:15,884 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 24.4ms
2025-11-30 18:53:15,887 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:53:15,887 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:53:15,927 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:53:15,929 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 48.1ms
2025-11-30 18:53:15,930 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/
2025-11-30 18:53:15,931 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,932 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,932 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,933 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,933 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,933 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/
2025-11-30 18:53:15,935 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2 recibida por usuario: superadmin
2025-11-30 18:53:15,936 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/2/estadisticas/
2025-11-30 18:53:15,936 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/menus/getmenu/
2025-11-30 18:53:15,937 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,937 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,937 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,938 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,938 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,938 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,938 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/clientes/2/estadisticas/
2025-11-30 18:53:15,940 - app.modules.tenant.presentation.endpoints_clientes - INFO - Solicitud GET /clientes/2/estadisticas recibida por usuario: superadmin
2025-11-30 18:53:15,940 - app.modules.tenant.application.services.cliente_service - INFO - Obteniendo estad√≠sticas para cliente ID: 2
2025-11-30 18:53:15,943 - app.modules.tenant.application.services.cliente_service - INFO - Estad√≠sticas obtenidas para cliente 2
2025-11-30 18:53:15,943 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:15,944 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:15,945 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:15,945 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/menus/getmenu/
2025-11-30 18:53:15,947 - app.modules.menus.presentation.endpoints - INFO - Solicitud GET /menus/getmenu/ recibida para usuario ID: 1 del cliente 1
2025-11-30 18:53:15,947 - app.modules.menus.application.services.menu_service - INFO - Obteniendo men√∫ filtrado para usuario_id: 1
2025-11-30 18:53:15,948 - app.modules.menus.application.services.menu_service - INFO - No se encontraron men√∫s permitidos para el usuario ID: 1.
2025-11-30 18:53:15,948 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/ 200 18.5ms
2025-11-30 18:53:15,948 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/clientes/2/estadisticas/ 200 13.8ms
2025-11-30 18:53:15,950 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/menus/getmenu/ 200 13.8ms
2025-11-30 18:53:17,277 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:53:17,277 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:53:17,277 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 1.1ms
2025-11-30 18:53:17,278 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/ 200 0.6ms
2025-11-30 18:53:17,279 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:53:17,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:17,280 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:17,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:17,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:17,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:17,280 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:17,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:17,281 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:17,281 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:17,281 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:17,281 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:53:17,283 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:53:17,283 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:53:21,391 - app.infrastructure.cache.redis_cache - WARNING - [REDIS_CACHE] Error conectando a Redis: Error 10061 connecting to localhost:6379. No se puede establecer una conexi√≥n ya que el equipo de destino deneg√≥ expresamente dicha conexi√≥n.. Cache desactivado autom√°ticamente (usando fallback en memoria).
2025-11-30 18:53:21,391 - app.infrastructure.cache.redis_cache - INFO - ‚ÑπÔ∏è M√≥dulo de Redis cache cargado pero desactivado (usando fallback en memoria)
2025-11-30 18:53:21,398 - app.core.tenant.routing - INFO - [METADATA] Metadata cargada para cliente 2: multi - bd_cliente_acme
2025-11-30 18:53:21,399 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:53:21,419 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:53:21,423 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:53:21,424 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 4145.2ms
2025-11-30 18:53:21,426 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:53:21,427 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:21,427 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:21,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:21,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:21,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:21,427 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:21,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:21,428 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:21,428 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:21,428 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:21,428 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/
2025-11-30 18:53:21,430 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Superadmin 1 solicitando logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:53:21,431 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo logs de autenticaci√≥n - cliente_id: 2, page: 1
2025-11-30 18:53:21,432 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:53:21,432 - app.core.tenant.routing - INFO - [ROUTING] Cliente 2 -> Multi-DB (bd_cliente_acme)
2025-11-30 18:53:21,435 - app.modules.superadmin.presentation.endpoints_auditoria - INFO - Logs de autenticaci√≥n recuperados - Total: 16, P√°gina: 1
2025-11-30 18:53:21,436 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/ 200 9.2ms
2025-11-30 18:53:24,161 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:53:24,161 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1017/ 200 0.5ms
2025-11-30 18:53:24,164 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:53:24,164 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:24,164 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:24,164 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:24,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:24,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:24,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:24,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:24,165 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:24,165 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:24,165 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:24,166 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:53:24,167 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:53:24,168 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1017 desde BD ADMIN (centralizada)
2025-11-30 18:53:24,169 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1017 no encontrado en BD ADMIN
2025-11-30 18:53:24,170 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:53:24,170 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 6.5ms
2025-11-30 18:53:37,674 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1012/
2025-11-30 18:53:37,675 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1012/ 200 0.5ms
2025-11-30 18:53:37,677 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1012/
2025-11-30 18:53:37,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:37,677 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:37,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:37,677 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:37,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:37,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:37,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:37,678 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:37,678 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:37,678 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:37,678 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1012/
2025-11-30 18:53:37,691 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1012
2025-11-30 18:53:37,693 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1012 desde BD ADMIN (centralizada)
2025-11-30 18:53:37,700 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1012 no encontrado en BD ADMIN
2025-11-30 18:53:37,702 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1012: Log de autenticaci√≥n con ID 1012 no encontrado.
2025-11-30 18:53:37,702 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1012/ 404 24.6ms
2025-11-30 18:53:42,902 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:53:42,903 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1008/ 200 0.4ms
2025-11-30 18:53:42,905 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:53:42,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:42,906 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:42,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:42,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:42,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:42,906 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:42,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:42,907 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:42,907 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:42,907 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:42,907 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:53:42,925 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1008
2025-11-30 18:53:42,925 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1008 desde BD ADMIN (centralizada)
2025-11-30 18:53:42,931 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1008 encontrado: 1
2025-11-30 18:53:42,932 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1008 completo en BD del cliente 1
2025-11-30 18:53:42,940 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1008/ 200 34.8ms
2025-11-30 18:53:47,067 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:53:47,067 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1010/ 200 0.4ms
2025-11-30 18:53:47,069 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:47,069 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:47,071 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:47,071 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:47,071 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:53:47,073 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1010
2025-11-30 18:53:47,073 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1010 desde BD ADMIN (centralizada)
2025-11-30 18:53:47,073 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1010 no encontrado en BD ADMIN
2025-11-30 18:53:47,074 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1010: Log de autenticaci√≥n con ID 1010 no encontrado.
2025-11-30 18:53:47,074 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1010/ 404 5.3ms
2025-11-30 18:53:52,055 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:53:52,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:53:52,056 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:53:52,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:52,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:52,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:52,056 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:53:52,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:53:52,057 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:53:52,057 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:53:52,057 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:53:52,057 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:53:52,061 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1008
2025-11-30 18:53:52,061 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1008 desde BD ADMIN (centralizada)
2025-11-30 18:53:52,062 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1008 encontrado: 1
2025-11-30 18:53:52,063 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1008 completo en BD del cliente 1
2025-11-30 18:53:52,064 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1008/ 200 9.3ms
2025-11-30 18:54:27,967 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:54:27,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:54:27,967 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:54:27,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:27,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:27,967 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:27,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:27,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:27,969 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:27,969 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:54:27,969 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:54:27,969 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:54:27,973 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1008
2025-11-30 18:54:27,973 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1008 desde BD ADMIN (centralizada)
2025-11-30 18:54:27,973 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1008 encontrado: 1
2025-11-30 18:54:27,975 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1008 completo en BD del cliente 1
2025-11-30 18:54:27,976 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1008/ 200 8.9ms
2025-11-30 18:54:38,788 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1007/
2025-11-30 18:54:38,788 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1007/ 200 0.4ms
2025-11-30 18:54:38,790 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1007/
2025-11-30 18:54:38,790 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:54:38,790 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:54:38,790 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:54:38,791 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1007/
2025-11-30 18:54:38,795 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1007
2025-11-30 18:54:38,795 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1007 desde BD ADMIN (centralizada)
2025-11-30 18:54:38,796 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1007 encontrado: 1
2025-11-30 18:54:38,796 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1007 completo en BD del cliente 1
2025-11-30 18:54:38,797 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1007/ 200 6.8ms
2025-11-30 18:54:42,541 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:54:42,541 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:54:42,541 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:54:42,541 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:42,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:42,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:42,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:42,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:42,542 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:42,542 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:54:42,542 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:54:42,543 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1008/
2025-11-30 18:54:42,551 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1008
2025-11-30 18:54:42,551 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1008 desde BD ADMIN (centralizada)
2025-11-30 18:54:42,555 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1008 encontrado: 1
2025-11-30 18:54:42,556 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1008 completo en BD del cliente 1
2025-11-30 18:54:42,560 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1008/ 200 19.3ms
2025-11-30 18:54:45,313 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:54:45,313 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:54:45,313 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:54:45,313 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:45,314 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:45,314 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:45,314 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:45,314 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:45,314 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:45,314 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:54:45,314 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:54:45,315 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1010/
2025-11-30 18:54:45,318 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1010
2025-11-30 18:54:45,318 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1010 desde BD ADMIN (centralizada)
2025-11-30 18:54:45,322 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1010 no encontrado en BD ADMIN
2025-11-30 18:54:45,322 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1010: Log de autenticaci√≥n con ID 1010 no encontrado.
2025-11-30 18:54:45,323 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1010/ 404 9.1ms
2025-11-30 18:54:48,500 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:54:48,500 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1006/ 200 0.5ms
2025-11-30 18:54:48,501 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:54:48,503 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:54:48,503 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:54:48,503 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:48,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:48,504 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:48,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:48,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:48,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:48,506 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:54:48,506 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:54:48,506 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:54:48,509 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1006
2025-11-30 18:54:48,509 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1006 desde BD ADMIN (centralizada)
2025-11-30 18:54:48,510 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 encontrado: 1
2025-11-30 18:54:48,511 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 completo en BD del cliente 1
2025-11-30 18:54:48,515 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 13.2ms
2025-11-30 18:54:53,654 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:54:53,654 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:54:53,654 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:54:53,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:53,654 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:53,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:53,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:53,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:53,656 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:53,656 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:54:53,656 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:54:53,656 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:54:53,659 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1006
2025-11-30 18:54:53,659 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1006 desde BD ADMIN (centralizada)
2025-11-30 18:54:53,659 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 encontrado: 1
2025-11-30 18:54:53,660 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 completo en BD del cliente 1
2025-11-30 18:54:53,661 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 7.0ms
2025-11-30 18:54:58,398 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:54:58,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:54:58,399 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:54:58,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:58,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:58,399 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:58,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:54:58,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:54:58,400 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:54:58,400 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:54:58,400 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:54:58,400 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:54:58,402 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1006
2025-11-30 18:54:58,402 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1006 desde BD ADMIN (centralizada)
2025-11-30 18:54:58,403 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 encontrado: 1
2025-11-30 18:54:58,403 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 completo en BD del cliente 1
2025-11-30 18:54:58,404 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 6.1ms
2025-11-30 18:55:03,784 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:55:03,784 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1004/ 200 0.4ms
2025-11-30 18:55:03,786 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:55:03,786 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:55:03,786 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:55:03,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:03,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:03,786 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:03,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:03,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:03,788 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:03,788 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:55:03,788 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:55:03,788 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1004/
2025-11-30 18:55:03,790 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1004
2025-11-30 18:55:03,790 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1004 desde BD ADMIN (centralizada)
2025-11-30 18:55:03,790 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1004 encontrado: 1
2025-11-30 18:55:03,790 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1004 completo en BD del cliente 1
2025-11-30 18:55:03,791 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1004/ 200 5.8ms
2025-11-30 18:55:05,730 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 18:55:05,730 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/superadmin/auditoria/autenticacion/1005/ 200 0.4ms
2025-11-30 18:55:05,732 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 18:55:05,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:55:05,733 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:55:05,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:05,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:05,733 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:05,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:05,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:05,734 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:05,734 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:55:05,734 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:55:05,734 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1005/
2025-11-30 18:55:05,736 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1005
2025-11-30 18:55:05,736 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1005 desde BD ADMIN (centralizada)
2025-11-30 18:55:05,737 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1005 encontrado: 1
2025-11-30 18:55:05,737 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1005 completo en BD del cliente 1
2025-11-30 18:55:05,738 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1005/ 200 6.1ms
2025-11-30 18:55:09,980 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:55:09,980 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:55:09,980 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:55:09,980 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:55:09,981 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1006/
2025-11-30 18:55:09,985 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1006
2025-11-30 18:55:09,985 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1006 desde BD ADMIN (centralizada)
2025-11-30 18:55:09,986 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Cliente_id del log 1006 encontrado: 1
2025-11-30 18:55:09,987 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Buscando log 1006 completo en BD del cliente 1
2025-11-30 18:55:09,989 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1006/ 200 8.8ms
2025-11-30 18:55:59,256 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:55:59,257 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 18:55:59,257 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 18:55:59,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:59,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:59,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:59,257 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 18:55:59,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 18:55:59,258 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 18:55:59,258 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 18:55:59,261 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 18:55:59,262 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/superadmin/auditoria/autenticacion/1017/
2025-11-30 18:55:59,267 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - Obteniendo log de autenticaci√≥n ID 1017
2025-11-30 18:55:59,267 - app.modules.superadmin.application.services.superadmin_auditoria_service - INFO - [AUDIT] Obteniendo cliente_id del log 1017 desde BD ADMIN (centralizada)
2025-11-30 18:55:59,269 - app.modules.superadmin.application.services.superadmin_auditoria_service - WARNING - [AUDIT] Log 1017 no encontrado en BD ADMIN
2025-11-30 18:55:59,269 - app.modules.superadmin.presentation.endpoints_auditoria - ERROR - Error de negocio obteniendo log 1017: Log de autenticaci√≥n con ID 1017 no encontrado.
2025-11-30 18:55:59,270 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/superadmin/auditoria/autenticacion/1017/ 404 13.0ms
2025-11-30 18:58:11,434 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 18:58:11,434 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 18:58:11,434 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 18:58:11,434 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 18:58:11,435 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 18:58:11,435 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 18:58:12,403 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 18:58:12,404 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 18:58:12,404 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 18:58:12,406 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 18:58:12,406 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 18:58:12,406 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 18:58:12,742 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 18:58:12,742 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 18:58:12,820 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 18:58:12,820 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 18:58:12,821 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 18:58:13,097 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 18:58:13,097 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 18:58:13,263 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'admin', 'backend', 'cdn', 'assets', 'api', 'www', 'static'}
2025-11-30 19:09:48,164 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Pool ADMIN inicializado. Size=10, MaxOverflow=5
2025-11-30 19:09:48,164 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Configuraci√≥n de pools de tenants: MaxPools=50, PoolSize=3, MaxOverflow=2, InactivityTimeout=3600s
2025-11-30 19:09:48,165 - app.infrastructure.database.connection_pool - INFO - ‚úÖ M√≥dulo de connection pooling cargado y activo
2025-11-30 19:09:48,165 - app.infrastructure.database.connection_pool - INFO -    Configuraci√≥n: MaxTenantPools=50, TenantPoolSize=3, InactivityTimeout=3600s
2025-11-30 19:09:48,165 - app.infrastructure.database.connection_pool - INFO - [CONNECTION_POOL] Todos los pools cerrados
2025-11-30 19:09:48,165 - app.main - INFO - ‚úÖ Pools de conexi√≥n cerrados correctamente
2025-11-30 19:09:48,929 - app.core.tenant.context - INFO - M√≥dulo tenant_context cargado (versi√≥n h√≠brida)
2025-11-30 19:09:48,931 - app.core.security.encryption - INFO - EncryptionManager inicializado correctamente
2025-11-30 19:09:48,931 - app.core.security.encryption - INFO - M√≥dulo de encriptaci√≥n cargado correctamente
2025-11-30 19:09:48,932 - app.core.tenant.cache - INFO - ‚úÖ ConnectionMetadataCache inicializado (TTL: 300s)
2025-11-30 19:09:48,932 - app.core.tenant.cache - INFO - M√≥dulo connection_cache cargado. Cache global: ConnectionMetadataCache(size=0, ttl=300.0s)
2025-11-30 19:09:48,932 - app.core.tenant.routing - INFO - M√≥dulo multi_db cargado. SYSTEM_CLIENT_ID=1, DEFAULT_TYPE=single
2025-11-30 19:09:49,223 - app.core.security.rate_limiting - INFO - [RATE_LIMITING] Activado. L√≠mites: Login=10/minute, API=200/minute
2025-11-30 19:09:49,223 - app.core.security.rate_limiting - INFO - ‚úÖ M√≥dulo de rate limiting cargado y activo
2025-11-30 19:09:49,300 - app.core.authorization.rbac - INFO - üîê Inicializando sistema de autorizaci√≥n...
2025-11-30 19:09:49,300 - app.core.authorization.rbac - INFO - ‚úÖ Sistema de autorizaci√≥n inicializado correctamente
2025-11-30 19:09:49,300 - app.core.authorization.rbac - INFO - üìä Permisos del sistema: 6 m√≥dulos configurados
2025-11-30 19:09:49,495 - app.core.tenant.middleware - INFO - M√≥dulo tenant_middleware cargado (versi√≥n h√≠brida con soporte para proxies)
2025-11-30 19:09:49,496 - app.main - INFO - ‚úÖ Rate limiting configurado y activo
2025-11-30 19:09:49,599 - app.core.tenant.middleware - INFO - [TENANT_MW] Inicializado - BASE_DOMAIN=app.local, SYSTEM_ID=1, EXCLUDED_SUBDOMAINS={'www', 'assets', 'api', 'static', 'admin', 'cdn', 'backend'}
2025-11-30 19:09:53,501 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/refresh/
2025-11-30 19:09:53,502 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/refresh/ 200 0.9ms
2025-11-30 19:09:53,504 - app.main - INFO - [SYSTEM] 127.0.0.1 -> POST /api/v1/auth/refresh/
2025-11-30 19:09:53,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,505 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 19:09:53,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,505 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,506 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,506 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,506 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,506 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/refresh/
2025-11-30 19:09:53,585 - app.modules.auth.application.services.refresh_token_service - INFO - [VALIDATE-TOKEN] Token v√°lido - Cliente 1, Usuario 1, Tipo: web
2025-11-30 19:09:53,588 - app.core.auth - INFO - [REFRESH] Token validado exitosamente (BD OK) para usuario: superadmin (Cliente: 1, Level: 5, Type: super_admin)
2025-11-30 19:09:53,594 - app.core.auth - INFO - Niveles calculados - Usuario 1: level=5, super_admin=True, type=super_admin
2025-11-30 19:09:53,602 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 19:09:53,602 - app.modules.auth.application.services.refresh_token_service - INFO - [STORE-TOKEN] Token insertado exitosamente - Cliente 1, Usuario 1, Tipo: web, Token ID: 14435, Rotaci√≥n: True
2025-11-30 19:09:53,606 - app.infrastructure.database.queries - INFO - Actualizaci√≥n exitosa, filas afectadas: -1
2025-11-30 19:09:53,606 - app.modules.auth.application.services.refresh_token_service - WARNING - [REVOKE-TOKEN] Token no encontrado o ya revocado - Cliente 1, Usuario 1
2025-11-30 19:09:53,607 - app.modules.auth.presentation.endpoints - WARNING - [REFRESH] Token antiguo no encontrado para revocar (no cr√≠tico)
2025-11-30 19:09:53,607 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token rotado exitosamente - ID: 14435
2025-11-30 19:09:53,607 - app.modules.auth.presentation.endpoints - INFO - [REFRESH-WEB] Token refrescado exitosamente - Usuario: superadmin
2025-11-30 19:09:53,616 - app.infrastructure.database.queries - INFO - Inserci√≥n exitosa, filas afectadas: -1
2025-11-30 19:09:53,616 - app.modules.superadmin.application.services.audit_service - INFO - [AUDIT] auth_audit_log registrado: evento=token_refresh, cliente_id=1, usuario_id=1, exito=True
2025-11-30 19:09:53,618 - app.main - INFO - [SYSTEM] 127.0.0.1 <- POST /api/v1/auth/refresh/ 200 113.3ms
2025-11-30 19:09:53,622 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/auth/me/
2025-11-30 19:09:53,622 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/auth/me/ 200 0.5ms
2025-11-30 19:09:53,624 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/auth/me/
2025-11-30 19:09:53,624 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Host 'backend.app.local:8000' es localhost/infraestructura, buscando tenant real en origin/referer
2025-11-30 19:09:53,625 - app.core.tenant.middleware - INFO - [HOST_DETECTION] Desarrollo: Tenant extra√≠do de 'origin': platform.app.local:5173
2025-11-30 19:09:53,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Procesando host: 'platform.app.local'
2025-11-30 19:09:53,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] BASE_DOMAIN: 'app.local'
2025-11-30 19:09:53,625 - app.core.tenant.middleware - INFO - [SUBDOMAIN] Detectado: 'platform'
2025-11-30 19:09:53,626 - app.core.tenant.middleware - INFO - [TENANT] Subdominio SUPERADMIN: platform -> Cliente ID: 1
2025-11-30 19:09:53,626 - app.core.tenant.middleware - INFO - [TENANT] Metadata cargada: db_type=single, bd=bd_hybrid_sistema_central, servidor=N/A
2025-11-30 19:09:53,626 - app.core.tenant.middleware - INFO - [TENANT] CONTEXTO ESTABLECIDO: cliente_id=1, db_type=single, bd=bd_hybrid_sistema_central, path=/api/v1/auth/me/
2025-11-30 19:09:53,628 - app.modules.auth.presentation.endpoints - INFO - Solicitud /me/ recibida para usuario: superadmin
2025-11-30 19:09:53,628 - app.modules.auth.presentation.endpoints - INFO - [ME] Niveles desde token - Level: 5, Super Admin: True, Type: super_admin
2025-11-30 19:09:53,628 - app.modules.users.application.services.user_service - INFO - Obteniendo usuario completo ID 1 para cliente 1
2025-11-30 19:09:53,640 - app.modules.users.application.services.user_service - INFO - Usuario completo obtenido exitosamente: ID 1 con 1 roles activos
2025-11-30 19:09:53,640 - app.modules.auth.presentation.endpoints - INFO - [ME] Datos completos enviados - Usuario: superadmin, Type: super_admin, Level: 5, Super Admin: True, Roles: 1
2025-11-30 19:09:53,641 - app.main - INFO - [SYSTEM] 127.0.0.1 <- GET /api/v1/auth/me/ 200 17.4ms
2025-11-30 19:09:53,644 - app.main - INFO - [SYSTEM] 127.0.0.1 -> OPTIONS /api/v1/clientes/tenant/branding
2025-11-30 19:09:53,645 - app.main - INFO - [SYSTEM] 127.0.0.1 <- OPTIONS /api/v1/clientes/tenant/branding 200 0.4ms
2025-11-30 19:09:53,646 - app.main - INFO - [SYSTEM] 127.0.0.1 -> GET /api/v1/clientes/tenant/branding
